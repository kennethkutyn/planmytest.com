{"version":3,"file":"plugin-session-replay-browser-min.js","sources":["../../../../node_modules/tslib/tslib.es6.js","../../../analytics-core/lib/esm/types/event/event.js","../../../analytics-core/lib/esm/types/constants.js","../../../analytics-core/lib/esm/types/status.js","../../../analytics-core/lib/esm/global-scope.js","../../../analytics-core/lib/esm/types/loglevel.js","../../../analytics-core/lib/esm/utils/return-wrapper.js","../../../analytics-core/lib/esm/logger.js","../../../analytics-core/lib/esm/config.js","../../../../node_modules/@amplitude/analytics-connector/dist/analytics-connector.esm.js","../../../analytics-core/lib/esm/types/server-zone.js","../../../analytics-core/lib/esm/utils/debug.js","../../../analytics-core/lib/esm/transports/base.js","../../../analytics-core/lib/esm/transports/fetch.js","../../../session-replay-browser/lib/esm/constants.js","../../../session-replay-browser/lib/esm/logger.js","../../../session-replay-browser/lib/esm/config/types.js","../../../session-replay-browser/lib/esm/helpers.js","../../../analytics-remote-config/node_modules/@amplitude/analytics-types/lib/esm/server-zone.js","../../../analytics-remote-config/node_modules/@amplitude/analytics-types/lib/esm/status.js","../../../session-replay-browser/lib/esm/utils/get-input-type.js","../../../session-replay-browser/lib/esm/config/local-config.js","../../../../node_modules/@amplitude/rrweb-types/dist/rrweb-types.js","../../../analytics-remote-config/node_modules/@amplitude/analytics-core/lib/esm/transports/base.js","../../../analytics-remote-config/lib/esm/remote-config.js","../../../analytics-remote-config/lib/esm/index.js","../../../session-replay-browser/lib/esm/config/joined-config.js","../../../../node_modules/@amplitude/rrweb-packer/dist/base-BrE4jft0.js","../../../../node_modules/@amplitude/rrweb-packer/dist/pack.js","../../../session-replay-browser/lib/esm/events/event-compressor.js","../../../session-replay-browser/lib/esm/messages.js","../../../session-replay-browser/lib/esm/version.js","../../../session-replay-browser/lib/esm/track-destination.js","../../../../node_modules/idb/build/index.js","../../../session-replay-browser/lib/esm/events/base-events-store.js","../../../session-replay-browser/lib/esm/events/legacy-idb-types.js","../../../session-replay-browser/lib/esm/events/events-idb-store.js","../../../session-replay-browser/lib/esm/events/events-memory-store.js","../../../session-replay-browser/lib/esm/events/events-manager.js","../../../session-replay-browser/lib/esm/events/multi-manager.js","../../../../node_modules/@amplitude/rrweb-utils/dist/rrweb-utils.js","../../../session-replay-browser/lib/esm/utils/rrweb.js","../../../session-replay-browser/lib/esm/libs/finder.js","../../../session-replay-browser/lib/esm/hooks/click.js","../../../session-replay-browser/lib/esm/beacon-transport.js","../../../session-replay-browser/lib/esm/hooks/scroll.js","../../../session-replay-browser/lib/esm/identifiers.js","../../../session-replay-browser/lib/esm/targeting/targeting-idb-store.js","../../../session-replay-browser/lib/esm/targeting/targeting-manager.js","../../../session-replay-browser/lib/esm/plugins/url-tracking-plugin.js","../../../session-replay-browser/lib/esm/session-replay.js","../../../analytics-types/lib/esm/event.js","../../../analytics-core/lib/esm/analytics-connector.js","../../../session-replay-browser/lib/esm/session-replay-factory.js","../../../session-replay-browser/lib/esm/index.js","../../../../src/constants.ts","../../../../src/version.ts","../../../../src/session-replay.ts","../../../analytics-client-common/lib/esm/analytics-connector.js","../../../../src/helpers.ts","../../../../node_modules/@amplitude/experiment-core/dist/experiment-core.esm.js","../../../targeting/lib/esm/targeting-idb-store.js","../../../../node_modules/@amplitude/rrweb-plugin-console-record/dist/rrweb-plugin-console-record.js","../../../targeting/lib/esm/targeting.js","../../../targeting/lib/esm/index.js","../../../targeting/lib/esm/targeting-factory.js","../../../../node_modules/@amplitude/rrweb-record/dist/rrweb-record.js","../../../session-replay-browser/lib/esm/observers.js"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","export var IdentifyOperation;\n(function (IdentifyOperation) {\n    // Base Operations to set values\n    IdentifyOperation[\"SET\"] = \"$set\";\n    IdentifyOperation[\"SET_ONCE\"] = \"$setOnce\";\n    // Operations around modifying existing values\n    IdentifyOperation[\"ADD\"] = \"$add\";\n    IdentifyOperation[\"APPEND\"] = \"$append\";\n    IdentifyOperation[\"PREPEND\"] = \"$prepend\";\n    IdentifyOperation[\"REMOVE\"] = \"$remove\";\n    // Operations around appending values *if* they aren't present\n    IdentifyOperation[\"PREINSERT\"] = \"$preInsert\";\n    IdentifyOperation[\"POSTINSERT\"] = \"$postInsert\";\n    // Operations around removing properties/values\n    IdentifyOperation[\"UNSET\"] = \"$unset\";\n    IdentifyOperation[\"CLEAR_ALL\"] = \"$clearAll\";\n})(IdentifyOperation || (IdentifyOperation = {}));\n/**\n * Strings that have special meaning when used as an event's type\n * and have different specifications.\n */\nexport var SpecialEventType;\n(function (SpecialEventType) {\n    SpecialEventType[\"IDENTIFY\"] = \"$identify\";\n    SpecialEventType[\"GROUP_IDENTIFY\"] = \"$groupidentify\";\n    SpecialEventType[\"REVENUE\"] = \"revenue_amount\";\n})(SpecialEventType || (SpecialEventType = {}));\n//# sourceMappingURL=event.js.map","export var UNSET_VALUE = '-';\nexport var AMPLITUDE_PREFIX = 'AMP';\nexport var STORAGE_PREFIX = \"\".concat(AMPLITUDE_PREFIX, \"_unsent\");\nexport var DEFAULT_INSTANCE_NAME = '$default_instance';\nexport var AMPLITUDE_SERVER_URL = 'https://api2.amplitude.com/2/httpapi';\nexport var EU_AMPLITUDE_SERVER_URL = 'https://api.eu.amplitude.com/2/httpapi';\nexport var AMPLITUDE_BATCH_SERVER_URL = 'https://api2.amplitude.com/batch';\nexport var EU_AMPLITUDE_BATCH_SERVER_URL = 'https://api.eu.amplitude.com/batch';\n// Campaign constants\nexport var UTM_CAMPAIGN = 'utm_campaign';\nexport var UTM_CONTENT = 'utm_content';\nexport var UTM_ID = 'utm_id';\nexport var UTM_MEDIUM = 'utm_medium';\nexport var UTM_SOURCE = 'utm_source';\nexport var UTM_TERM = 'utm_term';\nexport var DCLID = 'dclid';\nexport var FBCLID = 'fbclid';\nexport var GBRAID = 'gbraid';\nexport var GCLID = 'gclid';\nexport var KO_CLICK_ID = 'ko_click_id';\nexport var LI_FAT_ID = 'li_fat_id';\nexport var MSCLKID = 'msclkid';\nexport var RDT_CID = 'rdt_cid';\nexport var TTCLID = 'ttclid';\nexport var TWCLID = 'twclid';\nexport var WBRAID = 'wbraid';\nexport var EMPTY_VALUE = 'EMPTY';\nexport var BASE_CAMPAIGN = {\n    utm_campaign: undefined,\n    utm_content: undefined,\n    utm_id: undefined,\n    utm_medium: undefined,\n    utm_source: undefined,\n    utm_term: undefined,\n    referrer: undefined,\n    referring_domain: undefined,\n    dclid: undefined,\n    gbraid: undefined,\n    gclid: undefined,\n    fbclid: undefined,\n    ko_click_id: undefined,\n    li_fat_id: undefined,\n    msclkid: undefined,\n    rdt_cid: undefined,\n    ttclid: undefined,\n    twclid: undefined,\n    wbraid: undefined,\n};\nexport var MKTG = 'MKTG';\n// list of Network headers that are safe to capture\nexport var SAFE_HEADERS = [\n    'access-control-allow-origin',\n    'access-control-allow-credentials',\n    'access-control-expose-headers',\n    'access-control-max-age',\n    'access-control-allow-methods',\n    'access-control-allow-headers',\n    'accept-patch',\n    'accept-ranges',\n    'age',\n    'allow',\n    'alt-svc',\n    'cache-control',\n    'connection',\n    'content-disposition',\n    'content-encoding',\n    'content-language',\n    'content-length',\n    'content-location',\n    'content-md5',\n    'content-range',\n    'content-type',\n    'date',\n    'delta-base',\n    'etag',\n    'expires',\n    'im',\n    'last-modified',\n    'link',\n    'location',\n    'permanent',\n    'p3p',\n    'pragma',\n    'proxy-authenticate',\n    'public-key-pins',\n    'retry-after',\n    'server',\n    'status',\n    'strict-transport-security',\n    'trailer',\n    'transfer-encoding',\n    'tk',\n    'upgrade',\n    'vary',\n    'via',\n    'warning',\n    'www-authenticate',\n    'x-b3-traceid',\n    'x-frame-options',\n];\n// list of Network headers to never capture\nexport var FORBIDDEN_HEADERS = ['authorization', 'cookie', 'set-cookie'];\n//# sourceMappingURL=constants.js.map","/** The status of an event. */\nexport var Status;\n(function (Status) {\n    /** The status could not be determined. */\n    Status[\"Unknown\"] = \"unknown\";\n    /** The event was skipped due to configuration or callbacks. */\n    Status[\"Skipped\"] = \"skipped\";\n    /** The event was sent successfully. */\n    Status[\"Success\"] = \"success\";\n    /** A user or device in the payload is currently rate limited and should try again later. */\n    Status[\"RateLimit\"] = \"rate_limit\";\n    /** The sent payload was too large to be processed. */\n    Status[\"PayloadTooLarge\"] = \"payload_too_large\";\n    /** The event could not be processed. */\n    Status[\"Invalid\"] = \"invalid\";\n    /** A server-side error ocurred during submission. */\n    Status[\"Failed\"] = \"failed\";\n    /** a server or client side error occuring when a request takes too long and is cancelled */\n    Status[\"Timeout\"] = \"Timeout\";\n    /** NodeJS runtime environment error.. E.g. disconnected from network */\n    Status[\"SystemError\"] = \"SystemError\";\n})(Status || (Status = {}));\n//# sourceMappingURL=status.js.map","/* eslint-disable no-restricted-globals */\n/* Only file allowed to access to globalThis, window, self */\nexport var getGlobalScope = function () {\n    // This should only be used for integrations with Amplitude that are not running in a browser environment\n    //   We need to specify the name of the global variable as a string to prevent it from being minified\n    var ampIntegrationContextName = 'ampIntegrationContext';\n    if (typeof globalThis !== 'undefined' && typeof globalThis[ampIntegrationContextName] !== 'undefined') {\n        return globalThis[ampIntegrationContextName];\n    }\n    if (typeof globalThis !== 'undefined') {\n        return globalThis;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    return undefined;\n};\n//# sourceMappingURL=global-scope.js.map","export var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"None\"] = 0] = \"None\";\n    LogLevel[LogLevel[\"Error\"] = 1] = \"Error\";\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\n    LogLevel[LogLevel[\"Verbose\"] = 3] = \"Verbose\";\n    LogLevel[LogLevel[\"Debug\"] = 4] = \"Debug\";\n})(LogLevel || (LogLevel = {}));\n//# sourceMappingURL=loglevel.js.map","export var returnWrapper = function (awaitable) { return ({\n    promise: awaitable || Promise.resolve(),\n}); };\n//# sourceMappingURL=return-wrapper.js.map","import { LogLevel } from './types/loglevel';\nvar PREFIX = 'Amplitude Logger ';\nvar Logger = /** @class */ (function () {\n    function Logger() {\n        this.logLevel = LogLevel.None;\n    }\n    Logger.prototype.disable = function () {\n        this.logLevel = LogLevel.None;\n    };\n    Logger.prototype.enable = function (logLevel) {\n        if (logLevel === void 0) { logLevel = LogLevel.Warn; }\n        this.logLevel = logLevel;\n    };\n    Logger.prototype.log = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Verbose) {\n            return;\n        }\n        console.log(\"\".concat(PREFIX, \"[Log]: \").concat(args.join(' ')));\n    };\n    Logger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Warn) {\n            return;\n        }\n        console.warn(\"\".concat(PREFIX, \"[Warn]: \").concat(args.join(' ')));\n    };\n    Logger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Error) {\n            return;\n        }\n        console.error(\"\".concat(PREFIX, \"[Error]: \").concat(args.join(' ')));\n    };\n    Logger.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Debug) {\n            return;\n        }\n        // console.debug output is hidden by default in chrome\n        console.log(\"\".concat(PREFIX, \"[Debug]: \").concat(args.join(' ')));\n    };\n    return Logger;\n}());\nexport { Logger };\n//# sourceMappingURL=logger.js.map","import { AMPLITUDE_SERVER_URL, AMPLITUDE_BATCH_SERVER_URL, EU_AMPLITUDE_SERVER_URL, EU_AMPLITUDE_BATCH_SERVER_URL, DEFAULT_INSTANCE_NAME, } from './types/constants';\nimport { Logger } from './logger';\nimport { LogLevel } from './types/loglevel';\nexport var getDefaultConfig = function () { return ({\n    flushMaxRetries: 12,\n    flushQueueSize: 200,\n    flushIntervalMillis: 10000,\n    instanceName: DEFAULT_INSTANCE_NAME,\n    logLevel: LogLevel.Warn,\n    loggerProvider: new Logger(),\n    offline: false,\n    optOut: false,\n    serverUrl: AMPLITUDE_SERVER_URL,\n    serverZone: 'US',\n    useBatch: false,\n}); };\nvar Config = /** @class */ (function () {\n    function Config(options) {\n        var _a, _b, _c, _d;\n        this._optOut = false;\n        var defaultConfig = getDefaultConfig();\n        this.apiKey = options.apiKey;\n        this.flushIntervalMillis = (_a = options.flushIntervalMillis) !== null && _a !== void 0 ? _a : defaultConfig.flushIntervalMillis;\n        this.flushMaxRetries = options.flushMaxRetries || defaultConfig.flushMaxRetries;\n        this.flushQueueSize = options.flushQueueSize || defaultConfig.flushQueueSize;\n        this.instanceName = options.instanceName || defaultConfig.instanceName;\n        this.loggerProvider = options.loggerProvider || defaultConfig.loggerProvider;\n        this.logLevel = (_b = options.logLevel) !== null && _b !== void 0 ? _b : defaultConfig.logLevel;\n        this.minIdLength = options.minIdLength;\n        this.plan = options.plan;\n        this.ingestionMetadata = options.ingestionMetadata;\n        this.offline = options.offline !== undefined ? options.offline : defaultConfig.offline;\n        this.optOut = (_c = options.optOut) !== null && _c !== void 0 ? _c : defaultConfig.optOut;\n        this.serverUrl = options.serverUrl;\n        this.serverZone = options.serverZone || defaultConfig.serverZone;\n        this.storageProvider = options.storageProvider;\n        this.transportProvider = options.transportProvider;\n        this.useBatch = (_d = options.useBatch) !== null && _d !== void 0 ? _d : defaultConfig.useBatch;\n        this.loggerProvider.enable(this.logLevel);\n        var serverConfig = createServerConfig(options.serverUrl, options.serverZone, options.useBatch);\n        this.serverZone = serverConfig.serverZone;\n        this.serverUrl = serverConfig.serverUrl;\n    }\n    Object.defineProperty(Config.prototype, \"optOut\", {\n        get: function () {\n            return this._optOut;\n        },\n        set: function (optOut) {\n            this._optOut = optOut;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Config;\n}());\nexport { Config };\nexport var getServerUrl = function (serverZone, useBatch) {\n    if (serverZone === 'EU') {\n        return useBatch ? EU_AMPLITUDE_BATCH_SERVER_URL : EU_AMPLITUDE_SERVER_URL;\n    }\n    return useBatch ? AMPLITUDE_BATCH_SERVER_URL : AMPLITUDE_SERVER_URL;\n};\nexport var createServerConfig = function (serverUrl, serverZone, useBatch) {\n    if (serverUrl === void 0) { serverUrl = ''; }\n    if (serverZone === void 0) { serverZone = getDefaultConfig().serverZone; }\n    if (useBatch === void 0) { useBatch = getDefaultConfig().useBatch; }\n    if (serverUrl) {\n        return { serverUrl: serverUrl, serverZone: undefined };\n    }\n    var _serverZone = ['US', 'EU'].includes(serverZone) ? serverZone : getDefaultConfig().serverZone;\n    return {\n        serverZone: _serverZone,\n        serverUrl: getServerUrl(_serverZone, useBatch),\n    };\n};\nvar RequestMetadata = /** @class */ (function () {\n    function RequestMetadata() {\n        this.sdk = {\n            metrics: {\n                histogram: {},\n            },\n        };\n    }\n    RequestMetadata.prototype.recordHistogram = function (key, value) {\n        this.sdk.metrics.histogram[key] = value;\n    };\n    return RequestMetadata;\n}());\nexport { RequestMetadata };\nvar HistogramOptions = /** @class */ (function () {\n    function HistogramOptions() {\n    }\n    return HistogramOptions;\n}());\n//# sourceMappingURL=config.js.map","var ApplicationContextProviderImpl = /** @class */ (function () {\n    function ApplicationContextProviderImpl() {\n    }\n    ApplicationContextProviderImpl.prototype.getApplicationContext = function () {\n        return {\n            versionName: this.versionName,\n            language: getLanguage(),\n            platform: 'Web',\n            os: undefined,\n            deviceModel: undefined,\n        };\n    };\n    return ApplicationContextProviderImpl;\n}());\nvar getLanguage = function () {\n    return ((typeof navigator !== 'undefined' &&\n        ((navigator.languages && navigator.languages[0]) ||\n            navigator.language)) ||\n        '');\n};\n\nvar EventBridgeImpl = /** @class */ (function () {\n    function EventBridgeImpl() {\n        this.queue = [];\n    }\n    EventBridgeImpl.prototype.logEvent = function (event) {\n        if (!this.receiver) {\n            if (this.queue.length < 512) {\n                this.queue.push(event);\n            }\n        }\n        else {\n            this.receiver(event);\n        }\n    };\n    EventBridgeImpl.prototype.setEventReceiver = function (receiver) {\n        this.receiver = receiver;\n        if (this.queue.length > 0) {\n            this.queue.forEach(function (event) {\n                receiver(event);\n            });\n            this.queue = [];\n        }\n    };\n    return EventBridgeImpl;\n}());\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvar isEqual = function (obj1, obj2) {\n    var e_1, _a;\n    var primitive = ['string', 'number', 'boolean', 'undefined'];\n    var typeA = typeof obj1;\n    var typeB = typeof obj2;\n    if (typeA !== typeB) {\n        return false;\n    }\n    try {\n        for (var primitive_1 = __values(primitive), primitive_1_1 = primitive_1.next(); !primitive_1_1.done; primitive_1_1 = primitive_1.next()) {\n            var p = primitive_1_1.value;\n            if (p === typeA) {\n                return obj1 === obj2;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (primitive_1_1 && !primitive_1_1.done && (_a = primitive_1.return)) _a.call(primitive_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    // check null\n    if (obj1 == null && obj2 == null) {\n        return true;\n    }\n    else if (obj1 == null || obj2 == null) {\n        return false;\n    }\n    // if got here - objects\n    if (obj1.length !== obj2.length) {\n        return false;\n    }\n    //check if arrays\n    var isArrayA = Array.isArray(obj1);\n    var isArrayB = Array.isArray(obj2);\n    if (isArrayA !== isArrayB) {\n        return false;\n    }\n    if (isArrayA && isArrayB) {\n        //arrays\n        for (var i = 0; i < obj1.length; i++) {\n            if (!isEqual(obj1[i], obj2[i])) {\n                return false;\n            }\n        }\n    }\n    else {\n        //objects\n        var sorted1 = Object.keys(obj1).sort();\n        var sorted2 = Object.keys(obj2).sort();\n        if (!isEqual(sorted1, sorted2)) {\n            return false;\n        }\n        //compare object values\n        var result_1 = true;\n        Object.keys(obj1).forEach(function (key) {\n            if (!isEqual(obj1[key], obj2[key])) {\n                result_1 = false;\n            }\n        });\n        return result_1;\n    }\n    return true;\n};\n\nvar ID_OP_SET = '$set';\nvar ID_OP_UNSET = '$unset';\nvar ID_OP_CLEAR_ALL = '$clearAll';\n// Polyfill for Object.entries\nif (!Object.entries) {\n    Object.entries = function (obj) {\n        var ownProps = Object.keys(obj);\n        var i = ownProps.length;\n        var resArray = new Array(i);\n        while (i--) {\n            resArray[i] = [ownProps[i], obj[ownProps[i]]];\n        }\n        return resArray;\n    };\n}\nvar IdentityStoreImpl = /** @class */ (function () {\n    function IdentityStoreImpl() {\n        this.identity = { userProperties: {} };\n        this.listeners = new Set();\n    }\n    IdentityStoreImpl.prototype.editIdentity = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        var actingUserProperties = __assign({}, this.identity.userProperties);\n        var actingIdentity = __assign(__assign({}, this.identity), { userProperties: actingUserProperties });\n        return {\n            setUserId: function (userId) {\n                actingIdentity.userId = userId;\n                return this;\n            },\n            setDeviceId: function (deviceId) {\n                actingIdentity.deviceId = deviceId;\n                return this;\n            },\n            setUserProperties: function (userProperties) {\n                actingIdentity.userProperties = userProperties;\n                return this;\n            },\n            setOptOut: function (optOut) {\n                actingIdentity.optOut = optOut;\n                return this;\n            },\n            updateUserProperties: function (actions) {\n                var e_1, _a, e_2, _b, e_3, _c;\n                var actingProperties = actingIdentity.userProperties || {};\n                try {\n                    for (var _d = __values(Object.entries(actions)), _e = _d.next(); !_e.done; _e = _d.next()) {\n                        var _f = __read(_e.value, 2), action = _f[0], properties = _f[1];\n                        switch (action) {\n                            case ID_OP_SET:\n                                try {\n                                    for (var _g = (e_2 = void 0, __values(Object.entries(properties))), _h = _g.next(); !_h.done; _h = _g.next()) {\n                                        var _j = __read(_h.value, 2), key = _j[0], value = _j[1];\n                                        actingProperties[key] = value;\n                                    }\n                                }\n                                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                                finally {\n                                    try {\n                                        if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n                                    }\n                                    finally { if (e_2) throw e_2.error; }\n                                }\n                                break;\n                            case ID_OP_UNSET:\n                                try {\n                                    for (var _k = (e_3 = void 0, __values(Object.keys(properties))), _l = _k.next(); !_l.done; _l = _k.next()) {\n                                        var key = _l.value;\n                                        delete actingProperties[key];\n                                    }\n                                }\n                                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                                finally {\n                                    try {\n                                        if (_l && !_l.done && (_c = _k.return)) _c.call(_k);\n                                    }\n                                    finally { if (e_3) throw e_3.error; }\n                                }\n                                break;\n                            case ID_OP_CLEAR_ALL:\n                                actingProperties = {};\n                                break;\n                        }\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                actingIdentity.userProperties = actingProperties;\n                return this;\n            },\n            commit: function () {\n                self.setIdentity(actingIdentity);\n                return this;\n            },\n        };\n    };\n    IdentityStoreImpl.prototype.getIdentity = function () {\n        return __assign({}, this.identity);\n    };\n    IdentityStoreImpl.prototype.setIdentity = function (identity) {\n        var originalIdentity = __assign({}, this.identity);\n        this.identity = __assign({}, identity);\n        if (!isEqual(originalIdentity, this.identity)) {\n            this.listeners.forEach(function (listener) {\n                listener(identity);\n            });\n        }\n    };\n    IdentityStoreImpl.prototype.addIdentityListener = function (listener) {\n        this.listeners.add(listener);\n    };\n    IdentityStoreImpl.prototype.removeIdentityListener = function (listener) {\n        this.listeners.delete(listener);\n    };\n    return IdentityStoreImpl;\n}());\n\nvar safeGlobal = typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof global !== 'undefined'\n        ? global\n        : self;\n\nvar AnalyticsConnector = /** @class */ (function () {\n    function AnalyticsConnector() {\n        this.identityStore = new IdentityStoreImpl();\n        this.eventBridge = new EventBridgeImpl();\n        this.applicationContextProvider = new ApplicationContextProviderImpl();\n    }\n    AnalyticsConnector.getInstance = function (instanceName) {\n        if (!safeGlobal['analyticsConnectorInstances']) {\n            safeGlobal['analyticsConnectorInstances'] = {};\n        }\n        if (!safeGlobal['analyticsConnectorInstances'][instanceName]) {\n            safeGlobal['analyticsConnectorInstances'][instanceName] =\n                new AnalyticsConnector();\n        }\n        return safeGlobal['analyticsConnectorInstances'][instanceName];\n    };\n    return AnalyticsConnector;\n}());\n\nexport { AnalyticsConnector };\n","/**\n * @deprecated use ServerZoneType instead\n */\nexport var ServerZone;\n(function (ServerZone) {\n    ServerZone[\"US\"] = \"US\";\n    ServerZone[\"EU\"] = \"EU\";\n    /**\n     * Add for session-replay-browser migration from analytics-type v1.x.\n     */\n    ServerZone[\"STAGING\"] = \"STAGING\";\n})(ServerZone || (ServerZone = {}));\n//# sourceMappingURL=server-zone.js.map","import { __assign, __values } from \"tslib\";\nimport { LogLevel } from '../types/loglevel';\nexport var getStacktrace = function (ignoreDepth) {\n    if (ignoreDepth === void 0) { ignoreDepth = 0; }\n    var trace = new Error().stack || '';\n    return trace\n        .split('\\n')\n        .slice(2 + ignoreDepth)\n        .map(function (text) { return text.trim(); });\n};\n// This hook makes sure we always get the latest logger and logLevel.\nexport var getClientLogConfig = function (client) { return function () {\n    var _a = __assign({}, client.config), logger = _a.loggerProvider, logLevel = _a.logLevel;\n    return {\n        logger: logger,\n        logLevel: logLevel,\n    };\n}; };\n// This is a convenient function to get the attribute from object with string path, similar to lodash '#get'.\nexport var getValueByStringPath = function (obj, path) {\n    var e_1, _a;\n    path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties\n    path = path.replace(/^\\./, ''); // strip a leading dot\n    try {\n        for (var _b = __values(path.split('.')), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var attr = _c.value;\n            if (attr in obj) {\n                obj = obj[attr];\n            }\n            else {\n                return;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return obj;\n};\nexport var getClientStates = function (client, paths) { return function () {\n    var e_2, _a;\n    var res = {};\n    try {\n        for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n            var path = paths_1_1.value;\n            res[path] = getValueByStringPath(client, path);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return res;\n}; };\nexport var debugWrapper = function (fn, fnName, getLogConfig, getStates, fnContext) {\n    if (fnContext === void 0) { fnContext = null; }\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var _a = getLogConfig(), logger = _a.logger, logLevel = _a.logLevel;\n        // return early if possible to reduce overhead\n        if ((logLevel && logLevel < LogLevel.Debug) || !logLevel || !logger) {\n            return fn.apply(fnContext, args);\n        }\n        var debugContext = {\n            type: 'invoke public method',\n            name: fnName,\n            args: args,\n            stacktrace: getStacktrace(1),\n            time: {\n                start: new Date().toISOString(),\n            },\n            states: {},\n        };\n        if (getStates && debugContext.states) {\n            debugContext.states.before = getStates();\n        }\n        var result = fn.apply(fnContext, args);\n        if (result && result.promise) {\n            // if result is a promise, add the callback\n            result.promise.then(function () {\n                if (getStates && debugContext.states) {\n                    debugContext.states.after = getStates();\n                }\n                if (debugContext.time) {\n                    debugContext.time.end = new Date().toISOString();\n                }\n                logger.debug(JSON.stringify(debugContext, null, 2));\n            });\n        }\n        else {\n            if (getStates && debugContext.states) {\n                debugContext.states.after = getStates();\n            }\n            if (debugContext.time) {\n                debugContext.time.end = new Date().toISOString();\n            }\n            logger.debug(JSON.stringify(debugContext, null, 2));\n        }\n        return result;\n    };\n};\n//# sourceMappingURL=debug.js.map","import { Status } from '../types/status';\nvar BaseTransport = /** @class */ (function () {\n    function BaseTransport() {\n    }\n    BaseTransport.prototype.send = function (_serverUrl, _payload) {\n        return Promise.resolve(null);\n    };\n    BaseTransport.prototype.buildResponse = function (responseJSON) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x;\n        if (typeof responseJSON !== 'object') {\n            return null;\n        }\n        var statusCode = responseJSON.code || 0;\n        var status = this.buildStatus(statusCode);\n        switch (status) {\n            case Status.Success:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        eventsIngested: (_a = responseJSON.events_ingested) !== null && _a !== void 0 ? _a : 0,\n                        payloadSizeBytes: (_b = responseJSON.payload_size_bytes) !== null && _b !== void 0 ? _b : 0,\n                        serverUploadTime: (_c = responseJSON.server_upload_time) !== null && _c !== void 0 ? _c : 0,\n                    },\n                };\n            case Status.Invalid:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_d = responseJSON.error) !== null && _d !== void 0 ? _d : '',\n                        missingField: (_e = responseJSON.missing_field) !== null && _e !== void 0 ? _e : '',\n                        eventsWithInvalidFields: (_f = responseJSON.events_with_invalid_fields) !== null && _f !== void 0 ? _f : {},\n                        eventsWithMissingFields: (_g = responseJSON.events_with_missing_fields) !== null && _g !== void 0 ? _g : {},\n                        eventsWithInvalidIdLengths: (_h = responseJSON.events_with_invalid_id_lengths) !== null && _h !== void 0 ? _h : {},\n                        epsThreshold: (_j = responseJSON.eps_threshold) !== null && _j !== void 0 ? _j : 0,\n                        exceededDailyQuotaDevices: (_k = responseJSON.exceeded_daily_quota_devices) !== null && _k !== void 0 ? _k : {},\n                        silencedDevices: (_l = responseJSON.silenced_devices) !== null && _l !== void 0 ? _l : [],\n                        silencedEvents: (_m = responseJSON.silenced_events) !== null && _m !== void 0 ? _m : [],\n                        throttledDevices: (_o = responseJSON.throttled_devices) !== null && _o !== void 0 ? _o : {},\n                        throttledEvents: (_p = responseJSON.throttled_events) !== null && _p !== void 0 ? _p : [],\n                    },\n                };\n            case Status.PayloadTooLarge:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_q = responseJSON.error) !== null && _q !== void 0 ? _q : '',\n                    },\n                };\n            case Status.RateLimit:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_r = responseJSON.error) !== null && _r !== void 0 ? _r : '',\n                        epsThreshold: (_s = responseJSON.eps_threshold) !== null && _s !== void 0 ? _s : 0,\n                        throttledDevices: (_t = responseJSON.throttled_devices) !== null && _t !== void 0 ? _t : {},\n                        throttledUsers: (_u = responseJSON.throttled_users) !== null && _u !== void 0 ? _u : {},\n                        exceededDailyQuotaDevices: (_v = responseJSON.exceeded_daily_quota_devices) !== null && _v !== void 0 ? _v : {},\n                        exceededDailyQuotaUsers: (_w = responseJSON.exceeded_daily_quota_users) !== null && _w !== void 0 ? _w : {},\n                        throttledEvents: (_x = responseJSON.throttled_events) !== null && _x !== void 0 ? _x : [],\n                    },\n                };\n            case Status.Timeout:\n            default:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                };\n        }\n    };\n    BaseTransport.prototype.buildStatus = function (code) {\n        if (code >= 200 && code < 300) {\n            return Status.Success;\n        }\n        if (code === 429) {\n            return Status.RateLimit;\n        }\n        if (code === 413) {\n            return Status.PayloadTooLarge;\n        }\n        if (code === 408) {\n            return Status.Timeout;\n        }\n        if (code >= 400 && code < 500) {\n            return Status.Invalid;\n        }\n        if (code >= 500) {\n            return Status.Failed;\n        }\n        return Status.Unknown;\n    };\n    return BaseTransport;\n}());\nexport { BaseTransport };\n//# sourceMappingURL=base.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { BaseTransport } from './base';\nvar FetchTransport = /** @class */ (function (_super) {\n    __extends(FetchTransport, _super);\n    function FetchTransport() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FetchTransport.prototype.send = function (serverUrl, payload) {\n        return __awaiter(this, void 0, void 0, function () {\n            var options, response, responseText;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        /* istanbul ignore if */\n                        if (typeof fetch === 'undefined') {\n                            throw new Error('FetchTransport is not supported');\n                        }\n                        options = {\n                            headers: {\n                                'Content-Type': 'application/json',\n                                Accept: '*/*',\n                            },\n                            body: JSON.stringify(payload),\n                            method: 'POST',\n                        };\n                        return [4 /*yield*/, fetch(serverUrl, options)];\n                    case 1:\n                        response = _a.sent();\n                        return [4 /*yield*/, response.text()];\n                    case 2:\n                        responseText = _a.sent();\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                            return [2 /*return*/, this.buildResponse(JSON.parse(responseText))];\n                        }\n                        catch (_b) {\n                            return [2 /*return*/, this.buildResponse({ code: response.status })];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return FetchTransport;\n}(BaseTransport));\nexport { FetchTransport };\n//# sourceMappingURL=fetch.js.map","import { AMPLITUDE_PREFIX, ServerZone } from '@amplitude/analytics-core';\nexport var DEFAULT_EVENT_PROPERTY_PREFIX = '[Amplitude]';\nexport var DEFAULT_SESSION_REPLAY_PROPERTY = \"\".concat(DEFAULT_EVENT_PROPERTY_PREFIX, \" Session Replay ID\");\nexport var DEFAULT_SESSION_START_EVENT = 'session_start';\nexport var DEFAULT_SESSION_END_EVENT = 'session_end';\nexport var DEFAULT_SAMPLE_RATE = 0;\nexport var DEFAULT_SERVER_ZONE = ServerZone.US;\nexport var DEFAULT_PERFORMANCE_CONFIG = { enabled: true };\nexport var DEFAULT_URL_CHANGE_POLLING_INTERVAL = 1000;\nexport var SESSION_REPLAY_DEBUG_PROPERTY = \"\".concat(DEFAULT_EVENT_PROPERTY_PREFIX, \" Session Replay Debug\");\nexport var BLOCK_CLASS = 'amp-block';\nexport var MASK_TEXT_CLASS = 'amp-mask';\nexport var UNMASK_TEXT_CLASS = 'amp-unmask';\nexport var SESSION_REPLAY_SERVER_URL = 'https://api-sr.amplitude.com/sessions/v2/track';\nexport var SESSION_REPLAY_EU_URL = 'https://api-sr.eu.amplitude.com/sessions/v2/track';\nexport var SESSION_REPLAY_STAGING_URL = 'https://api-sr.stag2.amplitude.com/sessions/v2/track';\nexport var STORAGE_PREFIX = \"\".concat(AMPLITUDE_PREFIX, \"_replay_unsent\");\nexport var MAX_EVENT_LIST_SIZE = 1 * 1000000; // ~1 MB limit for JSON serialized events payload\nexport var INTERACTION_MIN_INTERVAL = 30000; // 30 seconds\nexport var INTERACTION_MAX_INTERVAL = 60000; // 1 minute\nexport var MIN_INTERVAL = 500; // 500 ms\nexport var MAX_INTERVAL = 10 * 1000; // 10 seconds\nexport var MAX_IDB_STORAGE_LENGTH = 1000 * 60 * 60 * 24 * 3; // 3 days\nexport var KB_SIZE = 1024;\nexport var MAX_URL_LENGTH = 1000;\nexport var CustomRRwebEvent;\n(function (CustomRRwebEvent) {\n    CustomRRwebEvent[\"GET_SR_PROPS\"] = \"get-sr-props\";\n    CustomRRwebEvent[\"DEBUG_INFO\"] = \"debug-info\";\n    CustomRRwebEvent[\"FETCH_REQUEST\"] = \"fetch-request\";\n    CustomRRwebEvent[\"METADATA\"] = \"metadata\";\n    CustomRRwebEvent[\"TARGETING_DECISION\"] = \"targeting-decision\";\n})(CustomRRwebEvent || (CustomRRwebEvent = {}));\n//# sourceMappingURL=constants.js.map","var SafeLoggerProvider = /** @class */ (function () {\n    function SafeLoggerProvider(loggerProvider) {\n        this.logger = loggerProvider;\n        this.log = this.getSafeMethod('log');\n        this.warn = this.getSafeMethod('warn');\n        this.error = this.getSafeMethod('error');\n        this.debug = this.getSafeMethod('debug');\n    }\n    SafeLoggerProvider.prototype.getSafeMethod = function (method) {\n        var _a;\n        if (!this.logger) {\n            return (function () {\n                // No-op function fallback\n            });\n        }\n        var fn = this.logger[method];\n        if (typeof fn === 'function') {\n            var originalFn = (_a = fn.__rrweb_original__) !== null && _a !== void 0 ? _a : fn;\n            return originalFn.bind(this.logger);\n        }\n        return (function () {\n            // No-op function fallback\n        });\n    };\n    SafeLoggerProvider.prototype.enable = function (logLevel) {\n        this.logger.enable(logLevel);\n    };\n    SafeLoggerProvider.prototype.disable = function () {\n        this.logger.disable();\n    };\n    return SafeLoggerProvider;\n}());\nexport { SafeLoggerProvider };\n//# sourceMappingURL=logger.js.map","export var DEFAULT_MASK_LEVEL = 'medium';\n//# sourceMappingURL=types.js.map","import { __assign, __awaiter, __generator, __values } from \"tslib\";\nimport { getGlobalScope, ServerZone } from '@amplitude/analytics-core';\nimport { DEFAULT_MASK_LEVEL } from './config/types';\nimport { KB_SIZE, MASK_TEXT_CLASS, SESSION_REPLAY_EU_URL, SESSION_REPLAY_SERVER_URL, SESSION_REPLAY_STAGING_URL, UNMASK_TEXT_CLASS, } from './constants';\nimport { getInputType } from './utils/get-input-type';\n/**\n * Light: Subset of inputs\n * Medium: All inputs\n * Conservative: All inputs and all texts\n */\nvar isMaskedForLevel = function (elementType, level, element) {\n    switch (level) {\n        case 'light': {\n            if (elementType !== 'input') {\n                return true;\n            }\n            var inputType = element ? getInputType(element) : '';\n            /* istanbul ignore if */ // TODO(lew): For some reason it's impossible to test this.\n            if (!inputType) {\n                return false;\n            }\n            if (['password', 'hidden', 'email', 'tel'].includes(inputType)) {\n                return true;\n            }\n            if (element.autocomplete.startsWith('cc-')) {\n                return true;\n            }\n            return false;\n        }\n        case 'medium':\n        case 'conservative':\n            return true;\n        default:\n            return isMaskedForLevel(elementType, DEFAULT_MASK_LEVEL, element);\n    }\n};\n/**\n * Checks if the given element set to be masked by rrweb\n *\n * Priority is:\n *  1. [In code] Element/class based masking/unmasking <> [Config based] Selector based masking/unmasking\n *  2. Use app defaults\n */\nvar isMasked = function (elementType, config, element) {\n    var _a, _b, _c;\n    if (config === void 0) { config = { defaultMaskLevel: DEFAULT_MASK_LEVEL }; }\n    if (element) {\n        // Element or parent is explicitly instrumented in code to mask\n        if (element.closest('.' + MASK_TEXT_CLASS)) {\n            return true;\n        }\n        // Config has override for mask\n        var shouldMask = ((_a = config.maskSelector) !== null && _a !== void 0 ? _a : []).some(function (selector) { return element.closest(selector); });\n        if (shouldMask) {\n            return true;\n        }\n        // Code or config has override to unmask\n        if (element.closest('.' + UNMASK_TEXT_CLASS)) {\n            return false;\n        }\n        // Here we are probably sent an element, but we want to match if they have a\n        // parent with an unmask selector.\n        var shouldUnmask = ((_b = config.unmaskSelector) !== null && _b !== void 0 ? _b : []).some(function (selector) { return element.closest(selector); });\n        if (shouldUnmask) {\n            return false;\n        }\n    }\n    return isMaskedForLevel(elementType, (_c = config.defaultMaskLevel) !== null && _c !== void 0 ? _c : DEFAULT_MASK_LEVEL, element);\n};\nexport var maskFn = function (elementType, config) {\n    return function (text, element) {\n        return isMasked(elementType, config, element) ? text.replace(/[^\\s]/g, '*') : text;\n    };\n};\nexport var generateHashCode = function (str) {\n    var hash = 0;\n    if (str.length === 0)\n        return hash;\n    for (var i = 0; i < str.length; i++) {\n        var chr = str.charCodeAt(i);\n        hash = (hash << 5) - hash + chr;\n        hash |= 0;\n    }\n    return hash;\n};\nexport var isSessionInSample = function (sessionId, sampleRate) {\n    var hashNumber = generateHashCode(sessionId.toString());\n    var absHash = Math.abs(hashNumber);\n    var absHashMultiply = absHash * 31;\n    var mod = absHashMultiply % 1000000;\n    return mod / 1000000 < sampleRate;\n};\nexport var getCurrentUrl = function () {\n    var globalScope = getGlobalScope();\n    return (globalScope === null || globalScope === void 0 ? void 0 : globalScope.location) ? globalScope.location.href : '';\n};\nexport var generateSessionReplayId = function (sessionId, deviceId) {\n    return \"\".concat(deviceId, \"/\").concat(sessionId);\n};\nexport var getServerUrl = function (serverZone, trackServerUrl) {\n    if (trackServerUrl) {\n        return trackServerUrl;\n    }\n    if (serverZone === ServerZone.STAGING) {\n        return SESSION_REPLAY_STAGING_URL;\n    }\n    if (serverZone === ServerZone.EU) {\n        return SESSION_REPLAY_EU_URL;\n    }\n    return SESSION_REPLAY_SERVER_URL;\n};\nvar isValidGlobUrl = function (globUrl) {\n    if (typeof globUrl !== 'string' || globUrl.trim() === '')\n        return false;\n    var urlPattern = /^\\/|^https?:\\/\\/[^\\s]+$/;\n    if (!urlPattern.test(globUrl))\n        return false;\n    return true;\n};\nvar globToRegex = function (glob) {\n    // Escape special regex characters, then convert globs\n    var escaped = glob\n        .replace(/[.+^${}()|[\\]\\\\]/g, '\\\\$&') // Escape regex specials\n        .replace(/\\*/g, '.*') // Convert * to .*\n        .replace(/\\?/g, '.'); // Convert ? to .\n    return new RegExp(\"^\".concat(escaped, \"$\"));\n};\nexport var validateUGCFilterRules = function (ugcFilterRules) {\n    // validate ugcFilterRules\n    if (!ugcFilterRules.every(function (rule) { return typeof rule.selector === 'string' && typeof rule.replacement === 'string'; })) {\n        throw new Error('ugcFilterRules must be an array of objects with selector and replacement properties');\n    }\n    // validate ugcFilterRules are valid globs\n    if (!ugcFilterRules.every(function (rule) { return isValidGlobUrl(rule.selector); })) {\n        throw new Error('ugcFilterRules must be an array of objects with valid globs');\n    }\n};\nexport var getPageUrl = function (pageUrl, ugcFilterRules) {\n    var e_1, _a;\n    try {\n        // apply ugcFilterRules, order is important, first rule wins\n        for (var ugcFilterRules_1 = __values(ugcFilterRules), ugcFilterRules_1_1 = ugcFilterRules_1.next(); !ugcFilterRules_1_1.done; ugcFilterRules_1_1 = ugcFilterRules_1.next()) {\n            var rule = ugcFilterRules_1_1.value;\n            var regex = globToRegex(rule.selector);\n            if (regex.test(pageUrl)) {\n                return pageUrl.replace(regex, rule.replacement);\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (ugcFilterRules_1_1 && !ugcFilterRules_1_1.done && (_a = ugcFilterRules_1.return)) _a.call(ugcFilterRules_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return pageUrl;\n};\nexport var getStorageSize = function () { return __awaiter(void 0, void 0, void 0, function () {\n    var globalScope, _a, usage, quota, usageDetails, totalStorageSize, percentOfQuota, e_2;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                _b.trys.push([0, 3, , 4]);\n                globalScope = getGlobalScope();\n                if (!globalScope) return [3 /*break*/, 2];\n                return [4 /*yield*/, globalScope.navigator.storage.estimate()];\n            case 1:\n                _a = _b.sent(), usage = _a.usage, quota = _a.quota, usageDetails = _a.usageDetails;\n                totalStorageSize = usage ? Math.round(usage / KB_SIZE) : 0;\n                percentOfQuota = usage && quota ? Math.round((usage / quota + Number.EPSILON) * 1000) / 1000 : 0;\n                return [2 /*return*/, { totalStorageSize: totalStorageSize, percentOfQuota: percentOfQuota, usageDetails: JSON.stringify(usageDetails) }];\n            case 2: return [3 /*break*/, 4];\n            case 3:\n                e_2 = _b.sent();\n                return [3 /*break*/, 4];\n            case 4: return [2 /*return*/, { totalStorageSize: 0, percentOfQuota: 0, usageDetails: '' }];\n        }\n    });\n}); };\nexport var getDebugConfig = function (config) {\n    var debugConfig = __assign({}, config);\n    var apiKey = debugConfig.apiKey;\n    debugConfig.apiKey = \"****\".concat(apiKey.substring(apiKey.length - 4));\n    return debugConfig;\n};\n//# sourceMappingURL=helpers.js.map","export var ServerZone;\n(function (ServerZone) {\n    ServerZone[\"US\"] = \"US\";\n    ServerZone[\"EU\"] = \"EU\";\n    ServerZone[\"STAGING\"] = \"STAGING\";\n})(ServerZone || (ServerZone = {}));\n//# sourceMappingURL=server-zone.js.map","/** The status of an event. */\nexport var Status;\n(function (Status) {\n    /** The status could not be determined. */\n    Status[\"Unknown\"] = \"unknown\";\n    /** The event was skipped due to configuration or callbacks. */\n    Status[\"Skipped\"] = \"skipped\";\n    /** The event was sent successfully. */\n    Status[\"Success\"] = \"success\";\n    /** A user or device in the payload is currently rate limited and should try again later. */\n    Status[\"RateLimit\"] = \"rate_limit\";\n    /** The sent payload was too large to be processed. */\n    Status[\"PayloadTooLarge\"] = \"payload_too_large\";\n    /** The event could not be processed. */\n    Status[\"Invalid\"] = \"invalid\";\n    /** A server-side error ocurred during submission. */\n    Status[\"Failed\"] = \"failed\";\n    /** a server or client side error occuring when a request takes too long and is cancelled */\n    Status[\"Timeout\"] = \"Timeout\";\n    /** NodeJS runtime environment error.. E.g. disconnected from network */\n    Status[\"SystemError\"] = \"SystemError\";\n})(Status || (Status = {}));\n//# sourceMappingURL=status.js.map","export function toLowerCase(str) {\n    return str.toLowerCase();\n}\n/**\n * Get the type of an input element.\n * This takes care of the case where a password input is changed to a text input.\n * In this case, we continue to consider this of type password, in order to avoid leaking sensitive data\n * where passwords should be masked.\n */\nexport function getInputType(element) {\n    // when omitting the type of input element(e.g. <input />), the type is treated as text\n    var type = element.type;\n    return element.hasAttribute('data-rr-is-password')\n        ? 'password'\n        : type\n            ? // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n                toLowerCase(type)\n            : null;\n}\n//# sourceMappingURL=get-input-type.js.map","import { __assign, __extends } from \"tslib\";\nimport { Config, Logger, FetchTransport, LogLevel } from '@amplitude/analytics-core';\nimport { DEFAULT_PERFORMANCE_CONFIG, DEFAULT_SAMPLE_RATE, DEFAULT_SERVER_ZONE, DEFAULT_URL_CHANGE_POLLING_INTERVAL, } from '../constants';\nimport { SafeLoggerProvider } from '../logger';\nimport { validateUGCFilterRules } from '../helpers';\nexport var getDefaultConfig = function () { return ({\n    flushMaxRetries: 2,\n    logLevel: LogLevel.Warn,\n    loggerProvider: new Logger(),\n    transportProvider: new FetchTransport(),\n}); };\nvar SessionReplayLocalConfig = /** @class */ (function (_super) {\n    __extends(SessionReplayLocalConfig, _super);\n    function SessionReplayLocalConfig(apiKey, options) {\n        var _this = this;\n        var _a, _b, _c, _d, _e;\n        var defaultConfig = getDefaultConfig();\n        _this = _super.call(this, __assign(__assign({ transportProvider: defaultConfig.transportProvider, loggerProvider: new SafeLoggerProvider(options.loggerProvider || defaultConfig.loggerProvider) }, options), { apiKey: apiKey })) || this;\n        _this.flushMaxRetries =\n            options.flushMaxRetries !== undefined && options.flushMaxRetries <= defaultConfig.flushMaxRetries\n                ? options.flushMaxRetries\n                : defaultConfig.flushMaxRetries;\n        _this.apiKey = apiKey;\n        _this.sampleRate = options.sampleRate || DEFAULT_SAMPLE_RATE;\n        _this.serverZone = options.serverZone || DEFAULT_SERVER_ZONE;\n        _this.configServerUrl = options.configServerUrl;\n        _this.trackServerUrl = options.trackServerUrl;\n        _this.shouldInlineStylesheet = options.shouldInlineStylesheet;\n        _this.version = options.version;\n        _this.performanceConfig = options.performanceConfig || DEFAULT_PERFORMANCE_CONFIG;\n        _this.storeType = (_a = options.storeType) !== null && _a !== void 0 ? _a : 'idb';\n        _this.applyBackgroundColorToBlockedElements = (_b = options.applyBackgroundColorToBlockedElements) !== null && _b !== void 0 ? _b : false;\n        _this.enableUrlChangePolling = (_c = options.enableUrlChangePolling) !== null && _c !== void 0 ? _c : false;\n        _this.urlChangePollingInterval = (_d = options.urlChangePollingInterval) !== null && _d !== void 0 ? _d : DEFAULT_URL_CHANGE_POLLING_INTERVAL;\n        _this.captureDocumentTitle = (_e = options.captureDocumentTitle) !== null && _e !== void 0 ? _e : false;\n        if (options.privacyConfig) {\n            _this.privacyConfig = options.privacyConfig;\n        }\n        if (options.interactionConfig) {\n            _this.interactionConfig = options.interactionConfig;\n            // validate ugcFilterRules, throw error if invalid - throw error at the beginning of the config\n            if (_this.interactionConfig.ugcFilterRules) {\n                validateUGCFilterRules(_this.interactionConfig.ugcFilterRules);\n            }\n        }\n        if (options.debugMode) {\n            _this.debugMode = options.debugMode;\n        }\n        if (options.experimental) {\n            _this.experimental = options.experimental;\n        }\n        if (options.omitElementTags) {\n            _this.omitElementTags = options.omitElementTags;\n        }\n        return _this;\n    }\n    return SessionReplayLocalConfig;\n}(Config));\nexport { SessionReplayLocalConfig };\n//# sourceMappingURL=local-config.js.map","var EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[EventType2[\"DomContentLoaded\"] = 0] = \"DomContentLoaded\";\n  EventType2[EventType2[\"Load\"] = 1] = \"Load\";\n  EventType2[EventType2[\"FullSnapshot\"] = 2] = \"FullSnapshot\";\n  EventType2[EventType2[\"IncrementalSnapshot\"] = 3] = \"IncrementalSnapshot\";\n  EventType2[EventType2[\"Meta\"] = 4] = \"Meta\";\n  EventType2[EventType2[\"Custom\"] = 5] = \"Custom\";\n  EventType2[EventType2[\"Plugin\"] = 6] = \"Plugin\";\n  return EventType2;\n})(EventType || {});\nvar IncrementalSource = /* @__PURE__ */ ((IncrementalSource2) => {\n  IncrementalSource2[IncrementalSource2[\"Mutation\"] = 0] = \"Mutation\";\n  IncrementalSource2[IncrementalSource2[\"MouseMove\"] = 1] = \"MouseMove\";\n  IncrementalSource2[IncrementalSource2[\"MouseInteraction\"] = 2] = \"MouseInteraction\";\n  IncrementalSource2[IncrementalSource2[\"Scroll\"] = 3] = \"Scroll\";\n  IncrementalSource2[IncrementalSource2[\"ViewportResize\"] = 4] = \"ViewportResize\";\n  IncrementalSource2[IncrementalSource2[\"Input\"] = 5] = \"Input\";\n  IncrementalSource2[IncrementalSource2[\"TouchMove\"] = 6] = \"TouchMove\";\n  IncrementalSource2[IncrementalSource2[\"MediaInteraction\"] = 7] = \"MediaInteraction\";\n  IncrementalSource2[IncrementalSource2[\"StyleSheetRule\"] = 8] = \"StyleSheetRule\";\n  IncrementalSource2[IncrementalSource2[\"CanvasMutation\"] = 9] = \"CanvasMutation\";\n  IncrementalSource2[IncrementalSource2[\"Font\"] = 10] = \"Font\";\n  IncrementalSource2[IncrementalSource2[\"Log\"] = 11] = \"Log\";\n  IncrementalSource2[IncrementalSource2[\"Drag\"] = 12] = \"Drag\";\n  IncrementalSource2[IncrementalSource2[\"StyleDeclaration\"] = 13] = \"StyleDeclaration\";\n  IncrementalSource2[IncrementalSource2[\"Selection\"] = 14] = \"Selection\";\n  IncrementalSource2[IncrementalSource2[\"AdoptedStyleSheet\"] = 15] = \"AdoptedStyleSheet\";\n  IncrementalSource2[IncrementalSource2[\"CustomElement\"] = 16] = \"CustomElement\";\n  return IncrementalSource2;\n})(IncrementalSource || {});\nvar MouseInteractions = /* @__PURE__ */ ((MouseInteractions2) => {\n  MouseInteractions2[MouseInteractions2[\"MouseUp\"] = 0] = \"MouseUp\";\n  MouseInteractions2[MouseInteractions2[\"MouseDown\"] = 1] = \"MouseDown\";\n  MouseInteractions2[MouseInteractions2[\"Click\"] = 2] = \"Click\";\n  MouseInteractions2[MouseInteractions2[\"ContextMenu\"] = 3] = \"ContextMenu\";\n  MouseInteractions2[MouseInteractions2[\"DblClick\"] = 4] = \"DblClick\";\n  MouseInteractions2[MouseInteractions2[\"Focus\"] = 5] = \"Focus\";\n  MouseInteractions2[MouseInteractions2[\"Blur\"] = 6] = \"Blur\";\n  MouseInteractions2[MouseInteractions2[\"TouchStart\"] = 7] = \"TouchStart\";\n  MouseInteractions2[MouseInteractions2[\"TouchMove_Departed\"] = 8] = \"TouchMove_Departed\";\n  MouseInteractions2[MouseInteractions2[\"TouchEnd\"] = 9] = \"TouchEnd\";\n  MouseInteractions2[MouseInteractions2[\"TouchCancel\"] = 10] = \"TouchCancel\";\n  return MouseInteractions2;\n})(MouseInteractions || {});\nvar PointerTypes = /* @__PURE__ */ ((PointerTypes2) => {\n  PointerTypes2[PointerTypes2[\"Mouse\"] = 0] = \"Mouse\";\n  PointerTypes2[PointerTypes2[\"Pen\"] = 1] = \"Pen\";\n  PointerTypes2[PointerTypes2[\"Touch\"] = 2] = \"Touch\";\n  return PointerTypes2;\n})(PointerTypes || {});\nvar CanvasContext = /* @__PURE__ */ ((CanvasContext2) => {\n  CanvasContext2[CanvasContext2[\"2D\"] = 0] = \"2D\";\n  CanvasContext2[CanvasContext2[\"WebGL\"] = 1] = \"WebGL\";\n  CanvasContext2[CanvasContext2[\"WebGL2\"] = 2] = \"WebGL2\";\n  return CanvasContext2;\n})(CanvasContext || {});\nvar MediaInteractions = /* @__PURE__ */ ((MediaInteractions2) => {\n  MediaInteractions2[MediaInteractions2[\"Play\"] = 0] = \"Play\";\n  MediaInteractions2[MediaInteractions2[\"Pause\"] = 1] = \"Pause\";\n  MediaInteractions2[MediaInteractions2[\"Seeked\"] = 2] = \"Seeked\";\n  MediaInteractions2[MediaInteractions2[\"VolumeChange\"] = 3] = \"VolumeChange\";\n  MediaInteractions2[MediaInteractions2[\"RateChange\"] = 4] = \"RateChange\";\n  return MediaInteractions2;\n})(MediaInteractions || {});\nvar ReplayerEvents = /* @__PURE__ */ ((ReplayerEvents2) => {\n  ReplayerEvents2[\"Start\"] = \"start\";\n  ReplayerEvents2[\"Pause\"] = \"pause\";\n  ReplayerEvents2[\"Resume\"] = \"resume\";\n  ReplayerEvents2[\"Resize\"] = \"resize\";\n  ReplayerEvents2[\"Finish\"] = \"finish\";\n  ReplayerEvents2[\"FullsnapshotRebuilded\"] = \"fullsnapshot-rebuilded\";\n  ReplayerEvents2[\"LoadStylesheetStart\"] = \"load-stylesheet-start\";\n  ReplayerEvents2[\"LoadStylesheetEnd\"] = \"load-stylesheet-end\";\n  ReplayerEvents2[\"SkipStart\"] = \"skip-start\";\n  ReplayerEvents2[\"SkipEnd\"] = \"skip-end\";\n  ReplayerEvents2[\"MouseInteraction\"] = \"mouse-interaction\";\n  ReplayerEvents2[\"EventCast\"] = \"event-cast\";\n  ReplayerEvents2[\"CustomEvent\"] = \"custom-event\";\n  ReplayerEvents2[\"Flush\"] = \"flush\";\n  ReplayerEvents2[\"StateChange\"] = \"state-change\";\n  ReplayerEvents2[\"PlayBack\"] = \"play-back\";\n  ReplayerEvents2[\"Destroy\"] = \"destroy\";\n  return ReplayerEvents2;\n})(ReplayerEvents || {});\nvar NodeType = /* @__PURE__ */ ((NodeType2) => {\n  NodeType2[NodeType2[\"Document\"] = 0] = \"Document\";\n  NodeType2[NodeType2[\"DocumentType\"] = 1] = \"DocumentType\";\n  NodeType2[NodeType2[\"Element\"] = 2] = \"Element\";\n  NodeType2[NodeType2[\"Text\"] = 3] = \"Text\";\n  NodeType2[NodeType2[\"CDATA\"] = 4] = \"CDATA\";\n  NodeType2[NodeType2[\"Comment\"] = 5] = \"Comment\";\n  return NodeType2;\n})(NodeType || {});\nexport {\n  CanvasContext,\n  EventType,\n  IncrementalSource,\n  MediaInteractions,\n  MouseInteractions,\n  NodeType,\n  PointerTypes,\n  ReplayerEvents\n};\n//# sourceMappingURL=rrweb-types.js.map\n","/* eslint-disable @typescript-eslint/no-unsafe-argument */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport { Status } from '@amplitude/analytics-types';\nvar BaseTransport = /** @class */ (function () {\n    function BaseTransport() {\n    }\n    BaseTransport.prototype.send = function (_serverUrl, _payload) {\n        return Promise.resolve(null);\n    };\n    BaseTransport.prototype.buildResponse = function (responseJSON) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x;\n        if (typeof responseJSON !== 'object') {\n            return null;\n        }\n        var statusCode = responseJSON.code || 0;\n        var status = this.buildStatus(statusCode);\n        switch (status) {\n            case Status.Success:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        eventsIngested: (_a = responseJSON.events_ingested) !== null && _a !== void 0 ? _a : 0,\n                        payloadSizeBytes: (_b = responseJSON.payload_size_bytes) !== null && _b !== void 0 ? _b : 0,\n                        serverUploadTime: (_c = responseJSON.server_upload_time) !== null && _c !== void 0 ? _c : 0,\n                    },\n                };\n            case Status.Invalid:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_d = responseJSON.error) !== null && _d !== void 0 ? _d : '',\n                        missingField: (_e = responseJSON.missing_field) !== null && _e !== void 0 ? _e : '',\n                        eventsWithInvalidFields: (_f = responseJSON.events_with_invalid_fields) !== null && _f !== void 0 ? _f : {},\n                        eventsWithMissingFields: (_g = responseJSON.events_with_missing_fields) !== null && _g !== void 0 ? _g : {},\n                        eventsWithInvalidIdLengths: (_h = responseJSON.events_with_invalid_id_lengths) !== null && _h !== void 0 ? _h : {},\n                        epsThreshold: (_j = responseJSON.eps_threshold) !== null && _j !== void 0 ? _j : 0,\n                        exceededDailyQuotaDevices: (_k = responseJSON.exceeded_daily_quota_devices) !== null && _k !== void 0 ? _k : {},\n                        silencedDevices: (_l = responseJSON.silenced_devices) !== null && _l !== void 0 ? _l : [],\n                        silencedEvents: (_m = responseJSON.silenced_events) !== null && _m !== void 0 ? _m : [],\n                        throttledDevices: (_o = responseJSON.throttled_devices) !== null && _o !== void 0 ? _o : {},\n                        throttledEvents: (_p = responseJSON.throttled_events) !== null && _p !== void 0 ? _p : [],\n                    },\n                };\n            case Status.PayloadTooLarge:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_q = responseJSON.error) !== null && _q !== void 0 ? _q : '',\n                    },\n                };\n            case Status.RateLimit:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_r = responseJSON.error) !== null && _r !== void 0 ? _r : '',\n                        epsThreshold: (_s = responseJSON.eps_threshold) !== null && _s !== void 0 ? _s : 0,\n                        throttledDevices: (_t = responseJSON.throttled_devices) !== null && _t !== void 0 ? _t : {},\n                        throttledUsers: (_u = responseJSON.throttled_users) !== null && _u !== void 0 ? _u : {},\n                        exceededDailyQuotaDevices: (_v = responseJSON.exceeded_daily_quota_devices) !== null && _v !== void 0 ? _v : {},\n                        exceededDailyQuotaUsers: (_w = responseJSON.exceeded_daily_quota_users) !== null && _w !== void 0 ? _w : {},\n                        throttledEvents: (_x = responseJSON.throttled_events) !== null && _x !== void 0 ? _x : [],\n                    },\n                };\n            case Status.Timeout:\n            default:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                };\n        }\n    };\n    BaseTransport.prototype.buildStatus = function (code) {\n        if (code >= 200 && code < 300) {\n            return Status.Success;\n        }\n        if (code === 429) {\n            return Status.RateLimit;\n        }\n        if (code === 413) {\n            return Status.PayloadTooLarge;\n        }\n        if (code === 408) {\n            return Status.Timeout;\n        }\n        if (code >= 400 && code < 500) {\n            return Status.Invalid;\n        }\n        if (code >= 500) {\n            return Status.Failed;\n        }\n        return Status.Unknown;\n    };\n    return BaseTransport;\n}());\nexport { BaseTransport };\n//# sourceMappingURL=base.js.map","import { __assign, __awaiter, __generator, __values } from \"tslib\";\nimport { BaseTransport } from '@amplitude/analytics-core';\nimport { ServerZone, Status } from '@amplitude/analytics-types';\nvar UNEXPECTED_NETWORK_ERROR_MESSAGE = 'Network error occurred, remote config fetch failed';\nvar SUCCESS_REMOTE_CONFIG = 'Remote config successfully fetched';\nvar MAX_RETRIES_EXCEEDED_MESSAGE = 'Remote config fetch rejected due to exceeded retry count';\nvar TIMEOUT_MESSAGE = 'Remote config fetch rejected due to timeout after 5 seconds';\nvar UNEXPECTED_ERROR_MESSAGE = 'Unexpected error occurred';\nexport var REMOTE_CONFIG_SERVER_URL = 'https://sr-client-cfg.amplitude.com/config';\nexport var REMOTE_CONFIG_SERVER_URL_STAGING = 'https://sr-client-cfg.stag2.amplitude.com/config';\nexport var REMOTE_CONFIG_SERVER_URL_EU = 'https://sr-client-cfg.eu.amplitude.com/config';\nvar RemoteConfigFetch = /** @class */ (function () {\n    function RemoteConfigFetch(_a) {\n        var localConfig = _a.localConfig, configKeys = _a.configKeys;\n        var _this = this;\n        this.retryTimeout = 1000;\n        this.attempts = 0;\n        this.sessionTargetingMatch = false;\n        this.metrics = {};\n        this.getRemoteNamespaceConfig = function (configNamespace, sessionId) { return __awaiter(_this, void 0, void 0, function () {\n            var fetchStartTime, configAPIResponse, remoteConfig;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        fetchStartTime = Date.now();\n                        return [4 /*yield*/, this.fetchWithTimeout(sessionId)];\n                    case 1:\n                        configAPIResponse = _a.sent();\n                        if (configAPIResponse) {\n                            remoteConfig = configAPIResponse.configs && configAPIResponse.configs[configNamespace];\n                            if (remoteConfig) {\n                                this.metrics.fetchTimeAPISuccess = Date.now() - fetchStartTime;\n                                return [2 /*return*/, remoteConfig];\n                            }\n                        }\n                        this.metrics.fetchTimeAPIFail = Date.now() - fetchStartTime;\n                        return [2 /*return*/, undefined];\n                }\n            });\n        }); };\n        this.getRemoteConfig = function (configNamespace, key, sessionId) { return __awaiter(_this, void 0, void 0, function () {\n            var namespaceConfig;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getRemoteNamespaceConfig(configNamespace, sessionId)];\n                    case 1:\n                        namespaceConfig = _a.sent();\n                        return [2 /*return*/, namespaceConfig === null || namespaceConfig === void 0 ? void 0 : namespaceConfig[key]];\n                }\n            });\n        }); };\n        this.fetchWithTimeout = function (sessionId) { return __awaiter(_this, void 0, void 0, function () {\n            var controller, timeoutId, remoteConfig;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        controller = new AbortController();\n                        timeoutId = setTimeout(function () { return controller.abort(); }, 5000);\n                        return [4 /*yield*/, this.fetchRemoteConfig(controller.signal, sessionId)];\n                    case 1:\n                        remoteConfig = _a.sent();\n                        clearTimeout(timeoutId);\n                        return [2 /*return*/, remoteConfig];\n                }\n            });\n        }); };\n        this.fetchRemoteConfig = function (signal, sessionId) { return __awaiter(_this, void 0, void 0, function () {\n            var urlParams, _a, _b, configKey, options, serverUrl, res, parsedStatus, e_1, knownError;\n            var e_2, _c;\n            var _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        if (sessionId === this.lastFetchedSessionId && this.attempts >= this.localConfig.flushMaxRetries) {\n                            return [2 /*return*/, this.completeRequest({ err: MAX_RETRIES_EXCEEDED_MESSAGE })];\n                        }\n                        else if (signal.aborted) {\n                            return [2 /*return*/, this.completeRequest({ err: TIMEOUT_MESSAGE })];\n                        }\n                        else if (sessionId !== this.lastFetchedSessionId) {\n                            this.lastFetchedSessionId = sessionId;\n                            this.attempts = 0;\n                        }\n                        _e.label = 1;\n                    case 1:\n                        _e.trys.push([1, 3, , 4]);\n                        urlParams = new URLSearchParams({\n                            api_key: this.localConfig.apiKey,\n                        });\n                        try {\n                            for (_a = __values(this.configKeys), _b = _a.next(); !_b.done; _b = _a.next()) {\n                                configKey = _b.value;\n                                urlParams.append('config_keys', configKey);\n                            }\n                        }\n                        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                        finally {\n                            try {\n                                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                            }\n                            finally { if (e_2) throw e_2.error; }\n                        }\n                        if (sessionId) {\n                            urlParams.set('session_id', String(sessionId));\n                        }\n                        options = {\n                            headers: {\n                                Accept: '*/*',\n                            },\n                            method: 'GET',\n                        };\n                        serverUrl = \"\".concat(this.getServerUrl(), \"?\").concat(urlParams.toString());\n                        this.attempts += 1;\n                        return [4 /*yield*/, fetch(serverUrl, __assign(__assign({}, options), { signal: signal }))];\n                    case 2:\n                        res = _e.sent();\n                        if (res === null) {\n                            return [2 /*return*/, this.completeRequest({ err: UNEXPECTED_ERROR_MESSAGE })];\n                        }\n                        parsedStatus = new BaseTransport().buildStatus(res.status);\n                        switch (parsedStatus) {\n                            case Status.Success:\n                                this.attempts = 0;\n                                return [2 /*return*/, this.parseAndStoreConfig(res)];\n                            case Status.Failed:\n                                return [2 /*return*/, this.retryFetch(signal, sessionId)];\n                            default:\n                                return [2 /*return*/, this.completeRequest({ err: UNEXPECTED_NETWORK_ERROR_MESSAGE })];\n                        }\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _e.sent();\n                        knownError = e_1;\n                        if (signal.aborted) {\n                            return [2 /*return*/, this.completeRequest({ err: TIMEOUT_MESSAGE })];\n                        }\n                        return [2 /*return*/, this.completeRequest({ err: (_d = knownError.message) !== null && _d !== void 0 ? _d : UNEXPECTED_ERROR_MESSAGE })];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        }); };\n        this.retryFetch = function (signal, sessionId) { return __awaiter(_this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, new Promise(function (resolve) { return setTimeout(resolve, _this.attempts * _this.retryTimeout); })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, this.fetchRemoteConfig(signal, sessionId)];\n                }\n            });\n        }); };\n        this.parseAndStoreConfig = function (res) { return __awaiter(_this, void 0, void 0, function () {\n            var remoteConfig;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, res.json()];\n                    case 1:\n                        remoteConfig = (_a.sent());\n                        this.completeRequest({ success: SUCCESS_REMOTE_CONFIG });\n                        return [2 /*return*/, remoteConfig];\n                }\n            });\n        }); };\n        this.localConfig = localConfig;\n        this.configKeys = configKeys;\n    }\n    RemoteConfigFetch.prototype.getServerUrl = function () {\n        if (this.localConfig.configServerUrl) {\n            return this.localConfig.configServerUrl;\n        }\n        if (this.localConfig.serverZone === ServerZone.STAGING) {\n            return REMOTE_CONFIG_SERVER_URL_STAGING;\n        }\n        if (this.localConfig.serverZone === ServerZone.EU) {\n            return REMOTE_CONFIG_SERVER_URL_EU;\n        }\n        return REMOTE_CONFIG_SERVER_URL;\n    };\n    RemoteConfigFetch.prototype.completeRequest = function (_a) {\n        var err = _a.err, success = _a.success;\n        if (err) {\n            throw new Error(err);\n        }\n        else if (success) {\n            this.localConfig.loggerProvider.log(success);\n        }\n    };\n    return RemoteConfigFetch;\n}());\nexport { RemoteConfigFetch };\nexport var createRemoteConfigFetch = function (_a) {\n    var localConfig = _a.localConfig, configKeys = _a.configKeys;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            return [2 /*return*/, new RemoteConfigFetch({ localConfig: localConfig, configKeys: configKeys })];\n        });\n    });\n};\n//# sourceMappingURL=remote-config.js.map","import * as remoteConfigFetch from './remote-config';\nexport var createRemoteConfigFetch = remoteConfigFetch.createRemoteConfigFetch;\n//# sourceMappingURL=index.js.map","import { __assign, __awaiter, __generator, __read, __values } from \"tslib\";\nimport { createRemoteConfigFetch } from '@amplitude/analytics-remote-config';\nimport { getDebugConfig } from '../helpers';\nimport { SessionReplayLocalConfig } from './local-config';\nexport var removeInvalidSelectorsFromPrivacyConfig = function (privacyConfig, loggerProvider) {\n    // This allows us to not search the DOM.\n    var fragment = document.createDocumentFragment();\n    var dropInvalidSelectors = function (selectors) {\n        if (selectors === void 0) { selectors = []; }\n        if (typeof selectors === 'string') {\n            selectors = [selectors];\n        }\n        selectors = selectors.filter(function (selector) {\n            try {\n                fragment.querySelector(selector);\n            }\n            catch (_a) {\n                loggerProvider.warn(\"[session-replay-browser] omitting selector \\\"\".concat(selector, \"\\\" because it is invalid\"));\n                return false;\n            }\n            return true;\n        });\n        if (selectors.length === 0) {\n            return undefined;\n        }\n        return selectors;\n    };\n    privacyConfig.blockSelector = dropInvalidSelectors(privacyConfig.blockSelector);\n    privacyConfig.maskSelector = dropInvalidSelectors(privacyConfig.maskSelector);\n    privacyConfig.unmaskSelector = dropInvalidSelectors(privacyConfig.unmaskSelector);\n    return privacyConfig;\n};\nvar SessionReplayJoinedConfigGenerator = /** @class */ (function () {\n    function SessionReplayJoinedConfigGenerator(remoteConfigFetch, localConfig) {\n        this.localConfig = localConfig;\n        this.remoteConfigFetch = remoteConfigFetch;\n    }\n    SessionReplayJoinedConfigGenerator.prototype.generateJoinedConfig = function (sessionId) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function () {\n            var config, remoteConfig, namespaceConfig, samplingConfig_1, privacyConfig, targetingConfig_1, ugcFilterRules, err_1, knownError, samplingConfig, remotePrivacyConfig, targetingConfig, localPrivacyConfig, joinedPrivacyConfig, privacyConfigSelectorMap, selectorMap, _e, _f, _g, selector, selectorType;\n            var e_1, _h;\n            return __generator(this, function (_j) {\n                switch (_j.label) {\n                    case 0:\n                        config = __assign({}, this.localConfig);\n                        // Special case here as optOut is implemented via getter/setter\n                        config.optOut = this.localConfig.optOut;\n                        // We always want captureEnabled to be true, unless there's an override\n                        // in the remote config.\n                        config.captureEnabled = true;\n                        _j.label = 1;\n                    case 1:\n                        _j.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.remoteConfigFetch.getRemoteNamespaceConfig('sessionReplay', sessionId)];\n                    case 2:\n                        namespaceConfig = _j.sent();\n                        if (namespaceConfig) {\n                            samplingConfig_1 = namespaceConfig.sr_sampling_config;\n                            privacyConfig = namespaceConfig.sr_privacy_config;\n                            targetingConfig_1 = namespaceConfig.sr_targeting_config;\n                            ugcFilterRules = (_a = config.interactionConfig) === null || _a === void 0 ? void 0 : _a.ugcFilterRules;\n                            // This is intentionally forced to only be set through the remote config.\n                            config.interactionConfig = namespaceConfig.sr_interaction_config;\n                            if (config.interactionConfig && ugcFilterRules) {\n                                config.interactionConfig.ugcFilterRules = ugcFilterRules;\n                            }\n                            // This is intentionally forced to only be set through the remote config.\n                            config.loggingConfig = namespaceConfig.sr_logging_config;\n                            if (samplingConfig_1 || privacyConfig || targetingConfig_1) {\n                                remoteConfig = {};\n                                if (samplingConfig_1) {\n                                    remoteConfig.sr_sampling_config = samplingConfig_1;\n                                }\n                                if (privacyConfig) {\n                                    remoteConfig.sr_privacy_config = privacyConfig;\n                                }\n                                if (targetingConfig_1) {\n                                    remoteConfig.sr_targeting_config = targetingConfig_1;\n                                }\n                            }\n                        }\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_1 = _j.sent();\n                        knownError = err_1;\n                        this.localConfig.loggerProvider.warn(knownError.message);\n                        config.captureEnabled = false;\n                        return [3 /*break*/, 4];\n                    case 4:\n                        if (!remoteConfig) {\n                            return [2 /*return*/, {\n                                    localConfig: this.localConfig,\n                                    joinedConfig: config,\n                                    remoteConfig: remoteConfig,\n                                }];\n                        }\n                        samplingConfig = remoteConfig.sr_sampling_config, remotePrivacyConfig = remoteConfig.sr_privacy_config, targetingConfig = remoteConfig.sr_targeting_config;\n                        if (samplingConfig && Object.keys(samplingConfig).length > 0) {\n                            if (Object.prototype.hasOwnProperty.call(samplingConfig, 'capture_enabled')) {\n                                config.captureEnabled = samplingConfig.capture_enabled;\n                            }\n                            else {\n                                config.captureEnabled = false;\n                            }\n                            if (Object.prototype.hasOwnProperty.call(samplingConfig, 'sample_rate')) {\n                                config.sampleRate = samplingConfig.sample_rate;\n                            }\n                        }\n                        else {\n                            // If config API response was valid (ie 200), but no config returned, assume that\n                            // customer has not yet set up config, and use sample rate from SDK options,\n                            // allowing for immediate replay capture\n                            config.captureEnabled = true;\n                            this.localConfig.loggerProvider.debug('Remote config successfully fetched, but no values set for project, Session Replay capture enabled.');\n                        }\n                        // Remote config join acts somewhat like a left join between the remote and the local\n                        // config. That is, remote config has precedence over local values as with sampling.\n                        // However, non conflicting values will be added to the lists.\n                        // Here's an example to illustrate:\n                        //\n                        // Remote config:   {'.selector1': 'MASK',   '.selector2': 'UNMASK'}\n                        // Local config:    {'.selector1': 'UNMASK',                         '.selector3': 'MASK'}\n                        //\n                        // Resolved config: {'.selector1': 'MASK',   '.selector2': 'UNMASK', '.selector3': 'MASK'}\n                        // config.privacyConfig = {\n                        //   ...(config.privacyConfig ?? {}),\n                        //   ...remotePrivacyConfig,\n                        // };\n                        if (remotePrivacyConfig) {\n                            localPrivacyConfig = (_b = config.privacyConfig) !== null && _b !== void 0 ? _b : {};\n                            joinedPrivacyConfig = {\n                                defaultMaskLevel: (_d = (_c = remotePrivacyConfig.defaultMaskLevel) !== null && _c !== void 0 ? _c : localPrivacyConfig.defaultMaskLevel) !== null && _d !== void 0 ? _d : 'medium',\n                                blockSelector: [],\n                                maskSelector: [],\n                                unmaskSelector: [],\n                            };\n                            privacyConfigSelectorMap = function (privacyConfig) {\n                                var e_2, _a, e_3, _b, e_4, _c;\n                                var _d, _e, _f;\n                                var selectorMap = {};\n                                if (typeof privacyConfig.blockSelector === 'string') {\n                                    privacyConfig.blockSelector = [privacyConfig.blockSelector];\n                                }\n                                try {\n                                    for (var _g = __values((_d = privacyConfig.blockSelector) !== null && _d !== void 0 ? _d : []), _h = _g.next(); !_h.done; _h = _g.next()) {\n                                        var selector = _h.value;\n                                        selectorMap[selector] = 'block';\n                                    }\n                                }\n                                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                                finally {\n                                    try {\n                                        if (_h && !_h.done && (_a = _g.return)) _a.call(_g);\n                                    }\n                                    finally { if (e_2) throw e_2.error; }\n                                }\n                                try {\n                                    for (var _j = __values((_e = privacyConfig.maskSelector) !== null && _e !== void 0 ? _e : []), _k = _j.next(); !_k.done; _k = _j.next()) {\n                                        var selector = _k.value;\n                                        selectorMap[selector] = 'mask';\n                                    }\n                                }\n                                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                                finally {\n                                    try {\n                                        if (_k && !_k.done && (_b = _j.return)) _b.call(_j);\n                                    }\n                                    finally { if (e_3) throw e_3.error; }\n                                }\n                                try {\n                                    for (var _l = __values((_f = privacyConfig.unmaskSelector) !== null && _f !== void 0 ? _f : []), _m = _l.next(); !_m.done; _m = _l.next()) {\n                                        var selector = _m.value;\n                                        selectorMap[selector] = 'unmask';\n                                    }\n                                }\n                                catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                                finally {\n                                    try {\n                                        if (_m && !_m.done && (_c = _l.return)) _c.call(_l);\n                                    }\n                                    finally { if (e_4) throw e_4.error; }\n                                }\n                                return selectorMap;\n                            };\n                            selectorMap = __assign(__assign({}, privacyConfigSelectorMap(localPrivacyConfig)), privacyConfigSelectorMap(remotePrivacyConfig));\n                            try {\n                                for (_e = __values(Object.entries(selectorMap)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                                    _g = __read(_f.value, 2), selector = _g[0], selectorType = _g[1];\n                                    if (selectorType === 'mask') {\n                                        joinedPrivacyConfig.maskSelector.push(selector);\n                                    }\n                                    else if (selectorType === 'block') {\n                                        joinedPrivacyConfig.blockSelector.push(selector);\n                                    }\n                                    else if (selectorType === 'unmask') {\n                                        joinedPrivacyConfig.unmaskSelector.push(selector);\n                                    }\n                                }\n                            }\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                            finally {\n                                try {\n                                    if (_f && !_f.done && (_h = _e.return)) _h.call(_e);\n                                }\n                                finally { if (e_1) throw e_1.error; }\n                            }\n                            config.privacyConfig = removeInvalidSelectorsFromPrivacyConfig(joinedPrivacyConfig, this.localConfig.loggerProvider);\n                        }\n                        if (targetingConfig && Object.keys(targetingConfig).length > 0) {\n                            config.targetingConfig = targetingConfig;\n                        }\n                        this.localConfig.loggerProvider.debug(JSON.stringify({ name: 'session replay joined config', config: getDebugConfig(config) }, null, 2));\n                        return [2 /*return*/, {\n                                localConfig: this.localConfig,\n                                joinedConfig: config,\n                                remoteConfig: remoteConfig,\n                            }];\n                }\n            });\n        });\n    };\n    return SessionReplayJoinedConfigGenerator;\n}());\nexport { SessionReplayJoinedConfigGenerator };\nexport var createSessionReplayJoinedConfigGenerator = function (apiKey, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var localConfig, remoteConfigFetch;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                localConfig = new SessionReplayLocalConfig(apiKey, options);\n                return [4 /*yield*/, createRemoteConfigFetch({\n                        localConfig: localConfig,\n                        configKeys: ['sessionReplay'],\n                    })];\n            case 1:\n                remoteConfigFetch = _a.sent();\n                return [2 /*return*/, new SessionReplayJoinedConfigGenerator(remoteConfigFetch, localConfig)];\n        }\n    });\n}); };\n//# sourceMappingURL=joined-config.js.map","var u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\nvar fleb = new u8([\n  0,\n  0,\n  0,\n  0,\n  0,\n  0,\n  0,\n  0,\n  1,\n  1,\n  1,\n  1,\n  2,\n  2,\n  2,\n  2,\n  3,\n  3,\n  3,\n  3,\n  4,\n  4,\n  4,\n  4,\n  5,\n  5,\n  5,\n  5,\n  0,\n  /* unused */\n  0,\n  0,\n  /* impossible */\n  0\n]);\nvar fdeb = new u8([\n  0,\n  0,\n  0,\n  0,\n  1,\n  1,\n  2,\n  2,\n  3,\n  3,\n  4,\n  4,\n  5,\n  5,\n  6,\n  6,\n  7,\n  7,\n  8,\n  8,\n  9,\n  9,\n  10,\n  10,\n  11,\n  11,\n  12,\n  12,\n  13,\n  13,\n  /* unused */\n  0,\n  0\n]);\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\nvar freb = function(eb, start) {\n  var b = new u16(31);\n  for (var i = 0; i < 31; ++i) {\n    b[i] = start += 1 << eb[i - 1];\n  }\n  var r = new u32(b[30]);\n  for (var i = 1; i < 30; ++i) {\n    for (var j = b[i]; j < b[i + 1]; ++j) {\n      r[j] = j - b[i] << 5 | i;\n    }\n  }\n  return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n  var x = (i & 43690) >>> 1 | (i & 21845) << 1;\n  x = (x & 52428) >>> 2 | (x & 13107) << 2;\n  x = (x & 61680) >>> 4 | (x & 3855) << 4;\n  rev[i] = ((x & 65280) >>> 8 | (x & 255) << 8) >>> 1;\n}\nvar hMap = function(cd, mb, r) {\n  var s = cd.length;\n  var i = 0;\n  var l = new u16(mb);\n  for (; i < s; ++i)\n    ++l[cd[i] - 1];\n  var le = new u16(mb);\n  for (i = 0; i < mb; ++i) {\n    le[i] = le[i - 1] + l[i - 1] << 1;\n  }\n  var co;\n  if (r) {\n    co = new u16(1 << mb);\n    var rvb = 15 - mb;\n    for (i = 0; i < s; ++i) {\n      if (cd[i]) {\n        var sv = i << 4 | cd[i];\n        var r_1 = mb - cd[i];\n        var v = le[cd[i] - 1]++ << r_1;\n        for (var m = v | (1 << r_1) - 1; v <= m; ++v) {\n          co[rev[v] >>> rvb] = sv;\n        }\n      }\n    }\n  } else {\n    co = new u16(s);\n    for (i = 0; i < s; ++i)\n      co[i] = rev[le[cd[i] - 1]++] >>> 15 - cd[i];\n  }\n  return co;\n};\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n  flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n  flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n  flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n  flt[i] = 8;\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n  fdt[i] = 5;\nvar flm = /* @__PURE__ */ hMap(flt, 9, 0), flrm = /* @__PURE__ */ hMap(flt, 9, 1);\nvar fdm = /* @__PURE__ */ hMap(fdt, 5, 0), fdrm = /* @__PURE__ */ hMap(fdt, 5, 1);\nvar max = function(a) {\n  var m = a[0];\n  for (var i = 1; i < a.length; ++i) {\n    if (a[i] > m)\n      m = a[i];\n  }\n  return m;\n};\nvar bits = function(d, p, m) {\n  var o = p / 8 >> 0;\n  return (d[o] | d[o + 1] << 8) >>> (p & 7) & m;\n};\nvar bits16 = function(d, p) {\n  var o = p / 8 >> 0;\n  return (d[o] | d[o + 1] << 8 | d[o + 2] << 16) >>> (p & 7);\n};\nvar shft = function(p) {\n  return (p / 8 >> 0) + (p & 7 && 1);\n};\nvar slc = function(v, s, e) {\n  if (e == null || e > v.length)\n    e = v.length;\n  var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n  n.set(v.subarray(s, e));\n  return n;\n};\nvar inflt = function(dat, buf, st) {\n  var sl = dat.length;\n  var noBuf = !buf || st;\n  var noSt = !st || st.i;\n  if (!st)\n    st = {};\n  if (!buf)\n    buf = new u8(sl * 3);\n  var cbuf = function(l2) {\n    var bl = buf.length;\n    if (l2 > bl) {\n      var nbuf = new u8(Math.max(bl * 2, l2));\n      nbuf.set(buf);\n      buf = nbuf;\n    }\n  };\n  var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n  var tbts = sl * 8;\n  do {\n    if (!lm) {\n      st.f = final = bits(dat, pos, 1);\n      var type = bits(dat, pos + 1, 3);\n      pos += 3;\n      if (!type) {\n        var s = shft(pos) + 4, l = dat[s - 4] | dat[s - 3] << 8, t = s + l;\n        if (t > sl) {\n          if (noSt)\n            throw \"unexpected EOF\";\n          break;\n        }\n        if (noBuf)\n          cbuf(bt + l);\n        buf.set(dat.subarray(s, t), bt);\n        st.b = bt += l, st.p = pos = t * 8;\n        continue;\n      } else if (type == 1)\n        lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n      else if (type == 2) {\n        var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n        var tl = hLit + bits(dat, pos + 5, 31) + 1;\n        pos += 14;\n        var ldt = new u8(tl);\n        var clt = new u8(19);\n        for (var i = 0; i < hcLen; ++i) {\n          clt[clim[i]] = bits(dat, pos + i * 3, 7);\n        }\n        pos += hcLen * 3;\n        var clb = max(clt), clbmsk = (1 << clb) - 1;\n        if (!noSt && pos + tl * (clb + 7) > tbts)\n          break;\n        var clm = hMap(clt, clb, 1);\n        for (var i = 0; i < tl; ) {\n          var r = clm[bits(dat, pos, clbmsk)];\n          pos += r & 15;\n          var s = r >>> 4;\n          if (s < 16) {\n            ldt[i++] = s;\n          } else {\n            var c = 0, n = 0;\n            if (s == 16)\n              n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n            else if (s == 17)\n              n = 3 + bits(dat, pos, 7), pos += 3;\n            else if (s == 18)\n              n = 11 + bits(dat, pos, 127), pos += 7;\n            while (n--)\n              ldt[i++] = c;\n          }\n        }\n        var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n        lbt = max(lt);\n        dbt = max(dt);\n        lm = hMap(lt, lbt, 1);\n        dm = hMap(dt, dbt, 1);\n      } else\n        throw \"invalid block type\";\n      if (pos > tbts)\n        throw \"unexpected EOF\";\n    }\n    if (noBuf)\n      cbuf(bt + 131072);\n    var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n    var mxa = lbt + dbt + 18;\n    while (noSt || pos + mxa < tbts) {\n      var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n      pos += c & 15;\n      if (pos > tbts)\n        throw \"unexpected EOF\";\n      if (!c)\n        throw \"invalid length/literal\";\n      if (sym < 256)\n        buf[bt++] = sym;\n      else if (sym == 256) {\n        lm = null;\n        break;\n      } else {\n        var add = sym - 254;\n        if (sym > 264) {\n          var i = sym - 257, b = fleb[i];\n          add = bits(dat, pos, (1 << b) - 1) + fl[i];\n          pos += b;\n        }\n        var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n        if (!d)\n          throw \"invalid distance\";\n        pos += d & 15;\n        var dt = fd[dsym];\n        if (dsym > 3) {\n          var b = fdeb[dsym];\n          dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n        }\n        if (pos > tbts)\n          throw \"unexpected EOF\";\n        if (noBuf)\n          cbuf(bt + 131072);\n        var end = bt + add;\n        for (; bt < end; bt += 4) {\n          buf[bt] = buf[bt - dt];\n          buf[bt + 1] = buf[bt + 1 - dt];\n          buf[bt + 2] = buf[bt + 2 - dt];\n          buf[bt + 3] = buf[bt + 3 - dt];\n        }\n        bt = end;\n      }\n    }\n    st.l = lm, st.p = pos, st.b = bt;\n    if (lm)\n      final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n  } while (!final);\n  return bt == buf.length ? buf : slc(buf, 0, bt);\n};\nvar wbits = function(d, p, v) {\n  v <<= p & 7;\n  var o = p / 8 >> 0;\n  d[o] |= v;\n  d[o + 1] |= v >>> 8;\n};\nvar wbits16 = function(d, p, v) {\n  v <<= p & 7;\n  var o = p / 8 >> 0;\n  d[o] |= v;\n  d[o + 1] |= v >>> 8;\n  d[o + 2] |= v >>> 16;\n};\nvar hTree = function(d, mb) {\n  var t = [];\n  for (var i = 0; i < d.length; ++i) {\n    if (d[i])\n      t.push({ s: i, f: d[i] });\n  }\n  var s = t.length;\n  var t2 = t.slice();\n  if (!s)\n    return [new u8(0), 0];\n  if (s == 1) {\n    var v = new u8(t[0].s + 1);\n    v[t[0].s] = 1;\n    return [v, 1];\n  }\n  t.sort(function(a, b) {\n    return a.f - b.f;\n  });\n  t.push({ s: -1, f: 25001 });\n  var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n  t[0] = { s: -1, f: l.f + r.f, l, r };\n  while (i1 != s - 1) {\n    l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n    r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n    t[i1++] = { s: -1, f: l.f + r.f, l, r };\n  }\n  var maxSym = t2[0].s;\n  for (var i = 1; i < s; ++i) {\n    if (t2[i].s > maxSym)\n      maxSym = t2[i].s;\n  }\n  var tr = new u16(maxSym + 1);\n  var mbt = ln(t[i1 - 1], tr, 0);\n  if (mbt > mb) {\n    var i = 0, dt = 0;\n    var lft = mbt - mb, cst = 1 << lft;\n    t2.sort(function(a, b) {\n      return tr[b.s] - tr[a.s] || a.f - b.f;\n    });\n    for (; i < s; ++i) {\n      var i2_1 = t2[i].s;\n      if (tr[i2_1] > mb) {\n        dt += cst - (1 << mbt - tr[i2_1]);\n        tr[i2_1] = mb;\n      } else\n        break;\n    }\n    dt >>>= lft;\n    while (dt > 0) {\n      var i2_2 = t2[i].s;\n      if (tr[i2_2] < mb)\n        dt -= 1 << mb - tr[i2_2]++ - 1;\n      else\n        ++i;\n    }\n    for (; i >= 0 && dt; --i) {\n      var i2_3 = t2[i].s;\n      if (tr[i2_3] == mb) {\n        --tr[i2_3];\n        ++dt;\n      }\n    }\n    mbt = mb;\n  }\n  return [new u8(tr), mbt];\n};\nvar ln = function(n, l, d) {\n  return n.s == -1 ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1)) : l[n.s] = d;\n};\nvar lc = function(c) {\n  var s = c.length;\n  while (s && !c[--s])\n    ;\n  var cl = new u16(++s);\n  var cli = 0, cln = c[0], cls = 1;\n  var w = function(v) {\n    cl[cli++] = v;\n  };\n  for (var i = 1; i <= s; ++i) {\n    if (c[i] == cln && i != s)\n      ++cls;\n    else {\n      if (!cln && cls > 2) {\n        for (; cls > 138; cls -= 138)\n          w(32754);\n        if (cls > 2) {\n          w(cls > 10 ? cls - 11 << 5 | 28690 : cls - 3 << 5 | 12305);\n          cls = 0;\n        }\n      } else if (cls > 3) {\n        w(cln), --cls;\n        for (; cls > 6; cls -= 6)\n          w(8304);\n        if (cls > 2)\n          w(cls - 3 << 5 | 8208), cls = 0;\n      }\n      while (cls--)\n        w(cln);\n      cls = 1;\n      cln = c[i];\n    }\n  }\n  return [cl.subarray(0, cli), s];\n};\nvar clen = function(cf, cl) {\n  var l = 0;\n  for (var i = 0; i < cl.length; ++i)\n    l += cf[i] * cl[i];\n  return l;\n};\nvar wfblk = function(out, pos, dat) {\n  var s = dat.length;\n  var o = shft(pos + 2);\n  out[o] = s & 255;\n  out[o + 1] = s >>> 8;\n  out[o + 2] = out[o] ^ 255;\n  out[o + 3] = out[o + 1] ^ 255;\n  for (var i = 0; i < s; ++i)\n    out[o + i + 4] = dat[i];\n  return (o + 4 + s) * 8;\n};\nvar wblk = function(dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n  wbits(out, p++, final);\n  ++lf[256];\n  var _a2 = hTree(lf, 15), dlt = _a2[0], mlb = _a2[1];\n  var _b2 = hTree(df, 15), ddt = _b2[0], mdb = _b2[1];\n  var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n  var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n  var lcfreq = new u16(19);\n  for (var i = 0; i < lclt.length; ++i)\n    lcfreq[lclt[i] & 31]++;\n  for (var i = 0; i < lcdt.length; ++i)\n    lcfreq[lcdt[i] & 31]++;\n  var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n  var nlcc = 19;\n  for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n    ;\n  var flen = bl + 5 << 3;\n  var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n  var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n  if (flen <= ftlen && flen <= dtlen)\n    return wfblk(out, p, dat.subarray(bs, bs + bl));\n  var lm, ll, dm, dl;\n  wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n  if (dtlen < ftlen) {\n    lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n    var llm = hMap(lct, mlcb, 0);\n    wbits(out, p, nlc - 257);\n    wbits(out, p + 5, ndc - 1);\n    wbits(out, p + 10, nlcc - 4);\n    p += 14;\n    for (var i = 0; i < nlcc; ++i)\n      wbits(out, p + 3 * i, lct[clim[i]]);\n    p += 3 * nlcc;\n    var lcts = [lclt, lcdt];\n    for (var it = 0; it < 2; ++it) {\n      var clct = lcts[it];\n      for (var i = 0; i < clct.length; ++i) {\n        var len = clct[i] & 31;\n        wbits(out, p, llm[len]), p += lct[len];\n        if (len > 15)\n          wbits(out, p, clct[i] >>> 5 & 127), p += clct[i] >>> 12;\n      }\n    }\n  } else {\n    lm = flm, ll = flt, dm = fdm, dl = fdt;\n  }\n  for (var i = 0; i < li; ++i) {\n    if (syms[i] > 255) {\n      var len = syms[i] >>> 18 & 31;\n      wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n      if (len > 7)\n        wbits(out, p, syms[i] >>> 23 & 31), p += fleb[len];\n      var dst = syms[i] & 31;\n      wbits16(out, p, dm[dst]), p += dl[dst];\n      if (dst > 3)\n        wbits16(out, p, syms[i] >>> 5 & 8191), p += fdeb[dst];\n    } else {\n      wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n    }\n  }\n  wbits16(out, p, lm[256]);\n  return p + ll[256];\n};\nvar deo = /* @__PURE__ */ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\nvar dflt = function(dat, lvl, plvl, pre, post, lst) {\n  var s = dat.length;\n  var o = new u8(pre + s + 5 * (1 + Math.floor(s / 7e3)) + post);\n  var w = o.subarray(pre, o.length - post);\n  var pos = 0;\n  if (!lvl || s < 8) {\n    for (var i = 0; i <= s; i += 65535) {\n      var e = i + 65535;\n      if (e < s) {\n        pos = wfblk(w, pos, dat.subarray(i, e));\n      } else {\n        w[i] = lst;\n        pos = wfblk(w, pos, dat.subarray(i, s));\n      }\n    }\n  } else {\n    var opt = deo[lvl - 1];\n    var n = opt >>> 13, c = opt & 8191;\n    var msk_1 = (1 << plvl) - 1;\n    var prev = new u16(32768), head = new u16(msk_1 + 1);\n    var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n    var hsh = function(i2) {\n      return (dat[i2] ^ dat[i2 + 1] << bs1_1 ^ dat[i2 + 2] << bs2_1) & msk_1;\n    };\n    var syms = new u32(25e3);\n    var lf = new u16(288), df = new u16(32);\n    var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n    for (; i < s; ++i) {\n      var hv = hsh(i);\n      var imod = i & 32767;\n      var pimod = head[hv];\n      prev[imod] = pimod;\n      head[hv] = imod;\n      if (wi <= i) {\n        var rem = s - i;\n        if ((lc_1 > 7e3 || li > 24576) && rem > 423) {\n          pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n          li = lc_1 = eb = 0, bs = i;\n          for (var j = 0; j < 286; ++j)\n            lf[j] = 0;\n          for (var j = 0; j < 30; ++j)\n            df[j] = 0;\n        }\n        var l = 2, d = 0, ch_1 = c, dif = imod - pimod & 32767;\n        if (rem > 2 && hv == hsh(i - dif)) {\n          var maxn = Math.min(n, rem) - 1;\n          var maxd = Math.min(32767, i);\n          var ml = Math.min(258, rem);\n          while (dif <= maxd && --ch_1 && imod != pimod) {\n            if (dat[i + l] == dat[i + l - dif]) {\n              var nl = 0;\n              for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                ;\n              if (nl > l) {\n                l = nl, d = dif;\n                if (nl > maxn)\n                  break;\n                var mmd = Math.min(dif, nl - 2);\n                var md = 0;\n                for (var j = 0; j < mmd; ++j) {\n                  var ti = i - dif + j + 32768 & 32767;\n                  var pti = prev[ti];\n                  var cd = ti - pti + 32768 & 32767;\n                  if (cd > md)\n                    md = cd, pimod = ti;\n                }\n              }\n            }\n            imod = pimod, pimod = prev[imod];\n            dif += imod - pimod + 32768 & 32767;\n          }\n        }\n        if (d) {\n          syms[li++] = 268435456 | revfl[l] << 18 | revfd[d];\n          var lin = revfl[l] & 31, din = revfd[d] & 31;\n          eb += fleb[lin] + fdeb[din];\n          ++lf[257 + lin];\n          ++df[din];\n          wi = i + l;\n          ++lc_1;\n        } else {\n          syms[li++] = dat[i];\n          ++lf[dat[i]];\n        }\n      }\n    }\n    pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n  }\n  return slc(o, 0, pre + shft(pos) + post);\n};\nvar adler = function() {\n  var a = 1, b = 0;\n  return {\n    p: function(d) {\n      var n = a, m = b;\n      var l = d.length;\n      for (var i = 0; i != l; ) {\n        var e = Math.min(i + 5552, l);\n        for (; i < e; ++i)\n          n += d[i], m += n;\n        n %= 65521, m %= 65521;\n      }\n      a = n, b = m;\n    },\n    d: function() {\n      return (a >>> 8 << 16 | (b & 255) << 8 | b >>> 8) + ((a & 255) << 23) * 2;\n    }\n  };\n};\nvar dopt = function(dat, opt, pre, post, st) {\n  return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 12 + opt.mem, pre, post, !st);\n};\nvar wbytes = function(d, b, v) {\n  for (; v; ++b)\n    d[b] = v, v >>>= 8;\n};\nvar zlh = function(c, o) {\n  var lv = o.level, fl2 = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n  c[0] = 120, c[1] = fl2 << 6 | (fl2 ? 32 - 2 * fl2 : 1);\n};\nvar zlv = function(d) {\n  if ((d[0] & 15) != 8 || d[0] >>> 4 > 7 || (d[0] << 8 | d[1]) % 31)\n    throw \"invalid zlib data\";\n  if (d[1] & 32)\n    throw \"invalid zlib data: preset dictionaries not supported\";\n};\nfunction zlibSync(data, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n  var a = adler();\n  a.p(data);\n  var d = dopt(data, opts, 2, 4);\n  return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\nfunction unzlibSync(data, out) {\n  return inflt((zlv(data), data.subarray(2, -4)), out);\n}\nfunction strToU8(str, latin1) {\n  var l = str.length;\n  if (!latin1 && typeof TextEncoder != \"undefined\")\n    return new TextEncoder().encode(str);\n  var ar = new u8(str.length + (str.length >>> 1));\n  var ai = 0;\n  var w = function(v) {\n    ar[ai++] = v;\n  };\n  for (var i = 0; i < l; ++i) {\n    if (ai + 5 > ar.length) {\n      var n = new u8(ai + 8 + (l - i << 1));\n      n.set(ar);\n      ar = n;\n    }\n    var c = str.charCodeAt(i);\n    if (c < 128 || latin1)\n      w(c);\n    else if (c < 2048)\n      w(192 | c >>> 6), w(128 | c & 63);\n    else if (c > 55295 && c < 57344)\n      c = 65536 + (c & 1023 << 10) | str.charCodeAt(++i) & 1023, w(240 | c >>> 18), w(128 | c >>> 12 & 63), w(128 | c >>> 6 & 63), w(128 | c & 63);\n    else\n      w(224 | c >>> 12), w(128 | c >>> 6 & 63), w(128 | c & 63);\n  }\n  return slc(ar, 0, ai);\n}\nfunction strFromU8(dat, latin1) {\n  var r = \"\";\n  if (!latin1 && typeof TextDecoder != \"undefined\")\n    return new TextDecoder().decode(dat);\n  for (var i = 0; i < dat.length; ) {\n    var c = dat[i++];\n    if (c < 128 || latin1)\n      r += String.fromCharCode(c);\n    else if (c < 224)\n      r += String.fromCharCode((c & 31) << 6 | dat[i++] & 63);\n    else if (c < 240)\n      r += String.fromCharCode((c & 15) << 12 | (dat[i++] & 63) << 6 | dat[i++] & 63);\n    else\n      c = ((c & 15) << 18 | (dat[i++] & 63) << 12 | (dat[i++] & 63) << 6 | dat[i++] & 63) - 65536, r += String.fromCharCode(55296 | c >> 10, 56320 | c & 1023);\n  }\n  return r;\n}\nconst MARK = \"v1\";\nexport {\n  MARK as M,\n  strToU8 as a,\n  strFromU8 as s,\n  unzlibSync as u,\n  zlibSync as z\n};\n//# sourceMappingURL=base-BrE4jft0.js.map\n","import { M as MARK, s as strFromU8, z as zlibSync, a as strToU8 } from \"./base-BrE4jft0.js\";\nconst pack = (event) => {\n  const _e = {\n    ...event,\n    v: MARK\n  };\n  return strFromU8(zlibSync(strToU8(JSON.stringify(_e))), true);\n};\nexport {\n  pack\n};\n//# sourceMappingURL=pack.js.map\n","import { getGlobalScope } from '@amplitude/analytics-core';\nimport { pack } from '@amplitude/rrweb-packer';\nvar DEFAULT_TIMEOUT = 2000;\nvar EventCompressor = /** @class */ (function () {\n    function EventCompressor(eventsManager, config, deviceId, workerScriptInternal) {\n        var _this = this;\n        var _a, _b, _c;\n        this.taskQueue = [];\n        this.isProcessing = false;\n        this.compressEvent = function (event) {\n            var packedEvent = pack(event);\n            return JSON.stringify(packedEvent);\n        };\n        this.addCompressedEventToManager = function (compressedEvent, sessionId) {\n            if (_this.eventsManager && _this.deviceId) {\n                _this.eventsManager.addEvent({\n                    event: { type: 'replay', data: compressedEvent },\n                    sessionId: sessionId,\n                    deviceId: _this.deviceId,\n                });\n            }\n        };\n        this.addCompressedEvent = function (event, sessionId) {\n            if (_this.worker) {\n                // This indirectly compresses the event.\n                _this.worker.postMessage({ event: event, sessionId: sessionId });\n            }\n            else {\n                var compressedEvent = _this.compressEvent(event);\n                _this.addCompressedEventToManager(compressedEvent, sessionId);\n            }\n        };\n        this.terminate = function () {\n            var _a;\n            (_a = _this.worker) === null || _a === void 0 ? void 0 : _a.terminate();\n        };\n        var globalScope = getGlobalScope();\n        this.canUseIdleCallback = globalScope && 'requestIdleCallback' in globalScope;\n        this.eventsManager = eventsManager;\n        this.config = config;\n        this.deviceId = deviceId;\n        this.timeout = ((_a = config.performanceConfig) === null || _a === void 0 ? void 0 : _a.timeout) || DEFAULT_TIMEOUT;\n        // These two lines will be changed at compile time.\n        var replace = {};\n        // This next line is going to be ridiculously hard to cover in unit tests, ignoring.\n        /* istanbul ignore next */\n        var workerScript = (_b = replace.COMPRESSION_WEBWORKER_BODY) !== null && _b !== void 0 ? _b : workerScriptInternal;\n        if (((_c = this.config.experimental) === null || _c === void 0 ? void 0 : _c.useWebWorker) && globalScope && globalScope.Worker && workerScript) {\n            config.loggerProvider.log('[Experimental] Enabling web worker for compression');\n            var worker = new Worker(URL.createObjectURL(new Blob([workerScript], { type: 'application/javascript' })));\n            worker.onerror = function (e) {\n                config.loggerProvider.error(e);\n            };\n            worker.onmessage = function (e) {\n                var _a = e.data, compressedEvent = _a.compressedEvent, sessionId = _a.sessionId;\n                _this.addCompressedEventToManager(compressedEvent, sessionId);\n            };\n            this.worker = worker;\n        }\n    }\n    // Schedule processing during idle time\n    EventCompressor.prototype.scheduleIdleProcessing = function () {\n        var _this = this;\n        if (!this.isProcessing) {\n            this.isProcessing = true;\n            requestIdleCallback(function (idleDeadline) {\n                _this.processQueue(idleDeadline);\n            }, { timeout: this.timeout });\n        }\n    };\n    // Add an event to the task queue if idle callback is supported or compress the event directly\n    EventCompressor.prototype.enqueueEvent = function (event, sessionId) {\n        var _a;\n        if (this.canUseIdleCallback && ((_a = this.config.performanceConfig) === null || _a === void 0 ? void 0 : _a.enabled)) {\n            this.config.loggerProvider.debug('Enqueuing event for processing during idle time.');\n            this.taskQueue.push({ event: event, sessionId: sessionId });\n            this.scheduleIdleProcessing();\n        }\n        else {\n            this.config.loggerProvider.debug('Processing event without idle callback.');\n            this.addCompressedEvent(event, sessionId);\n        }\n    };\n    // Process the task queue during idle time\n    EventCompressor.prototype.processQueue = function (idleDeadline) {\n        var _this = this;\n        // Process tasks while there's idle time or until the max number of tasks is reached\n        while (this.taskQueue.length > 0 && (idleDeadline.timeRemaining() > 0 || idleDeadline.didTimeout)) {\n            var task = this.taskQueue.shift();\n            if (task) {\n                var event_1 = task.event, sessionId = task.sessionId;\n                this.addCompressedEvent(event_1, sessionId);\n            }\n        }\n        // If there are still tasks in the queue, schedule the next idle callback\n        if (this.taskQueue.length > 0) {\n            requestIdleCallback(function (idleDeadline) {\n                _this.processQueue(idleDeadline);\n            }, { timeout: this.timeout });\n        }\n        else {\n            this.isProcessing = false;\n        }\n    };\n    return EventCompressor;\n}());\nexport { EventCompressor };\n//# sourceMappingURL=event-compressor.js.map","export var UNEXPECTED_ERROR_MESSAGE = 'Unexpected error occurred';\nexport var UNEXPECTED_NETWORK_ERROR_MESSAGE = 'Network error occurred, event batch rejected';\nexport var MAX_RETRIES_EXCEEDED_MESSAGE = 'Session replay event batch rejected due to exceeded retry count';\nexport var STORAGE_FAILURE = 'Failed to store session replay events in IndexedDB';\nexport var MISSING_DEVICE_ID_MESSAGE = 'Session replay event batch not sent due to missing device ID';\nexport var MISSING_API_KEY_MESSAGE = 'Session replay event batch not sent due to missing api key';\n//# sourceMappingURL=messages.js.map","// Autogenerated by `yarn version-file`. DO NOT EDIT\nexport var VERSION = '1.28.9';\n//# sourceMappingURL=version.js.map","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { BaseTransport, Status } from '@amplitude/analytics-core';\nimport { getCurrentUrl, getServerUrl } from './helpers';\nimport { MAX_RETRIES_EXCEEDED_MESSAGE, MISSING_API_KEY_MESSAGE, MISSING_DEVICE_ID_MESSAGE, UNEXPECTED_ERROR_MESSAGE, UNEXPECTED_NETWORK_ERROR_MESSAGE, } from './messages';\nimport { VERSION } from './version';\nimport { MAX_URL_LENGTH, KB_SIZE } from './constants';\nvar SessionReplayTrackDestination = /** @class */ (function () {\n    function SessionReplayTrackDestination(_a) {\n        var trackServerUrl = _a.trackServerUrl, loggerProvider = _a.loggerProvider, payloadBatcher = _a.payloadBatcher;\n        this.storageKey = '';\n        this.retryTimeout = 1000;\n        this.scheduled = null;\n        this.queue = [];\n        this.loggerProvider = loggerProvider;\n        this.payloadBatcher = payloadBatcher ? payloadBatcher : function (payload) { return payload; };\n        this.trackServerUrl = trackServerUrl;\n    }\n    SessionReplayTrackDestination.prototype.sendEventsList = function (destinationData) {\n        this.addToQueue(__assign(__assign({}, destinationData), { attempts: 0, timeout: 0 }));\n    };\n    SessionReplayTrackDestination.prototype.addToQueue = function () {\n        var _this = this;\n        var list = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            list[_i] = arguments[_i];\n        }\n        var tryable = list.filter(function (context) {\n            if (context.attempts < (context.flushMaxRetries || 0)) {\n                context.attempts += 1;\n                return true;\n            }\n            _this.completeRequest({\n                context: context,\n                err: MAX_RETRIES_EXCEEDED_MESSAGE,\n            });\n            return false;\n        });\n        tryable.forEach(function (context) {\n            _this.queue = _this.queue.concat(context);\n            if (context.timeout === 0) {\n                _this.schedule(0);\n                return;\n            }\n            setTimeout(function () {\n                context.timeout = 0;\n                _this.schedule(0);\n            }, context.timeout);\n        });\n    };\n    SessionReplayTrackDestination.prototype.schedule = function (timeout) {\n        var _this = this;\n        if (this.scheduled)\n            return;\n        this.scheduled = setTimeout(function () {\n            void _this.flush(true).then(function () {\n                if (_this.queue.length > 0) {\n                    _this.schedule(timeout);\n                }\n            });\n        }, timeout);\n    };\n    SessionReplayTrackDestination.prototype.flush = function (useRetry) {\n        if (useRetry === void 0) { useRetry = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            var list, later;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        list = [];\n                        later = [];\n                        this.queue.forEach(function (context) { return (context.timeout === 0 ? list.push(context) : later.push(context)); });\n                        this.queue = later;\n                        if (this.scheduled) {\n                            clearTimeout(this.scheduled);\n                            this.scheduled = null;\n                        }\n                        return [4 /*yield*/, Promise.all(list.map(function (context) { return _this.send(context, useRetry); }))];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SessionReplayTrackDestination.prototype.send = function (context, useRetry) {\n        var _a, _b;\n        if (useRetry === void 0) { useRetry = true; }\n        return __awaiter(this, void 0, void 0, function () {\n            var apiKey, deviceId, url, version, sampleRate, urlParams, sessionReplayLibrary, payload, options, serverUrl, res, responseBody, e_1;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        apiKey = context.apiKey;\n                        if (!apiKey) {\n                            return [2 /*return*/, this.completeRequest({ context: context, err: MISSING_API_KEY_MESSAGE })];\n                        }\n                        deviceId = context.deviceId;\n                        if (!deviceId) {\n                            return [2 /*return*/, this.completeRequest({ context: context, err: MISSING_DEVICE_ID_MESSAGE })];\n                        }\n                        url = getCurrentUrl();\n                        version = VERSION;\n                        sampleRate = context.sampleRate;\n                        urlParams = new URLSearchParams({\n                            device_id: deviceId,\n                            session_id: \"\".concat(context.sessionId),\n                            type: \"\".concat(context.type),\n                        });\n                        sessionReplayLibrary = \"\".concat(((_a = context.version) === null || _a === void 0 ? void 0 : _a.type) || 'standalone', \"/\").concat(((_b = context.version) === null || _b === void 0 ? void 0 : _b.version) || version);\n                        payload = this.payloadBatcher({\n                            version: 1,\n                            events: context.events,\n                        });\n                        if (payload.events.length === 0) {\n                            this.completeRequest({ context: context });\n                            return [2 /*return*/];\n                        }\n                        _c.label = 1;\n                    case 1:\n                        _c.trys.push([1, 3, , 4]);\n                        options = {\n                            headers: {\n                                'Content-Type': 'application/json',\n                                Accept: '*/*',\n                                Authorization: \"Bearer \".concat(apiKey),\n                                'X-Client-Version': version,\n                                'X-Client-Library': sessionReplayLibrary,\n                                'X-Client-Url': url.substring(0, MAX_URL_LENGTH),\n                                'X-Client-Sample-Rate': \"\".concat(sampleRate),\n                            },\n                            body: JSON.stringify(payload),\n                            method: 'POST',\n                        };\n                        serverUrl = \"\".concat(getServerUrl(context.serverZone, this.trackServerUrl), \"?\").concat(urlParams.toString());\n                        return [4 /*yield*/, fetch(serverUrl, options)];\n                    case 2:\n                        res = _c.sent();\n                        if (res === null) {\n                            this.completeRequest({ context: context, err: UNEXPECTED_ERROR_MESSAGE });\n                            return [2 /*return*/];\n                        }\n                        if (!useRetry) {\n                            responseBody = '';\n                            try {\n                                responseBody = JSON.stringify(res.body, null, 2);\n                            }\n                            catch (_d) {\n                                // to avoid crash, but don't care about the error, add comment to avoid empty block lint error\n                            }\n                            this.completeRequest({ context: context, success: \"\".concat(res.status, \": \").concat(responseBody) });\n                        }\n                        else {\n                            this.handleReponse(res.status, context);\n                        }\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _c.sent();\n                        this.completeRequest({ context: context, err: e_1 });\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SessionReplayTrackDestination.prototype.handleReponse = function (status, context) {\n        var parsedStatus = new BaseTransport().buildStatus(status);\n        switch (parsedStatus) {\n            case Status.Success:\n                this.handleSuccessResponse(context);\n                break;\n            case Status.Failed:\n                this.handleOtherResponse(context);\n                break;\n            default:\n                this.completeRequest({ context: context, err: UNEXPECTED_NETWORK_ERROR_MESSAGE });\n        }\n    };\n    SessionReplayTrackDestination.prototype.handleSuccessResponse = function (context) {\n        var sizeOfEventsList = Math.round(new Blob(context.events).size / KB_SIZE);\n        this.completeRequest({\n            context: context,\n            success: \"Session replay event batch tracked successfully for session id \".concat(context.sessionId, \", size of events: \").concat(sizeOfEventsList, \" KB\"),\n        });\n    };\n    SessionReplayTrackDestination.prototype.handleOtherResponse = function (context) {\n        this.addToQueue(__assign(__assign({}, context), { timeout: context.attempts * this.retryTimeout }));\n    };\n    SessionReplayTrackDestination.prototype.completeRequest = function (_a) {\n        var context = _a.context, err = _a.err, success = _a.success;\n        void context.onComplete();\n        if (err) {\n            this.loggerProvider.warn(err);\n        }\n        else if (success) {\n            this.loggerProvider.log(success);\n        }\n    };\n    return SessionReplayTrackDestination;\n}());\nexport { SessionReplayTrackDestination };\n//# sourceMappingURL=track-destination.js.map","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst transactionDoneMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(this.request);\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nconst advanceMethodProps = ['continue', 'continuePrimaryKey', 'advance'];\nconst methodMap = {};\nconst advanceResults = new WeakMap();\nconst ittrProxiedCursorToOriginalProxy = new WeakMap();\nconst cursorIteratorTraps = {\n    get(target, prop) {\n        if (!advanceMethodProps.includes(prop))\n            return target[prop];\n        let cachedFunc = methodMap[prop];\n        if (!cachedFunc) {\n            cachedFunc = methodMap[prop] = function (...args) {\n                advanceResults.set(this, ittrProxiedCursorToOriginalProxy.get(this)[prop](...args));\n            };\n        }\n        return cachedFunc;\n    },\n};\nasync function* iterate(...args) {\n    // tslint:disable-next-line:no-this-assignment\n    let cursor = this;\n    if (!(cursor instanceof IDBCursor)) {\n        cursor = await cursor.openCursor(...args);\n    }\n    if (!cursor)\n        return;\n    cursor = cursor;\n    const proxiedCursor = new Proxy(cursor, cursorIteratorTraps);\n    ittrProxiedCursorToOriginalProxy.set(proxiedCursor, cursor);\n    // Map this double-proxy back to the original, so other cursor methods work.\n    reverseTransformCache.set(proxiedCursor, unwrap(cursor));\n    while (cursor) {\n        yield proxiedCursor;\n        // If one of the advancing methods was not called, call continue().\n        cursor = await (advanceResults.get(proxiedCursor) || cursor.continue());\n        advanceResults.delete(proxiedCursor);\n    }\n}\nfunction isIteratorProp(target, prop) {\n    return ((prop === Symbol.asyncIterator &&\n        instanceOfAny(target, [IDBIndex, IDBObjectStore, IDBCursor])) ||\n        (prop === 'iterate' && instanceOfAny(target, [IDBIndex, IDBObjectStore])));\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get(target, prop, receiver) {\n        if (isIteratorProp(target, prop))\n            return iterate;\n        return oldTraps.get(target, prop, receiver);\n    },\n    has(target, prop) {\n        return isIteratorProp(target, prop) || oldTraps.has(target, prop);\n    },\n}));\n\nexport { deleteDB, openDB, unwrap, wrap };\n","import { __values } from \"tslib\";\nimport { MAX_EVENT_LIST_SIZE, MAX_INTERVAL, MIN_INTERVAL } from '../constants';\nvar BaseEventsStore = /** @class */ (function () {\n    function BaseEventsStore(args) {\n        var _this = this;\n        var _a, _b, _c;\n        this.minInterval = MIN_INTERVAL;\n        this.maxInterval = MAX_INTERVAL;\n        this.maxPersistedEventsSize = MAX_EVENT_LIST_SIZE;\n        this.interval = this.minInterval;\n        this._timeAtLastSplit = Date.now(); // Initialize this so we have a point of comparison when events are recorded\n        /**\n         * Determines whether to send the events list to the backend and start a new\n         * empty events list, based on the size of the list as well as the last time sent\n         * @param nextEventString\n         * @returns boolean\n         */\n        this.shouldSplitEventsList = function (events, nextEventString) {\n            var sizeOfNextEvent = _this.getStringSize(nextEventString);\n            var sizeOfEventsList = _this.getEventsArraySize(events);\n            // Check size constraint first (most likely to trigger)\n            if (sizeOfEventsList + sizeOfNextEvent >= _this.maxPersistedEventsSize) {\n                return true;\n            }\n            if (Date.now() - _this.timeAtLastSplit > _this.interval && events.length) {\n                _this.interval = Math.min(_this.maxInterval, _this.interval + _this.minInterval);\n                _this._timeAtLastSplit = Date.now();\n                return true;\n            }\n            return false;\n        };\n        this.loggerProvider = args.loggerProvider;\n        this.minInterval = (_a = args.minInterval) !== null && _a !== void 0 ? _a : this.minInterval;\n        this.maxInterval = (_b = args.maxInterval) !== null && _b !== void 0 ? _b : this.maxInterval;\n        this.maxPersistedEventsSize = (_c = args.maxPersistedEventsSize) !== null && _c !== void 0 ? _c : this.maxPersistedEventsSize;\n    }\n    Object.defineProperty(BaseEventsStore.prototype, \"timeAtLastSplit\", {\n        get: function () {\n            return this._timeAtLastSplit;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Calculates the character length of a string as size approximation\n     * Note: String length closely approximates byte size for most content\n     */\n    BaseEventsStore.prototype.getStringSize = function (str) {\n        return str.length;\n    };\n    /**\n     * Calculates the total character length of events array\n     * Accounts for JSON serialization overhead when sent to backend\n     */\n    BaseEventsStore.prototype.getEventsArraySize = function (events) {\n        var e_1, _a;\n        var totalSize = 0;\n        try {\n            for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n                var event_1 = events_1_1.value;\n                totalSize += this.getStringSize(event_1);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (events_1_1 && !events_1_1.done && (_a = events_1.return)) _a.call(events_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        // Additional overhead from using length instead of byte size\n        // - Array brackets: [] = 2 characters\n        // - Commas between events: events.length - 1\n        // - Double quotes around each event: events.length * 2\n        var overhead = 2 + Math.max(0, events.length - 1) + events.length * 2;\n        return totalSize + overhead;\n    };\n    return BaseEventsStore;\n}());\nexport { BaseEventsStore };\n//# sourceMappingURL=base-events-store.js.map","export var RecordingStatus;\n(function (RecordingStatus) {\n    RecordingStatus[\"RECORDING\"] = \"recording\";\n    RecordingStatus[\"SENT\"] = \"sent\";\n})(RecordingStatus || (RecordingStatus = {}));\n//# sourceMappingURL=legacy-idb-types.js.map","import { __assign, __awaiter, __extends, __generator, __read, __spreadArray, __values } from \"tslib\";\nimport { STORAGE_PREFIX, getGlobalScope } from '@amplitude/analytics-core';\nimport { openDB } from 'idb';\nimport { STORAGE_FAILURE } from '../messages';\nimport { BaseEventsStore } from './base-events-store';\nimport { RecordingStatus } from './legacy-idb-types';\nexport var currentSequenceKey = 'sessionCurrentSequence';\nexport var sequencesToSendKey = 'sequencesToSend';\nexport var remoteConfigKey = 'remoteConfig';\nexport var keyValDatabaseExists = function () {\n    var globalScope = getGlobalScope();\n    return new Promise(function (resolve, reject) {\n        if (!globalScope) {\n            return reject(new Error('Global scope not found'));\n        }\n        if (!globalScope.indexedDB) {\n            return reject(new Error('Session Replay: cannot find indexedDB'));\n        }\n        try {\n            var request_1 = globalScope.indexedDB.open('keyval-store');\n            request_1.onupgradeneeded = function () {\n                if (request_1.result.version === 1) {\n                    request_1.result.close();\n                    request_1.transaction && request_1.transaction.abort();\n                    globalScope.indexedDB.deleteDatabase('keyval-store');\n                    resolve();\n                }\n            };\n            request_1.onsuccess = function () {\n                resolve(request_1.result);\n            };\n            request_1.onerror = function () {\n                reject(request_1.error);\n            };\n        }\n        catch (e) {\n            reject(e);\n        }\n    });\n};\nvar batchPromiseAll = function (promiseBatch) { return __awaiter(void 0, void 0, void 0, function () {\n    var chunkSize, batch;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!(promiseBatch.length > 0)) return [3 /*break*/, 2];\n                chunkSize = 10;\n                batch = promiseBatch.splice(0, chunkSize);\n                return [4 /*yield*/, Promise.all(batch)];\n            case 1:\n                _a.sent();\n                return [3 /*break*/, 0];\n            case 2: return [2 /*return*/];\n        }\n    });\n}); };\nexport var defineObjectStores = function (db) {\n    var sequencesStore;\n    var currentSequenceStore;\n    if (!db.objectStoreNames.contains(currentSequenceKey)) {\n        currentSequenceStore = db.createObjectStore(currentSequenceKey, {\n            keyPath: 'sessionId',\n        });\n    }\n    if (!db.objectStoreNames.contains(sequencesToSendKey)) {\n        sequencesStore = db.createObjectStore(sequencesToSendKey, {\n            keyPath: 'sequenceId',\n            autoIncrement: true,\n        });\n        sequencesStore.createIndex('sessionId', 'sessionId');\n    }\n    return {\n        sequencesStore: sequencesStore,\n        currentSequenceStore: currentSequenceStore,\n    };\n};\nexport var createStore = function (dbName) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, openDB(dbName, 1, {\n                    upgrade: defineObjectStores,\n                })];\n            case 1: return [2 /*return*/, _a.sent()];\n        }\n    });\n}); };\nvar SessionReplayEventsIDBStore = /** @class */ (function (_super) {\n    __extends(SessionReplayEventsIDBStore, _super);\n    function SessionReplayEventsIDBStore(args) {\n        var _this = _super.call(this, args) || this;\n        _this.getSequencesToSend = function () { return __awaiter(_this, void 0, void 0, function () {\n            var sequences, cursor, _a, sessionId, events, e_1;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 5, , 6]);\n                        sequences = [];\n                        return [4 /*yield*/, this.db.transaction('sequencesToSend').store.openCursor()];\n                    case 1:\n                        cursor = _b.sent();\n                        _b.label = 2;\n                    case 2:\n                        if (!cursor) return [3 /*break*/, 4];\n                        _a = cursor.value, sessionId = _a.sessionId, events = _a.events;\n                        sequences.push({\n                            events: events,\n                            sequenceId: cursor.key,\n                            sessionId: sessionId,\n                        });\n                        return [4 /*yield*/, cursor.continue()];\n                    case 3:\n                        cursor = _b.sent();\n                        return [3 /*break*/, 2];\n                    case 4: return [2 /*return*/, sequences];\n                    case 5:\n                        e_1 = _b.sent();\n                        this.loggerProvider.warn(\"\".concat(STORAGE_FAILURE, \": \").concat(e_1));\n                        return [3 /*break*/, 6];\n                    case 6: return [2 /*return*/, undefined];\n                }\n            });\n        }); };\n        _this.storeCurrentSequence = function (sessionId) { return __awaiter(_this, void 0, void 0, function () {\n            var currentSequenceData, sequenceId, e_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 4, , 5]);\n                        return [4 /*yield*/, this.db.get(currentSequenceKey, sessionId)];\n                    case 1:\n                        currentSequenceData = _a.sent();\n                        if (!currentSequenceData) {\n                            return [2 /*return*/, undefined];\n                        }\n                        return [4 /*yield*/, this.db.put(sequencesToSendKey, {\n                                sessionId: sessionId,\n                                events: currentSequenceData.events,\n                            })];\n                    case 2:\n                        sequenceId = _a.sent();\n                        return [4 /*yield*/, this.db.put(currentSequenceKey, {\n                                sessionId: sessionId,\n                                events: [],\n                            })];\n                    case 3:\n                        _a.sent();\n                        return [2 /*return*/, __assign(__assign({}, currentSequenceData), { sessionId: sessionId, sequenceId: sequenceId })];\n                    case 4:\n                        e_2 = _a.sent();\n                        this.loggerProvider.warn(\"\".concat(STORAGE_FAILURE, \": \").concat(e_2));\n                        return [3 /*break*/, 5];\n                    case 5: return [2 /*return*/, undefined];\n                }\n            });\n        }); };\n        _this.addEventToCurrentSequence = function (sessionId, event) { return __awaiter(_this, void 0, void 0, function () {\n            var tx, sequenceEvents, eventsToSend, updatedEvents, sequenceId, e_3;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 10, , 11]);\n                        tx = this.db.transaction(currentSequenceKey, 'readwrite');\n                        return [4 /*yield*/, tx.store.get(sessionId)];\n                    case 1:\n                        sequenceEvents = _a.sent();\n                        if (!!sequenceEvents) return [3 /*break*/, 3];\n                        return [4 /*yield*/, tx.store.put({ sessionId: sessionId, events: [event] })];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                    case 3:\n                        eventsToSend = void 0;\n                        if (!this.shouldSplitEventsList(sequenceEvents.events, event)) return [3 /*break*/, 5];\n                        eventsToSend = sequenceEvents.events;\n                        // set store to empty array\n                        return [4 /*yield*/, tx.store.put({ sessionId: sessionId, events: [event] })];\n                    case 4:\n                        // set store to empty array\n                        _a.sent();\n                        return [3 /*break*/, 7];\n                    case 5:\n                        updatedEvents = sequenceEvents.events.concat(event);\n                        return [4 /*yield*/, tx.store.put({ sessionId: sessionId, events: updatedEvents })];\n                    case 6:\n                        _a.sent();\n                        _a.label = 7;\n                    case 7: return [4 /*yield*/, tx.done];\n                    case 8:\n                        _a.sent();\n                        if (!eventsToSend) {\n                            return [2 /*return*/, undefined];\n                        }\n                        return [4 /*yield*/, this.storeSendingEvents(sessionId, eventsToSend)];\n                    case 9:\n                        sequenceId = _a.sent();\n                        if (!sequenceId) {\n                            return [2 /*return*/, undefined];\n                        }\n                        return [2 /*return*/, {\n                                events: eventsToSend,\n                                sessionId: sessionId,\n                                sequenceId: sequenceId,\n                            }];\n                    case 10:\n                        e_3 = _a.sent();\n                        this.loggerProvider.warn(\"\".concat(STORAGE_FAILURE, \": \").concat(e_3));\n                        return [3 /*break*/, 11];\n                    case 11: return [2 /*return*/, undefined];\n                }\n            });\n        }); };\n        _this.storeSendingEvents = function (sessionId, events) { return __awaiter(_this, void 0, void 0, function () {\n            var sequenceId, e_4;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.db.put(sequencesToSendKey, {\n                                sessionId: sessionId,\n                                events: events,\n                            })];\n                    case 1:\n                        sequenceId = _a.sent();\n                        return [2 /*return*/, sequenceId];\n                    case 2:\n                        e_4 = _a.sent();\n                        this.loggerProvider.warn(\"\".concat(STORAGE_FAILURE, \": \").concat(e_4));\n                        return [3 /*break*/, 3];\n                    case 3: return [2 /*return*/, undefined];\n                }\n            });\n        }); };\n        _this.cleanUpSessionEventsStore = function (_sessionId, sequenceId) { return __awaiter(_this, void 0, void 0, function () {\n            var e_5;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!sequenceId) {\n                            return [2 /*return*/];\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.db.delete(sequencesToSendKey, sequenceId)];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_5 = _a.sent();\n                        this.loggerProvider.warn(\"\".concat(STORAGE_FAILURE, \": \").concat(e_5));\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        }); };\n        _this.transitionFromKeyValStore = function (sessionId) { return __awaiter(_this, void 0, void 0, function () {\n            var keyValDb, transitionCurrentSessionSequences_1, storageKey, getAllRequest_1, transitionPromise, globalScope, e_6, e_7;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 6, , 7]);\n                        return [4 /*yield*/, keyValDatabaseExists()];\n                    case 1:\n                        keyValDb = _a.sent();\n                        if (!keyValDb) {\n                            return [2 /*return*/];\n                        }\n                        transitionCurrentSessionSequences_1 = function (numericSessionId, sessionStore) { return __awaiter(_this, void 0, void 0, function () {\n                            var currentSessionSequences, promisesToBatch;\n                            var _this = this;\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        currentSessionSequences = sessionStore.sessionSequences;\n                                        promisesToBatch = [];\n                                        Object.keys(currentSessionSequences).forEach(function (sequenceId) {\n                                            var numericSequenceId = parseInt(sequenceId, 10);\n                                            var sequence = currentSessionSequences[numericSequenceId];\n                                            if (numericSequenceId === sessionStore.currentSequenceId) {\n                                                var eventAddPromises = sequence.events.map(function (event) { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\n                                                    return [2 /*return*/, this.addEventToCurrentSequence(numericSessionId, event)];\n                                                }); }); });\n                                                promisesToBatch.push.apply(promisesToBatch, __spreadArray([], __read(eventAddPromises), false));\n                                            }\n                                            else if (sequence.status !== RecordingStatus.SENT) {\n                                                promisesToBatch.push(_this.storeSendingEvents(numericSessionId, sequence.events));\n                                            }\n                                        });\n                                        return [4 /*yield*/, batchPromiseAll(promisesToBatch)];\n                                    case 1:\n                                        _a.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); };\n                        storageKey = \"\".concat(STORAGE_PREFIX, \"_\").concat(this.apiKey.substring(0, 10));\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        getAllRequest_1 = keyValDb.transaction('keyval').objectStore('keyval').getAll(storageKey);\n                        transitionPromise = new Promise(function (resolve) {\n                            getAllRequest_1.onsuccess = function (e) { return __awaiter(_this, void 0, void 0, function () {\n                                var storedReplaySessionContextList, storedReplaySessionContexts, promisesToBatch_1;\n                                var _this = this;\n                                return __generator(this, function (_a) {\n                                    switch (_a.label) {\n                                        case 0:\n                                            storedReplaySessionContextList = e && e.target.result;\n                                            storedReplaySessionContexts = storedReplaySessionContextList && storedReplaySessionContextList[0];\n                                            if (!storedReplaySessionContexts) return [3 /*break*/, 2];\n                                            promisesToBatch_1 = [];\n                                            Object.keys(storedReplaySessionContexts).forEach(function (storedSessionId) {\n                                                var numericSessionId = parseInt(storedSessionId, 10);\n                                                var oldSessionStore = storedReplaySessionContexts[numericSessionId];\n                                                if (sessionId === numericSessionId) {\n                                                    promisesToBatch_1.push(transitionCurrentSessionSequences_1(numericSessionId, oldSessionStore));\n                                                }\n                                                else {\n                                                    var oldSessionSequences_1 = oldSessionStore.sessionSequences;\n                                                    Object.keys(oldSessionSequences_1).forEach(function (sequenceId) {\n                                                        var numericSequenceId = parseInt(sequenceId, 10);\n                                                        if (oldSessionSequences_1[numericSequenceId].status !== RecordingStatus.SENT) {\n                                                            promisesToBatch_1.push(_this.storeSendingEvents(numericSessionId, oldSessionSequences_1[numericSequenceId].events));\n                                                        }\n                                                    });\n                                                }\n                                            });\n                                            return [4 /*yield*/, batchPromiseAll(promisesToBatch_1)];\n                                        case 1:\n                                            _a.sent();\n                                            _a.label = 2;\n                                        case 2:\n                                            resolve();\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            }); };\n                        });\n                        return [4 /*yield*/, transitionPromise];\n                    case 3:\n                        _a.sent();\n                        globalScope = getGlobalScope();\n                        if (globalScope) {\n                            globalScope.indexedDB.deleteDatabase('keyval-store');\n                        }\n                        return [3 /*break*/, 5];\n                    case 4:\n                        e_6 = _a.sent();\n                        this.loggerProvider.warn(\"Failed to transition session replay events from keyval to new store: \".concat(e_6));\n                        return [3 /*break*/, 5];\n                    case 5: return [3 /*break*/, 7];\n                    case 6:\n                        e_7 = _a.sent();\n                        this.loggerProvider.warn(\"Failed to access keyval store: \".concat(e_7, \". For more information, visit: https://www.docs.developers.amplitude.com/session-replay/sdks/standalone/#indexeddb-best-practices\"));\n                        return [3 /*break*/, 7];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        }); };\n        _this.apiKey = args.apiKey;\n        _this.db = args.db;\n        return _this;\n    }\n    SessionReplayEventsIDBStore.new = function (type, args, sessionId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var dbSuffix, dbName, db, eventsIDBStore, e_8;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        dbSuffix = type === 'replay' ? '' : \"_\".concat(type);\n                        dbName = \"\".concat(args.apiKey.substring(0, 10), \"_amp_session_replay_events\").concat(dbSuffix);\n                        return [4 /*yield*/, createStore(dbName)];\n                    case 1:\n                        db = _a.sent();\n                        eventsIDBStore = new SessionReplayEventsIDBStore(__assign(__assign({}, args), { db: db }));\n                        return [4 /*yield*/, eventsIDBStore.transitionFromKeyValStore(sessionId)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/, eventsIDBStore];\n                    case 3:\n                        e_8 = _a.sent();\n                        args.loggerProvider.warn(\"\".concat(STORAGE_FAILURE, \": \").concat(e_8));\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SessionReplayEventsIDBStore.prototype.getCurrentSequenceEvents = function (sessionId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var events, allEvents, _a, _b, events, e_9_1;\n            var e_9, _c;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        if (!sessionId) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.db.get('sessionCurrentSequence', sessionId)];\n                    case 1:\n                        events = _d.sent();\n                        if (!events) {\n                            return [2 /*return*/, undefined];\n                        }\n                        return [2 /*return*/, [events]];\n                    case 2:\n                        allEvents = [];\n                        _d.label = 3;\n                    case 3:\n                        _d.trys.push([3, 8, 9, 10]);\n                        return [4 /*yield*/, this.db.getAll('sessionCurrentSequence')];\n                    case 4:\n                        _a = __values.apply(void 0, [_d.sent()]), _b = _a.next();\n                        _d.label = 5;\n                    case 5:\n                        if (!!_b.done) return [3 /*break*/, 7];\n                        events = _b.value;\n                        allEvents.push(events);\n                        _d.label = 6;\n                    case 6:\n                        _b = _a.next();\n                        return [3 /*break*/, 5];\n                    case 7: return [3 /*break*/, 10];\n                    case 8:\n                        e_9_1 = _d.sent();\n                        e_9 = { error: e_9_1 };\n                        return [3 /*break*/, 10];\n                    case 9:\n                        try {\n                            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                        }\n                        finally { if (e_9) throw e_9.error; }\n                        return [7 /*endfinally*/];\n                    case 10: return [2 /*return*/, allEvents];\n                }\n            });\n        });\n    };\n    return SessionReplayEventsIDBStore;\n}(BaseEventsStore));\nexport { SessionReplayEventsIDBStore };\n//# sourceMappingURL=events-idb-store.js.map","import { __awaiter, __extends, __generator, __read, __spreadArray } from \"tslib\";\nimport { BaseEventsStore } from './base-events-store';\nvar InMemoryEventsStore = /** @class */ (function (_super) {\n    __extends(InMemoryEventsStore, _super);\n    function InMemoryEventsStore() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.finalizedSequences = {};\n        _this.sequences = {};\n        _this.sequenceId = 0;\n        return _this;\n    }\n    InMemoryEventsStore.prototype.resetCurrentSequence = function (sessionId) {\n        this.sequences[sessionId] = [];\n    };\n    InMemoryEventsStore.prototype.addSequence = function (sessionId) {\n        var sequenceId = this.sequenceId++;\n        var events = __spreadArray([], __read(this.sequences[sessionId]), false);\n        this.finalizedSequences[sequenceId] = { sessionId: sessionId, events: events };\n        this.resetCurrentSequence(sessionId);\n        return { sequenceId: sequenceId, events: events, sessionId: sessionId };\n    };\n    InMemoryEventsStore.prototype.getSequencesToSend = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, Object.entries(this.finalizedSequences).map(function (_a) {\n                        var _b = __read(_a, 2), sequenceId = _b[0], _c = _b[1], sessionId = _c.sessionId, events = _c.events;\n                        return ({\n                            sequenceId: Number(sequenceId),\n                            sessionId: sessionId,\n                            events: events,\n                        });\n                    })];\n            });\n        });\n    };\n    InMemoryEventsStore.prototype.storeCurrentSequence = function (sessionId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (!this.sequences[sessionId]) {\n                    return [2 /*return*/, undefined];\n                }\n                return [2 /*return*/, this.addSequence(sessionId)];\n            });\n        });\n    };\n    InMemoryEventsStore.prototype.addEventToCurrentSequence = function (sessionId, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var sequenceReturn;\n            return __generator(this, function (_a) {\n                if (!this.sequences[sessionId]) {\n                    this.resetCurrentSequence(sessionId);\n                }\n                if (this.shouldSplitEventsList(this.sequences[sessionId], event)) {\n                    sequenceReturn = this.addSequence(sessionId);\n                }\n                this.sequences[sessionId].push(event);\n                return [2 /*return*/, sequenceReturn];\n            });\n        });\n    };\n    InMemoryEventsStore.prototype.storeSendingEvents = function (sessionId, events) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.finalizedSequences[this.sequenceId] = { sessionId: sessionId, events: events };\n                return [2 /*return*/, this.sequenceId++];\n            });\n        });\n    };\n    InMemoryEventsStore.prototype.cleanUpSessionEventsStore = function (_sessionId, sequenceId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (sequenceId !== undefined) {\n                    delete this.finalizedSequences[sequenceId];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return InMemoryEventsStore;\n}(BaseEventsStore));\nexport { InMemoryEventsStore };\n//# sourceMappingURL=events-memory-store.js.map","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { getStorageSize } from '../helpers';\nimport { SessionReplayTrackDestination } from '../track-destination';\nimport { SessionReplayEventsIDBStore } from './events-idb-store';\nimport { InMemoryEventsStore } from './events-memory-store';\nexport var createEventsManager = function (_a) {\n    var config = _a.config, sessionId = _a.sessionId, minInterval = _a.minInterval, maxInterval = _a.maxInterval, type = _a.type, payloadBatcher = _a.payloadBatcher, storeType = _a.storeType;\n    return __awaiter(void 0, void 0, void 0, function () {\n        function flush(useRetry) {\n            if (useRetry === void 0) { useRetry = false; }\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, trackDestination.flush(useRetry)];\n                });\n            });\n        }\n        var trackDestination, getMemoryStore, getIdbStoreOrFallback, store, _b, sendEventsList, sendCurrentSequenceEvents, sendStoredEvents, addEvent;\n        return __generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    trackDestination = new SessionReplayTrackDestination(__assign(__assign({}, config), { loggerProvider: config.loggerProvider, payloadBatcher: payloadBatcher }));\n                    getMemoryStore = function () {\n                        return new InMemoryEventsStore({\n                            loggerProvider: config.loggerProvider,\n                            maxInterval: maxInterval,\n                            minInterval: minInterval,\n                        });\n                    };\n                    getIdbStoreOrFallback = function () { return __awaiter(void 0, void 0, void 0, function () {\n                        var store;\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0: return [4 /*yield*/, SessionReplayEventsIDBStore.new(type, {\n                                        loggerProvider: config.loggerProvider,\n                                        minInterval: minInterval,\n                                        maxInterval: maxInterval,\n                                        apiKey: config.apiKey,\n                                    }, sessionId)];\n                                case 1:\n                                    store = _a.sent();\n                                    config.loggerProvider.log('Failed to initialize idb store, falling back to memory store.');\n                                    return [2 /*return*/, store !== null && store !== void 0 ? store : getMemoryStore()];\n                            }\n                        });\n                    }); };\n                    if (!(storeType === 'idb')) return [3 /*break*/, 2];\n                    return [4 /*yield*/, getIdbStoreOrFallback()];\n                case 1:\n                    _b = _c.sent();\n                    return [3 /*break*/, 3];\n                case 2:\n                    _b = getMemoryStore();\n                    _c.label = 3;\n                case 3:\n                    store = _b;\n                    sendEventsList = function (_a) {\n                        var events = _a.events, sessionId = _a.sessionId, deviceId = _a.deviceId, sequenceId = _a.sequenceId;\n                        if (config.debugMode) {\n                            getStorageSize()\n                                .then(function (_a) {\n                                var totalStorageSize = _a.totalStorageSize, percentOfQuota = _a.percentOfQuota, usageDetails = _a.usageDetails;\n                                config.loggerProvider.debug(\"Total storage size: \".concat(totalStorageSize, \" KB, percentage of quota: \").concat(percentOfQuota, \"%, usage details: \").concat(usageDetails));\n                            })\n                                .catch(function () {\n                                // swallow error\n                            });\n                        }\n                        trackDestination.sendEventsList({\n                            events: events,\n                            sessionId: sessionId,\n                            flushMaxRetries: config.flushMaxRetries,\n                            apiKey: config.apiKey,\n                            deviceId: deviceId,\n                            sampleRate: config.sampleRate,\n                            serverZone: config.serverZone,\n                            version: config.version,\n                            type: type,\n                            onComplete: function () { return __awaiter(void 0, void 0, void 0, function () {\n                                return __generator(this, function (_a) {\n                                    switch (_a.label) {\n                                        case 0: return [4 /*yield*/, store.cleanUpSessionEventsStore(sessionId, sequenceId)];\n                                        case 1:\n                                            _a.sent();\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            }); },\n                        });\n                    };\n                    sendCurrentSequenceEvents = function (_a) {\n                        var sessionId = _a.sessionId, deviceId = _a.deviceId;\n                        store\n                            .storeCurrentSequence(sessionId)\n                            .then(function (currentSequence) {\n                            if (currentSequence) {\n                                sendEventsList({\n                                    sequenceId: currentSequence.sequenceId,\n                                    events: currentSequence.events,\n                                    sessionId: currentSequence.sessionId,\n                                    deviceId: deviceId,\n                                });\n                            }\n                        })\n                            .catch(function (e) {\n                            config.loggerProvider.warn('Failed to get current sequence of session replay events for session:', e);\n                        });\n                    };\n                    sendStoredEvents = function (_a) {\n                        var deviceId = _a.deviceId;\n                        return __awaiter(void 0, void 0, void 0, function () {\n                            var sequencesToSend;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0: return [4 /*yield*/, store.getSequencesToSend()];\n                                    case 1:\n                                        sequencesToSend = _b.sent();\n                                        sequencesToSend &&\n                                            sequencesToSend.forEach(function (sequence) {\n                                                sendEventsList({\n                                                    sequenceId: sequence.sequenceId,\n                                                    events: sequence.events,\n                                                    sessionId: sequence.sessionId,\n                                                    deviceId: deviceId,\n                                                });\n                                            });\n                                        return [2 /*return*/];\n                                }\n                            });\n                        });\n                    };\n                    addEvent = function (_a) {\n                        var event = _a.event, sessionId = _a.sessionId, deviceId = _a.deviceId;\n                        store\n                            .addEventToCurrentSequence(sessionId, event.data)\n                            .then(function (sequenceToSend) {\n                            return (sequenceToSend &&\n                                sendEventsList({\n                                    sequenceId: sequenceToSend.sequenceId,\n                                    events: sequenceToSend.events,\n                                    sessionId: sequenceToSend.sessionId,\n                                    deviceId: deviceId,\n                                }));\n                        })\n                            .catch(function (e) {\n                            config.loggerProvider.warn('Failed to add event to session replay capture:', e);\n                        });\n                    };\n                    return [2 /*return*/, {\n                            sendCurrentSequenceEvents: sendCurrentSequenceEvents,\n                            addEvent: addEvent,\n                            sendStoredEvents: sendStoredEvents,\n                            flush: flush,\n                        }];\n            }\n        });\n    });\n};\n//# sourceMappingURL=events-manager.js.map","import { __awaiter, __generator } from \"tslib\";\n/**\n * \"Registers\" events managers internally. When an event is added this class routes the event to the correct\n * manager. For all send or flush methods this will invoke the event for all registered managers.\n */\nvar MultiEventManager = /** @class */ (function () {\n    function MultiEventManager() {\n        var managers = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            managers[_i] = arguments[_i];\n        }\n        var managersMap = new Map();\n        managers.forEach(function (t) {\n            managersMap.set(t.name, t.manager);\n        });\n        this.managers = managersMap;\n    }\n    MultiEventManager.prototype.sendStoredEvents = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            var promises;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        promises = [];\n                        this.managers.forEach(function (manager) {\n                            promises.push(manager.sendStoredEvents(opts));\n                        });\n                        return [4 /*yield*/, Promise.all(promises)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MultiEventManager.prototype.addEvent = function (_a) {\n        var _b;\n        var sessionId = _a.sessionId, event = _a.event, deviceId = _a.deviceId;\n        (_b = this.managers.get(event.type)) === null || _b === void 0 ? void 0 : _b.addEvent({ sessionId: sessionId, event: event, deviceId: deviceId });\n    };\n    MultiEventManager.prototype.sendCurrentSequenceEvents = function (_a) {\n        var sessionId = _a.sessionId, deviceId = _a.deviceId;\n        this.managers.forEach(function (manager) {\n            manager.sendCurrentSequenceEvents({ sessionId: sessionId, deviceId: deviceId });\n        });\n    };\n    MultiEventManager.prototype.flush = function (useRetry) {\n        return __awaiter(this, void 0, void 0, function () {\n            var promises;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        promises = [];\n                        this.managers.forEach(function (manager) {\n                            promises.push(manager.flush(useRetry));\n                        });\n                        return [4 /*yield*/, Promise.all(promises)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return MultiEventManager;\n}());\nexport { MultiEventManager };\n//# sourceMappingURL=multi-manager.js.map","const testableAccessors = {\n  Node: [\"childNodes\", \"parentNode\", \"parentElement\", \"textContent\"],\n  ShadowRoot: [\"host\", \"styleSheets\"],\n  Element: [\"shadowRoot\", \"querySelector\", \"querySelectorAll\"],\n  MutationObserver: []\n};\nconst testableMethods = {\n  Node: [\"contains\", \"getRootNode\"],\n  ShadowRoot: [\"getSelection\"],\n  Element: [],\n  MutationObserver: [\"constructor\"]\n};\nconst untaintedBasePrototype = {};\nfunction angularZoneUnpatchedAlternative(key) {\n  var _a, _b;\n  const angularUnpatchedVersionSymbol = (_b = (_a = globalThis == null ? void 0 : globalThis.Zone) == null ? void 0 : _a.__symbol__) == null ? void 0 : _b.call(_a, key);\n  if (angularUnpatchedVersionSymbol && globalThis[angularUnpatchedVersionSymbol]) {\n    return globalThis[angularUnpatchedVersionSymbol];\n  } else {\n    return void 0;\n  }\n}\nfunction getUntaintedPrototype(key) {\n  if (untaintedBasePrototype[key])\n    return untaintedBasePrototype[key];\n  const candidate = angularZoneUnpatchedAlternative(key) || globalThis[key];\n  const defaultPrototype = candidate.prototype;\n  const accessorNames = key in testableAccessors ? testableAccessors[key] : void 0;\n  const isUntaintedAccessors = Boolean(\n    accessorNames && // @ts-expect-error 2345\n    accessorNames.every(\n      (accessor) => {\n        var _a, _b;\n        return Boolean(\n          (_b = (_a = Object.getOwnPropertyDescriptor(defaultPrototype, accessor)) == null ? void 0 : _a.get) == null ? void 0 : _b.toString().includes(\"[native code]\")\n        );\n      }\n    )\n  );\n  const methodNames = key in testableMethods ? testableMethods[key] : void 0;\n  const isUntaintedMethods = Boolean(\n    methodNames && methodNames.every(\n      // @ts-expect-error 2345\n      (method) => {\n        var _a;\n        return typeof defaultPrototype[method] === \"function\" && ((_a = defaultPrototype[method]) == null ? void 0 : _a.toString().includes(\"[native code]\"));\n      }\n    )\n  );\n  if (isUntaintedAccessors && isUntaintedMethods) {\n    untaintedBasePrototype[key] = candidate.prototype;\n    return candidate.prototype;\n  }\n  try {\n    const iframeEl = document.createElement(\"iframe\");\n    document.body.appendChild(iframeEl);\n    const win = iframeEl.contentWindow;\n    if (!win) return candidate.prototype;\n    const untaintedObject = win[key].prototype;\n    document.body.removeChild(iframeEl);\n    if (!untaintedObject) return defaultPrototype;\n    return untaintedBasePrototype[key] = untaintedObject;\n  } catch {\n    return defaultPrototype;\n  }\n}\nconst untaintedAccessorCache = {};\nfunction getUntaintedAccessor(key, instance, accessor) {\n  var _a;\n  const cacheKey = `${key}.${String(accessor)}`;\n  if (untaintedAccessorCache[cacheKey])\n    return untaintedAccessorCache[cacheKey].call(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype(key);\n  const untaintedAccessor = (_a = Object.getOwnPropertyDescriptor(\n    untaintedPrototype,\n    accessor\n  )) == null ? void 0 : _a.get;\n  if (!untaintedAccessor) return instance[accessor];\n  untaintedAccessorCache[cacheKey] = untaintedAccessor;\n  return untaintedAccessor.call(instance);\n}\nconst untaintedMethodCache = {};\nfunction getUntaintedMethod(key, instance, method) {\n  const cacheKey = `${key}.${String(method)}`;\n  if (untaintedMethodCache[cacheKey])\n    return untaintedMethodCache[cacheKey].bind(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype(key);\n  const untaintedMethod = untaintedPrototype[method];\n  if (typeof untaintedMethod !== \"function\") return instance[method];\n  untaintedMethodCache[cacheKey] = untaintedMethod;\n  return untaintedMethod.bind(instance);\n}\nfunction childNodes(n) {\n  return getUntaintedAccessor(\"Node\", n, \"childNodes\");\n}\nfunction parentNode(n) {\n  return getUntaintedAccessor(\"Node\", n, \"parentNode\");\n}\nfunction parentElement(n) {\n  return getUntaintedAccessor(\"Node\", n, \"parentElement\");\n}\nfunction textContent(n) {\n  return getUntaintedAccessor(\"Node\", n, \"textContent\");\n}\nfunction contains(n, other) {\n  return getUntaintedMethod(\"Node\", n, \"contains\")(other);\n}\nfunction getRootNode(n) {\n  return getUntaintedMethod(\"Node\", n, \"getRootNode\")();\n}\nfunction host(n) {\n  if (!n || !(\"host\" in n)) return null;\n  return getUntaintedAccessor(\"ShadowRoot\", n, \"host\");\n}\nfunction styleSheets(n) {\n  return n.styleSheets;\n}\nfunction shadowRoot(n) {\n  if (!n || !(\"shadowRoot\" in n)) return null;\n  return getUntaintedAccessor(\"Element\", n, \"shadowRoot\");\n}\nfunction querySelector(n, selectors) {\n  return getUntaintedAccessor(\"Element\", n, \"querySelector\")(selectors);\n}\nfunction querySelectorAll(n, selectors) {\n  return getUntaintedAccessor(\"Element\", n, \"querySelectorAll\")(selectors);\n}\nfunction mutationObserverCtor() {\n  return getUntaintedPrototype(\"MutationObserver\").constructor;\n}\nconst index = {\n  childNodes,\n  parentNode,\n  parentElement,\n  textContent,\n  contains,\n  getRootNode,\n  host,\n  styleSheets,\n  shadowRoot,\n  querySelector,\n  querySelectorAll,\n  mutationObserver: mutationObserverCtor\n};\nexport {\n  childNodes,\n  contains,\n  index as default,\n  getRootNode,\n  getUntaintedAccessor,\n  getUntaintedMethod,\n  getUntaintedPrototype,\n  host,\n  mutationObserverCtor,\n  parentElement,\n  parentNode,\n  querySelector,\n  querySelectorAll,\n  shadowRoot,\n  styleSheets,\n  textContent\n};\n//# sourceMappingURL=rrweb-utils.js.map\n","import { getGlobalScope } from '@amplitude/analytics-core';\nimport dom from '@amplitude/rrweb-utils';\n// These functions are not exposed in rrweb package, so we will define it here to use\n// Ignoring this function since this is copied from rrweb\n/* istanbul ignore next */\nexport function getWindowScroll(win) {\n    var _a, _b, _c, _d;\n    var doc = win.document;\n    return {\n        left: doc.scrollingElement\n            ? doc.scrollingElement.scrollLeft\n            : win.pageXOffset !== undefined\n                ? win.pageXOffset\n                : doc.documentElement.scrollLeft ||\n                    ((doc === null || doc === void 0 ? void 0 : doc.body) && ((_a = dom.parentElement(doc.body)) === null || _a === void 0 ? void 0 : _a.scrollLeft)) ||\n                    ((_b = doc === null || doc === void 0 ? void 0 : doc.body) === null || _b === void 0 ? void 0 : _b.scrollLeft) ||\n                    0,\n        top: doc.scrollingElement\n            ? doc.scrollingElement.scrollTop\n            : win.pageYOffset !== undefined\n                ? win.pageYOffset\n                : (doc === null || doc === void 0 ? void 0 : doc.documentElement.scrollTop) ||\n                    ((doc === null || doc === void 0 ? void 0 : doc.body) && ((_c = dom.parentElement(doc.body)) === null || _c === void 0 ? void 0 : _c.scrollTop)) ||\n                    ((_d = doc === null || doc === void 0 ? void 0 : doc.body) === null || _d === void 0 ? void 0 : _d.scrollTop) ||\n                    0,\n    };\n}\nexport function getWindowHeight() {\n    var globalScope = getGlobalScope();\n    return ((globalScope === null || globalScope === void 0 ? void 0 : globalScope.innerHeight) ||\n        (document.documentElement && document.documentElement.clientHeight) ||\n        (document.body && document.body.clientHeight) ||\n        0);\n}\nexport function getWindowWidth() {\n    var globalScope = getGlobalScope();\n    return ((globalScope === null || globalScope === void 0 ? void 0 : globalScope.innerWidth) ||\n        (document.documentElement && document.documentElement.clientWidth) ||\n        (document.body && document.body.clientWidth) ||\n        0);\n}\n//# sourceMappingURL=rrweb.js.map","/* istanbul ignore file */\nimport { __assign, __generator, __read, __spreadArray, __values } from \"tslib\";\nvar config;\nvar rootDocument;\nvar start;\nexport function finder(input, options) {\n    start = new Date();\n    if (input.nodeType !== Node.ELEMENT_NODE) {\n        throw new Error(\"Can't generate CSS selector for non-element node type.\");\n    }\n    if ('html' === input.tagName.toLowerCase()) {\n        return 'html';\n    }\n    var defaults = {\n        root: document.body,\n        idName: function (_name) { return true; },\n        className: function (_name) { return true; },\n        tagName: function (_name) { return true; },\n        attr: function (_name, _value) { return false; },\n        seedMinLength: 1,\n        optimizedMinLength: 2,\n        threshold: 1000,\n        maxNumberOfTries: 10000,\n        timeoutMs: undefined,\n    };\n    config = __assign(__assign({}, defaults), options);\n    rootDocument = findRootDocument(config.root, defaults);\n    var path = bottomUpSearch(input, 'all', function () {\n        return bottomUpSearch(input, 'two', function () { return bottomUpSearch(input, 'one', function () { return bottomUpSearch(input, 'none'); }); });\n    });\n    if (path) {\n        var optimized = sort(optimize(path, input));\n        if (optimized.length > 0) {\n            path = optimized[0];\n        }\n        return selector(path);\n    }\n    else {\n        throw new Error(\"Selector was not found.\");\n    }\n}\nfunction findRootDocument(rootNode, defaults) {\n    if (rootNode.nodeType === Node.DOCUMENT_NODE) {\n        return rootNode;\n    }\n    if (rootNode === defaults.root) {\n        return rootNode.ownerDocument;\n    }\n    return rootNode;\n}\nfunction bottomUpSearch(input, limit, fallback) {\n    var path = null;\n    var stack = [];\n    var current = input;\n    var i = 0;\n    var _loop_1 = function () {\n        var e_1, _a;\n        var elapsedTime = new Date().getTime() - start.getTime();\n        if (config.timeoutMs !== undefined && elapsedTime > config.timeoutMs) {\n            throw new Error(\"Timeout: Can't find a unique selector after \".concat(elapsedTime, \"ms\"));\n        }\n        var level = maybe(id(current)) || maybe.apply(void 0, __spreadArray([], __read(attr(current)), false)) || maybe.apply(void 0, __spreadArray([], __read(classNames(current)), false)) ||\n            maybe(tagName(current)) || [any()];\n        var nth = index(current);\n        if (limit == 'all') {\n            if (nth) {\n                level = level.concat(level.filter(dispensableNth).map(function (node) { return nthChild(node, nth); }));\n            }\n        }\n        else if (limit == 'two') {\n            level = level.slice(0, 1);\n            if (nth) {\n                level = level.concat(level.filter(dispensableNth).map(function (node) { return nthChild(node, nth); }));\n            }\n        }\n        else if (limit == 'one') {\n            var _b = __read((level = level.slice(0, 1)), 1), node = _b[0];\n            if (nth && dispensableNth(node)) {\n                level = [nthChild(node, nth)];\n            }\n        }\n        else if (limit == 'none') {\n            level = [any()];\n            if (nth) {\n                level = [nthChild(level[0], nth)];\n            }\n        }\n        try {\n            for (var level_1 = (e_1 = void 0, __values(level)), level_1_1 = level_1.next(); !level_1_1.done; level_1_1 = level_1.next()) {\n                var node = level_1_1.value;\n                node.level = i;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (level_1_1 && !level_1_1.done && (_a = level_1.return)) _a.call(level_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        stack.push(level);\n        if (stack.length >= config.seedMinLength) {\n            path = findUniquePath(stack, fallback);\n            if (path) {\n                return \"break\";\n            }\n        }\n        current = current.parentElement;\n        i++;\n    };\n    while (current) {\n        var state_1 = _loop_1();\n        if (state_1 === \"break\")\n            break;\n    }\n    if (!path) {\n        path = findUniquePath(stack, fallback);\n    }\n    if (!path && fallback) {\n        return fallback();\n    }\n    return path;\n}\nfunction findUniquePath(stack, fallback) {\n    var e_2, _a;\n    var paths = sort(combinations(stack));\n    if (paths.length > config.threshold) {\n        return fallback ? fallback() : null;\n    }\n    try {\n        for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n            var candidate = paths_1_1.value;\n            if (unique(candidate)) {\n                return candidate;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return null;\n}\nfunction selector(path) {\n    var node = path[0];\n    var query = node.name;\n    for (var i = 1; i < path.length; i++) {\n        var level = path[i].level || 0;\n        if (node.level === level - 1) {\n            query = \"\".concat(path[i].name, \" > \").concat(query);\n        }\n        else {\n            query = \"\".concat(path[i].name, \" \").concat(query);\n        }\n        node = path[i];\n    }\n    return query;\n}\nfunction penalty(path) {\n    return path.map(function (node) { return node.penalty; }).reduce(function (acc, i) { return acc + i; }, 0);\n}\nfunction unique(path) {\n    var css = selector(path);\n    switch (rootDocument.querySelectorAll(css).length) {\n        case 0:\n            throw new Error(\"Can't select any node with this selector: \".concat(css));\n        case 1:\n            return true;\n        default:\n            return false;\n    }\n}\nfunction id(input) {\n    var elementId = input.getAttribute('id');\n    if (elementId && config.idName(elementId)) {\n        return {\n            name: '#' + CSS.escape(elementId),\n            penalty: 0,\n        };\n    }\n    return null;\n}\nfunction attr(input) {\n    var attrs = Array.from(input.attributes).filter(function (attr) { return config.attr(attr.name, attr.value); });\n    return attrs.map(function (attr) { return ({\n        name: \"[\".concat(CSS.escape(attr.name), \"=\\\"\").concat(CSS.escape(attr.value), \"\\\"]\"),\n        penalty: 0.5,\n    }); });\n}\nfunction classNames(input) {\n    var names = Array.from(input.classList).filter(config.className);\n    return names.map(function (name) { return ({\n        name: '.' + CSS.escape(name),\n        penalty: 1,\n    }); });\n}\nfunction tagName(input) {\n    var name = input.tagName.toLowerCase();\n    if (config.tagName(name)) {\n        return {\n            name: name,\n            penalty: 2,\n        };\n    }\n    return null;\n}\nfunction any() {\n    return {\n        name: '*',\n        penalty: 3,\n    };\n}\nfunction index(input) {\n    var parent = input.parentNode;\n    if (!parent) {\n        return null;\n    }\n    var child = parent.firstChild;\n    if (!child) {\n        return null;\n    }\n    var i = 0;\n    while (child) {\n        if (child.nodeType === Node.ELEMENT_NODE) {\n            i++;\n        }\n        if (child === input) {\n            break;\n        }\n        child = child.nextSibling;\n    }\n    return i;\n}\nfunction nthChild(node, i) {\n    return {\n        name: node.name + \":nth-child(\".concat(i, \")\"),\n        penalty: node.penalty + 1,\n    };\n}\nfunction dispensableNth(node) {\n    return node.name !== 'html' && !node.name.startsWith('#');\n}\nfunction maybe() {\n    var level = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        level[_i] = arguments[_i];\n    }\n    var list = level.filter(notEmpty);\n    if (list.length > 0) {\n        return list;\n    }\n    return null;\n}\nfunction notEmpty(value) {\n    return value !== null && value !== undefined;\n}\nfunction combinations(stack, path) {\n    var _a, _b, node, e_3_1;\n    var e_3, _c;\n    if (path === void 0) { path = []; }\n    return __generator(this, function (_d) {\n        switch (_d.label) {\n            case 0:\n                if (!(stack.length > 0)) return [3 /*break*/, 9];\n                _d.label = 1;\n            case 1:\n                _d.trys.push([1, 6, 7, 8]);\n                _a = __values(stack[0]), _b = _a.next();\n                _d.label = 2;\n            case 2:\n                if (!!_b.done) return [3 /*break*/, 5];\n                node = _b.value;\n                return [5 /*yield**/, __values(combinations(stack.slice(1, stack.length), path.concat(node)))];\n            case 3:\n                _d.sent();\n                _d.label = 4;\n            case 4:\n                _b = _a.next();\n                return [3 /*break*/, 2];\n            case 5: return [3 /*break*/, 8];\n            case 6:\n                e_3_1 = _d.sent();\n                e_3 = { error: e_3_1 };\n                return [3 /*break*/, 8];\n            case 7:\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_3) throw e_3.error; }\n                return [7 /*endfinally*/];\n            case 8: return [3 /*break*/, 11];\n            case 9: return [4 /*yield*/, path];\n            case 10:\n                _d.sent();\n                _d.label = 11;\n            case 11: return [2 /*return*/];\n        }\n    });\n}\nfunction sort(paths) {\n    return __spreadArray([], __read(paths), false).sort(function (a, b) { return penalty(a) - penalty(b); });\n}\nfunction optimize(path, input, scope) {\n    var i, newPath, newPathKey;\n    if (scope === void 0) { scope = {\n        counter: 0,\n        visited: new Map(),\n    }; }\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!(path.length > 2 && path.length > config.optimizedMinLength)) return [3 /*break*/, 5];\n                i = 1;\n                _a.label = 1;\n            case 1:\n                if (!(i < path.length - 1)) return [3 /*break*/, 5];\n                if (scope.counter > config.maxNumberOfTries) {\n                    return [2 /*return*/]; // Okay At least I tried!\n                }\n                scope.counter += 1;\n                newPath = __spreadArray([], __read(path), false);\n                newPath.splice(i, 1);\n                newPathKey = selector(newPath);\n                if (scope.visited.has(newPathKey)) {\n                    return [2 /*return*/];\n                }\n                if (!(unique(newPath) && same(newPath, input))) return [3 /*break*/, 4];\n                return [4 /*yield*/, newPath];\n            case 2:\n                _a.sent();\n                scope.visited.set(newPathKey, true);\n                return [5 /*yield**/, __values(optimize(newPath, input, scope))];\n            case 3:\n                _a.sent();\n                _a.label = 4;\n            case 4:\n                i++;\n                return [3 /*break*/, 1];\n            case 5: return [2 /*return*/];\n        }\n    });\n}\nfunction same(path, input) {\n    return rootDocument.querySelector(selector(path)) === input;\n}\n//# sourceMappingURL=finder.js.map","import { __assign } from \"tslib\";\nimport { MouseInteractions } from '@amplitude/rrweb-types';\nimport { getWindowScroll } from '../utils/rrweb';\nimport { finder } from '../libs/finder';\nimport { getGlobalScope } from '@amplitude/analytics-core';\nimport { getPageUrl } from '../helpers';\nvar HOUR_IN_MILLISECONDS = 3600000;\nexport var clickNonBatcher = function (_a) {\n    var version = _a.version, events = _a.events;\n    var clickEvents = [];\n    events.forEach(function (evt) {\n        var record = JSON.parse(evt);\n        record.count = 1;\n        if (record.type === 'click') {\n            clickEvents.push(record);\n        }\n    });\n    return { version: version, events: clickEvents };\n};\nexport var clickBatcher = function (_a) {\n    var version = _a.version, events = _a.events;\n    var clickEvents = [];\n    events.forEach(function (evt) {\n        var record = JSON.parse(evt);\n        if (record.type === 'click') {\n            clickEvents.push(record);\n        }\n    });\n    var reduced = clickEvents.reduce(function (prev, curr) {\n        var x = curr.x, y = curr.y, selector = curr.selector, timestamp = curr.timestamp;\n        // round down to nearest hour.\n        var hour = timestamp - (timestamp % HOUR_IN_MILLISECONDS);\n        var k = \"\".concat(x, \":\").concat(y, \":\").concat(selector !== null && selector !== void 0 ? selector : '', \":\").concat(hour);\n        if (!prev[k]) {\n            prev[k] = __assign(__assign({}, curr), { timestamp: hour, count: 1 });\n        }\n        else {\n            prev[k].count += 1;\n        }\n        return prev;\n    }, {});\n    return { version: version, events: Object.values(reduced) };\n};\nexport var clickHook = function (logger, _a) {\n    var eventsManager = _a.eventsManager, sessionId = _a.sessionId, deviceIdFn = _a.deviceIdFn, mirror = _a.mirror, ugcFilterRules = _a.ugcFilterRules;\n    return function (e) {\n        if (e.type !== MouseInteractions.Click) {\n            return;\n        }\n        var globalScope = getGlobalScope();\n        if (!globalScope) {\n            return;\n        }\n        var location = globalScope.location, innerHeight = globalScope.innerHeight, innerWidth = globalScope.innerWidth;\n        // it only makes sense to send events if a pageUrl exists\n        if (!location) {\n            return;\n        }\n        var x = e.x, y = e.y;\n        if (x === undefined || y === undefined) {\n            return;\n        }\n        var node = mirror.getNode(e.id);\n        var selector;\n        if (node) {\n            try {\n                selector = finder(node);\n            }\n            catch (err) {\n                logger.debug('error resolving selector from finder');\n            }\n        }\n        var _a = getWindowScroll(globalScope), scrollX = _a.left, scrollY = _a.top;\n        var pageUrl = getPageUrl(location.href, ugcFilterRules);\n        var event = {\n            x: x + scrollX,\n            y: y + scrollY,\n            selector: selector,\n            viewportHeight: innerHeight,\n            viewportWidth: innerWidth,\n            pageUrl: pageUrl,\n            timestamp: Date.now(),\n            type: 'click',\n        };\n        var deviceId = deviceIdFn();\n        if (deviceId) {\n            eventsManager.addEvent({ sessionId: sessionId, event: { type: 'interaction', data: JSON.stringify(event) }, deviceId: deviceId });\n        }\n    };\n};\n//# sourceMappingURL=click.js.map","import { getGlobalScope } from '@amplitude/analytics-core';\nimport { getServerUrl } from './helpers';\n/**\n * For very small payloads it's preferable to use the [Beacon API](https://developer.mozilla.org/en-US/docs/Web/API/Beacon_API).\n * While it doesn't provide 100% guarantees on sends, it greatly helps with overall reliability and page load performance. As\n * the Beacon API has a potential to fail due to size constraints we want to fall back to XHR if need be. This is mostly to\n * be used with 'pagehide' or 'beforeunload' events.\n *\n * Note there are only 3 CORS safelisted Content-Types you can send:\n *\n * - application/x-www-form-urlencoded\n * - multipart/form-data\n * - text/plain\n *\n * If we do not send one of these, some browsers like Chrome may not send this at all. Also we incur the overhead of a preflight\n * request. In our case we will add no additional content-type header. If you are trying to ping a server that requires this\n * header, you may want to use the regular fetch API or a different mechanism.\n */\nvar BeaconTransport = /** @class */ (function () {\n    function BeaconTransport(context, config) {\n        var globalScope = getGlobalScope();\n        if (globalScope && globalScope.navigator && typeof globalScope.navigator.sendBeacon === 'function') {\n            this.sendBeacon = function (pageUrl, payload) {\n                try {\n                    if (globalScope.navigator.sendBeacon(pageUrl, JSON.stringify(payload))) {\n                        return true;\n                    }\n                }\n                catch (e) {\n                    // not logging error, since it would be hard to view and just adds overhead.\n                }\n                return false;\n            };\n        }\n        else {\n            this.sendBeacon = function () { return false; };\n        }\n        this.sendXhr = function (pageUrl, payload) {\n            var xhr = new XMLHttpRequest();\n            xhr.open('POST', pageUrl, true);\n            xhr.setRequestHeader('Accept', '*/*');\n            xhr.send(JSON.stringify(payload));\n            return true;\n        };\n        this.basePageUrl = getServerUrl(config.serverZone, config.trackServerUrl);\n        this.apiKey = config.apiKey;\n        this.context = context;\n    }\n    BeaconTransport.prototype.send = function (deviceId, payload) {\n        var _a = this.context, sessionId = _a.sessionId, type = _a.type;\n        var urlParams = new URLSearchParams({\n            device_id: deviceId,\n            session_id: String(sessionId),\n            type: String(type),\n            api_key: this.apiKey,\n        });\n        var pageUrl = \"\".concat(this.basePageUrl, \"?\").concat(urlParams.toString());\n        // ideally send using the beacon API, but there is a chance it may fail, possibly due to a payload\n        // size limit. in this case, try best effort to send using xhr.\n        this.sendBeacon(pageUrl, payload) || this.sendXhr(pageUrl, payload);\n    };\n    return BeaconTransport;\n}());\nexport { BeaconTransport };\n//# sourceMappingURL=beacon-transport.js.map","import { getWindowHeight, getWindowWidth } from '../utils/rrweb';\nimport { BeaconTransport } from '../beacon-transport';\nimport { getGlobalScope } from '@amplitude/analytics-core';\nimport { getPageUrl } from '../helpers';\n/**\n * This is intended to watch and update max scroll activity when loaded for a particular page.\n * A new instance should be created if the page URL changes, since by default it does not reset\n * it's max scroll state. It is intended to send very few and very small events utilizing the\n * Beacon API.\n * @see {@link BeaconTransport} for more details on Beacon API usage.\n */\nvar ScrollWatcher = /** @class */ (function () {\n    function ScrollWatcher(transport, config) {\n        var _this = this;\n        this.timestamp = Date.now();\n        this.hook = function (e) {\n            _this.update(e);\n        };\n        this.send = function (deviceIdFn) { return function (_) {\n            var _a, _b;\n            var deviceId = deviceIdFn();\n            var globalScope = getGlobalScope();\n            if (globalScope && deviceId) {\n                _this.transport.send(deviceId, {\n                    version: 1,\n                    events: [\n                        {\n                            maxScrollX: _this._maxScrollX,\n                            maxScrollY: _this._maxScrollY,\n                            maxScrollWidth: _this._maxScrollWidth,\n                            maxScrollHeight: _this._maxScrollHeight,\n                            viewportHeight: getWindowHeight(),\n                            viewportWidth: getWindowWidth(),\n                            pageUrl: getPageUrl(globalScope.location.href, (_b = (_a = _this.config.interactionConfig) === null || _a === void 0 ? void 0 : _a.ugcFilterRules) !== null && _b !== void 0 ? _b : []),\n                            timestamp: _this.timestamp,\n                            type: 'scroll',\n                        },\n                    ],\n                });\n            }\n        }; };\n        this._maxScrollX = 0;\n        this._maxScrollY = 0;\n        this._maxScrollWidth = getWindowWidth();\n        this._maxScrollHeight = getWindowHeight();\n        this.config = config;\n        this.transport = transport;\n    }\n    ScrollWatcher.default = function (context, config) {\n        return new ScrollWatcher(new BeaconTransport(context, config), config);\n    };\n    Object.defineProperty(ScrollWatcher.prototype, \"maxScrollX\", {\n        get: function () {\n            return this._maxScrollX;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ScrollWatcher.prototype, \"maxScrollY\", {\n        get: function () {\n            return this._maxScrollY;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ScrollWatcher.prototype, \"maxScrollWidth\", {\n        get: function () {\n            return this._maxScrollWidth;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ScrollWatcher.prototype, \"maxScrollHeight\", {\n        get: function () {\n            return this._maxScrollHeight;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ScrollWatcher.prototype.update = function (e) {\n        var now = Date.now();\n        if (e.x > this._maxScrollX) {\n            var width = getWindowWidth();\n            this._maxScrollX = e.x;\n            var maxScrollWidth = e.x + width;\n            if (maxScrollWidth > this._maxScrollWidth) {\n                this._maxScrollWidth = maxScrollWidth;\n            }\n            this.timestamp = now;\n        }\n        if (e.y > this._maxScrollY) {\n            var height = getWindowHeight();\n            this._maxScrollY = e.y;\n            var maxScrollHeight = e.y + height;\n            if (maxScrollHeight > this._maxScrollHeight) {\n                this._maxScrollHeight = maxScrollHeight;\n            }\n            this.timestamp = now;\n        }\n    };\n    return ScrollWatcher;\n}());\nexport { ScrollWatcher };\n//# sourceMappingURL=scroll.js.map","import { generateSessionReplayId } from './helpers';\nvar SessionIdentifiers = /** @class */ (function () {\n    function SessionIdentifiers(_a) {\n        var sessionId = _a.sessionId, deviceId = _a.deviceId;\n        this.deviceId = deviceId;\n        this.sessionId = sessionId;\n        if (sessionId && deviceId) {\n            this.sessionReplayId = generateSessionReplayId(sessionId, deviceId);\n        }\n    }\n    return SessionIdentifiers;\n}());\nexport { SessionIdentifiers };\n//# sourceMappingURL=identifiers.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { openDB } from 'idb';\nexport var MAX_IDB_STORAGE_LENGTH = 1000 * 60 * 60 * 24 * 2; // 2 days\nvar TargetingIDBStore = /** @class */ (function () {\n    function TargetingIDBStore() {\n        var _this = this;\n        this.dbs = {};\n        this.createStore = function (dbName) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, openDB(dbName, 1, {\n                            upgrade: function (db) {\n                                if (!db.objectStoreNames.contains('sessionTargetingMatch')) {\n                                    db.createObjectStore('sessionTargetingMatch', {\n                                        keyPath: 'sessionId',\n                                    });\n                                }\n                            },\n                        })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        }); };\n        this.openOrCreateDB = function (apiKey) { return __awaiter(_this, void 0, void 0, function () {\n            var dbName, db;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.dbs && this.dbs[apiKey]) {\n                            return [2 /*return*/, this.dbs[apiKey]];\n                        }\n                        dbName = \"\".concat(apiKey.substring(0, 10), \"_amp_session_replay_targeting\");\n                        return [4 /*yield*/, this.createStore(dbName)];\n                    case 1:\n                        db = _a.sent();\n                        this.dbs[apiKey] = db;\n                        return [2 /*return*/, db];\n                }\n            });\n        }); };\n        this.getTargetingMatchForSession = function (_a) {\n            var loggerProvider = _a.loggerProvider, apiKey = _a.apiKey, sessionId = _a.sessionId;\n            return __awaiter(_this, void 0, void 0, function () {\n                var db, sessionIdStr, targetingMatchForSession, e_1;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            _b.trys.push([0, 3, , 4]);\n                            return [4 /*yield*/, this.openOrCreateDB(apiKey)];\n                        case 1:\n                            db = _b.sent();\n                            sessionIdStr = String(sessionId);\n                            return [4 /*yield*/, db.get('sessionTargetingMatch', sessionIdStr)];\n                        case 2:\n                            targetingMatchForSession = _b.sent();\n                            return [2 /*return*/, targetingMatchForSession === null || targetingMatchForSession === void 0 ? void 0 : targetingMatchForSession.targetingMatch];\n                        case 3:\n                            e_1 = _b.sent();\n                            loggerProvider.warn(\"Failed to get targeting match for session id \".concat(sessionId, \": \").concat(e_1));\n                            return [3 /*break*/, 4];\n                        case 4: return [2 /*return*/, undefined];\n                    }\n                });\n            });\n        };\n        this.storeTargetingMatchForSession = function (_a) {\n            var loggerProvider = _a.loggerProvider, apiKey = _a.apiKey, sessionId = _a.sessionId, targetingMatch = _a.targetingMatch;\n            return __awaiter(_this, void 0, void 0, function () {\n                var db, sessionIdStr, targetingMatchForSession, e_2;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            _b.trys.push([0, 3, , 4]);\n                            return [4 /*yield*/, this.openOrCreateDB(apiKey)];\n                        case 1:\n                            db = _b.sent();\n                            sessionIdStr = String(sessionId);\n                            return [4 /*yield*/, db.put('sessionTargetingMatch', {\n                                    targetingMatch: targetingMatch,\n                                    sessionId: sessionIdStr,\n                                    lastUpdated: Date.now(),\n                                })];\n                        case 2:\n                            targetingMatchForSession = _b.sent();\n                            return [2 /*return*/, targetingMatchForSession];\n                        case 3:\n                            e_2 = _b.sent();\n                            loggerProvider.warn(\"Failed to store targeting match for session id \".concat(sessionId, \": \").concat(e_2));\n                            return [3 /*break*/, 4];\n                        case 4: return [2 /*return*/, undefined];\n                    }\n                });\n            });\n        };\n        this.clearStoreOfOldSessions = function (_a) {\n            var loggerProvider = _a.loggerProvider, apiKey = _a.apiKey, currentSessionId = _a.currentSessionId;\n            return __awaiter(_this, void 0, void 0, function () {\n                var db, currentSessionIdStr, tx, allTargetingMatchObjs, i, targetingMatchObj, amountOfTimeSinceSession, e_3;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            _b.trys.push([0, 8, , 9]);\n                            return [4 /*yield*/, this.openOrCreateDB(apiKey)];\n                        case 1:\n                            db = _b.sent();\n                            currentSessionIdStr = String(currentSessionId);\n                            tx = db.transaction('sessionTargetingMatch', 'readwrite');\n                            return [4 /*yield*/, tx.store.getAll()];\n                        case 2:\n                            allTargetingMatchObjs = _b.sent();\n                            i = 0;\n                            _b.label = 3;\n                        case 3:\n                            if (!(i < allTargetingMatchObjs.length)) return [3 /*break*/, 6];\n                            targetingMatchObj = allTargetingMatchObjs[i];\n                            amountOfTimeSinceSession = Date.now() - targetingMatchObj.lastUpdated;\n                            if (!(targetingMatchObj.sessionId !== currentSessionIdStr && amountOfTimeSinceSession > MAX_IDB_STORAGE_LENGTH)) return [3 /*break*/, 5];\n                            return [4 /*yield*/, tx.store.delete(targetingMatchObj.sessionId)];\n                        case 4:\n                            _b.sent();\n                            _b.label = 5;\n                        case 5:\n                            i++;\n                            return [3 /*break*/, 3];\n                        case 6: return [4 /*yield*/, tx.done];\n                        case 7:\n                            _b.sent();\n                            return [3 /*break*/, 9];\n                        case 8:\n                            e_3 = _b.sent();\n                            loggerProvider.warn(\"Failed to clear old targeting matches for sessions: \".concat(e_3));\n                            return [3 /*break*/, 9];\n                        case 9: return [2 /*return*/];\n                    }\n                });\n            });\n        };\n    }\n    return TargetingIDBStore;\n}());\nexport { TargetingIDBStore };\nexport var targetingIDBStore = new TargetingIDBStore();\n//# sourceMappingURL=targeting-idb-store.js.map","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { targetingIDBStore } from './targeting-idb-store';\nexport var evaluateTargetingAndStore = function (_a) {\n    var sessionId = _a.sessionId, targetingConfig = _a.targetingConfig, loggerProvider = _a.loggerProvider, apiKey = _a.apiKey, targetingParams = _a.targetingParams;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var idbTargetingMatch, sessionTargetingMatch, evaluateTargetingPackage, targetingResult, err_1, knownError;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4 /*yield*/, targetingIDBStore.clearStoreOfOldSessions({\n                        loggerProvider: loggerProvider,\n                        apiKey: apiKey,\n                        currentSessionId: sessionId,\n                    })];\n                case 1:\n                    _b.sent();\n                    return [4 /*yield*/, targetingIDBStore.getTargetingMatchForSession({\n                            loggerProvider: loggerProvider,\n                            apiKey: apiKey,\n                            sessionId: sessionId,\n                        })];\n                case 2:\n                    idbTargetingMatch = _b.sent();\n                    if (idbTargetingMatch === true) {\n                        return [2 /*return*/, true];\n                    }\n                    sessionTargetingMatch = true;\n                    _b.label = 3;\n                case 3:\n                    _b.trys.push([3, 6, , 7]);\n                    return [4 /*yield*/, import('@amplitude/targeting')];\n                case 4:\n                    evaluateTargetingPackage = (_b.sent()).evaluateTargeting;\n                    return [4 /*yield*/, evaluateTargetingPackage(__assign(__assign({}, targetingParams), { flag: targetingConfig, sessionId: sessionId, apiKey: apiKey, loggerProvider: loggerProvider }))];\n                case 5:\n                    targetingResult = _b.sent();\n                    if (targetingResult && targetingResult.sr_targeting_config) {\n                        sessionTargetingMatch = targetingResult.sr_targeting_config.key === 'on';\n                    }\n                    void targetingIDBStore.storeTargetingMatchForSession({\n                        loggerProvider: loggerProvider,\n                        apiKey: apiKey,\n                        sessionId: sessionId,\n                        targetingMatch: sessionTargetingMatch,\n                    });\n                    return [3 /*break*/, 7];\n                case 6:\n                    err_1 = _b.sent();\n                    knownError = err_1;\n                    loggerProvider.warn(knownError.message);\n                    return [3 /*break*/, 7];\n                case 7: return [2 /*return*/, sessionTargetingMatch];\n            }\n        });\n    });\n};\n//# sourceMappingURL=targeting-manager.js.map","import { __assign } from \"tslib\";\nimport { getPageUrl } from '../helpers';\nimport { DEFAULT_URL_CHANGE_POLLING_INTERVAL } from '../constants';\n/**\n * Creates a URL tracking plugin for rrweb record function\n *\n * This plugin monitors URL changes in the browser and emits events when the URL changes.\n * It supports three tracking modes:\n * 1. Polling (if explicitly enabled) - periodically checks for URL changes\n * 2. History API + Hash routing (default) - patches pushState/replaceState, listens to popstate and hashchange\n * 3. Hash routing only (fallback) - listens to hashchange events when History API is unavailable\n *\n * The plugin handles edge cases gracefully:\n * - Missing or null location objects\n * - Undefined, null, or empty location.href values\n * - Temporal dead zone issues with variable declarations\n * - Consistent URL normalization across all code paths\n *\n * @param options Configuration options for URL tracking\n * @returns RecordPlugin instance that can be used with rrweb\n */\nexport function createUrlTrackingPlugin(options) {\n    if (options === void 0) { options = {}; }\n    return {\n        name: 'amplitude/url-tracking@1',\n        observer: function (cb, globalScope, pluginOptions) {\n            var _a, _b, _c;\n            // Merge options with plugin-level options taking precedence over constructor options\n            var config = __assign(__assign({}, options), pluginOptions);\n            var ugcFilterRules = config.ugcFilterRules || [];\n            var enablePolling = (_a = config.enablePolling) !== null && _a !== void 0 ? _a : false;\n            var pollingInterval = (_b = config.pollingInterval) !== null && _b !== void 0 ? _b : DEFAULT_URL_CHANGE_POLLING_INTERVAL;\n            var captureDocumentTitle = (_c = config.captureDocumentTitle) !== null && _c !== void 0 ? _c : false;\n            // Early return if no global scope is available\n            if (!globalScope) {\n                return function () {\n                    // No cleanup needed if no global scope available\n                };\n            }\n            // Track the last URL to prevent duplicate events\n            // Initialize to undefined to ensure first call always emits an event\n            var lastTrackedUrl = undefined;\n            // Helper functions\n            /**\n             * Gets the current URL with proper normalization\n             * Handles edge cases where location.href might be undefined, null, or empty\n             * Ensures consistent behavior across all code paths\n             * @returns Normalized URL string (empty string if location unavailable)\n             */\n            var getCurrentUrl = function () {\n                if (!globalScope.location)\n                    return '';\n                return globalScope.location.href || '';\n            };\n            /**\n             * Creates a URL change event with current page information\n             * Applies UGC filtering if rules are configured\n             * Uses getCurrentUrl() for consistent URL normalization\n             * @returns URLChangeEvent with current page state\n             */\n            var createUrlChangeEvent = function () {\n                var innerHeight = globalScope.innerHeight, innerWidth = globalScope.innerWidth, document = globalScope.document;\n                var currentUrl = getCurrentUrl();\n                var currentTitle = '';\n                if (captureDocumentTitle) {\n                    currentTitle = (document === null || document === void 0 ? void 0 : document.title) || '';\n                }\n                // Apply UGC filtering if rules are provided, otherwise use original URL\n                var filteredUrl = ugcFilterRules.length > 0 ? getPageUrl(currentUrl, ugcFilterRules) : currentUrl;\n                return {\n                    href: filteredUrl,\n                    title: currentTitle,\n                    viewportHeight: innerHeight,\n                    viewportWidth: innerWidth,\n                    type: 'url-change-event',\n                };\n            };\n            /**\n             * Emits a URL change event if the URL has actually changed\n             * Always emits on first call (when lastTrackedUrl is undefined)\n             * Prevents duplicate events for the same URL on subsequent calls\n             * Handles edge cases like undefined/null/empty URLs gracefully\n             */\n            var emitUrlChange = function () {\n                var currentUrl = getCurrentUrl();\n                // Always emit on first call, or if URL actually changed\n                if (lastTrackedUrl === undefined || currentUrl !== lastTrackedUrl) {\n                    lastTrackedUrl = currentUrl;\n                    var event_1 = createUrlChangeEvent();\n                    cb(event_1);\n                }\n            };\n            /**\n             * Creates a patched version of history methods (pushState/replaceState)\n             * that calls the original method and then emits a URL change event\n             * Ensures URL changes are detected even when history methods are called programmatically\n             * @param originalMethod The original history method to patch\n             * @returns Patched function that calls original method then emits URL change event\n             */\n            var createHistoryMethodPatch = function (originalMethod) {\n                return function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    // Call the original history method first\n                    var result = originalMethod.apply(this, args);\n                    // Then emit URL change event\n                    emitUrlChange();\n                    return result;\n                };\n            };\n            // Hashchange event handler - delegates to emitUrlChange for consistency\n            var hashChangeHandler = function () {\n                emitUrlChange();\n            };\n            // 1. if explicitly enable polling → use polling\n            if (enablePolling) {\n                // Use polling (covers everything)\n                var urlChangeInterval_1 = globalScope.setInterval(function () {\n                    emitUrlChange();\n                }, pollingInterval);\n                // Emit initial URL immediately\n                emitUrlChange();\n                // Return cleanup function to stop polling\n                return function () {\n                    if (urlChangeInterval_1) {\n                        globalScope.clearInterval(urlChangeInterval_1);\n                    }\n                };\n            }\n            // 2. if polling not enabled → check history, if exist, use history\n            if (globalScope.history) {\n                // Use History API + hashchange (covers History API + hash routing)\n                // Store original history methods for restoration during cleanup\n                var originalPushState_1 = globalScope.history.pushState.bind(globalScope.history);\n                var originalReplaceState_1 = globalScope.history.replaceState.bind(globalScope.history);\n                /**\n                 * Sets up history method patching to intercept pushState and replaceState calls\n                 * This ensures URL changes are detected even when history methods are called programmatically\n                 */\n                var setupHistoryPatching = function () {\n                    // Patch pushState to emit URL change events\n                    globalScope.history.pushState = createHistoryMethodPatch(originalPushState_1);\n                    // Patch replaceState to emit URL change events\n                    globalScope.history.replaceState = createHistoryMethodPatch(originalReplaceState_1);\n                };\n                // Apply history method patches\n                setupHistoryPatching();\n                // Listen to popstate events for browser back/forward navigation\n                globalScope.addEventListener('popstate', emitUrlChange);\n                // Listen to hashchange events for hash routing\n                globalScope.addEventListener('hashchange', hashChangeHandler);\n                // Emit initial URL immediately\n                emitUrlChange();\n                // Return cleanup function to restore original state\n                return function () {\n                    // Restore original history methods\n                    globalScope.history.pushState = originalPushState_1;\n                    globalScope.history.replaceState = originalReplaceState_1;\n                    // Remove popstate event listener\n                    globalScope.removeEventListener('popstate', emitUrlChange);\n                    // Remove hashchange event listener\n                    globalScope.removeEventListener('hashchange', hashChangeHandler);\n                };\n            }\n            // 3. if not, then the framework is probably using hash router → do hash\n            // Fallback: just hashchange (for pure hash routing)\n            globalScope.addEventListener('hashchange', hashChangeHandler);\n            emitUrlChange();\n            return function () {\n                globalScope.removeEventListener('hashchange', hashChangeHandler);\n            };\n        },\n        options: options,\n    };\n}\n/**\n * Default URL tracking plugin instance with default options\n * Can be used directly without custom configuration\n */\nexport var urlTrackingPlugin = createUrlTrackingPlugin();\n//# sourceMappingURL=url-tracking-plugin.js.map","import { __assign, __awaiter, __generator, __read, __spreadArray } from \"tslib\";\nimport { getAnalyticsConnector, getGlobalScope, Logger, returnWrapper, SpecialEventType, } from '@amplitude/analytics-core';\n// Import only specific types to avoid pulling in the entire rrweb-types package\nimport { EventType as RRWebEventType } from '@amplitude/rrweb-types';\nimport { createSessionReplayJoinedConfigGenerator } from './config/joined-config';\nimport { BLOCK_CLASS, CustomRRwebEvent, DEFAULT_SESSION_REPLAY_PROPERTY, INTERACTION_MAX_INTERVAL, INTERACTION_MIN_INTERVAL, MASK_TEXT_CLASS, SESSION_REPLAY_DEBUG_PROPERTY, } from './constants';\nimport { EventCompressor } from './events/event-compressor';\nimport { createEventsManager } from './events/events-manager';\nimport { MultiEventManager } from './events/multi-manager';\nimport { generateHashCode, getDebugConfig, getPageUrl, getStorageSize, isSessionInSample, maskFn } from './helpers';\nimport { clickBatcher, clickHook, clickNonBatcher } from './hooks/click';\nimport { ScrollWatcher } from './hooks/scroll';\nimport { SessionIdentifiers } from './identifiers';\nimport { SafeLoggerProvider } from './logger';\nimport { evaluateTargetingAndStore } from './targeting/targeting-manager';\nimport { VERSION } from './version';\nimport { createUrlTrackingPlugin } from './plugins/url-tracking-plugin';\nvar SessionReplay = /** @class */ (function () {\n    function SessionReplay() {\n        var _this = this;\n        this.name = '@amplitude/session-replay-browser';\n        this.recordCancelCallback = null;\n        this.eventCount = 0;\n        this.sessionTargetingMatch = false;\n        // Visible for testing only\n        this.pageLeaveFns = [];\n        // Cache the dynamically imported record function\n        this.recordFunction = null;\n        this.teardownEventListeners = function (teardown) {\n            var globalScope = getGlobalScope();\n            if (globalScope) {\n                globalScope.removeEventListener('blur', _this.blurListener);\n                globalScope.removeEventListener('focus', _this.focusListener);\n                !teardown && globalScope.addEventListener('blur', _this.blurListener);\n                !teardown && globalScope.addEventListener('focus', _this.focusListener);\n                // prefer pagehide to unload events, this is the standard going forward. it is not\n                // 100% reliable, but is bfcache-compatible.\n                if (globalScope.self && 'onpagehide' in globalScope.self) {\n                    globalScope.removeEventListener('pagehide', _this.pageLeaveListener);\n                    !teardown && globalScope.addEventListener('pagehide', _this.pageLeaveListener);\n                }\n                else {\n                    // this has performance implications, but is the only way we can reliably send events\n                    // in browser that don't support pagehide.\n                    globalScope.removeEventListener('beforeunload', _this.pageLeaveListener);\n                    !teardown && globalScope.addEventListener('beforeunload', _this.pageLeaveListener);\n                }\n            }\n        };\n        this.blurListener = function () {\n            _this.sendEvents();\n        };\n        this.focusListener = function () {\n            // Restart recording on focus to ensure that when user\n            // switches tabs, we take a full snapshot\n            void _this.recordEvents(false);\n        };\n        /**\n         * This is an instance member so that if init is called multiple times\n         * it doesn't add another listener to the page leave event. This is to\n         * prevent duplicate listener actions from firing.\n         */\n        this.pageLeaveListener = function (e) {\n            _this.pageLeaveFns.forEach(function (fn) {\n                fn(e);\n            });\n        };\n        this.evaluateTargetingAndCapture = function (targetingParams, isInit) {\n            if (isInit === void 0) { isInit = false; }\n            return __awaiter(_this, void 0, void 0, function () {\n                var eventForTargeting, _a;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            if (!this.identifiers || !this.identifiers.sessionId || !this.config) {\n                                if (this.identifiers && !this.identifiers.sessionId) {\n                                    this.loggerProvider.log('Session ID has not been set yet, cannot evaluate targeting for Session Replay.');\n                                }\n                                else {\n                                    this.loggerProvider.warn('Session replay init has not been called, cannot evaluate targeting.');\n                                }\n                                return [2 /*return*/];\n                            }\n                            // Store targeting parameters for use in getShouldRecord\n                            this.lastTargetingParams = targetingParams;\n                            if (!(this.config.targetingConfig && !this.sessionTargetingMatch)) return [3 /*break*/, 2];\n                            eventForTargeting = targetingParams.event;\n                            if (eventForTargeting &&\n                                Object.values(SpecialEventType).includes(eventForTargeting.event_type)) {\n                                eventForTargeting = undefined;\n                            }\n                            // We're setting this on this class because fetching the value from idb\n                            // is async, we need to access this value synchronously (for record\n                            // and for getSessionReplayProperties - both synchronous fns)\n                            _a = this;\n                            return [4 /*yield*/, evaluateTargetingAndStore({\n                                    sessionId: this.identifiers.sessionId,\n                                    targetingConfig: this.config.targetingConfig,\n                                    loggerProvider: this.loggerProvider,\n                                    apiKey: this.config.apiKey,\n                                    targetingParams: { userProperties: targetingParams.userProperties, event: eventForTargeting },\n                                })];\n                        case 1:\n                            // We're setting this on this class because fetching the value from idb\n                            // is async, we need to access this value synchronously (for record\n                            // and for getSessionReplayProperties - both synchronous fns)\n                            _a.sessionTargetingMatch = _b.sent();\n                            // Log the targeting config to debug\n                            this.loggerProvider.debug(JSON.stringify({\n                                name: 'targeted replay capture config',\n                                sessionTargetingMatch: this.sessionTargetingMatch,\n                                event: eventForTargeting,\n                                targetingParams: targetingParams,\n                            }, null, 2));\n                            _b.label = 2;\n                        case 2:\n                            if (!isInit) return [3 /*break*/, 3];\n                            void this.initialize(true);\n                            return [3 /*break*/, 5];\n                        case 3: return [4 /*yield*/, this.recordEvents()];\n                        case 4:\n                            _b.sent();\n                            _b.label = 5;\n                        case 5: return [2 /*return*/];\n                    }\n                });\n            });\n        };\n        this.addCustomRRWebEvent = function (eventName, eventData, addStorageInfo) {\n            if (eventData === void 0) { eventData = {}; }\n            if (addStorageInfo === void 0) { addStorageInfo = true; }\n            return __awaiter(_this, void 0, void 0, function () {\n                var debugInfo, config, storageSizeData, e_1;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            _a.trys.push([0, 3, , 4]);\n                            debugInfo = undefined;\n                            config = this.config;\n                            if (!(config && eventName !== CustomRRwebEvent.METADATA)) return [3 /*break*/, 2];\n                            debugInfo = {\n                                config: getDebugConfig(config),\n                                version: VERSION,\n                            };\n                            if (!addStorageInfo) return [3 /*break*/, 2];\n                            return [4 /*yield*/, getStorageSize()];\n                        case 1:\n                            storageSizeData = _a.sent();\n                            debugInfo = __assign(__assign({}, storageSizeData), debugInfo);\n                            _a.label = 2;\n                        case 2:\n                            // Check first to ensure we are recording\n                            if (this.recordCancelCallback && this.recordFunction) {\n                                this.recordFunction.addCustomEvent(eventName, __assign(__assign({}, eventData), debugInfo));\n                            }\n                            else {\n                                this.loggerProvider.debug(\"Not able to add custom replay capture event \".concat(eventName, \" due to no ongoing recording.\"));\n                            }\n                            return [3 /*break*/, 4];\n                        case 3:\n                            e_1 = _a.sent();\n                            this.loggerProvider.debug('Error while adding custom replay capture event: ', e_1);\n                            return [3 /*break*/, 4];\n                        case 4: return [2 /*return*/];\n                    }\n                });\n            });\n        };\n        this.stopRecordingEvents = function () {\n            var _a;\n            try {\n                _this.loggerProvider.log('Session Replay capture stopping.');\n                _this.recordCancelCallback && _this.recordCancelCallback();\n                _this.recordCancelCallback = null;\n                (_a = _this.networkObservers) === null || _a === void 0 ? void 0 : _a.stop();\n            }\n            catch (error) {\n                var typedError = error;\n                _this.loggerProvider.warn(\"Error occurred while stopping replay capture: \".concat(typedError.toString()));\n            }\n        };\n        this.loggerProvider = new SafeLoggerProvider(new Logger());\n    }\n    SessionReplay.prototype.init = function (apiKey, options) {\n        return returnWrapper(this._init(apiKey, options));\n    };\n    SessionReplay.prototype._init = function (apiKey, options) {\n        var _a, _b, _c, _d, _e, _f;\n        return __awaiter(this, void 0, void 0, function () {\n            var _g, _h, joinedConfig, localConfig, remoteConfig, scrollWatcher, managers, storeType, rrwebEventManager, error_1, typedError, payloadBatcher, interactionEventManager, error_2, typedError;\n            return __generator(this, function (_j) {\n                switch (_j.label) {\n                    case 0:\n                        this.loggerProvider = new SafeLoggerProvider(options.loggerProvider || new Logger());\n                        Object.prototype.hasOwnProperty.call(options, 'logLevel') &&\n                            this.loggerProvider.enable(options.logLevel);\n                        this.identifiers = new SessionIdentifiers({ sessionId: options.sessionId, deviceId: options.deviceId });\n                        _g = this;\n                        return [4 /*yield*/, createSessionReplayJoinedConfigGenerator(apiKey, options)];\n                    case 1:\n                        _g.joinedConfigGenerator = _j.sent();\n                        return [4 /*yield*/, this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId)];\n                    case 2:\n                        _h = _j.sent(), joinedConfig = _h.joinedConfig, localConfig = _h.localConfig, remoteConfig = _h.remoteConfig;\n                        this.config = joinedConfig;\n                        this.setMetadata(options.sessionId, joinedConfig, localConfig, remoteConfig, (_a = options.version) === null || _a === void 0 ? void 0 : _a.version, VERSION, (_b = options.version) === null || _b === void 0 ? void 0 : _b.type);\n                        if (options.sessionId && ((_c = this.config.interactionConfig) === null || _c === void 0 ? void 0 : _c.enabled)) {\n                            scrollWatcher = ScrollWatcher.default({\n                                sessionId: options.sessionId,\n                                type: 'interaction',\n                            }, this.config);\n                            this.pageLeaveFns = [scrollWatcher.send(this.getDeviceId.bind(this)).bind(scrollWatcher)];\n                            this.scrollHook = scrollWatcher.hook.bind(scrollWatcher);\n                        }\n                        managers = [];\n                        storeType = this.config.storeType;\n                        if (storeType === 'idb' && !((_d = getGlobalScope()) === null || _d === void 0 ? void 0 : _d.indexedDB)) {\n                            storeType = 'memory';\n                            this.loggerProvider.warn('Could not use preferred indexedDB storage, reverting to in memory option.');\n                        }\n                        this.loggerProvider.log(\"Using \".concat(storeType, \" for event storage.\"));\n                        _j.label = 3;\n                    case 3:\n                        _j.trys.push([3, 5, , 6]);\n                        return [4 /*yield*/, createEventsManager({\n                                config: this.config,\n                                sessionId: this.identifiers.sessionId,\n                                type: 'replay',\n                                storeType: storeType,\n                            })];\n                    case 4:\n                        rrwebEventManager = _j.sent();\n                        managers.push({ name: 'replay', manager: rrwebEventManager });\n                        return [3 /*break*/, 6];\n                    case 5:\n                        error_1 = _j.sent();\n                        typedError = error_1;\n                        this.loggerProvider.warn(\"Error occurred while creating replay events manager: \".concat(typedError.toString()));\n                        return [3 /*break*/, 6];\n                    case 6:\n                        if (!((_e = this.config.interactionConfig) === null || _e === void 0 ? void 0 : _e.enabled)) return [3 /*break*/, 10];\n                        payloadBatcher = this.config.interactionConfig.batch ? clickBatcher : clickNonBatcher;\n                        _j.label = 7;\n                    case 7:\n                        _j.trys.push([7, 9, , 10]);\n                        return [4 /*yield*/, createEventsManager({\n                                config: this.config,\n                                sessionId: this.identifiers.sessionId,\n                                type: 'interaction',\n                                minInterval: (_f = this.config.interactionConfig.trackEveryNms) !== null && _f !== void 0 ? _f : INTERACTION_MIN_INTERVAL,\n                                maxInterval: INTERACTION_MAX_INTERVAL,\n                                payloadBatcher: payloadBatcher,\n                                storeType: storeType,\n                            })];\n                    case 8:\n                        interactionEventManager = _j.sent();\n                        managers.push({ name: 'interaction', manager: interactionEventManager });\n                        return [3 /*break*/, 10];\n                    case 9:\n                        error_2 = _j.sent();\n                        typedError = error_2;\n                        this.loggerProvider.warn(\"Error occurred while creating interaction events manager: \".concat(typedError.toString()));\n                        return [3 /*break*/, 10];\n                    case 10:\n                        this.eventsManager = new (MultiEventManager.bind.apply(MultiEventManager, __spreadArray([void 0], __read(managers), false)))();\n                        // To prevent too many threads.\n                        if (this.eventCompressor) {\n                            this.eventCompressor.terminate();\n                        }\n                        this.eventCompressor = new EventCompressor(this.eventsManager, this.config, this.getDeviceId());\n                        return [4 /*yield*/, this.initializeNetworkObservers()];\n                    case 11:\n                        _j.sent();\n                        this.loggerProvider.log('Installing @amplitude/session-replay-browser.');\n                        this.teardownEventListeners(false);\n                        return [4 /*yield*/, this.evaluateTargetingAndCapture({ userProperties: options.userProperties }, true)];\n                    case 12:\n                        _j.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SessionReplay.prototype.setSessionId = function (sessionId, deviceId) {\n        return returnWrapper(this.asyncSetSessionId(sessionId, deviceId));\n    };\n    SessionReplay.prototype.asyncSetSessionId = function (sessionId, deviceId, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var previousSessionId, deviceIdForReplayId, joinedConfig;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.sessionTargetingMatch = false;\n                        this.lastShouldRecordDecision = undefined; // Reset targeting decision for new session\n                        previousSessionId = this.identifiers && this.identifiers.sessionId;\n                        if (previousSessionId) {\n                            this.sendEvents(previousSessionId);\n                        }\n                        deviceIdForReplayId = deviceId || this.getDeviceId();\n                        this.identifiers = new SessionIdentifiers({\n                            sessionId: sessionId,\n                            deviceId: deviceIdForReplayId,\n                        });\n                        if (!(this.joinedConfigGenerator && previousSessionId)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId)];\n                    case 1:\n                        joinedConfig = (_a.sent()).joinedConfig;\n                        this.config = joinedConfig;\n                        _a.label = 2;\n                    case 2: return [4 /*yield*/, this.evaluateTargetingAndCapture({ userProperties: options === null || options === void 0 ? void 0 : options.userProperties })];\n                    case 3:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SessionReplay.prototype.getSessionReplayProperties = function () {\n        var _a;\n        var config = this.config;\n        var identifiers = this.identifiers;\n        if (!config || !identifiers) {\n            this.loggerProvider.warn('Session replay init has not been called, cannot get session replay properties.');\n            return {};\n        }\n        var shouldRecord = this.getShouldRecord();\n        var eventProperties = {};\n        if (shouldRecord) {\n            eventProperties = (_a = {},\n                _a[DEFAULT_SESSION_REPLAY_PROPERTY] = identifiers.sessionReplayId ? identifiers.sessionReplayId : null,\n                _a);\n            if (config.debugMode) {\n                eventProperties[SESSION_REPLAY_DEBUG_PROPERTY] = JSON.stringify({\n                    appHash: generateHashCode(config.apiKey).toString(),\n                });\n            }\n        }\n        void this.addCustomRRWebEvent(CustomRRwebEvent.GET_SR_PROPS, {\n            shouldRecord: shouldRecord,\n            eventProperties: eventProperties,\n        }, this.eventCount === 10);\n        if (this.eventCount === 10) {\n            this.eventCount = 0;\n        }\n        this.eventCount++;\n        return eventProperties;\n    };\n    SessionReplay.prototype.sendEvents = function (sessionId) {\n        var _a;\n        var sessionIdToSend = sessionId || ((_a = this.identifiers) === null || _a === void 0 ? void 0 : _a.sessionId);\n        var deviceId = this.getDeviceId();\n        this.eventsManager &&\n            sessionIdToSend &&\n            deviceId &&\n            this.eventsManager.sendCurrentSequenceEvents({ sessionId: sessionIdToSend, deviceId: deviceId });\n    };\n    SessionReplay.prototype.initialize = function (shouldSendStoredEvents) {\n        var _a;\n        if (shouldSendStoredEvents === void 0) { shouldSendStoredEvents = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            var deviceId;\n            return __generator(this, function (_b) {\n                if (!((_a = this.identifiers) === null || _a === void 0 ? void 0 : _a.sessionId)) {\n                    this.loggerProvider.log(\"Session is not being recorded due to lack of session id.\");\n                    return [2 /*return*/, Promise.resolve()];\n                }\n                deviceId = this.getDeviceId();\n                if (!deviceId) {\n                    this.loggerProvider.log(\"Session is not being recorded due to lack of device id.\");\n                    return [2 /*return*/, Promise.resolve()];\n                }\n                this.eventsManager && shouldSendStoredEvents && void this.eventsManager.sendStoredEvents({ deviceId: deviceId });\n                return [2 /*return*/, this.recordEvents()];\n            });\n        });\n    };\n    SessionReplay.prototype.shouldOptOut = function () {\n        var _a, _b;\n        var identityStoreOptOut;\n        if ((_a = this.config) === null || _a === void 0 ? void 0 : _a.instanceName) {\n            var identityStore = getAnalyticsConnector(this.config.instanceName).identityStore;\n            identityStoreOptOut = identityStore.getIdentity().optOut;\n        }\n        return identityStoreOptOut !== undefined ? identityStoreOptOut : (_b = this.config) === null || _b === void 0 ? void 0 : _b.optOut;\n    };\n    SessionReplay.prototype.getShouldRecord = function () {\n        if (!this.identifiers || !this.config || !this.identifiers.sessionId) {\n            this.loggerProvider.warn(\"Session is not being recorded due to lack of config, please call sessionReplay.init.\");\n            return false;\n        }\n        if (!this.config.captureEnabled) {\n            this.loggerProvider.log(\"Session \".concat(this.identifiers.sessionId, \" not being captured due to capture being disabled for project or because the remote config could not be fetched.\"));\n            return false;\n        }\n        if (this.shouldOptOut()) {\n            this.loggerProvider.log(\"Opting session \".concat(this.identifiers.sessionId, \" out of recording due to optOut config.\"));\n            return false;\n        }\n        var shouldRecord = false;\n        var message = '';\n        var matched = false;\n        // If targetingConfig exists, we'll use the sessionTargetingMatch to determine whether to record\n        // Otherwise, we'll evaluate the session against the overall sample rate\n        if (this.config.targetingConfig) {\n            if (!this.sessionTargetingMatch) {\n                message = \"Not capturing replays for session \".concat(this.identifiers.sessionId, \" due to not matching targeting conditions.\");\n                this.loggerProvider.log(message);\n                shouldRecord = false;\n                matched = false;\n            }\n            else {\n                message = \"Capturing replays for session \".concat(this.identifiers.sessionId, \" due to matching targeting conditions.\");\n                this.loggerProvider.log(message);\n                shouldRecord = true;\n                matched = true;\n            }\n        }\n        else {\n            var isInSample = isSessionInSample(this.identifiers.sessionId, this.config.sampleRate);\n            if (!isInSample) {\n                message = \"Opting session \".concat(this.identifiers.sessionId, \" out of recording due to sample rate.\");\n                this.loggerProvider.log(message);\n                shouldRecord = false;\n                matched = false;\n            }\n            else {\n                shouldRecord = true;\n                matched = true;\n            }\n        }\n        // Only send custom rrweb event for targeting decision when the decision changes\n        if (this.lastShouldRecordDecision !== shouldRecord && this.config.targetingConfig) {\n            void this.addCustomRRWebEvent(CustomRRwebEvent.TARGETING_DECISION, {\n                message: message,\n                sessionId: this.identifiers.sessionId,\n                matched: matched,\n                targetingParams: this.lastTargetingParams,\n            });\n            this.lastShouldRecordDecision = shouldRecord;\n        }\n        return shouldRecord;\n    };\n    SessionReplay.prototype.getBlockSelectors = function () {\n        var _a, _b, _c;\n        // For some reason, this defaults to empty array ([]) if undefined in the compiled script.\n        // Empty arrays cause errors when being evaluated in Safari.\n        // Force the selector to be undefined if it's an empty array.\n        var blockSelector = (_c = (_b = (_a = this.config) === null || _a === void 0 ? void 0 : _a.privacyConfig) === null || _b === void 0 ? void 0 : _b.blockSelector) !== null && _c !== void 0 ? _c : [];\n        if (blockSelector.length === 0) {\n            return undefined;\n        }\n        return blockSelector;\n    };\n    SessionReplay.prototype.getMaskTextSelectors = function () {\n        var _a, _b, _c, _d;\n        if (((_b = (_a = this.config) === null || _a === void 0 ? void 0 : _a.privacyConfig) === null || _b === void 0 ? void 0 : _b.defaultMaskLevel) === 'conservative') {\n            return '*';\n        }\n        var maskSelector = (_d = (_c = this.config) === null || _c === void 0 ? void 0 : _c.privacyConfig) === null || _d === void 0 ? void 0 : _d.maskSelector;\n        if (!maskSelector) {\n            return;\n        }\n        return maskSelector;\n    };\n    SessionReplay.prototype.getRecordingPlugins = function (loggingConfig) {\n        var _a, _b, _c, _d, _e, _f;\n        return __awaiter(this, void 0, void 0, function () {\n            var plugins, urlTrackingPlugin, getRecordConsolePlugin, error_3;\n            return __generator(this, function (_g) {\n                switch (_g.label) {\n                    case 0:\n                        plugins = [];\n                        // Add URL tracking plugin\n                        try {\n                            urlTrackingPlugin = createUrlTrackingPlugin({\n                                ugcFilterRules: ((_b = (_a = this.config) === null || _a === void 0 ? void 0 : _a.interactionConfig) === null || _b === void 0 ? void 0 : _b.ugcFilterRules) || [],\n                                enablePolling: ((_c = this.config) === null || _c === void 0 ? void 0 : _c.enableUrlChangePolling) || false,\n                                pollingInterval: (_d = this.config) === null || _d === void 0 ? void 0 : _d.urlChangePollingInterval,\n                                captureDocumentTitle: (_e = this.config) === null || _e === void 0 ? void 0 : _e.captureDocumentTitle,\n                            });\n                            plugins.push(urlTrackingPlugin);\n                        }\n                        catch (error) {\n                            this.loggerProvider.warn('Failed to create URL tracking plugin:', error);\n                        }\n                        if (!((_f = loggingConfig === null || loggingConfig === void 0 ? void 0 : loggingConfig.console) === null || _f === void 0 ? void 0 : _f.enabled)) return [3 /*break*/, 4];\n                        _g.label = 1;\n                    case 1:\n                        _g.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, import('@amplitude/rrweb-plugin-console-record')];\n                    case 2:\n                        getRecordConsolePlugin = (_g.sent()).getRecordConsolePlugin;\n                        plugins.push(getRecordConsolePlugin({ level: loggingConfig.console.levels }));\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_3 = _g.sent();\n                        this.loggerProvider.warn('Failed to load console plugin:', error_3);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/, plugins.length > 0 ? plugins : undefined];\n                }\n            });\n        });\n    };\n    SessionReplay.prototype.getRecordFunction = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var record, error_4;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.recordFunction) {\n                            return [2 /*return*/, this.recordFunction];\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, import('@amplitude/rrweb-record')];\n                    case 2:\n                        record = (_a.sent()).record;\n                        this.recordFunction = record;\n                        return [2 /*return*/, record];\n                    case 3:\n                        error_4 = _a.sent();\n                        this.loggerProvider.warn('Failed to load rrweb-record module:', error_4);\n                        return [2 /*return*/, null];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SessionReplay.prototype.recordEvents = function (shouldLogMetadata) {\n        var _a, _b, _c, _d, _e;\n        if (shouldLogMetadata === void 0) { shouldLogMetadata = true; }\n        return __awaiter(this, void 0, void 0, function () {\n            var config, shouldRecord, sessionId, recordFunction, privacyConfig, interactionConfig, loggingConfig, hooks, ugcFilterRules, _f, _g, error_5;\n            var _h;\n            var _this = this;\n            return __generator(this, function (_j) {\n                switch (_j.label) {\n                    case 0:\n                        config = this.config;\n                        shouldRecord = this.getShouldRecord();\n                        sessionId = (_a = this.identifiers) === null || _a === void 0 ? void 0 : _a.sessionId;\n                        if (!shouldRecord || !sessionId || !config) {\n                            return [2 /*return*/];\n                        }\n                        this.stopRecordingEvents();\n                        return [4 /*yield*/, this.getRecordFunction()];\n                    case 1:\n                        recordFunction = _j.sent();\n                        // May be undefined if cannot import rrweb-record\n                        if (!recordFunction) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.initializeNetworkObservers()];\n                    case 2:\n                        _j.sent();\n                        (_b = this.networkObservers) === null || _b === void 0 ? void 0 : _b.start(function (event) {\n                            void _this.addCustomRRWebEvent(CustomRRwebEvent.FETCH_REQUEST, event);\n                        });\n                        privacyConfig = config.privacyConfig, interactionConfig = config.interactionConfig, loggingConfig = config.loggingConfig;\n                        hooks = (interactionConfig === null || interactionConfig === void 0 ? void 0 : interactionConfig.enabled)\n                            ? {\n                                mouseInteraction: this.eventsManager &&\n                                    clickHook(this.loggerProvider, {\n                                        eventsManager: this.eventsManager,\n                                        sessionId: sessionId,\n                                        deviceIdFn: this.getDeviceId.bind(this),\n                                        mirror: recordFunction.mirror,\n                                        ugcFilterRules: (_c = interactionConfig.ugcFilterRules) !== null && _c !== void 0 ? _c : [],\n                                    }),\n                                scroll: this.scrollHook,\n                            }\n                            : {};\n                        ugcFilterRules = (interactionConfig === null || interactionConfig === void 0 ? void 0 : interactionConfig.enabled) && interactionConfig.ugcFilterRules ? interactionConfig.ugcFilterRules : [];\n                        this.loggerProvider.log(\"Session Replay capture beginning for \".concat(sessionId, \".\"));\n                        _j.label = 3;\n                    case 3:\n                        _j.trys.push([3, 5, , 6]);\n                        _f = this;\n                        _g = recordFunction;\n                        _h = {\n                            emit: function (event) {\n                                if (_this.shouldOptOut()) {\n                                    _this.loggerProvider.log(\"Opting session \".concat(sessionId, \" out of recording due to optOut config.\"));\n                                    _this.stopRecordingEvents();\n                                    _this.sendEvents();\n                                    return;\n                                }\n                                if (event.type === RRWebEventType.Meta) {\n                                    event.data.href = getPageUrl(event.data.href, ugcFilterRules);\n                                }\n                                if (_this.eventCompressor) {\n                                    // Schedule processing during idle time if the browser supports requestIdleCallback\n                                    _this.eventCompressor.enqueueEvent(event, sessionId);\n                                }\n                            },\n                            inlineStylesheet: config.shouldInlineStylesheet,\n                            hooks: hooks,\n                            maskAllInputs: true,\n                            maskTextClass: MASK_TEXT_CLASS,\n                            blockClass: BLOCK_CLASS,\n                            blockSelector: this.getBlockSelectors(),\n                            applyBackgroundColorToBlockedElements: config.applyBackgroundColorToBlockedElements,\n                            maskInputFn: maskFn('input', privacyConfig),\n                            maskTextFn: maskFn('text', privacyConfig),\n                            maskTextSelector: this.getMaskTextSelectors(),\n                            recordCanvas: false,\n                            slimDOMOptions: {\n                                script: (_d = config.omitElementTags) === null || _d === void 0 ? void 0 : _d.script,\n                                comment: (_e = config.omitElementTags) === null || _e === void 0 ? void 0 : _e.comment,\n                            },\n                            errorHandler: function (error) {\n                                var typedError = error;\n                                // styled-components relies on this error being thrown and bubbled up, rrweb is otherwise suppressing it\n                                if (typedError.message.includes('insertRule') && typedError.message.includes('CSSStyleSheet')) {\n                                    throw typedError;\n                                }\n                                // rrweb does monkey patching on certain window functions such as CSSStyleSheet.proptype.insertRule,\n                                // and errors from external clients calling these functions can get suppressed. Styled components depend\n                                // on these errors being re-thrown.\n                                if (typedError._external_) {\n                                    throw typedError;\n                                }\n                                _this.loggerProvider.warn('Error while capturing replay: ', typedError.toString());\n                                // Return true so that we don't clutter user's consoles with internal rrweb errors\n                                return true;\n                            }\n                        };\n                        return [4 /*yield*/, this.getRecordingPlugins(loggingConfig)];\n                    case 4:\n                        _f.recordCancelCallback = _g.apply(void 0, [(_h.plugins = _j.sent(),\n                                _h)]);\n                        void this.addCustomRRWebEvent(CustomRRwebEvent.DEBUG_INFO);\n                        if (shouldLogMetadata) {\n                            void this.addCustomRRWebEvent(CustomRRwebEvent.METADATA, this.metadata);\n                        }\n                        return [3 /*break*/, 6];\n                    case 5:\n                        error_5 = _j.sent();\n                        this.loggerProvider.warn('Failed to initialize session replay:', error_5);\n                        return [3 /*break*/, 6];\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SessionReplay.prototype.getDeviceId = function () {\n        var _a;\n        return (_a = this.identifiers) === null || _a === void 0 ? void 0 : _a.deviceId;\n    };\n    SessionReplay.prototype.getSessionId = function () {\n        var _a;\n        return (_a = this.identifiers) === null || _a === void 0 ? void 0 : _a.sessionId;\n    };\n    SessionReplay.prototype.flush = function (useRetry) {\n        var _a;\n        if (useRetry === void 0) { useRetry = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                return [2 /*return*/, (_a = this.eventsManager) === null || _a === void 0 ? void 0 : _a.flush(useRetry)];\n            });\n        });\n    };\n    SessionReplay.prototype.shutdown = function () {\n        this.teardownEventListeners(true);\n        this.stopRecordingEvents();\n        this.sendEvents();\n    };\n    SessionReplay.prototype.mapSDKType = function (sdkType) {\n        if (sdkType === 'plugin') {\n            return '@amplitude/plugin-session-replay-browser';\n        }\n        if (sdkType === 'segment') {\n            return '@amplitude/segment-session-replay-plugin';\n        }\n        return null;\n    };\n    SessionReplay.prototype.setMetadata = function (sessionId, joinedConfig, localConfig, remoteConfig, replaySDKVersion, standaloneSDKVersion, sdkType) {\n        var hashValue = (sessionId === null || sessionId === void 0 ? void 0 : sessionId.toString()) ? generateHashCode(sessionId.toString()) : undefined;\n        this.metadata = {\n            joinedConfig: joinedConfig,\n            localConfig: localConfig,\n            remoteConfig: remoteConfig,\n            sessionId: sessionId,\n            hashValue: hashValue,\n            sampleRate: joinedConfig.sampleRate,\n            replaySDKType: this.mapSDKType(sdkType),\n            replaySDKVersion: replaySDKVersion,\n            standaloneSDKType: '@amplitude/session-replay-browser',\n            standaloneSDKVersion: standaloneSDKVersion,\n        };\n    };\n    SessionReplay.prototype.initializeNetworkObservers = function () {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function () {\n            var NetworkObserversClass, error_6;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        if (!(((_c = (_b = (_a = this.config) === null || _a === void 0 ? void 0 : _a.loggingConfig) === null || _b === void 0 ? void 0 : _b.network) === null || _c === void 0 ? void 0 : _c.enabled) && !this.networkObservers)) return [3 /*break*/, 4];\n                        _d.label = 1;\n                    case 1:\n                        _d.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, import('./observers')];\n                    case 2:\n                        NetworkObserversClass = (_d.sent()).NetworkObservers;\n                        this.networkObservers = new NetworkObserversClass();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_6 = _d.sent();\n                        this.loggerProvider.warn('Failed to import or instantiate NetworkObservers:', error_6);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return SessionReplay;\n}());\nexport { SessionReplay };\n//# sourceMappingURL=session-replay.js.map","export var IdentifyOperation;\n(function (IdentifyOperation) {\n    // Base Operations to set values\n    IdentifyOperation[\"SET\"] = \"$set\";\n    IdentifyOperation[\"SET_ONCE\"] = \"$setOnce\";\n    // Operations around modifying existing values\n    IdentifyOperation[\"ADD\"] = \"$add\";\n    IdentifyOperation[\"APPEND\"] = \"$append\";\n    IdentifyOperation[\"PREPEND\"] = \"$prepend\";\n    IdentifyOperation[\"REMOVE\"] = \"$remove\";\n    // Operations around appending values *if* they aren't present\n    IdentifyOperation[\"PREINSERT\"] = \"$preInsert\";\n    IdentifyOperation[\"POSTINSERT\"] = \"$postInsert\";\n    // Operations around removing properties/values\n    IdentifyOperation[\"UNSET\"] = \"$unset\";\n    IdentifyOperation[\"CLEAR_ALL\"] = \"$clearAll\";\n})(IdentifyOperation || (IdentifyOperation = {}));\nexport var RevenueProperty;\n(function (RevenueProperty) {\n    RevenueProperty[\"REVENUE_PRODUCT_ID\"] = \"$productId\";\n    RevenueProperty[\"REVENUE_QUANTITY\"] = \"$quantity\";\n    RevenueProperty[\"REVENUE_PRICE\"] = \"$price\";\n    RevenueProperty[\"REVENUE_TYPE\"] = \"$revenueType\";\n    RevenueProperty[\"REVENUE_CURRENCY\"] = \"$currency\";\n    RevenueProperty[\"REVENUE\"] = \"$revenue\";\n})(RevenueProperty || (RevenueProperty = {}));\n/**\n * Strings that have special meaning when used as an event's type\n * and have different specifications.\n */\nexport var SpecialEventType;\n(function (SpecialEventType) {\n    SpecialEventType[\"IDENTIFY\"] = \"$identify\";\n    SpecialEventType[\"GROUP_IDENTIFY\"] = \"$groupidentify\";\n    SpecialEventType[\"REVENUE\"] = \"revenue_amount\";\n})(SpecialEventType || (SpecialEventType = {}));\n//# sourceMappingURL=event.js.map","import { AnalyticsConnector } from '@amplitude/analytics-connector';\nimport { DEFAULT_INSTANCE_NAME } from './types/constants';\nexport var getAnalyticsConnector = function (instanceName) {\n    if (instanceName === void 0) { instanceName = DEFAULT_INSTANCE_NAME; }\n    return AnalyticsConnector.getInstance(instanceName);\n};\nexport var setConnectorUserId = function (userId, instanceName) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    getAnalyticsConnector(instanceName).identityStore.editIdentity().setUserId(userId).commit();\n};\nexport var setConnectorDeviceId = function (deviceId, instanceName) {\n    getAnalyticsConnector(instanceName).identityStore.editIdentity().setDeviceId(deviceId).commit();\n};\n//# sourceMappingURL=analytics-connector.js.map","import { debugWrapper } from '@amplitude/analytics-core';\nimport { getDefaultConfig } from './config/local-config';\nimport { SessionReplay } from './session-replay';\nexport var getLogConfig = function (sessionReplay) { return function () {\n    var config = sessionReplay.config;\n    var _a = config || getDefaultConfig(), logger = _a.loggerProvider, logLevel = _a.logLevel;\n    return {\n        logger: logger,\n        logLevel: logLevel,\n    };\n}; };\nvar createInstance = function () {\n    var sessionReplay = new SessionReplay();\n    return {\n        init: debugWrapper(sessionReplay.init.bind(sessionReplay), 'init', getLogConfig(sessionReplay)),\n        evaluateTargetingAndCapture: debugWrapper(sessionReplay.evaluateTargetingAndCapture.bind(sessionReplay), 'evaluateTargetingAndRecord', getLogConfig(sessionReplay)),\n        setSessionId: debugWrapper(sessionReplay.setSessionId.bind(sessionReplay), 'setSessionId', getLogConfig(sessionReplay)),\n        getSessionId: debugWrapper(sessionReplay.getSessionId.bind(sessionReplay), 'getSessionId', getLogConfig(sessionReplay)),\n        getSessionReplayProperties: debugWrapper(sessionReplay.getSessionReplayProperties.bind(sessionReplay), 'getSessionReplayProperties', getLogConfig(sessionReplay)),\n        flush: debugWrapper(sessionReplay.flush.bind(sessionReplay), 'flush', getLogConfig(sessionReplay)),\n        shutdown: debugWrapper(sessionReplay.shutdown.bind(sessionReplay), 'shutdown', getLogConfig(sessionReplay)),\n    };\n};\nexport default createInstance();\n//# sourceMappingURL=session-replay-factory.js.map","import sessionReplay from './session-replay-factory';\nexport var init = sessionReplay.init, setSessionId = sessionReplay.setSessionId, getSessionId = sessionReplay.getSessionId, getSessionReplayProperties = sessionReplay.getSessionReplayProperties, flush = sessionReplay.flush, shutdown = sessionReplay.shutdown, evaluateTargetingAndCapture = sessionReplay.evaluateTargetingAndCapture;\nexport { SafeLoggerProvider } from './logger';\n//# sourceMappingURL=index.js.map","import { IdentifyOperation } from '@amplitude/analytics-types';\n\nexport const PROPERTY_ADD_OPERATIONS = [\n  IdentifyOperation.SET,\n  IdentifyOperation.SET_ONCE,\n  IdentifyOperation.ADD,\n  IdentifyOperation.APPEND,\n  IdentifyOperation.PREPEND,\n  IdentifyOperation.POSTINSERT,\n];\n","// Autogenerated by `yarn version-file`. DO NOT EDIT\nexport const VERSION = '1.22.12';\n","import { BrowserClient, BrowserConfig, EnrichmentPlugin, Event, SpecialEventType } from '@amplitude/analytics-core';\nimport {\n  init,\n  setSessionId,\n  getSessionId,\n  getSessionReplayProperties,\n  flush,\n  shutdown,\n  evaluateTargetingAndCapture,\n  AmplitudeSessionReplay,\n  SessionReplayOptions as SessionReplayBrowserOptions,\n} from '@amplitude/session-replay-browser';\nimport { getAnalyticsConnector } from '@amplitude/analytics-client-common';\nimport { parseUserProperties } from './helpers';\nimport { SessionReplayOptions } from './typings/session-replay';\nimport { VERSION } from './version';\n\nexport class SessionReplayPlugin implements EnrichmentPlugin<BrowserClient, BrowserConfig> {\n  static pluginName = '@amplitude/plugin-session-replay-browser';\n  name = SessionReplayPlugin.pluginName;\n  type = 'enrichment' as const;\n  // this.config is defined in setup() which will always be called first\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  config: BrowserConfig;\n  options: SessionReplayOptions;\n  srInitOptions: SessionReplayBrowserOptions;\n  sessionReplay: AmplitudeSessionReplay = {\n    flush: flush,\n    getSessionId: getSessionId,\n    getSessionReplayProperties: getSessionReplayProperties,\n    init: init,\n    setSessionId: setSessionId,\n    shutdown: shutdown,\n    evaluateTargetingAndCapture: evaluateTargetingAndCapture,\n  };\n\n  constructor(options?: SessionReplayOptions) {\n    this.options = { forceSessionTracking: false, ...options };\n    this.srInitOptions = this.options;\n  }\n\n  async setup(config: BrowserConfig, _client: BrowserClient) {\n    try {\n      /* istanbul ignore next */\n      config?.loggerProvider.log(`Installing @amplitude/plugin-session-replay, version ${VERSION}.`);\n\n      this.config = config;\n\n      if (this.options.forceSessionTracking) {\n        if (typeof config.defaultTracking === 'boolean') {\n          if (config.defaultTracking === false) {\n            config.defaultTracking = {\n              pageViews: false,\n              formInteractions: false,\n              fileDownloads: false,\n              sessions: true,\n            };\n          }\n        } else {\n          config.defaultTracking = {\n            ...config.defaultTracking,\n            sessions: true,\n          };\n        }\n      }\n      const identityStore = getAnalyticsConnector(this.config.instanceName).identityStore;\n      const userProperties = identityStore.getIdentity().userProperties;\n\n      this.srInitOptions = {\n        instanceName: this.config.instanceName,\n        deviceId: this.options.deviceId ?? this.config.deviceId,\n        optOut: this.config.optOut,\n        sessionId: this.options.customSessionId ? undefined : this.config.sessionId,\n        loggerProvider: this.config.loggerProvider,\n        logLevel: this.config.logLevel,\n        flushMaxRetries: this.config.flushMaxRetries,\n        serverZone: this.config.serverZone,\n        configServerUrl: this.options.configServerUrl,\n        trackServerUrl: this.options.trackServerUrl,\n        sampleRate: this.options.sampleRate,\n        privacyConfig: {\n          blockSelector: this.options.privacyConfig?.blockSelector,\n          maskSelector: this.options.privacyConfig?.maskSelector,\n          unmaskSelector: this.options.privacyConfig?.unmaskSelector,\n          defaultMaskLevel: this.options.privacyConfig?.defaultMaskLevel,\n        },\n        debugMode: this.options.debugMode,\n        shouldInlineStylesheet: this.options.shouldInlineStylesheet,\n        version: { type: 'plugin', version: VERSION },\n        performanceConfig: this.options.performanceConfig,\n        storeType: this.options.storeType,\n        experimental: this.options.experimental,\n        userProperties: userProperties,\n        omitElementTags: this.options.omitElementTags,\n        applyBackgroundColorToBlockedElements: this.options.applyBackgroundColorToBlockedElements,\n        interactionConfig: this.options.interactionConfig,\n        captureDocumentTitle: this.options.captureDocumentTitle,\n        enableUrlChangePolling: this.options.enableUrlChangePolling,\n        urlChangePollingInterval: this.options.urlChangePollingInterval,\n      };\n\n      await this.sessionReplay.init(config.apiKey, this.srInitOptions).promise;\n    } catch (error) {\n      /* istanbul ignore next */\n      config?.loggerProvider.error(`Session Replay: Failed to initialize due to ${(error as Error).message}`);\n    }\n  }\n\n  async onSessionIdChanged(sessionId: number): Promise<void> {\n    this.config.loggerProvider.debug(\n      `Analytics session id is changed to ${sessionId}, SR session id is ${String(this.sessionReplay.getSessionId())}.`,\n    );\n    await this.sessionReplay.setSessionId(sessionId).promise;\n  }\n\n  async onOptOutChanged(optOut: boolean): Promise<void> {\n    this.config.loggerProvider.debug(\n      `optOut is changed to ${String(optOut)}, calling ${\n        optOut ? 'sessionReplay.shutdown()' : 'sessionReplay.init()'\n      }.`,\n    );\n    // TODO: compare optOut with this.sessionReplay.getOptOut().\n    // Need to add getOptOut() to the interface AmplitudeSessionReplay first.\n    if (optOut) {\n      this.sessionReplay.shutdown();\n    } else {\n      await this.sessionReplay.init(this.config.apiKey, this.srInitOptions).promise;\n    }\n  }\n\n  async execute(event: Event) {\n    try {\n      if (this.options.customSessionId) {\n        const sessionId = this.options.customSessionId(event);\n        if (sessionId) {\n          // On event, synchronize the session id to the custom session id from the event. This may\n          // suffer from offline/delayed events messing up the state stored\n          if (sessionId !== this.sessionReplay.getSessionId()) {\n            await this.sessionReplay.setSessionId(sessionId).promise;\n          }\n\n          const sessionRecordingProperties = this.sessionReplay.getSessionReplayProperties();\n          event.event_properties = {\n            ...event.event_properties,\n            ...sessionRecordingProperties,\n          };\n        }\n      } else {\n        // On event, synchronize the session id to the what's on the browserConfig (source of truth)\n        // Choosing not to read from event object here, concerned about offline/delayed events messing up the state stored\n        // in SR.\n        const sessionId: string | number | undefined = this.config.sessionId;\n        if (sessionId && sessionId !== this.sessionReplay.getSessionId()) {\n          await this.sessionReplay.setSessionId(sessionId).promise;\n        }\n\n        // Treating config.sessionId as source of truth, if the event's session id doesn't match, the\n        // event is not of the current session (offline/late events). In that case, don't tag the events\n        if (sessionId && sessionId === event.session_id) {\n          let userProperties;\n          if (event.event_type === SpecialEventType.IDENTIFY) {\n            userProperties = parseUserProperties(event);\n          }\n          await this.sessionReplay.evaluateTargetingAndCapture({ event, userProperties });\n          const sessionRecordingProperties = this.sessionReplay.getSessionReplayProperties();\n          event.event_properties = {\n            ...event.event_properties,\n            ...sessionRecordingProperties,\n          };\n        }\n      }\n\n      return Promise.resolve(event);\n    } catch (error) {\n      /* istanbul ignore next */\n      this.config?.loggerProvider.error(`Session Replay: Failed to enrich event due to ${(error as Error).message}`);\n      return Promise.resolve(event);\n    }\n  }\n\n  async teardown(): Promise<void> {\n    try {\n      this.sessionReplay.shutdown();\n      // the following are initialized in setup() which will always be called first\n      // here we reset them to null to prevent memory leaks\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      this.config = null;\n    } catch (error) {\n      /* istanbul ignore next */\n      this.config?.loggerProvider.error(`Session Replay: teardown failed due to ${(error as Error).message}`);\n    }\n  }\n\n  getSessionReplayProperties() {\n    return this.sessionReplay.getSessionReplayProperties();\n  }\n}\n\nexport const sessionReplayPlugin: (options?: SessionReplayOptions) => EnrichmentPlugin = (\n  options?: SessionReplayOptions,\n) => {\n  return new SessionReplayPlugin(options);\n};\n","import { AnalyticsConnector } from '@amplitude/analytics-connector';\nexport var getAnalyticsConnector = function (instanceName) {\n    if (instanceName === void 0) { instanceName = '$default_instance'; }\n    return AnalyticsConnector.getInstance(instanceName);\n};\nexport var setConnectorUserId = function (userId, instanceName) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    getAnalyticsConnector(instanceName).identityStore.editIdentity().setUserId(userId).commit();\n};\nexport var setConnectorDeviceId = function (deviceId, instanceName) {\n    getAnalyticsConnector(instanceName).identityStore.editIdentity().setDeviceId(deviceId).commit();\n};\n//# sourceMappingURL=analytics-connector.js.map","import { Event, IdentifyOperation } from '@amplitude/analytics-types';\nimport { PROPERTY_ADD_OPERATIONS } from './constants';\n\nexport const parseUserProperties = (event: Event) => {\n  if (!event.user_properties) {\n    return;\n  }\n  let userPropertiesObj = {};\n  const userPropertyKeys = Object.keys(event.user_properties);\n\n  userPropertyKeys.forEach((identifyKey) => {\n    if (PROPERTY_ADD_OPERATIONS.includes(identifyKey as IdentifyOperation)) {\n      const typedUserPropertiesOperation =\n        event.user_properties && (event.user_properties[identifyKey as IdentifyOperation] as Record<string, any>);\n      userPropertiesObj = {\n        ...userPropertiesObj,\n        ...typedUserPropertiesOperation,\n      };\n    }\n  });\n  return userPropertiesObj;\n};\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n}\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nvar EvaluationOperator = {\n    IS: 'is',\n    IS_NOT: 'is not',\n    CONTAINS: 'contains',\n    DOES_NOT_CONTAIN: 'does not contain',\n    LESS_THAN: 'less',\n    LESS_THAN_EQUALS: 'less or equal',\n    GREATER_THAN: 'greater',\n    GREATER_THAN_EQUALS: 'greater or equal',\n    VERSION_LESS_THAN: 'version less',\n    VERSION_LESS_THAN_EQUALS: 'version less or equal',\n    VERSION_GREATER_THAN: 'version greater',\n    VERSION_GREATER_THAN_EQUALS: 'version greater or equal',\n    SET_IS: 'set is',\n    SET_IS_NOT: 'set is not',\n    SET_CONTAINS: 'set contains',\n    SET_DOES_NOT_CONTAIN: 'set does not contain',\n    SET_CONTAINS_ANY: 'set contains any',\n    SET_DOES_NOT_CONTAIN_ANY: 'set does not contain any',\n    REGEX_MATCH: 'regex match',\n    REGEX_DOES_NOT_MATCH: 'regex does not match',\n};\n\nvar stringToUtf8ByteArray = function (str) {\n    var out = [];\n    var p = 0;\n    for (var i = 0; i < str.length; i++) {\n        var c = str.charCodeAt(i);\n        if (c < 128) {\n            out[p++] = c;\n        }\n        else if (c < 2048) {\n            out[p++] = (c >> 6) | 192;\n            out[p++] = (c & 63) | 128;\n        }\n        else if ((c & 0xfc00) == 0xd800 &&\n            i + 1 < str.length &&\n            (str.charCodeAt(i + 1) & 0xfc00) == 0xdc00) {\n            // Surrogate Pair\n            c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n            out[p++] = (c >> 18) | 240;\n            out[p++] = ((c >> 12) & 63) | 128;\n            out[p++] = ((c >> 6) & 63) | 128;\n            out[p++] = (c & 63) | 128;\n        }\n        else {\n            out[p++] = (c >> 12) | 224;\n            out[p++] = ((c >> 6) & 63) | 128;\n            out[p++] = (c & 63) | 128;\n        }\n    }\n    return Uint8Array.from(out);\n};\n\nvar C1_32 = -0x3361d2af;\nvar C2_32 = 0x1b873593;\nvar R1_32 = 15;\nvar R2_32 = 13;\nvar M_32 = 5;\nvar N_32 = -0x19ab949c;\nvar hash32x86 = function (input, seed) {\n    if (seed === void 0) { seed = 0; }\n    var data = stringToUtf8ByteArray(input);\n    var length = data.length;\n    var nBlocks = length >> 2;\n    var hash = seed;\n    // body\n    for (var i = 0; i < nBlocks; i++) {\n        var index_1 = i << 2;\n        var k = readIntLe(data, index_1);\n        hash = mix32(k, hash);\n    }\n    // tail\n    var index = nBlocks << 2;\n    var k1 = 0;\n    switch (length - index) {\n        case 3:\n            k1 ^= data[index + 2] << 16;\n            k1 ^= data[index + 1] << 8;\n            k1 ^= data[index];\n            k1 = Math.imul(k1, C1_32);\n            k1 = rotateLeft(k1, R1_32);\n            k1 = Math.imul(k1, C2_32);\n            hash ^= k1;\n            break;\n        case 2:\n            k1 ^= data[index + 1] << 8;\n            k1 ^= data[index];\n            k1 = Math.imul(k1, C1_32);\n            k1 = rotateLeft(k1, R1_32);\n            k1 = Math.imul(k1, C2_32);\n            hash ^= k1;\n            break;\n        case 1:\n            k1 ^= data[index];\n            k1 = Math.imul(k1, C1_32);\n            k1 = rotateLeft(k1, R1_32);\n            k1 = Math.imul(k1, C2_32);\n            hash ^= k1;\n            break;\n    }\n    hash ^= length;\n    return fmix32(hash) >>> 0;\n};\nvar mix32 = function (k, hash) {\n    var kResult = k;\n    var hashResult = hash;\n    kResult = Math.imul(kResult, C1_32);\n    kResult = rotateLeft(kResult, R1_32);\n    kResult = Math.imul(kResult, C2_32);\n    hashResult ^= kResult;\n    hashResult = rotateLeft(hashResult, R2_32);\n    hashResult = Math.imul(hashResult, M_32);\n    return (hashResult + N_32) | 0;\n};\nvar fmix32 = function (hash) {\n    var hashResult = hash;\n    hashResult ^= hashResult >>> 16;\n    hashResult = Math.imul(hashResult, -0x7a143595);\n    hashResult ^= hashResult >>> 13;\n    hashResult = Math.imul(hashResult, -0x3d4d51cb);\n    hashResult ^= hashResult >>> 16;\n    return hashResult;\n};\nvar rotateLeft = function (x, n, width) {\n    if (width === void 0) { width = 32; }\n    if (n > width)\n        n = n % width;\n    var mask = (0xffffffff << (width - n)) >>> 0;\n    var r = (((x & mask) >>> 0) >>> (width - n)) >>> 0;\n    return ((x << n) | r) >>> 0;\n};\nvar readIntLe = function (data, index) {\n    if (index === void 0) { index = 0; }\n    var n = (data[index] << 24) |\n        (data[index + 1] << 16) |\n        (data[index + 2] << 8) |\n        data[index + 3];\n    return reverseBytes(n);\n};\nvar reverseBytes = function (n) {\n    return (((n & -0x1000000) >>> 24) |\n        ((n & 0x00ff0000) >>> 8) |\n        ((n & 0x0000ff00) << 8) |\n        ((n & 0x000000ff) << 24));\n};\n\nvar select = function (selectable, selector) {\n    var e_1, _a;\n    if (!selector || selector.length === 0) {\n        return undefined;\n    }\n    try {\n        for (var selector_1 = __values(selector), selector_1_1 = selector_1.next(); !selector_1_1.done; selector_1_1 = selector_1.next()) {\n            var selectorElement = selector_1_1.value;\n            if (!selectorElement || !selectable || typeof selectable !== 'object') {\n                return undefined;\n            }\n            selectable = selectable[selectorElement];\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (selector_1_1 && !selector_1_1.done && (_a = selector_1.return)) _a.call(selector_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    if (!selectable) {\n        return undefined;\n    }\n    else {\n        return selectable;\n    }\n};\n\n// major and minor should be non-negative numbers separated by a dot\nvar MAJOR_MINOR_REGEX = '(\\\\d+)\\\\.(\\\\d+)';\n// patch should be a non-negative number\nvar PATCH_REGEX = '(\\\\d+)';\n// prerelease is optional. If provided, it should be a hyphen followed by a\n// series of dot separated identifiers where an identifer can contain anything in [-0-9a-zA-Z]\nvar PRERELEASE_REGEX = '(-(([-\\\\w]+\\\\.?)*))?';\n// version pattern should be major.minor(.patchAndPreRelease) where .patchAndPreRelease is optional\nvar VERSION_PATTERN = \"^\".concat(MAJOR_MINOR_REGEX, \"(\\\\.\").concat(PATCH_REGEX).concat(PRERELEASE_REGEX, \")?$\");\nvar SemanticVersion = /** @class */ (function () {\n    function SemanticVersion(major, minor, patch, preRelease) {\n        if (preRelease === void 0) { preRelease = undefined; }\n        this.major = major;\n        this.minor = minor;\n        this.patch = patch;\n        this.preRelease = preRelease;\n    }\n    SemanticVersion.parse = function (version) {\n        if (!version) {\n            return undefined;\n        }\n        var matchGroup = new RegExp(VERSION_PATTERN).exec(version);\n        if (!matchGroup) {\n            return undefined;\n        }\n        var major = Number(matchGroup[1]);\n        var minor = Number(matchGroup[2]);\n        if (isNaN(major) || isNaN(minor)) {\n            return undefined;\n        }\n        var patch = Number(matchGroup[4]) || 0;\n        var preRelease = matchGroup[5] || undefined;\n        return new SemanticVersion(major, minor, patch, preRelease);\n    };\n    SemanticVersion.prototype.compareTo = function (other) {\n        if (this.major > other.major)\n            return 1;\n        if (this.major < other.major)\n            return -1;\n        if (this.minor > other.minor)\n            return 1;\n        if (this.minor < other.minor)\n            return -1;\n        if (this.patch > other.patch)\n            return 1;\n        if (this.patch < other.patch)\n            return -1;\n        if (this.preRelease && !other.preRelease)\n            return -1;\n        if (!this.preRelease && other.preRelease)\n            return 1;\n        if (this.preRelease && other.preRelease) {\n            if (this.preRelease > other.preRelease)\n                return 1;\n            if (this.preRelease < other.preRelease)\n                return -1;\n            return 0;\n        }\n        return 0;\n    };\n    return SemanticVersion;\n}());\n\nvar EvaluationEngine = /** @class */ (function () {\n    function EvaluationEngine() {\n    }\n    EvaluationEngine.prototype.evaluate = function (context, flags) {\n        var e_1, _a;\n        var results = {};\n        var target = {\n            context: context,\n            result: results,\n        };\n        try {\n            for (var flags_1 = __values(flags), flags_1_1 = flags_1.next(); !flags_1_1.done; flags_1_1 = flags_1.next()) {\n                var flag = flags_1_1.value;\n                // Evaluate flag and update results.\n                var variant = this.evaluateFlag(target, flag);\n                if (variant) {\n                    results[flag.key] = variant;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (flags_1_1 && !flags_1_1.done && (_a = flags_1.return)) _a.call(flags_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return results;\n    };\n    EvaluationEngine.prototype.evaluateFlag = function (target, flag) {\n        var e_2, _a;\n        var result;\n        try {\n            for (var _b = __values(flag.segments), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var segment = _c.value;\n                result = this.evaluateSegment(target, flag, segment);\n                if (result) {\n                    // Merge all metadata into the result\n                    var metadata = __assign(__assign(__assign({}, flag.metadata), segment.metadata), result.metadata);\n                    result = __assign(__assign({}, result), { metadata: metadata });\n                    break;\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return result;\n    };\n    EvaluationEngine.prototype.evaluateSegment = function (target, flag, segment) {\n        var e_3, _a, e_4, _b;\n        if (!segment.conditions) {\n            // Null conditions always match\n            var variantKey = this.bucket(target, segment);\n            if (variantKey !== undefined) {\n                return flag.variants[variantKey];\n            }\n            else {\n                return undefined;\n            }\n        }\n        try {\n            // Outer list logic is \"or\" (||)\n            for (var _c = __values(segment.conditions), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var conditions = _d.value;\n                var match = true;\n                try {\n                    for (var conditions_1 = (e_4 = void 0, __values(conditions)), conditions_1_1 = conditions_1.next(); !conditions_1_1.done; conditions_1_1 = conditions_1.next()) {\n                        var condition = conditions_1_1.value;\n                        match = this.matchCondition(target, condition);\n                        if (!match) {\n                            break;\n                        }\n                    }\n                }\n                catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                finally {\n                    try {\n                        if (conditions_1_1 && !conditions_1_1.done && (_b = conditions_1.return)) _b.call(conditions_1);\n                    }\n                    finally { if (e_4) throw e_4.error; }\n                }\n                // On match, bucket the user.\n                if (match) {\n                    var variantKey = this.bucket(target, segment);\n                    if (variantKey !== undefined) {\n                        return flag.variants[variantKey];\n                    }\n                    else {\n                        return undefined;\n                    }\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return undefined;\n    };\n    EvaluationEngine.prototype.matchCondition = function (target, condition) {\n        var propValue = select(target, condition.selector);\n        // We need special matching for null properties and set type prop values\n        // and operators. All other values are matched as strings, since the\n        // filter values are always strings.\n        if (!propValue) {\n            return this.matchNull(condition.op, condition.values);\n        }\n        else if (this.isSetOperator(condition.op)) {\n            var propValueStringList = this.coerceStringArray(propValue);\n            if (!propValueStringList) {\n                return false;\n            }\n            return this.matchSet(propValueStringList, condition.op, condition.values);\n        }\n        else {\n            var propValueString = this.coerceString(propValue);\n            if (propValueString !== undefined) {\n                return this.matchString(propValueString, condition.op, condition.values);\n            }\n            else {\n                return false;\n            }\n        }\n    };\n    EvaluationEngine.prototype.getHash = function (key) {\n        return hash32x86(key);\n    };\n    EvaluationEngine.prototype.bucket = function (target, segment) {\n        var e_5, _a, e_6, _b;\n        if (!segment.bucket) {\n            // A null bucket means the segment is fully rolled out. Select the\n            // default variant.\n            return segment.variant;\n        }\n        // Select the bucketing value.\n        var bucketingValue = this.coerceString(select(target, segment.bucket.selector));\n        if (!bucketingValue || bucketingValue.length === 0) {\n            // A null or empty bucketing value cannot be bucketed. Select the\n            // default variant.\n            return segment.variant;\n        }\n        // Salt and has the value, and compute the allocation and distribution\n        // values.\n        var keyToHash = \"\".concat(segment.bucket.salt, \"/\").concat(bucketingValue);\n        var hash = this.getHash(keyToHash);\n        var allocationValue = hash % 100;\n        var distributionValue = Math.floor(hash / 100);\n        try {\n            for (var _c = __values(segment.bucket.allocations), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var allocation = _d.value;\n                var allocationStart = allocation.range[0];\n                var allocationEnd = allocation.range[1];\n                if (allocationValue >= allocationStart &&\n                    allocationValue < allocationEnd) {\n                    try {\n                        for (var _e = (e_6 = void 0, __values(allocation.distributions)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                            var distribution = _f.value;\n                            var distributionStart = distribution.range[0];\n                            var distributionEnd = distribution.range[1];\n                            if (distributionValue >= distributionStart &&\n                                distributionValue < distributionEnd) {\n                                return distribution.variant;\n                            }\n                        }\n                    }\n                    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n                    finally {\n                        try {\n                            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                        }\n                        finally { if (e_6) throw e_6.error; }\n                    }\n                }\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n        return segment.variant;\n    };\n    EvaluationEngine.prototype.matchNull = function (op, filterValues) {\n        var containsNone = this.containsNone(filterValues);\n        switch (op) {\n            case EvaluationOperator.IS:\n            case EvaluationOperator.CONTAINS:\n            case EvaluationOperator.LESS_THAN:\n            case EvaluationOperator.LESS_THAN_EQUALS:\n            case EvaluationOperator.GREATER_THAN:\n            case EvaluationOperator.GREATER_THAN_EQUALS:\n            case EvaluationOperator.VERSION_LESS_THAN:\n            case EvaluationOperator.VERSION_LESS_THAN_EQUALS:\n            case EvaluationOperator.VERSION_GREATER_THAN:\n            case EvaluationOperator.VERSION_GREATER_THAN_EQUALS:\n            case EvaluationOperator.SET_IS:\n            case EvaluationOperator.SET_CONTAINS:\n            case EvaluationOperator.SET_CONTAINS_ANY:\n                return containsNone;\n            case EvaluationOperator.IS_NOT:\n            case EvaluationOperator.DOES_NOT_CONTAIN:\n            case EvaluationOperator.SET_DOES_NOT_CONTAIN:\n            case EvaluationOperator.SET_DOES_NOT_CONTAIN_ANY:\n                return !containsNone;\n            default:\n                return false;\n        }\n    };\n    EvaluationEngine.prototype.matchSet = function (propValues, op, filterValues) {\n        switch (op) {\n            case EvaluationOperator.SET_IS:\n                return this.setEquals(propValues, filterValues);\n            case EvaluationOperator.SET_IS_NOT:\n                return !this.setEquals(propValues, filterValues);\n            case EvaluationOperator.SET_CONTAINS:\n                return this.matchesSetContainsAll(propValues, filterValues);\n            case EvaluationOperator.SET_DOES_NOT_CONTAIN:\n                return !this.matchesSetContainsAll(propValues, filterValues);\n            case EvaluationOperator.SET_CONTAINS_ANY:\n                return this.matchesSetContainsAny(propValues, filterValues);\n            case EvaluationOperator.SET_DOES_NOT_CONTAIN_ANY:\n                return !this.matchesSetContainsAny(propValues, filterValues);\n            default:\n                return false;\n        }\n    };\n    EvaluationEngine.prototype.matchString = function (propValue, op, filterValues) {\n        var _this = this;\n        switch (op) {\n            case EvaluationOperator.IS:\n                return this.matchesIs(propValue, filterValues);\n            case EvaluationOperator.IS_NOT:\n                return !this.matchesIs(propValue, filterValues);\n            case EvaluationOperator.CONTAINS:\n                return this.matchesContains(propValue, filterValues);\n            case EvaluationOperator.DOES_NOT_CONTAIN:\n                return !this.matchesContains(propValue, filterValues);\n            case EvaluationOperator.LESS_THAN:\n            case EvaluationOperator.LESS_THAN_EQUALS:\n            case EvaluationOperator.GREATER_THAN:\n            case EvaluationOperator.GREATER_THAN_EQUALS:\n                return this.matchesComparable(propValue, op, filterValues, function (value) { return _this.parseNumber(value); }, this.comparator);\n            case EvaluationOperator.VERSION_LESS_THAN:\n            case EvaluationOperator.VERSION_LESS_THAN_EQUALS:\n            case EvaluationOperator.VERSION_GREATER_THAN:\n            case EvaluationOperator.VERSION_GREATER_THAN_EQUALS:\n                return this.matchesComparable(propValue, op, filterValues, function (value) { return SemanticVersion.parse(value); }, this.versionComparator);\n            case EvaluationOperator.REGEX_MATCH:\n                return this.matchesRegex(propValue, filterValues);\n            case EvaluationOperator.REGEX_DOES_NOT_MATCH:\n                return !this.matchesRegex(propValue, filterValues);\n            default:\n                return false;\n        }\n    };\n    EvaluationEngine.prototype.matchesIs = function (propValue, filterValues) {\n        if (this.containsBooleans(filterValues)) {\n            var lower_1 = propValue.toLowerCase();\n            if (lower_1 === 'true' || lower_1 === 'false') {\n                return filterValues.some(function (value) { return value.toLowerCase() === lower_1; });\n            }\n        }\n        return filterValues.some(function (value) { return propValue === value; });\n    };\n    EvaluationEngine.prototype.matchesContains = function (propValue, filterValues) {\n        var e_7, _a;\n        try {\n            for (var filterValues_1 = __values(filterValues), filterValues_1_1 = filterValues_1.next(); !filterValues_1_1.done; filterValues_1_1 = filterValues_1.next()) {\n                var filterValue = filterValues_1_1.value;\n                if (propValue.toLowerCase().includes(filterValue.toLowerCase())) {\n                    return true;\n                }\n            }\n        }\n        catch (e_7_1) { e_7 = { error: e_7_1 }; }\n        finally {\n            try {\n                if (filterValues_1_1 && !filterValues_1_1.done && (_a = filterValues_1.return)) _a.call(filterValues_1);\n            }\n            finally { if (e_7) throw e_7.error; }\n        }\n        return false;\n    };\n    EvaluationEngine.prototype.matchesComparable = function (propValue, op, filterValues, typeTransformer, typeComparator) {\n        var _this = this;\n        var propValueTransformed = typeTransformer(propValue);\n        var filterValuesTransformed = filterValues\n            .map(function (filterValue) {\n            return typeTransformer(filterValue);\n        })\n            .filter(function (filterValue) {\n            return filterValue !== undefined;\n        });\n        if (propValueTransformed === undefined ||\n            filterValuesTransformed.length === 0) {\n            return filterValues.some(function (filterValue) {\n                return _this.comparator(propValue, op, filterValue);\n            });\n        }\n        else {\n            return filterValuesTransformed.some(function (filterValueTransformed) {\n                return typeComparator(propValueTransformed, op, filterValueTransformed);\n            });\n        }\n    };\n    EvaluationEngine.prototype.comparator = function (propValue, op, filterValue) {\n        switch (op) {\n            case EvaluationOperator.LESS_THAN:\n            case EvaluationOperator.VERSION_LESS_THAN:\n                return propValue < filterValue;\n            case EvaluationOperator.LESS_THAN_EQUALS:\n            case EvaluationOperator.VERSION_LESS_THAN_EQUALS:\n                return propValue <= filterValue;\n            case EvaluationOperator.GREATER_THAN:\n            case EvaluationOperator.VERSION_GREATER_THAN:\n                return propValue > filterValue;\n            case EvaluationOperator.GREATER_THAN_EQUALS:\n            case EvaluationOperator.VERSION_GREATER_THAN_EQUALS:\n                return propValue >= filterValue;\n            default:\n                return false;\n        }\n    };\n    EvaluationEngine.prototype.versionComparator = function (propValue, op, filterValue) {\n        var compareTo = propValue.compareTo(filterValue);\n        switch (op) {\n            case EvaluationOperator.LESS_THAN:\n            case EvaluationOperator.VERSION_LESS_THAN:\n                return compareTo < 0;\n            case EvaluationOperator.LESS_THAN_EQUALS:\n            case EvaluationOperator.VERSION_LESS_THAN_EQUALS:\n                return compareTo <= 0;\n            case EvaluationOperator.GREATER_THAN:\n            case EvaluationOperator.VERSION_GREATER_THAN:\n                return compareTo > 0;\n            case EvaluationOperator.GREATER_THAN_EQUALS:\n            case EvaluationOperator.VERSION_GREATER_THAN_EQUALS:\n                return compareTo >= 0;\n            default:\n                return false;\n        }\n    };\n    EvaluationEngine.prototype.matchesRegex = function (propValue, filterValues) {\n        return filterValues.some(function (filterValue) {\n            return Boolean(new RegExp(filterValue).exec(propValue));\n        });\n    };\n    EvaluationEngine.prototype.containsNone = function (filterValues) {\n        return filterValues.some(function (filterValue) {\n            return filterValue === '(none)';\n        });\n    };\n    EvaluationEngine.prototype.containsBooleans = function (filterValues) {\n        return filterValues.some(function (filterValue) {\n            switch (filterValue.toLowerCase()) {\n                case 'true':\n                case 'false':\n                    return true;\n                default:\n                    return false;\n            }\n        });\n    };\n    EvaluationEngine.prototype.parseNumber = function (value) {\n        var _a;\n        return (_a = Number(value)) !== null && _a !== void 0 ? _a : undefined;\n    };\n    EvaluationEngine.prototype.coerceString = function (value) {\n        if (!value) {\n            return undefined;\n        }\n        if (typeof value === 'object') {\n            return JSON.stringify(value);\n        }\n        return String(value);\n    };\n    EvaluationEngine.prototype.coerceStringArray = function (value) {\n        var _this = this;\n        if (Array.isArray(value)) {\n            var anyArray = value;\n            return anyArray\n                .map(function (e) { return _this.coerceString(e); })\n                .filter(Boolean);\n        }\n        var stringValue = String(value);\n        try {\n            var parsedValue = JSON.parse(stringValue);\n            if (Array.isArray(parsedValue)) {\n                var anyArray = value;\n                return anyArray\n                    .map(function (e) { return _this.coerceString(e); })\n                    .filter(Boolean);\n            }\n            else {\n                return undefined;\n            }\n        }\n        catch (_a) {\n            return undefined;\n        }\n    };\n    EvaluationEngine.prototype.isSetOperator = function (op) {\n        switch (op) {\n            case EvaluationOperator.SET_IS:\n            case EvaluationOperator.SET_IS_NOT:\n            case EvaluationOperator.SET_CONTAINS:\n            case EvaluationOperator.SET_DOES_NOT_CONTAIN:\n            case EvaluationOperator.SET_CONTAINS_ANY:\n            case EvaluationOperator.SET_DOES_NOT_CONTAIN_ANY:\n                return true;\n            default:\n                return false;\n        }\n    };\n    EvaluationEngine.prototype.setEquals = function (xa, ya) {\n        var xs = new Set(xa);\n        var ys = new Set(ya);\n        return xs.size === ys.size && __spreadArray([], __read(ys), false).every(function (y) { return xs.has(y); });\n    };\n    EvaluationEngine.prototype.matchesSetContainsAll = function (propValues, filterValues) {\n        var e_8, _a;\n        if (propValues.length < filterValues.length) {\n            return false;\n        }\n        try {\n            for (var filterValues_2 = __values(filterValues), filterValues_2_1 = filterValues_2.next(); !filterValues_2_1.done; filterValues_2_1 = filterValues_2.next()) {\n                var filterValue = filterValues_2_1.value;\n                if (!this.matchesIs(filterValue, propValues)) {\n                    return false;\n                }\n            }\n        }\n        catch (e_8_1) { e_8 = { error: e_8_1 }; }\n        finally {\n            try {\n                if (filterValues_2_1 && !filterValues_2_1.done && (_a = filterValues_2.return)) _a.call(filterValues_2);\n            }\n            finally { if (e_8) throw e_8.error; }\n        }\n        return true;\n    };\n    EvaluationEngine.prototype.matchesSetContainsAny = function (propValues, filterValues) {\n        var e_9, _a;\n        try {\n            for (var filterValues_3 = __values(filterValues), filterValues_3_1 = filterValues_3.next(); !filterValues_3_1.done; filterValues_3_1 = filterValues_3.next()) {\n                var filterValue = filterValues_3_1.value;\n                if (this.matchesIs(filterValue, propValues)) {\n                    return true;\n                }\n            }\n        }\n        catch (e_9_1) { e_9 = { error: e_9_1 }; }\n        finally {\n            try {\n                if (filterValues_3_1 && !filterValues_3_1.done && (_a = filterValues_3.return)) _a.call(filterValues_3);\n            }\n            finally { if (e_9) throw e_9.error; }\n        }\n        return false;\n    };\n    return EvaluationEngine;\n}());\n\nvar topologicalSort = function (flags, flagKeys) {\n    var e_1, _a;\n    var available = __assign({}, flags);\n    var result = [];\n    var startingKeys = flagKeys || Object.keys(available);\n    try {\n        for (var startingKeys_1 = __values(startingKeys), startingKeys_1_1 = startingKeys_1.next(); !startingKeys_1_1.done; startingKeys_1_1 = startingKeys_1.next()) {\n            var flagKey = startingKeys_1_1.value;\n            var traversal = parentTraversal(flagKey, available);\n            if (traversal) {\n                result.push.apply(result, __spreadArray([], __read(traversal), false));\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (startingKeys_1_1 && !startingKeys_1_1.done && (_a = startingKeys_1.return)) _a.call(startingKeys_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return result;\n};\nvar parentTraversal = function (flagKey, available, path) {\n    var e_2, _a;\n    if (path === void 0) { path = []; }\n    var flag = available[flagKey];\n    if (!flag) {\n        return undefined;\n    }\n    else if (!flag.dependencies || flag.dependencies.length === 0) {\n        delete available[flag.key];\n        return [flag];\n    }\n    path.push(flag.key);\n    var result = [];\n    var _loop_1 = function (parentKey) {\n        if (path.some(function (p) { return p === parentKey; })) {\n            throw Error(\"Detected a cycle between flags \".concat(path));\n        }\n        var traversal = parentTraversal(parentKey, available, path);\n        if (traversal) {\n            result.push.apply(result, __spreadArray([], __read(traversal), false));\n        }\n    };\n    try {\n        for (var _b = __values(flag.dependencies), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var parentKey = _c.value;\n            _loop_1(parentKey);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    result.push(flag);\n    path.pop();\n    delete available[flag.key];\n    return result;\n};\n\n/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.5';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasatob = typeof atob === 'function';\nconst _hasbtoa = typeof btoa === 'function';\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = (a => {\n  let tab = {};\n  a.forEach((c, i) => tab[c] = i);\n  return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function' ? Uint8Array.from.bind(Uint8Array) : it => new Uint8Array(Array.prototype.slice.call(it, 0));\nconst _mkUriSafe = src => src.replace(/=/g, '').replace(/[+\\/]/g, m0 => m0 == '+' ? '-' : '_');\nconst _tidyB64 = s => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = bin => {\n  // console.log('polyfilled');\n  let u32,\n    c0,\n    c1,\n    c2,\n    asc = '';\n  const pad = bin.length % 3;\n  for (let i = 0; i < bin.length;) {\n    if ((c0 = bin.charCodeAt(i++)) > 255 || (c1 = bin.charCodeAt(i++)) > 255 || (c2 = bin.charCodeAt(i++)) > 255) throw new TypeError('invalid character found');\n    u32 = c0 << 16 | c1 << 8 | c2;\n    asc += b64chs[u32 >> 18 & 63] + b64chs[u32 >> 12 & 63] + b64chs[u32 >> 6 & 63] + b64chs[u32 & 63];\n  }\n  return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = _hasbtoa ? bin => btoa(bin) : _hasBuffer ? bin => Buffer.from(bin, 'binary').toString('base64') : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer ? u8a => Buffer.from(u8a).toString('base64') : u8a => {\n  // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n  const maxargs = 0x1000;\n  let strs = [];\n  for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n    strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n  }\n  return _btoa(strs.join(''));\n};\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 §5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = c => {\n  if (c.length < 2) {\n    var cc = c.charCodeAt(0);\n    return cc < 0x80 ? c : cc < 0x800 ? _fromCC(0xc0 | cc >>> 6) + _fromCC(0x80 | cc & 0x3f) : _fromCC(0xe0 | cc >>> 12 & 0x0f) + _fromCC(0x80 | cc >>> 6 & 0x3f) + _fromCC(0x80 | cc & 0x3f);\n  } else {\n    var cc = 0x10000 + (c.charCodeAt(0) - 0xD800) * 0x400 + (c.charCodeAt(1) - 0xDC00);\n    return _fromCC(0xf0 | cc >>> 18 & 0x07) + _fromCC(0x80 | cc >>> 12 & 0x3f) + _fromCC(0x80 | cc >>> 6 & 0x3f) + _fromCC(0x80 | cc & 0x3f);\n  }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = u => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer ? s => Buffer.from(s, 'utf8').toString('base64') : _TE ? s => _fromUint8Array(_TE.encode(s)) : s => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe ? _mkUriSafe(_encode(src)) : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 §5.\n * @returns {string} Base64 string\n */\nconst encodeURI = src => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = cccc => {\n  switch (cccc.length) {\n    case 4:\n      var cp = (0x07 & cccc.charCodeAt(0)) << 18 | (0x3f & cccc.charCodeAt(1)) << 12 | (0x3f & cccc.charCodeAt(2)) << 6 | 0x3f & cccc.charCodeAt(3),\n        offset = cp - 0x10000;\n      return _fromCC((offset >>> 10) + 0xD800) + _fromCC((offset & 0x3FF) + 0xDC00);\n    case 3:\n      return _fromCC((0x0f & cccc.charCodeAt(0)) << 12 | (0x3f & cccc.charCodeAt(1)) << 6 | 0x3f & cccc.charCodeAt(2));\n    default:\n      return _fromCC((0x1f & cccc.charCodeAt(0)) << 6 | 0x3f & cccc.charCodeAt(1));\n  }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = b => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = asc => {\n  // console.log('polyfilled');\n  asc = asc.replace(/\\s+/g, '');\n  if (!b64re.test(asc)) throw new TypeError('malformed base64.');\n  asc += '=='.slice(2 - (asc.length & 3));\n  let u24,\n    bin = '',\n    r1,\n    r2;\n  for (let i = 0; i < asc.length;) {\n    u24 = b64tab[asc.charAt(i++)] << 18 | b64tab[asc.charAt(i++)] << 12 | (r1 = b64tab[asc.charAt(i++)]) << 6 | (r2 = b64tab[asc.charAt(i++)]);\n    bin += r1 === 64 ? _fromCC(u24 >> 16 & 255) : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255) : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n  }\n  return bin;\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = _hasatob ? asc => atob(_tidyB64(asc)) : _hasBuffer ? asc => Buffer.from(asc, 'base64').toString('binary') : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer ? a => _U8Afrom(Buffer.from(a, 'base64')) : a => _U8Afrom(_atob(a).split('').map(c => c.charCodeAt(0)));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = a => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer ? a => Buffer.from(a, 'base64').toString('utf8') : _TD ? a => _TD.decode(_toUint8Array(a)) : a => btou(_atob(a));\nconst _unURI = a => _tidyB64(a.replace(/[-_]/g, m0 => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = src => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = src => {\n  if (typeof src !== 'string') return false;\n  const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n  return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = v => {\n  return {\n    value: v,\n    enumerable: false,\n    writable: true,\n    configurable: true\n  };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n  const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n  _add('fromBase64', function () {\n    return decode(this);\n  });\n  _add('toBase64', function (urlsafe) {\n    return encode(this, urlsafe);\n  });\n  _add('toBase64URI', function () {\n    return encode(this, true);\n  });\n  _add('toBase64URL', function () {\n    return encode(this, true);\n  });\n  _add('toUint8Array', function () {\n    return toUint8Array(this);\n  });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n  const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n  _add('toBase64', function (urlsafe) {\n    return fromUint8Array(this, urlsafe);\n  });\n  _add('toBase64URI', function () {\n    return fromUint8Array(this, true);\n  });\n  _add('toBase64URL', function () {\n    return fromUint8Array(this, true);\n  });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n  extendString();\n  extendUint8Array();\n};\nconst gBase64 = {\n  version: version,\n  VERSION: VERSION,\n  atob: _atob,\n  atobPolyfill: atobPolyfill,\n  btoa: _btoa,\n  btoaPolyfill: btoaPolyfill,\n  fromBase64: decode,\n  toBase64: encode,\n  encode: encode,\n  encodeURI: encodeURI,\n  encodeURL: encodeURI,\n  utob: utob,\n  btou: btou,\n  decode: decode,\n  isValid: isValid,\n  fromUint8Array: fromUint8Array,\n  toUint8Array: toUint8Array,\n  extendString: extendString,\n  extendUint8Array: extendUint8Array,\n  extendBuiltins: extendBuiltins\n};\n\nvar FetchError = /** @class */ (function (_super) {\n    __extends(FetchError, _super);\n    function FetchError(statusCode, message) {\n        var _this = _super.call(this, message) || this;\n        _this.statusCode = statusCode;\n        Object.setPrototypeOf(_this, FetchError.prototype);\n        return _this;\n    }\n    return FetchError;\n}(Error));\n\nvar SdkEvaluationApi = /** @class */ (function () {\n    function SdkEvaluationApi(deploymentKey, serverUrl, httpClient) {\n        this.deploymentKey = deploymentKey;\n        this.serverUrl = serverUrl;\n        this.httpClient = httpClient;\n    }\n    SdkEvaluationApi.prototype.getVariants = function (user, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var userJsonBase64, headers, response;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        userJsonBase64 = gBase64.encodeURL(JSON.stringify(user));\n                        headers = {\n                            Authorization: \"Api-Key \".concat(this.deploymentKey),\n                            'X-Amp-Exp-User': userJsonBase64,\n                        };\n                        if (options === null || options === void 0 ? void 0 : options.flagKeys) {\n                            headers['X-Amp-Exp-Flag-Keys'] = gBase64.encodeURL(JSON.stringify(options.flagKeys));\n                        }\n                        if (options === null || options === void 0 ? void 0 : options.trackingOption) {\n                            headers['X-Amp-Exp-Track'] = options.trackingOption;\n                        }\n                        return [4 /*yield*/, this.httpClient.request({\n                                requestUrl: \"\".concat(this.serverUrl, \"/sdk/v2/vardata?v=0\"),\n                                method: 'GET',\n                                headers: headers,\n                                timeoutMillis: options === null || options === void 0 ? void 0 : options.timeoutMillis,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        if (response.status != 200) {\n                            throw new FetchError(response.status, \"Fetch error response: status=\".concat(response.status));\n                        }\n                        return [2 /*return*/, JSON.parse(response.body)];\n                }\n            });\n        });\n    };\n    return SdkEvaluationApi;\n}());\n\nvar SdkFlagApi = /** @class */ (function () {\n    function SdkFlagApi(deploymentKey, serverUrl, httpClient) {\n        this.deploymentKey = deploymentKey;\n        this.serverUrl = serverUrl;\n        this.httpClient = httpClient;\n    }\n    SdkFlagApi.prototype.getFlags = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var headers, response, flagsArray;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        headers = {\n                            Authorization: \"Api-Key \".concat(this.deploymentKey),\n                        };\n                        if ((options === null || options === void 0 ? void 0 : options.libraryName) && (options === null || options === void 0 ? void 0 : options.libraryVersion)) {\n                            headers['X-Amp-Exp-Library'] = \"\".concat(options.libraryName, \"/\").concat(options.libraryVersion);\n                        }\n                        return [4 /*yield*/, this.httpClient.request({\n                                requestUrl: \"\".concat(this.serverUrl, \"/sdk/v2/flags\"),\n                                method: 'GET',\n                                headers: headers,\n                                timeoutMillis: options === null || options === void 0 ? void 0 : options.timeoutMillis,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        if (response.status != 200) {\n                            throw Error(\"Flags error response: status=\".concat(response.status));\n                        }\n                        flagsArray = JSON.parse(response.body);\n                        return [2 /*return*/, flagsArray.reduce(function (map, flag) {\n                                map[flag.key] = flag;\n                                return map;\n                            }, {})];\n                }\n            });\n        });\n    };\n    return SdkFlagApi;\n}());\n\nvar safeGlobal = typeof globalThis !== 'undefined' ? globalThis : global || self;\n\nvar Poller = /** @class */ (function () {\n    function Poller(action, ms) {\n        this.poller = undefined;\n        this.action = action;\n        this.ms = ms;\n    }\n    Poller.prototype.start = function () {\n        if (this.poller) {\n            return;\n        }\n        this.poller = safeGlobal.setInterval(this.action, this.ms);\n        void this.action();\n    };\n    Poller.prototype.stop = function () {\n        if (!this.poller) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        safeGlobal.clearInterval(this.poller);\n        this.poller = undefined;\n    };\n    return Poller;\n}());\n\nexport { EvaluationEngine, EvaluationOperator, FetchError, Poller, SdkEvaluationApi, SdkFlagApi, safeGlobal, topologicalSort };\n","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { openDB } from 'idb';\nexport var MAX_IDB_STORAGE_LENGTH = 1000 * 60 * 60 * 24 * 2; // 2 days\nvar TargetingIDBStore = /** @class */ (function () {\n    function TargetingIDBStore() {\n        var _this = this;\n        this.dbs = {};\n        this.createStore = function (dbName) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, openDB(dbName, 1, {\n                            upgrade: function (db) {\n                                if (!db.objectStoreNames.contains('eventTypesForSession')) {\n                                    db.createObjectStore('eventTypesForSession', {\n                                        keyPath: 'sessionId',\n                                    });\n                                }\n                            },\n                        })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        }); };\n        this.openOrCreateDB = function (apiKey) { return __awaiter(_this, void 0, void 0, function () {\n            var dbName, db;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.dbs && this.dbs[apiKey]) {\n                            return [2 /*return*/, this.dbs[apiKey]];\n                        }\n                        dbName = \"\".concat(apiKey.substring(0, 10), \"_amp_targeting\");\n                        return [4 /*yield*/, this.createStore(dbName)];\n                    case 1:\n                        db = _a.sent();\n                        this.dbs[apiKey] = db;\n                        return [2 /*return*/, db];\n                }\n            });\n        }); };\n        this.updateEventListForSession = function (_a) {\n            var sessionId = _a.sessionId, eventType = _a.eventType, eventTime = _a.eventTime, loggerProvider = _a.loggerProvider, tx = _a.tx;\n            return __awaiter(_this, void 0, void 0, function () {\n                var sessionIdStr, sessionData, eventTypes, eventTypeStore, updatedEventTypes, updatedSessionData, e_1;\n                var _b, _c;\n                return __generator(this, function (_d) {\n                    switch (_d.label) {\n                        case 0:\n                            _d.trys.push([0, 3, , 4]);\n                            sessionIdStr = String(sessionId);\n                            return [4 /*yield*/, tx.store.get(sessionIdStr)];\n                        case 1:\n                            sessionData = _d.sent();\n                            eventTypes = sessionData ? sessionData.eventTypes : {};\n                            eventTypeStore = eventTypes[eventType] || {};\n                            updatedEventTypes = __assign(__assign({}, eventTypes), (_b = {}, _b[eventType] = __assign(__assign({}, eventTypeStore), (_c = {}, _c[eventTime] = { event_type: eventType }, _c)), _b));\n                            updatedSessionData = {\n                                sessionId: sessionIdStr,\n                                eventTypes: updatedEventTypes,\n                                lastUpdated: Date.now(),\n                            };\n                            return [4 /*yield*/, tx.store.put(updatedSessionData)];\n                        case 2:\n                            _d.sent();\n                            return [2 /*return*/, updatedEventTypes];\n                        case 3:\n                            e_1 = _d.sent();\n                            loggerProvider.warn(\"Failed to store events for targeting \".concat(sessionId, \": \").concat(e_1));\n                            return [3 /*break*/, 4];\n                        case 4: return [2 /*return*/, undefined];\n                    }\n                });\n            });\n        };\n        this.deleteOldSessionEventTypes = function (_a) {\n            var currentSessionId = _a.currentSessionId, loggerProvider = _a.loggerProvider, tx = _a.tx;\n            return __awaiter(_this, void 0, void 0, function () {\n                var currentSessionIdStr, allSessions, i, session, amountOfTimeSinceSession, e_2;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            _b.trys.push([0, 6, , 7]);\n                            currentSessionIdStr = String(currentSessionId);\n                            return [4 /*yield*/, tx.store.getAll()];\n                        case 1:\n                            allSessions = _b.sent();\n                            i = 0;\n                            _b.label = 2;\n                        case 2:\n                            if (!(i < allSessions.length)) return [3 /*break*/, 5];\n                            session = allSessions[i];\n                            amountOfTimeSinceSession = Date.now() - session.lastUpdated;\n                            if (!(session.sessionId !== currentSessionIdStr && amountOfTimeSinceSession > MAX_IDB_STORAGE_LENGTH)) return [3 /*break*/, 4];\n                            return [4 /*yield*/, tx.store.delete(session.sessionId)];\n                        case 3:\n                            _b.sent();\n                            _b.label = 4;\n                        case 4:\n                            i++;\n                            return [3 /*break*/, 2];\n                        case 5: return [3 /*break*/, 7];\n                        case 6:\n                            e_2 = _b.sent();\n                            loggerProvider.warn(\"Failed to clear old session event types for targeting: \".concat(e_2));\n                            return [3 /*break*/, 7];\n                        case 7: return [2 /*return*/];\n                    }\n                });\n            });\n        };\n        this.storeEventTypeForSession = function (_a) {\n            var loggerProvider = _a.loggerProvider, sessionId = _a.sessionId, eventType = _a.eventType, eventTime = _a.eventTime, apiKey = _a.apiKey;\n            return __awaiter(_this, void 0, void 0, function () {\n                var db, tx, updatedEventTypes, e_3;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            _b.trys.push([0, 5, , 6]);\n                            return [4 /*yield*/, this.openOrCreateDB(apiKey)];\n                        case 1:\n                            db = _b.sent();\n                            tx = db.transaction('eventTypesForSession', 'readwrite');\n                            if (!tx) {\n                                return [2 /*return*/];\n                            }\n                            return [4 /*yield*/, this.updateEventListForSession({\n                                    sessionId: sessionId,\n                                    tx: tx,\n                                    loggerProvider: loggerProvider,\n                                    eventType: eventType,\n                                    eventTime: eventTime,\n                                })];\n                        case 2:\n                            updatedEventTypes = _b.sent();\n                            // Clear out sessions older than 2 days\n                            return [4 /*yield*/, this.deleteOldSessionEventTypes({ currentSessionId: sessionId, tx: tx, loggerProvider: loggerProvider })];\n                        case 3:\n                            // Clear out sessions older than 2 days\n                            _b.sent();\n                            return [4 /*yield*/, tx.done];\n                        case 4:\n                            _b.sent();\n                            return [2 /*return*/, updatedEventTypes];\n                        case 5:\n                            e_3 = _b.sent();\n                            loggerProvider.warn(\"Failed to store events for targeting \".concat(sessionId, \": \").concat(e_3));\n                            return [3 /*break*/, 6];\n                        case 6: return [2 /*return*/, undefined];\n                    }\n                });\n            });\n        };\n    }\n    return TargetingIDBStore;\n}());\nexport { TargetingIDBStore };\nexport var targetingIDBStore = new TargetingIDBStore();\n//# sourceMappingURL=targeting-idb-store.js.map","var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __defProp2 = Object.defineProperty;\nvar __defNormalProp2 = (obj, key, value) => key in obj ? __defProp2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField2 = (obj, key, value) => __defNormalProp2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar _a;\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nconst testableAccessors$1 = {\n  Node: [\"childNodes\", \"parentNode\", \"parentElement\", \"textContent\"],\n  ShadowRoot: [\"host\", \"styleSheets\"],\n  Element: [\"shadowRoot\", \"querySelector\", \"querySelectorAll\"],\n  MutationObserver: []\n};\nconst testableMethods$1 = {\n  Node: [\"contains\", \"getRootNode\"],\n  ShadowRoot: [\"getSelection\"],\n  Element: [],\n  MutationObserver: [\"constructor\"]\n};\nconst untaintedBasePrototype$1 = {};\nfunction angularZoneUnpatchedAlternative$1(key) {\n  var _a2, _b;\n  const angularUnpatchedVersionSymbol = (_b = (_a2 = globalThis == null ? void 0 : globalThis.Zone) == null ? void 0 : _a2.__symbol__) == null ? void 0 : _b.call(_a2, key);\n  if (angularUnpatchedVersionSymbol && globalThis[angularUnpatchedVersionSymbol]) {\n    return globalThis[angularUnpatchedVersionSymbol];\n  } else {\n    return void 0;\n  }\n}\nfunction getUntaintedPrototype$1(key) {\n  if (untaintedBasePrototype$1[key])\n    return untaintedBasePrototype$1[key];\n  const candidate = angularZoneUnpatchedAlternative$1(key) || globalThis[key];\n  const defaultPrototype = candidate.prototype;\n  const accessorNames = key in testableAccessors$1 ? testableAccessors$1[key] : void 0;\n  const isUntaintedAccessors = Boolean(\n    accessorNames && // @ts-expect-error 2345\n    accessorNames.every(\n      (accessor) => {\n        var _a2, _b;\n        return Boolean(\n          (_b = (_a2 = Object.getOwnPropertyDescriptor(defaultPrototype, accessor)) == null ? void 0 : _a2.get) == null ? void 0 : _b.toString().includes(\"[native code]\")\n        );\n      }\n    )\n  );\n  const methodNames = key in testableMethods$1 ? testableMethods$1[key] : void 0;\n  const isUntaintedMethods = Boolean(\n    methodNames && methodNames.every(\n      // @ts-expect-error 2345\n      (method) => {\n        var _a2;\n        return typeof defaultPrototype[method] === \"function\" && ((_a2 = defaultPrototype[method]) == null ? void 0 : _a2.toString().includes(\"[native code]\"));\n      }\n    )\n  );\n  if (isUntaintedAccessors && isUntaintedMethods) {\n    untaintedBasePrototype$1[key] = candidate.prototype;\n    return candidate.prototype;\n  }\n  try {\n    const iframeEl = document.createElement(\"iframe\");\n    document.body.appendChild(iframeEl);\n    const win = iframeEl.contentWindow;\n    if (!win) return candidate.prototype;\n    const untaintedObject = win[key].prototype;\n    document.body.removeChild(iframeEl);\n    if (!untaintedObject) return defaultPrototype;\n    return untaintedBasePrototype$1[key] = untaintedObject;\n  } catch {\n    return defaultPrototype;\n  }\n}\nconst untaintedAccessorCache$1 = {};\nfunction getUntaintedAccessor$1(key, instance, accessor) {\n  var _a2;\n  const cacheKey = `${key}.${String(accessor)}`;\n  if (untaintedAccessorCache$1[cacheKey])\n    return untaintedAccessorCache$1[cacheKey].call(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype$1(key);\n  const untaintedAccessor = (_a2 = Object.getOwnPropertyDescriptor(\n    untaintedPrototype,\n    accessor\n  )) == null ? void 0 : _a2.get;\n  if (!untaintedAccessor) return instance[accessor];\n  untaintedAccessorCache$1[cacheKey] = untaintedAccessor;\n  return untaintedAccessor.call(instance);\n}\nconst untaintedMethodCache$1 = {};\nfunction getUntaintedMethod$1(key, instance, method) {\n  const cacheKey = `${key}.${String(method)}`;\n  if (untaintedMethodCache$1[cacheKey])\n    return untaintedMethodCache$1[cacheKey].bind(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype$1(key);\n  const untaintedMethod = untaintedPrototype[method];\n  if (typeof untaintedMethod !== \"function\") return instance[method];\n  untaintedMethodCache$1[cacheKey] = untaintedMethod;\n  return untaintedMethod.bind(instance);\n}\nfunction childNodes$1(n2) {\n  return getUntaintedAccessor$1(\"Node\", n2, \"childNodes\");\n}\nfunction parentNode$1(n2) {\n  return getUntaintedAccessor$1(\"Node\", n2, \"parentNode\");\n}\nfunction parentElement$1(n2) {\n  return getUntaintedAccessor$1(\"Node\", n2, \"parentElement\");\n}\nfunction textContent$1(n2) {\n  return getUntaintedAccessor$1(\"Node\", n2, \"textContent\");\n}\nfunction contains$1(n2, other) {\n  return getUntaintedMethod$1(\"Node\", n2, \"contains\")(other);\n}\nfunction getRootNode$1(n2) {\n  return getUntaintedMethod$1(\"Node\", n2, \"getRootNode\")();\n}\nfunction host$1(n2) {\n  if (!n2 || !(\"host\" in n2)) return null;\n  return getUntaintedAccessor$1(\"ShadowRoot\", n2, \"host\");\n}\nfunction styleSheets$1(n2) {\n  return n2.styleSheets;\n}\nfunction shadowRoot$1(n2) {\n  if (!n2 || !(\"shadowRoot\" in n2)) return null;\n  return getUntaintedAccessor$1(\"Element\", n2, \"shadowRoot\");\n}\nfunction querySelector$1(n2, selectors) {\n  return getUntaintedAccessor$1(\"Element\", n2, \"querySelector\")(selectors);\n}\nfunction querySelectorAll$1(n2, selectors) {\n  return getUntaintedAccessor$1(\"Element\", n2, \"querySelectorAll\")(selectors);\n}\nfunction mutationObserverCtor$1() {\n  return getUntaintedPrototype$1(\"MutationObserver\").constructor;\n}\nconst index$1 = {\n  childNodes: childNodes$1,\n  parentNode: parentNode$1,\n  parentElement: parentElement$1,\n  textContent: textContent$1,\n  contains: contains$1,\n  getRootNode: getRootNode$1,\n  host: host$1,\n  styleSheets: styleSheets$1,\n  shadowRoot: shadowRoot$1,\n  querySelector: querySelector$1,\n  querySelectorAll: querySelectorAll$1,\n  mutationObserver: mutationObserverCtor$1\n};\nfunction isShadowRoot(n2) {\n  const hostEl = (\n    // anchor and textarea elements also have a `host` property\n    // but only shadow roots have a `mode` property\n    n2 && \"host\" in n2 && \"mode\" in n2 && index$1.host(n2) || null\n  );\n  return Boolean(\n    hostEl && \"shadowRoot\" in hostEl && index$1.shadowRoot(hostEl) === n2\n  );\n}\nclass Mirror {\n  constructor() {\n    __publicField$1(this, \"idNodeMap\", /* @__PURE__ */ new Map());\n    __publicField$1(this, \"nodeMetaMap\", /* @__PURE__ */ new WeakMap());\n  }\n  getId(n2) {\n    var _a2;\n    if (!n2) return -1;\n    const id = (_a2 = this.getMeta(n2)) == null ? void 0 : _a2.id;\n    return id ?? -1;\n  }\n  getNode(id) {\n    return this.idNodeMap.get(id) || null;\n  }\n  getIds() {\n    return Array.from(this.idNodeMap.keys());\n  }\n  getMeta(n2) {\n    return this.nodeMetaMap.get(n2) || null;\n  }\n  // removes the node from idNodeMap\n  // doesn't remove the node from nodeMetaMap\n  removeNodeFromMap(n2) {\n    const id = this.getId(n2);\n    this.idNodeMap.delete(id);\n    if (n2.childNodes) {\n      n2.childNodes.forEach(\n        (childNode) => this.removeNodeFromMap(childNode)\n      );\n    }\n  }\n  has(id) {\n    return this.idNodeMap.has(id);\n  }\n  hasNode(node2) {\n    return this.nodeMetaMap.has(node2);\n  }\n  add(n2, meta) {\n    const id = meta.id;\n    this.idNodeMap.set(id, n2);\n    this.nodeMetaMap.set(n2, meta);\n  }\n  replace(id, n2) {\n    const oldNode = this.getNode(id);\n    if (oldNode) {\n      const meta = this.nodeMetaMap.get(oldNode);\n      if (meta) this.nodeMetaMap.set(n2, meta);\n    }\n    this.idNodeMap.set(id, n2);\n  }\n  reset() {\n    this.idNodeMap = /* @__PURE__ */ new Map();\n    this.nodeMetaMap = /* @__PURE__ */ new WeakMap();\n  }\n}\nfunction createMirror$2() {\n  return new Mirror();\n}\nconst IGNORED_NODE = -2;\nfunction classMatchesRegex(node2, regex, checkAncestors) {\n  if (!node2) return false;\n  if (node2.nodeType !== node2.ELEMENT_NODE) {\n    if (!checkAncestors) return false;\n    return classMatchesRegex(index$1.parentNode(node2), regex, checkAncestors);\n  }\n  for (let eIndex = node2.classList.length; eIndex--; ) {\n    const className = node2.classList[eIndex];\n    if (regex.test(className)) {\n      return true;\n    }\n  }\n  if (!checkAncestors) return false;\n  return classMatchesRegex(index$1.parentNode(node2), regex, checkAncestors);\n}\nfunction getDefaultExportFromCjs$1(x2) {\n  return x2 && x2.__esModule && Object.prototype.hasOwnProperty.call(x2, \"default\") ? x2[\"default\"] : x2;\n}\nfunction getAugmentedNamespace$1(n2) {\n  if (n2.__esModule) return n2;\n  var f2 = n2.default;\n  if (typeof f2 == \"function\") {\n    var a2 = function a22() {\n      if (this instanceof a22) {\n        return Reflect.construct(f2, arguments, this.constructor);\n      }\n      return f2.apply(this, arguments);\n    };\n    a2.prototype = f2.prototype;\n  } else a2 = {};\n  Object.defineProperty(a2, \"__esModule\", { value: true });\n  Object.keys(n2).forEach(function(k) {\n    var d = Object.getOwnPropertyDescriptor(n2, k);\n    Object.defineProperty(a2, k, d.get ? d : {\n      enumerable: true,\n      get: function() {\n        return n2[k];\n      }\n    });\n  });\n  return a2;\n}\nvar picocolors_browser$1 = { exports: {} };\nvar x$1 = String;\nvar create$1 = function() {\n  return { isColorSupported: false, reset: x$1, bold: x$1, dim: x$1, italic: x$1, underline: x$1, inverse: x$1, hidden: x$1, strikethrough: x$1, black: x$1, red: x$1, green: x$1, yellow: x$1, blue: x$1, magenta: x$1, cyan: x$1, white: x$1, gray: x$1, bgBlack: x$1, bgRed: x$1, bgGreen: x$1, bgYellow: x$1, bgBlue: x$1, bgMagenta: x$1, bgCyan: x$1, bgWhite: x$1 };\n};\npicocolors_browser$1.exports = create$1();\npicocolors_browser$1.exports.createColors = create$1;\nvar picocolors_browserExports$1 = picocolors_browser$1.exports;\nconst __viteBrowserExternal$2 = {};\nconst __viteBrowserExternal$1$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  default: __viteBrowserExternal$2\n}, Symbol.toStringTag, { value: \"Module\" }));\nconst require$$2$1 = /* @__PURE__ */ getAugmentedNamespace$1(__viteBrowserExternal$1$1);\nlet pico$1 = picocolors_browserExports$1;\nlet terminalHighlight$1$1 = require$$2$1;\nlet CssSyntaxError$3$1 = class CssSyntaxError extends Error {\n  constructor(message, line, column, source, file, plugin22) {\n    super(message);\n    this.name = \"CssSyntaxError\";\n    this.reason = message;\n    if (file) {\n      this.file = file;\n    }\n    if (source) {\n      this.source = source;\n    }\n    if (plugin22) {\n      this.plugin = plugin22;\n    }\n    if (typeof line !== \"undefined\" && typeof column !== \"undefined\") {\n      if (typeof line === \"number\") {\n        this.line = line;\n        this.column = column;\n      } else {\n        this.line = line.line;\n        this.column = line.column;\n        this.endLine = column.line;\n        this.endColumn = column.column;\n      }\n    }\n    this.setMessage();\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, CssSyntaxError);\n    }\n  }\n  setMessage() {\n    this.message = this.plugin ? this.plugin + \": \" : \"\";\n    this.message += this.file ? this.file : \"<css input>\";\n    if (typeof this.line !== \"undefined\") {\n      this.message += \":\" + this.line + \":\" + this.column;\n    }\n    this.message += \": \" + this.reason;\n  }\n  showSourceCode(color) {\n    if (!this.source) return \"\";\n    let css = this.source;\n    if (color == null) color = pico$1.isColorSupported;\n    if (terminalHighlight$1$1) {\n      if (color) css = terminalHighlight$1$1(css);\n    }\n    let lines = css.split(/\\r?\\n/);\n    let start = Math.max(this.line - 3, 0);\n    let end = Math.min(this.line + 2, lines.length);\n    let maxWidth = String(end).length;\n    let mark, aside;\n    if (color) {\n      let { bold, gray, red } = pico$1.createColors(true);\n      mark = (text) => bold(red(text));\n      aside = (text) => gray(text);\n    } else {\n      mark = aside = (str) => str;\n    }\n    return lines.slice(start, end).map((line, index2) => {\n      let number = start + 1 + index2;\n      let gutter = \" \" + (\" \" + number).slice(-maxWidth) + \" | \";\n      if (number === this.line) {\n        let spacing = aside(gutter.replace(/\\d/g, \" \")) + line.slice(0, this.column - 1).replace(/[^\\t]/g, \" \");\n        return mark(\">\") + aside(gutter) + line + \"\\n \" + spacing + mark(\"^\");\n      }\n      return \" \" + aside(gutter) + line;\n    }).join(\"\\n\");\n  }\n  toString() {\n    let code = this.showSourceCode();\n    if (code) {\n      code = \"\\n\\n\" + code + \"\\n\";\n    }\n    return this.name + \": \" + this.message + code;\n  }\n};\nvar cssSyntaxError$1 = CssSyntaxError$3$1;\nCssSyntaxError$3$1.default = CssSyntaxError$3$1;\nvar symbols$1 = {};\nsymbols$1.isClean = Symbol(\"isClean\");\nsymbols$1.my = Symbol(\"my\");\nconst DEFAULT_RAW$1 = {\n  after: \"\\n\",\n  beforeClose: \"\\n\",\n  beforeComment: \"\\n\",\n  beforeDecl: \"\\n\",\n  beforeOpen: \" \",\n  beforeRule: \"\\n\",\n  colon: \": \",\n  commentLeft: \" \",\n  commentRight: \" \",\n  emptyBody: \"\",\n  indent: \"    \",\n  semicolon: false\n};\nfunction capitalize$1(str) {\n  return str[0].toUpperCase() + str.slice(1);\n}\nlet Stringifier$2$1 = class Stringifier {\n  constructor(builder) {\n    this.builder = builder;\n  }\n  atrule(node2, semicolon) {\n    let name = \"@\" + node2.name;\n    let params = node2.params ? this.rawValue(node2, \"params\") : \"\";\n    if (typeof node2.raws.afterName !== \"undefined\") {\n      name += node2.raws.afterName;\n    } else if (params) {\n      name += \" \";\n    }\n    if (node2.nodes) {\n      this.block(node2, name + params);\n    } else {\n      let end = (node2.raws.between || \"\") + (semicolon ? \";\" : \"\");\n      this.builder(name + params + end, node2);\n    }\n  }\n  beforeAfter(node2, detect) {\n    let value;\n    if (node2.type === \"decl\") {\n      value = this.raw(node2, null, \"beforeDecl\");\n    } else if (node2.type === \"comment\") {\n      value = this.raw(node2, null, \"beforeComment\");\n    } else if (detect === \"before\") {\n      value = this.raw(node2, null, \"beforeRule\");\n    } else {\n      value = this.raw(node2, null, \"beforeClose\");\n    }\n    let buf = node2.parent;\n    let depth = 0;\n    while (buf && buf.type !== \"root\") {\n      depth += 1;\n      buf = buf.parent;\n    }\n    if (value.includes(\"\\n\")) {\n      let indent = this.raw(node2, null, \"indent\");\n      if (indent.length) {\n        for (let step = 0; step < depth; step++) value += indent;\n      }\n    }\n    return value;\n  }\n  block(node2, start) {\n    let between = this.raw(node2, \"between\", \"beforeOpen\");\n    this.builder(start + between + \"{\", node2, \"start\");\n    let after;\n    if (node2.nodes && node2.nodes.length) {\n      this.body(node2);\n      after = this.raw(node2, \"after\");\n    } else {\n      after = this.raw(node2, \"after\", \"emptyBody\");\n    }\n    if (after) this.builder(after);\n    this.builder(\"}\", node2, \"end\");\n  }\n  body(node2) {\n    let last = node2.nodes.length - 1;\n    while (last > 0) {\n      if (node2.nodes[last].type !== \"comment\") break;\n      last -= 1;\n    }\n    let semicolon = this.raw(node2, \"semicolon\");\n    for (let i2 = 0; i2 < node2.nodes.length; i2++) {\n      let child = node2.nodes[i2];\n      let before = this.raw(child, \"before\");\n      if (before) this.builder(before);\n      this.stringify(child, last !== i2 || semicolon);\n    }\n  }\n  comment(node2) {\n    let left = this.raw(node2, \"left\", \"commentLeft\");\n    let right = this.raw(node2, \"right\", \"commentRight\");\n    this.builder(\"/*\" + left + node2.text + right + \"*/\", node2);\n  }\n  decl(node2, semicolon) {\n    let between = this.raw(node2, \"between\", \"colon\");\n    let string = node2.prop + between + this.rawValue(node2, \"value\");\n    if (node2.important) {\n      string += node2.raws.important || \" !important\";\n    }\n    if (semicolon) string += \";\";\n    this.builder(string, node2);\n  }\n  document(node2) {\n    this.body(node2);\n  }\n  raw(node2, own, detect) {\n    let value;\n    if (!detect) detect = own;\n    if (own) {\n      value = node2.raws[own];\n      if (typeof value !== \"undefined\") return value;\n    }\n    let parent = node2.parent;\n    if (detect === \"before\") {\n      if (!parent || parent.type === \"root\" && parent.first === node2) {\n        return \"\";\n      }\n      if (parent && parent.type === \"document\") {\n        return \"\";\n      }\n    }\n    if (!parent) return DEFAULT_RAW$1[detect];\n    let root2 = node2.root();\n    if (!root2.rawCache) root2.rawCache = {};\n    if (typeof root2.rawCache[detect] !== \"undefined\") {\n      return root2.rawCache[detect];\n    }\n    if (detect === \"before\" || detect === \"after\") {\n      return this.beforeAfter(node2, detect);\n    } else {\n      let method = \"raw\" + capitalize$1(detect);\n      if (this[method]) {\n        value = this[method](root2, node2);\n      } else {\n        root2.walk((i2) => {\n          value = i2.raws[own];\n          if (typeof value !== \"undefined\") return false;\n        });\n      }\n    }\n    if (typeof value === \"undefined\") value = DEFAULT_RAW$1[detect];\n    root2.rawCache[detect] = value;\n    return value;\n  }\n  rawBeforeClose(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && i2.nodes.length > 0) {\n        if (typeof i2.raws.after !== \"undefined\") {\n          value = i2.raws.after;\n          if (value.includes(\"\\n\")) {\n            value = value.replace(/[^\\n]+$/, \"\");\n          }\n          return false;\n        }\n      }\n    });\n    if (value) value = value.replace(/\\S/g, \"\");\n    return value;\n  }\n  rawBeforeComment(root2, node2) {\n    let value;\n    root2.walkComments((i2) => {\n      if (typeof i2.raws.before !== \"undefined\") {\n        value = i2.raws.before;\n        if (value.includes(\"\\n\")) {\n          value = value.replace(/[^\\n]+$/, \"\");\n        }\n        return false;\n      }\n    });\n    if (typeof value === \"undefined\") {\n      value = this.raw(node2, null, \"beforeDecl\");\n    } else if (value) {\n      value = value.replace(/\\S/g, \"\");\n    }\n    return value;\n  }\n  rawBeforeDecl(root2, node2) {\n    let value;\n    root2.walkDecls((i2) => {\n      if (typeof i2.raws.before !== \"undefined\") {\n        value = i2.raws.before;\n        if (value.includes(\"\\n\")) {\n          value = value.replace(/[^\\n]+$/, \"\");\n        }\n        return false;\n      }\n    });\n    if (typeof value === \"undefined\") {\n      value = this.raw(node2, null, \"beforeRule\");\n    } else if (value) {\n      value = value.replace(/\\S/g, \"\");\n    }\n    return value;\n  }\n  rawBeforeOpen(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.type !== \"decl\") {\n        value = i2.raws.between;\n        if (typeof value !== \"undefined\") return false;\n      }\n    });\n    return value;\n  }\n  rawBeforeRule(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && (i2.parent !== root2 || root2.first !== i2)) {\n        if (typeof i2.raws.before !== \"undefined\") {\n          value = i2.raws.before;\n          if (value.includes(\"\\n\")) {\n            value = value.replace(/[^\\n]+$/, \"\");\n          }\n          return false;\n        }\n      }\n    });\n    if (value) value = value.replace(/\\S/g, \"\");\n    return value;\n  }\n  rawColon(root2) {\n    let value;\n    root2.walkDecls((i2) => {\n      if (typeof i2.raws.between !== \"undefined\") {\n        value = i2.raws.between.replace(/[^\\s:]/g, \"\");\n        return false;\n      }\n    });\n    return value;\n  }\n  rawEmptyBody(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && i2.nodes.length === 0) {\n        value = i2.raws.after;\n        if (typeof value !== \"undefined\") return false;\n      }\n    });\n    return value;\n  }\n  rawIndent(root2) {\n    if (root2.raws.indent) return root2.raws.indent;\n    let value;\n    root2.walk((i2) => {\n      let p = i2.parent;\n      if (p && p !== root2 && p.parent && p.parent === root2) {\n        if (typeof i2.raws.before !== \"undefined\") {\n          let parts = i2.raws.before.split(\"\\n\");\n          value = parts[parts.length - 1];\n          value = value.replace(/\\S/g, \"\");\n          return false;\n        }\n      }\n    });\n    return value;\n  }\n  rawSemicolon(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && i2.nodes.length && i2.last.type === \"decl\") {\n        value = i2.raws.semicolon;\n        if (typeof value !== \"undefined\") return false;\n      }\n    });\n    return value;\n  }\n  rawValue(node2, prop) {\n    let value = node2[prop];\n    let raw = node2.raws[prop];\n    if (raw && raw.value === value) {\n      return raw.raw;\n    }\n    return value;\n  }\n  root(node2) {\n    this.body(node2);\n    if (node2.raws.after) this.builder(node2.raws.after);\n  }\n  rule(node2) {\n    this.block(node2, this.rawValue(node2, \"selector\"));\n    if (node2.raws.ownSemicolon) {\n      this.builder(node2.raws.ownSemicolon, node2, \"end\");\n    }\n  }\n  stringify(node2, semicolon) {\n    if (!this[node2.type]) {\n      throw new Error(\n        \"Unknown AST node type \" + node2.type + \". Maybe you need to change PostCSS stringifier.\"\n      );\n    }\n    this[node2.type](node2, semicolon);\n  }\n};\nvar stringifier$1 = Stringifier$2$1;\nStringifier$2$1.default = Stringifier$2$1;\nlet Stringifier$1$1 = stringifier$1;\nfunction stringify$4$1(node2, builder) {\n  let str = new Stringifier$1$1(builder);\n  str.stringify(node2);\n}\nvar stringify_1$1 = stringify$4$1;\nstringify$4$1.default = stringify$4$1;\nlet { isClean: isClean$2$1, my: my$2$1 } = symbols$1;\nlet CssSyntaxError$2$1 = cssSyntaxError$1;\nlet Stringifier2$1 = stringifier$1;\nlet stringify$3$1 = stringify_1$1;\nfunction cloneNode$1(obj, parent) {\n  let cloned = new obj.constructor();\n  for (let i2 in obj) {\n    if (!Object.prototype.hasOwnProperty.call(obj, i2)) {\n      continue;\n    }\n    if (i2 === \"proxyCache\") continue;\n    let value = obj[i2];\n    let type = typeof value;\n    if (i2 === \"parent\" && type === \"object\") {\n      if (parent) cloned[i2] = parent;\n    } else if (i2 === \"source\") {\n      cloned[i2] = value;\n    } else if (Array.isArray(value)) {\n      cloned[i2] = value.map((j) => cloneNode$1(j, cloned));\n    } else {\n      if (type === \"object\" && value !== null) value = cloneNode$1(value);\n      cloned[i2] = value;\n    }\n  }\n  return cloned;\n}\nlet Node$4$1 = class Node2 {\n  constructor(defaults = {}) {\n    this.raws = {};\n    this[isClean$2$1] = false;\n    this[my$2$1] = true;\n    for (let name in defaults) {\n      if (name === \"nodes\") {\n        this.nodes = [];\n        for (let node2 of defaults[name]) {\n          if (typeof node2.clone === \"function\") {\n            this.append(node2.clone());\n          } else {\n            this.append(node2);\n          }\n        }\n      } else {\n        this[name] = defaults[name];\n      }\n    }\n  }\n  addToError(error) {\n    error.postcssNode = this;\n    if (error.stack && this.source && /\\n\\s{4}at /.test(error.stack)) {\n      let s2 = this.source;\n      error.stack = error.stack.replace(\n        /\\n\\s{4}at /,\n        `$&${s2.input.from}:${s2.start.line}:${s2.start.column}$&`\n      );\n    }\n    return error;\n  }\n  after(add) {\n    this.parent.insertAfter(this, add);\n    return this;\n  }\n  assign(overrides = {}) {\n    for (let name in overrides) {\n      this[name] = overrides[name];\n    }\n    return this;\n  }\n  before(add) {\n    this.parent.insertBefore(this, add);\n    return this;\n  }\n  cleanRaws(keepBetween) {\n    delete this.raws.before;\n    delete this.raws.after;\n    if (!keepBetween) delete this.raws.between;\n  }\n  clone(overrides = {}) {\n    let cloned = cloneNode$1(this);\n    for (let name in overrides) {\n      cloned[name] = overrides[name];\n    }\n    return cloned;\n  }\n  cloneAfter(overrides = {}) {\n    let cloned = this.clone(overrides);\n    this.parent.insertAfter(this, cloned);\n    return cloned;\n  }\n  cloneBefore(overrides = {}) {\n    let cloned = this.clone(overrides);\n    this.parent.insertBefore(this, cloned);\n    return cloned;\n  }\n  error(message, opts = {}) {\n    if (this.source) {\n      let { end, start } = this.rangeBy(opts);\n      return this.source.input.error(\n        message,\n        { column: start.column, line: start.line },\n        { column: end.column, line: end.line },\n        opts\n      );\n    }\n    return new CssSyntaxError$2$1(message);\n  }\n  getProxyProcessor() {\n    return {\n      get(node2, prop) {\n        if (prop === \"proxyOf\") {\n          return node2;\n        } else if (prop === \"root\") {\n          return () => node2.root().toProxy();\n        } else {\n          return node2[prop];\n        }\n      },\n      set(node2, prop, value) {\n        if (node2[prop] === value) return true;\n        node2[prop] = value;\n        if (prop === \"prop\" || prop === \"value\" || prop === \"name\" || prop === \"params\" || prop === \"important\" || /* c8 ignore next */\n        prop === \"text\") {\n          node2.markDirty();\n        }\n        return true;\n      }\n    };\n  }\n  markDirty() {\n    if (this[isClean$2$1]) {\n      this[isClean$2$1] = false;\n      let next = this;\n      while (next = next.parent) {\n        next[isClean$2$1] = false;\n      }\n    }\n  }\n  next() {\n    if (!this.parent) return void 0;\n    let index2 = this.parent.index(this);\n    return this.parent.nodes[index2 + 1];\n  }\n  positionBy(opts, stringRepresentation) {\n    let pos = this.source.start;\n    if (opts.index) {\n      pos = this.positionInside(opts.index, stringRepresentation);\n    } else if (opts.word) {\n      stringRepresentation = this.toString();\n      let index2 = stringRepresentation.indexOf(opts.word);\n      if (index2 !== -1) pos = this.positionInside(index2, stringRepresentation);\n    }\n    return pos;\n  }\n  positionInside(index2, stringRepresentation) {\n    let string = stringRepresentation || this.toString();\n    let column = this.source.start.column;\n    let line = this.source.start.line;\n    for (let i2 = 0; i2 < index2; i2++) {\n      if (string[i2] === \"\\n\") {\n        column = 1;\n        line += 1;\n      } else {\n        column += 1;\n      }\n    }\n    return { column, line };\n  }\n  prev() {\n    if (!this.parent) return void 0;\n    let index2 = this.parent.index(this);\n    return this.parent.nodes[index2 - 1];\n  }\n  rangeBy(opts) {\n    let start = {\n      column: this.source.start.column,\n      line: this.source.start.line\n    };\n    let end = this.source.end ? {\n      column: this.source.end.column + 1,\n      line: this.source.end.line\n    } : {\n      column: start.column + 1,\n      line: start.line\n    };\n    if (opts.word) {\n      let stringRepresentation = this.toString();\n      let index2 = stringRepresentation.indexOf(opts.word);\n      if (index2 !== -1) {\n        start = this.positionInside(index2, stringRepresentation);\n        end = this.positionInside(index2 + opts.word.length, stringRepresentation);\n      }\n    } else {\n      if (opts.start) {\n        start = {\n          column: opts.start.column,\n          line: opts.start.line\n        };\n      } else if (opts.index) {\n        start = this.positionInside(opts.index);\n      }\n      if (opts.end) {\n        end = {\n          column: opts.end.column,\n          line: opts.end.line\n        };\n      } else if (typeof opts.endIndex === \"number\") {\n        end = this.positionInside(opts.endIndex);\n      } else if (opts.index) {\n        end = this.positionInside(opts.index + 1);\n      }\n    }\n    if (end.line < start.line || end.line === start.line && end.column <= start.column) {\n      end = { column: start.column + 1, line: start.line };\n    }\n    return { end, start };\n  }\n  raw(prop, defaultType) {\n    let str = new Stringifier2$1();\n    return str.raw(this, prop, defaultType);\n  }\n  remove() {\n    if (this.parent) {\n      this.parent.removeChild(this);\n    }\n    this.parent = void 0;\n    return this;\n  }\n  replaceWith(...nodes) {\n    if (this.parent) {\n      let bookmark = this;\n      let foundSelf = false;\n      for (let node2 of nodes) {\n        if (node2 === this) {\n          foundSelf = true;\n        } else if (foundSelf) {\n          this.parent.insertAfter(bookmark, node2);\n          bookmark = node2;\n        } else {\n          this.parent.insertBefore(bookmark, node2);\n        }\n      }\n      if (!foundSelf) {\n        this.remove();\n      }\n    }\n    return this;\n  }\n  root() {\n    let result2 = this;\n    while (result2.parent && result2.parent.type !== \"document\") {\n      result2 = result2.parent;\n    }\n    return result2;\n  }\n  toJSON(_, inputs) {\n    let fixed = {};\n    let emitInputs = inputs == null;\n    inputs = inputs || /* @__PURE__ */ new Map();\n    let inputsNextIndex = 0;\n    for (let name in this) {\n      if (!Object.prototype.hasOwnProperty.call(this, name)) {\n        continue;\n      }\n      if (name === \"parent\" || name === \"proxyCache\") continue;\n      let value = this[name];\n      if (Array.isArray(value)) {\n        fixed[name] = value.map((i2) => {\n          if (typeof i2 === \"object\" && i2.toJSON) {\n            return i2.toJSON(null, inputs);\n          } else {\n            return i2;\n          }\n        });\n      } else if (typeof value === \"object\" && value.toJSON) {\n        fixed[name] = value.toJSON(null, inputs);\n      } else if (name === \"source\") {\n        let inputId = inputs.get(value.input);\n        if (inputId == null) {\n          inputId = inputsNextIndex;\n          inputs.set(value.input, inputsNextIndex);\n          inputsNextIndex++;\n        }\n        fixed[name] = {\n          end: value.end,\n          inputId,\n          start: value.start\n        };\n      } else {\n        fixed[name] = value;\n      }\n    }\n    if (emitInputs) {\n      fixed.inputs = [...inputs.keys()].map((input2) => input2.toJSON());\n    }\n    return fixed;\n  }\n  toProxy() {\n    if (!this.proxyCache) {\n      this.proxyCache = new Proxy(this, this.getProxyProcessor());\n    }\n    return this.proxyCache;\n  }\n  toString(stringifier2 = stringify$3$1) {\n    if (stringifier2.stringify) stringifier2 = stringifier2.stringify;\n    let result2 = \"\";\n    stringifier2(this, (i2) => {\n      result2 += i2;\n    });\n    return result2;\n  }\n  warn(result2, text, opts) {\n    let data = { node: this };\n    for (let i2 in opts) data[i2] = opts[i2];\n    return result2.warn(text, data);\n  }\n  get proxyOf() {\n    return this;\n  }\n};\nvar node$1 = Node$4$1;\nNode$4$1.default = Node$4$1;\nlet Node$3$1 = node$1;\nlet Declaration$4$1 = class Declaration extends Node$3$1 {\n  constructor(defaults) {\n    if (defaults && typeof defaults.value !== \"undefined\" && typeof defaults.value !== \"string\") {\n      defaults = { ...defaults, value: String(defaults.value) };\n    }\n    super(defaults);\n    this.type = \"decl\";\n  }\n  get variable() {\n    return this.prop.startsWith(\"--\") || this.prop[0] === \"$\";\n  }\n};\nvar declaration$1 = Declaration$4$1;\nDeclaration$4$1.default = Declaration$4$1;\nlet urlAlphabet$1 = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\nlet customAlphabet$1 = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = \"\";\n    let i2 = size;\n    while (i2--) {\n      id += alphabet[Math.random() * alphabet.length | 0];\n    }\n    return id;\n  };\n};\nlet nanoid$1$1 = (size = 21) => {\n  let id = \"\";\n  let i2 = size;\n  while (i2--) {\n    id += urlAlphabet$1[Math.random() * 64 | 0];\n  }\n  return id;\n};\nvar nonSecure$1 = { nanoid: nanoid$1$1, customAlphabet: customAlphabet$1 };\nlet { SourceMapConsumer: SourceMapConsumer$2$1, SourceMapGenerator: SourceMapGenerator$2$1 } = require$$2$1;\nlet { existsSync: existsSync$1, readFileSync: readFileSync$1 } = require$$2$1;\nlet { dirname: dirname$1$1, join: join$1 } = require$$2$1;\nfunction fromBase64$1(str) {\n  if (Buffer) {\n    return Buffer.from(str, \"base64\").toString();\n  } else {\n    return window.atob(str);\n  }\n}\nlet PreviousMap$2$1 = class PreviousMap {\n  constructor(css, opts) {\n    if (opts.map === false) return;\n    this.loadAnnotation(css);\n    this.inline = this.startWith(this.annotation, \"data:\");\n    let prev = opts.map ? opts.map.prev : void 0;\n    let text = this.loadMap(opts.from, prev);\n    if (!this.mapFile && opts.from) {\n      this.mapFile = opts.from;\n    }\n    if (this.mapFile) this.root = dirname$1$1(this.mapFile);\n    if (text) this.text = text;\n  }\n  consumer() {\n    if (!this.consumerCache) {\n      this.consumerCache = new SourceMapConsumer$2$1(this.text);\n    }\n    return this.consumerCache;\n  }\n  decodeInline(text) {\n    let baseCharsetUri = /^data:application\\/json;charset=utf-?8;base64,/;\n    let baseUri = /^data:application\\/json;base64,/;\n    let charsetUri = /^data:application\\/json;charset=utf-?8,/;\n    let uri = /^data:application\\/json,/;\n    if (charsetUri.test(text) || uri.test(text)) {\n      return decodeURIComponent(text.substr(RegExp.lastMatch.length));\n    }\n    if (baseCharsetUri.test(text) || baseUri.test(text)) {\n      return fromBase64$1(text.substr(RegExp.lastMatch.length));\n    }\n    let encoding = text.match(/data:application\\/json;([^,]+),/)[1];\n    throw new Error(\"Unsupported source map encoding \" + encoding);\n  }\n  getAnnotationURL(sourceMapString) {\n    return sourceMapString.replace(/^\\/\\*\\s*# sourceMappingURL=/, \"\").trim();\n  }\n  isMap(map) {\n    if (typeof map !== \"object\") return false;\n    return typeof map.mappings === \"string\" || typeof map._mappings === \"string\" || Array.isArray(map.sections);\n  }\n  loadAnnotation(css) {\n    let comments = css.match(/\\/\\*\\s*# sourceMappingURL=/gm);\n    if (!comments) return;\n    let start = css.lastIndexOf(comments.pop());\n    let end = css.indexOf(\"*/\", start);\n    if (start > -1 && end > -1) {\n      this.annotation = this.getAnnotationURL(css.substring(start, end));\n    }\n  }\n  loadFile(path) {\n    this.root = dirname$1$1(path);\n    if (existsSync$1(path)) {\n      this.mapFile = path;\n      return readFileSync$1(path, \"utf-8\").toString().trim();\n    }\n  }\n  loadMap(file, prev) {\n    if (prev === false) return false;\n    if (prev) {\n      if (typeof prev === \"string\") {\n        return prev;\n      } else if (typeof prev === \"function\") {\n        let prevPath = prev(file);\n        if (prevPath) {\n          let map = this.loadFile(prevPath);\n          if (!map) {\n            throw new Error(\n              \"Unable to load previous source map: \" + prevPath.toString()\n            );\n          }\n          return map;\n        }\n      } else if (prev instanceof SourceMapConsumer$2$1) {\n        return SourceMapGenerator$2$1.fromSourceMap(prev).toString();\n      } else if (prev instanceof SourceMapGenerator$2$1) {\n        return prev.toString();\n      } else if (this.isMap(prev)) {\n        return JSON.stringify(prev);\n      } else {\n        throw new Error(\n          \"Unsupported previous source map format: \" + prev.toString()\n        );\n      }\n    } else if (this.inline) {\n      return this.decodeInline(this.annotation);\n    } else if (this.annotation) {\n      let map = this.annotation;\n      if (file) map = join$1(dirname$1$1(file), map);\n      return this.loadFile(map);\n    }\n  }\n  startWith(string, start) {\n    if (!string) return false;\n    return string.substr(0, start.length) === start;\n  }\n  withContent() {\n    return !!(this.consumer().sourcesContent && this.consumer().sourcesContent.length > 0);\n  }\n};\nvar previousMap$1 = PreviousMap$2$1;\nPreviousMap$2$1.default = PreviousMap$2$1;\nlet { SourceMapConsumer: SourceMapConsumer$1$1, SourceMapGenerator: SourceMapGenerator$1$1 } = require$$2$1;\nlet { fileURLToPath: fileURLToPath$1, pathToFileURL: pathToFileURL$1$1 } = require$$2$1;\nlet { isAbsolute: isAbsolute$1, resolve: resolve$1$1 } = require$$2$1;\nlet { nanoid: nanoid$2 } = nonSecure$1;\nlet terminalHighlight$2 = require$$2$1;\nlet CssSyntaxError$1$1 = cssSyntaxError$1;\nlet PreviousMap$1$1 = previousMap$1;\nlet fromOffsetCache$1 = Symbol(\"fromOffsetCache\");\nlet sourceMapAvailable$1$1 = Boolean(SourceMapConsumer$1$1 && SourceMapGenerator$1$1);\nlet pathAvailable$1$1 = Boolean(resolve$1$1 && isAbsolute$1);\nlet Input$4$1 = class Input {\n  constructor(css, opts = {}) {\n    if (css === null || typeof css === \"undefined\" || typeof css === \"object\" && !css.toString) {\n      throw new Error(`PostCSS received ${css} instead of CSS string`);\n    }\n    this.css = css.toString();\n    if (this.css[0] === \"\\uFEFF\" || this.css[0] === \"￾\") {\n      this.hasBOM = true;\n      this.css = this.css.slice(1);\n    } else {\n      this.hasBOM = false;\n    }\n    if (opts.from) {\n      if (!pathAvailable$1$1 || /^\\w+:\\/\\//.test(opts.from) || isAbsolute$1(opts.from)) {\n        this.file = opts.from;\n      } else {\n        this.file = resolve$1$1(opts.from);\n      }\n    }\n    if (pathAvailable$1$1 && sourceMapAvailable$1$1) {\n      let map = new PreviousMap$1$1(this.css, opts);\n      if (map.text) {\n        this.map = map;\n        let file = map.consumer().file;\n        if (!this.file && file) this.file = this.mapResolve(file);\n      }\n    }\n    if (!this.file) {\n      this.id = \"<input css \" + nanoid$2(6) + \">\";\n    }\n    if (this.map) this.map.file = this.from;\n  }\n  error(message, line, column, opts = {}) {\n    let result2, endLine, endColumn;\n    if (line && typeof line === \"object\") {\n      let start = line;\n      let end = column;\n      if (typeof start.offset === \"number\") {\n        let pos = this.fromOffset(start.offset);\n        line = pos.line;\n        column = pos.col;\n      } else {\n        line = start.line;\n        column = start.column;\n      }\n      if (typeof end.offset === \"number\") {\n        let pos = this.fromOffset(end.offset);\n        endLine = pos.line;\n        endColumn = pos.col;\n      } else {\n        endLine = end.line;\n        endColumn = end.column;\n      }\n    } else if (!column) {\n      let pos = this.fromOffset(line);\n      line = pos.line;\n      column = pos.col;\n    }\n    let origin = this.origin(line, column, endLine, endColumn);\n    if (origin) {\n      result2 = new CssSyntaxError$1$1(\n        message,\n        origin.endLine === void 0 ? origin.line : { column: origin.column, line: origin.line },\n        origin.endLine === void 0 ? origin.column : { column: origin.endColumn, line: origin.endLine },\n        origin.source,\n        origin.file,\n        opts.plugin\n      );\n    } else {\n      result2 = new CssSyntaxError$1$1(\n        message,\n        endLine === void 0 ? line : { column, line },\n        endLine === void 0 ? column : { column: endColumn, line: endLine },\n        this.css,\n        this.file,\n        opts.plugin\n      );\n    }\n    result2.input = { column, endColumn, endLine, line, source: this.css };\n    if (this.file) {\n      if (pathToFileURL$1$1) {\n        result2.input.url = pathToFileURL$1$1(this.file).toString();\n      }\n      result2.input.file = this.file;\n    }\n    return result2;\n  }\n  fromOffset(offset) {\n    let lastLine, lineToIndex;\n    if (!this[fromOffsetCache$1]) {\n      let lines = this.css.split(\"\\n\");\n      lineToIndex = new Array(lines.length);\n      let prevIndex = 0;\n      for (let i2 = 0, l2 = lines.length; i2 < l2; i2++) {\n        lineToIndex[i2] = prevIndex;\n        prevIndex += lines[i2].length + 1;\n      }\n      this[fromOffsetCache$1] = lineToIndex;\n    } else {\n      lineToIndex = this[fromOffsetCache$1];\n    }\n    lastLine = lineToIndex[lineToIndex.length - 1];\n    let min = 0;\n    if (offset >= lastLine) {\n      min = lineToIndex.length - 1;\n    } else {\n      let max = lineToIndex.length - 2;\n      let mid;\n      while (min < max) {\n        mid = min + (max - min >> 1);\n        if (offset < lineToIndex[mid]) {\n          max = mid - 1;\n        } else if (offset >= lineToIndex[mid + 1]) {\n          min = mid + 1;\n        } else {\n          min = mid;\n          break;\n        }\n      }\n    }\n    return {\n      col: offset - lineToIndex[min] + 1,\n      line: min + 1\n    };\n  }\n  mapResolve(file) {\n    if (/^\\w+:\\/\\//.test(file)) {\n      return file;\n    }\n    return resolve$1$1(this.map.consumer().sourceRoot || this.map.root || \".\", file);\n  }\n  origin(line, column, endLine, endColumn) {\n    if (!this.map) return false;\n    let consumer = this.map.consumer();\n    let from = consumer.originalPositionFor({ column, line });\n    if (!from.source) return false;\n    let to;\n    if (typeof endLine === \"number\") {\n      to = consumer.originalPositionFor({ column: endColumn, line: endLine });\n    }\n    let fromUrl;\n    if (isAbsolute$1(from.source)) {\n      fromUrl = pathToFileURL$1$1(from.source);\n    } else {\n      fromUrl = new URL(\n        from.source,\n        this.map.consumer().sourceRoot || pathToFileURL$1$1(this.map.mapFile)\n      );\n    }\n    let result2 = {\n      column: from.column,\n      endColumn: to && to.column,\n      endLine: to && to.line,\n      line: from.line,\n      url: fromUrl.toString()\n    };\n    if (fromUrl.protocol === \"file:\") {\n      if (fileURLToPath$1) {\n        result2.file = fileURLToPath$1(fromUrl);\n      } else {\n        throw new Error(`file: protocol is not available in this PostCSS build`);\n      }\n    }\n    let source = consumer.sourceContentFor(from.source);\n    if (source) result2.source = source;\n    return result2;\n  }\n  toJSON() {\n    let json = {};\n    for (let name of [\"hasBOM\", \"css\", \"file\", \"id\"]) {\n      if (this[name] != null) {\n        json[name] = this[name];\n      }\n    }\n    if (this.map) {\n      json.map = { ...this.map };\n      if (json.map.consumerCache) {\n        json.map.consumerCache = void 0;\n      }\n    }\n    return json;\n  }\n  get from() {\n    return this.file || this.id;\n  }\n};\nvar input$1 = Input$4$1;\nInput$4$1.default = Input$4$1;\nif (terminalHighlight$2 && terminalHighlight$2.registerInput) {\n  terminalHighlight$2.registerInput(Input$4$1);\n}\nlet { SourceMapConsumer: SourceMapConsumer$3, SourceMapGenerator: SourceMapGenerator$3 } = require$$2$1;\nlet { dirname: dirname$2, relative: relative$1, resolve: resolve$2, sep: sep$1 } = require$$2$1;\nlet { pathToFileURL: pathToFileURL$2 } = require$$2$1;\nlet Input$3$1 = input$1;\nlet sourceMapAvailable$2 = Boolean(SourceMapConsumer$3 && SourceMapGenerator$3);\nlet pathAvailable$2 = Boolean(dirname$2 && resolve$2 && relative$1 && sep$1);\nlet MapGenerator$2$1 = class MapGenerator {\n  constructor(stringify2, root2, opts, cssString) {\n    this.stringify = stringify2;\n    this.mapOpts = opts.map || {};\n    this.root = root2;\n    this.opts = opts;\n    this.css = cssString;\n    this.originalCSS = cssString;\n    this.usesFileUrls = !this.mapOpts.from && this.mapOpts.absolute;\n    this.memoizedFileURLs = /* @__PURE__ */ new Map();\n    this.memoizedPaths = /* @__PURE__ */ new Map();\n    this.memoizedURLs = /* @__PURE__ */ new Map();\n  }\n  addAnnotation() {\n    let content;\n    if (this.isInline()) {\n      content = \"data:application/json;base64,\" + this.toBase64(this.map.toString());\n    } else if (typeof this.mapOpts.annotation === \"string\") {\n      content = this.mapOpts.annotation;\n    } else if (typeof this.mapOpts.annotation === \"function\") {\n      content = this.mapOpts.annotation(this.opts.to, this.root);\n    } else {\n      content = this.outputFile() + \".map\";\n    }\n    let eol = \"\\n\";\n    if (this.css.includes(\"\\r\\n\")) eol = \"\\r\\n\";\n    this.css += eol + \"/*# sourceMappingURL=\" + content + \" */\";\n  }\n  applyPrevMaps() {\n    for (let prev of this.previous()) {\n      let from = this.toUrl(this.path(prev.file));\n      let root2 = prev.root || dirname$2(prev.file);\n      let map;\n      if (this.mapOpts.sourcesContent === false) {\n        map = new SourceMapConsumer$3(prev.text);\n        if (map.sourcesContent) {\n          map.sourcesContent = null;\n        }\n      } else {\n        map = prev.consumer();\n      }\n      this.map.applySourceMap(map, from, this.toUrl(this.path(root2)));\n    }\n  }\n  clearAnnotation() {\n    if (this.mapOpts.annotation === false) return;\n    if (this.root) {\n      let node2;\n      for (let i2 = this.root.nodes.length - 1; i2 >= 0; i2--) {\n        node2 = this.root.nodes[i2];\n        if (node2.type !== \"comment\") continue;\n        if (node2.text.indexOf(\"# sourceMappingURL=\") === 0) {\n          this.root.removeChild(i2);\n        }\n      }\n    } else if (this.css) {\n      this.css = this.css.replace(/\\n*?\\/\\*#[\\S\\s]*?\\*\\/$/gm, \"\");\n    }\n  }\n  generate() {\n    this.clearAnnotation();\n    if (pathAvailable$2 && sourceMapAvailable$2 && this.isMap()) {\n      return this.generateMap();\n    } else {\n      let result2 = \"\";\n      this.stringify(this.root, (i2) => {\n        result2 += i2;\n      });\n      return [result2];\n    }\n  }\n  generateMap() {\n    if (this.root) {\n      this.generateString();\n    } else if (this.previous().length === 1) {\n      let prev = this.previous()[0].consumer();\n      prev.file = this.outputFile();\n      this.map = SourceMapGenerator$3.fromSourceMap(prev, {\n        ignoreInvalidMapping: true\n      });\n    } else {\n      this.map = new SourceMapGenerator$3({\n        file: this.outputFile(),\n        ignoreInvalidMapping: true\n      });\n      this.map.addMapping({\n        generated: { column: 0, line: 1 },\n        original: { column: 0, line: 1 },\n        source: this.opts.from ? this.toUrl(this.path(this.opts.from)) : \"<no source>\"\n      });\n    }\n    if (this.isSourcesContent()) this.setSourcesContent();\n    if (this.root && this.previous().length > 0) this.applyPrevMaps();\n    if (this.isAnnotation()) this.addAnnotation();\n    if (this.isInline()) {\n      return [this.css];\n    } else {\n      return [this.css, this.map];\n    }\n  }\n  generateString() {\n    this.css = \"\";\n    this.map = new SourceMapGenerator$3({\n      file: this.outputFile(),\n      ignoreInvalidMapping: true\n    });\n    let line = 1;\n    let column = 1;\n    let noSource = \"<no source>\";\n    let mapping = {\n      generated: { column: 0, line: 0 },\n      original: { column: 0, line: 0 },\n      source: \"\"\n    };\n    let lines, last;\n    this.stringify(this.root, (str, node2, type) => {\n      this.css += str;\n      if (node2 && type !== \"end\") {\n        mapping.generated.line = line;\n        mapping.generated.column = column - 1;\n        if (node2.source && node2.source.start) {\n          mapping.source = this.sourcePath(node2);\n          mapping.original.line = node2.source.start.line;\n          mapping.original.column = node2.source.start.column - 1;\n          this.map.addMapping(mapping);\n        } else {\n          mapping.source = noSource;\n          mapping.original.line = 1;\n          mapping.original.column = 0;\n          this.map.addMapping(mapping);\n        }\n      }\n      lines = str.match(/\\n/g);\n      if (lines) {\n        line += lines.length;\n        last = str.lastIndexOf(\"\\n\");\n        column = str.length - last;\n      } else {\n        column += str.length;\n      }\n      if (node2 && type !== \"start\") {\n        let p = node2.parent || { raws: {} };\n        let childless = node2.type === \"decl\" || node2.type === \"atrule\" && !node2.nodes;\n        if (!childless || node2 !== p.last || p.raws.semicolon) {\n          if (node2.source && node2.source.end) {\n            mapping.source = this.sourcePath(node2);\n            mapping.original.line = node2.source.end.line;\n            mapping.original.column = node2.source.end.column - 1;\n            mapping.generated.line = line;\n            mapping.generated.column = column - 2;\n            this.map.addMapping(mapping);\n          } else {\n            mapping.source = noSource;\n            mapping.original.line = 1;\n            mapping.original.column = 0;\n            mapping.generated.line = line;\n            mapping.generated.column = column - 1;\n            this.map.addMapping(mapping);\n          }\n        }\n      }\n    });\n  }\n  isAnnotation() {\n    if (this.isInline()) {\n      return true;\n    }\n    if (typeof this.mapOpts.annotation !== \"undefined\") {\n      return this.mapOpts.annotation;\n    }\n    if (this.previous().length) {\n      return this.previous().some((i2) => i2.annotation);\n    }\n    return true;\n  }\n  isInline() {\n    if (typeof this.mapOpts.inline !== \"undefined\") {\n      return this.mapOpts.inline;\n    }\n    let annotation = this.mapOpts.annotation;\n    if (typeof annotation !== \"undefined\" && annotation !== true) {\n      return false;\n    }\n    if (this.previous().length) {\n      return this.previous().some((i2) => i2.inline);\n    }\n    return true;\n  }\n  isMap() {\n    if (typeof this.opts.map !== \"undefined\") {\n      return !!this.opts.map;\n    }\n    return this.previous().length > 0;\n  }\n  isSourcesContent() {\n    if (typeof this.mapOpts.sourcesContent !== \"undefined\") {\n      return this.mapOpts.sourcesContent;\n    }\n    if (this.previous().length) {\n      return this.previous().some((i2) => i2.withContent());\n    }\n    return true;\n  }\n  outputFile() {\n    if (this.opts.to) {\n      return this.path(this.opts.to);\n    } else if (this.opts.from) {\n      return this.path(this.opts.from);\n    } else {\n      return \"to.css\";\n    }\n  }\n  path(file) {\n    if (this.mapOpts.absolute) return file;\n    if (file.charCodeAt(0) === 60) return file;\n    if (/^\\w+:\\/\\//.test(file)) return file;\n    let cached = this.memoizedPaths.get(file);\n    if (cached) return cached;\n    let from = this.opts.to ? dirname$2(this.opts.to) : \".\";\n    if (typeof this.mapOpts.annotation === \"string\") {\n      from = dirname$2(resolve$2(from, this.mapOpts.annotation));\n    }\n    let path = relative$1(from, file);\n    this.memoizedPaths.set(file, path);\n    return path;\n  }\n  previous() {\n    if (!this.previousMaps) {\n      this.previousMaps = [];\n      if (this.root) {\n        this.root.walk((node2) => {\n          if (node2.source && node2.source.input.map) {\n            let map = node2.source.input.map;\n            if (!this.previousMaps.includes(map)) {\n              this.previousMaps.push(map);\n            }\n          }\n        });\n      } else {\n        let input2 = new Input$3$1(this.originalCSS, this.opts);\n        if (input2.map) this.previousMaps.push(input2.map);\n      }\n    }\n    return this.previousMaps;\n  }\n  setSourcesContent() {\n    let already = {};\n    if (this.root) {\n      this.root.walk((node2) => {\n        if (node2.source) {\n          let from = node2.source.input.from;\n          if (from && !already[from]) {\n            already[from] = true;\n            let fromUrl = this.usesFileUrls ? this.toFileUrl(from) : this.toUrl(this.path(from));\n            this.map.setSourceContent(fromUrl, node2.source.input.css);\n          }\n        }\n      });\n    } else if (this.css) {\n      let from = this.opts.from ? this.toUrl(this.path(this.opts.from)) : \"<no source>\";\n      this.map.setSourceContent(from, this.css);\n    }\n  }\n  sourcePath(node2) {\n    if (this.mapOpts.from) {\n      return this.toUrl(this.mapOpts.from);\n    } else if (this.usesFileUrls) {\n      return this.toFileUrl(node2.source.input.from);\n    } else {\n      return this.toUrl(this.path(node2.source.input.from));\n    }\n  }\n  toBase64(str) {\n    if (Buffer) {\n      return Buffer.from(str).toString(\"base64\");\n    } else {\n      return window.btoa(unescape(encodeURIComponent(str)));\n    }\n  }\n  toFileUrl(path) {\n    let cached = this.memoizedFileURLs.get(path);\n    if (cached) return cached;\n    if (pathToFileURL$2) {\n      let fileURL = pathToFileURL$2(path).toString();\n      this.memoizedFileURLs.set(path, fileURL);\n      return fileURL;\n    } else {\n      throw new Error(\n        \"`map.absolute` option is not available in this PostCSS build\"\n      );\n    }\n  }\n  toUrl(path) {\n    let cached = this.memoizedURLs.get(path);\n    if (cached) return cached;\n    if (sep$1 === \"\\\\\") {\n      path = path.replace(/\\\\/g, \"/\");\n    }\n    let url = encodeURI(path).replace(/[#?]/g, encodeURIComponent);\n    this.memoizedURLs.set(path, url);\n    return url;\n  }\n};\nvar mapGenerator$1 = MapGenerator$2$1;\nlet Node$2$1 = node$1;\nlet Comment$4$1 = class Comment extends Node$2$1 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"comment\";\n  }\n};\nvar comment$1 = Comment$4$1;\nComment$4$1.default = Comment$4$1;\nlet { isClean: isClean$1$1, my: my$1$1 } = symbols$1;\nlet Declaration$3$1 = declaration$1;\nlet Comment$3$1 = comment$1;\nlet Node$1$1 = node$1;\nlet parse$4$1, Rule$4$1, AtRule$4$1, Root$6$1;\nfunction cleanSource$1(nodes) {\n  return nodes.map((i2) => {\n    if (i2.nodes) i2.nodes = cleanSource$1(i2.nodes);\n    delete i2.source;\n    return i2;\n  });\n}\nfunction markDirtyUp$1(node2) {\n  node2[isClean$1$1] = false;\n  if (node2.proxyOf.nodes) {\n    for (let i2 of node2.proxyOf.nodes) {\n      markDirtyUp$1(i2);\n    }\n  }\n}\nlet Container$7$1 = class Container extends Node$1$1 {\n  append(...children) {\n    for (let child of children) {\n      let nodes = this.normalize(child, this.last);\n      for (let node2 of nodes) this.proxyOf.nodes.push(node2);\n    }\n    this.markDirty();\n    return this;\n  }\n  cleanRaws(keepBetween) {\n    super.cleanRaws(keepBetween);\n    if (this.nodes) {\n      for (let node2 of this.nodes) node2.cleanRaws(keepBetween);\n    }\n  }\n  each(callback) {\n    if (!this.proxyOf.nodes) return void 0;\n    let iterator = this.getIterator();\n    let index2, result2;\n    while (this.indexes[iterator] < this.proxyOf.nodes.length) {\n      index2 = this.indexes[iterator];\n      result2 = callback(this.proxyOf.nodes[index2], index2);\n      if (result2 === false) break;\n      this.indexes[iterator] += 1;\n    }\n    delete this.indexes[iterator];\n    return result2;\n  }\n  every(condition) {\n    return this.nodes.every(condition);\n  }\n  getIterator() {\n    if (!this.lastEach) this.lastEach = 0;\n    if (!this.indexes) this.indexes = {};\n    this.lastEach += 1;\n    let iterator = this.lastEach;\n    this.indexes[iterator] = 0;\n    return iterator;\n  }\n  getProxyProcessor() {\n    return {\n      get(node2, prop) {\n        if (prop === \"proxyOf\") {\n          return node2;\n        } else if (!node2[prop]) {\n          return node2[prop];\n        } else if (prop === \"each\" || typeof prop === \"string\" && prop.startsWith(\"walk\")) {\n          return (...args) => {\n            return node2[prop](\n              ...args.map((i2) => {\n                if (typeof i2 === \"function\") {\n                  return (child, index2) => i2(child.toProxy(), index2);\n                } else {\n                  return i2;\n                }\n              })\n            );\n          };\n        } else if (prop === \"every\" || prop === \"some\") {\n          return (cb) => {\n            return node2[prop](\n              (child, ...other) => cb(child.toProxy(), ...other)\n            );\n          };\n        } else if (prop === \"root\") {\n          return () => node2.root().toProxy();\n        } else if (prop === \"nodes\") {\n          return node2.nodes.map((i2) => i2.toProxy());\n        } else if (prop === \"first\" || prop === \"last\") {\n          return node2[prop].toProxy();\n        } else {\n          return node2[prop];\n        }\n      },\n      set(node2, prop, value) {\n        if (node2[prop] === value) return true;\n        node2[prop] = value;\n        if (prop === \"name\" || prop === \"params\" || prop === \"selector\") {\n          node2.markDirty();\n        }\n        return true;\n      }\n    };\n  }\n  index(child) {\n    if (typeof child === \"number\") return child;\n    if (child.proxyOf) child = child.proxyOf;\n    return this.proxyOf.nodes.indexOf(child);\n  }\n  insertAfter(exist, add) {\n    let existIndex = this.index(exist);\n    let nodes = this.normalize(add, this.proxyOf.nodes[existIndex]).reverse();\n    existIndex = this.index(exist);\n    for (let node2 of nodes) this.proxyOf.nodes.splice(existIndex + 1, 0, node2);\n    let index2;\n    for (let id in this.indexes) {\n      index2 = this.indexes[id];\n      if (existIndex < index2) {\n        this.indexes[id] = index2 + nodes.length;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  insertBefore(exist, add) {\n    let existIndex = this.index(exist);\n    let type = existIndex === 0 ? \"prepend\" : false;\n    let nodes = this.normalize(add, this.proxyOf.nodes[existIndex], type).reverse();\n    existIndex = this.index(exist);\n    for (let node2 of nodes) this.proxyOf.nodes.splice(existIndex, 0, node2);\n    let index2;\n    for (let id in this.indexes) {\n      index2 = this.indexes[id];\n      if (existIndex <= index2) {\n        this.indexes[id] = index2 + nodes.length;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  normalize(nodes, sample) {\n    if (typeof nodes === \"string\") {\n      nodes = cleanSource$1(parse$4$1(nodes).nodes);\n    } else if (typeof nodes === \"undefined\") {\n      nodes = [];\n    } else if (Array.isArray(nodes)) {\n      nodes = nodes.slice(0);\n      for (let i2 of nodes) {\n        if (i2.parent) i2.parent.removeChild(i2, \"ignore\");\n      }\n    } else if (nodes.type === \"root\" && this.type !== \"document\") {\n      nodes = nodes.nodes.slice(0);\n      for (let i2 of nodes) {\n        if (i2.parent) i2.parent.removeChild(i2, \"ignore\");\n      }\n    } else if (nodes.type) {\n      nodes = [nodes];\n    } else if (nodes.prop) {\n      if (typeof nodes.value === \"undefined\") {\n        throw new Error(\"Value field is missed in node creation\");\n      } else if (typeof nodes.value !== \"string\") {\n        nodes.value = String(nodes.value);\n      }\n      nodes = [new Declaration$3$1(nodes)];\n    } else if (nodes.selector) {\n      nodes = [new Rule$4$1(nodes)];\n    } else if (nodes.name) {\n      nodes = [new AtRule$4$1(nodes)];\n    } else if (nodes.text) {\n      nodes = [new Comment$3$1(nodes)];\n    } else {\n      throw new Error(\"Unknown node type in node creation\");\n    }\n    let processed = nodes.map((i2) => {\n      if (!i2[my$1$1]) Container.rebuild(i2);\n      i2 = i2.proxyOf;\n      if (i2.parent) i2.parent.removeChild(i2);\n      if (i2[isClean$1$1]) markDirtyUp$1(i2);\n      if (typeof i2.raws.before === \"undefined\") {\n        if (sample && typeof sample.raws.before !== \"undefined\") {\n          i2.raws.before = sample.raws.before.replace(/\\S/g, \"\");\n        }\n      }\n      i2.parent = this.proxyOf;\n      return i2;\n    });\n    return processed;\n  }\n  prepend(...children) {\n    children = children.reverse();\n    for (let child of children) {\n      let nodes = this.normalize(child, this.first, \"prepend\").reverse();\n      for (let node2 of nodes) this.proxyOf.nodes.unshift(node2);\n      for (let id in this.indexes) {\n        this.indexes[id] = this.indexes[id] + nodes.length;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  push(child) {\n    child.parent = this;\n    this.proxyOf.nodes.push(child);\n    return this;\n  }\n  removeAll() {\n    for (let node2 of this.proxyOf.nodes) node2.parent = void 0;\n    this.proxyOf.nodes = [];\n    this.markDirty();\n    return this;\n  }\n  removeChild(child) {\n    child = this.index(child);\n    this.proxyOf.nodes[child].parent = void 0;\n    this.proxyOf.nodes.splice(child, 1);\n    let index2;\n    for (let id in this.indexes) {\n      index2 = this.indexes[id];\n      if (index2 >= child) {\n        this.indexes[id] = index2 - 1;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  replaceValues(pattern, opts, callback) {\n    if (!callback) {\n      callback = opts;\n      opts = {};\n    }\n    this.walkDecls((decl) => {\n      if (opts.props && !opts.props.includes(decl.prop)) return;\n      if (opts.fast && !decl.value.includes(opts.fast)) return;\n      decl.value = decl.value.replace(pattern, callback);\n    });\n    this.markDirty();\n    return this;\n  }\n  some(condition) {\n    return this.nodes.some(condition);\n  }\n  walk(callback) {\n    return this.each((child, i2) => {\n      let result2;\n      try {\n        result2 = callback(child, i2);\n      } catch (e2) {\n        throw child.addToError(e2);\n      }\n      if (result2 !== false && child.walk) {\n        result2 = child.walk(callback);\n      }\n      return result2;\n    });\n  }\n  walkAtRules(name, callback) {\n    if (!callback) {\n      callback = name;\n      return this.walk((child, i2) => {\n        if (child.type === \"atrule\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    if (name instanceof RegExp) {\n      return this.walk((child, i2) => {\n        if (child.type === \"atrule\" && name.test(child.name)) {\n          return callback(child, i2);\n        }\n      });\n    }\n    return this.walk((child, i2) => {\n      if (child.type === \"atrule\" && child.name === name) {\n        return callback(child, i2);\n      }\n    });\n  }\n  walkComments(callback) {\n    return this.walk((child, i2) => {\n      if (child.type === \"comment\") {\n        return callback(child, i2);\n      }\n    });\n  }\n  walkDecls(prop, callback) {\n    if (!callback) {\n      callback = prop;\n      return this.walk((child, i2) => {\n        if (child.type === \"decl\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    if (prop instanceof RegExp) {\n      return this.walk((child, i2) => {\n        if (child.type === \"decl\" && prop.test(child.prop)) {\n          return callback(child, i2);\n        }\n      });\n    }\n    return this.walk((child, i2) => {\n      if (child.type === \"decl\" && child.prop === prop) {\n        return callback(child, i2);\n      }\n    });\n  }\n  walkRules(selector, callback) {\n    if (!callback) {\n      callback = selector;\n      return this.walk((child, i2) => {\n        if (child.type === \"rule\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    if (selector instanceof RegExp) {\n      return this.walk((child, i2) => {\n        if (child.type === \"rule\" && selector.test(child.selector)) {\n          return callback(child, i2);\n        }\n      });\n    }\n    return this.walk((child, i2) => {\n      if (child.type === \"rule\" && child.selector === selector) {\n        return callback(child, i2);\n      }\n    });\n  }\n  get first() {\n    if (!this.proxyOf.nodes) return void 0;\n    return this.proxyOf.nodes[0];\n  }\n  get last() {\n    if (!this.proxyOf.nodes) return void 0;\n    return this.proxyOf.nodes[this.proxyOf.nodes.length - 1];\n  }\n};\nContainer$7$1.registerParse = (dependant) => {\n  parse$4$1 = dependant;\n};\nContainer$7$1.registerRule = (dependant) => {\n  Rule$4$1 = dependant;\n};\nContainer$7$1.registerAtRule = (dependant) => {\n  AtRule$4$1 = dependant;\n};\nContainer$7$1.registerRoot = (dependant) => {\n  Root$6$1 = dependant;\n};\nvar container$1 = Container$7$1;\nContainer$7$1.default = Container$7$1;\nContainer$7$1.rebuild = (node2) => {\n  if (node2.type === \"atrule\") {\n    Object.setPrototypeOf(node2, AtRule$4$1.prototype);\n  } else if (node2.type === \"rule\") {\n    Object.setPrototypeOf(node2, Rule$4$1.prototype);\n  } else if (node2.type === \"decl\") {\n    Object.setPrototypeOf(node2, Declaration$3$1.prototype);\n  } else if (node2.type === \"comment\") {\n    Object.setPrototypeOf(node2, Comment$3$1.prototype);\n  } else if (node2.type === \"root\") {\n    Object.setPrototypeOf(node2, Root$6$1.prototype);\n  }\n  node2[my$1$1] = true;\n  if (node2.nodes) {\n    node2.nodes.forEach((child) => {\n      Container$7$1.rebuild(child);\n    });\n  }\n};\nlet Container$6$1 = container$1;\nlet LazyResult$4$1, Processor$3$1;\nlet Document$3$1 = class Document2 extends Container$6$1 {\n  constructor(defaults) {\n    super({ type: \"document\", ...defaults });\n    if (!this.nodes) {\n      this.nodes = [];\n    }\n  }\n  toResult(opts = {}) {\n    let lazy = new LazyResult$4$1(new Processor$3$1(), this, opts);\n    return lazy.stringify();\n  }\n};\nDocument$3$1.registerLazyResult = (dependant) => {\n  LazyResult$4$1 = dependant;\n};\nDocument$3$1.registerProcessor = (dependant) => {\n  Processor$3$1 = dependant;\n};\nvar document$1$1 = Document$3$1;\nDocument$3$1.default = Document$3$1;\nlet printed$1 = {};\nvar warnOnce$2$1 = function warnOnce(message) {\n  if (printed$1[message]) return;\n  printed$1[message] = true;\n  if (typeof console !== \"undefined\" && console.warn) {\n    console.warn(message);\n  }\n};\nlet Warning$2$1 = class Warning {\n  constructor(text, opts = {}) {\n    this.type = \"warning\";\n    this.text = text;\n    if (opts.node && opts.node.source) {\n      let range = opts.node.rangeBy(opts);\n      this.line = range.start.line;\n      this.column = range.start.column;\n      this.endLine = range.end.line;\n      this.endColumn = range.end.column;\n    }\n    for (let opt in opts) this[opt] = opts[opt];\n  }\n  toString() {\n    if (this.node) {\n      return this.node.error(this.text, {\n        index: this.index,\n        plugin: this.plugin,\n        word: this.word\n      }).message;\n    }\n    if (this.plugin) {\n      return this.plugin + \": \" + this.text;\n    }\n    return this.text;\n  }\n};\nvar warning$1 = Warning$2$1;\nWarning$2$1.default = Warning$2$1;\nlet Warning$1$1 = warning$1;\nlet Result$3$1 = class Result {\n  constructor(processor2, root2, opts) {\n    this.processor = processor2;\n    this.messages = [];\n    this.root = root2;\n    this.opts = opts;\n    this.css = void 0;\n    this.map = void 0;\n  }\n  toString() {\n    return this.css;\n  }\n  warn(text, opts = {}) {\n    if (!opts.plugin) {\n      if (this.lastPlugin && this.lastPlugin.postcssPlugin) {\n        opts.plugin = this.lastPlugin.postcssPlugin;\n      }\n    }\n    let warning2 = new Warning$1$1(text, opts);\n    this.messages.push(warning2);\n    return warning2;\n  }\n  warnings() {\n    return this.messages.filter((i2) => i2.type === \"warning\");\n  }\n  get content() {\n    return this.css;\n  }\n};\nvar result$1 = Result$3$1;\nResult$3$1.default = Result$3$1;\nconst SINGLE_QUOTE$1 = \"'\".charCodeAt(0);\nconst DOUBLE_QUOTE$1 = '\"'.charCodeAt(0);\nconst BACKSLASH$1 = \"\\\\\".charCodeAt(0);\nconst SLASH$1 = \"/\".charCodeAt(0);\nconst NEWLINE$1 = \"\\n\".charCodeAt(0);\nconst SPACE$1 = \" \".charCodeAt(0);\nconst FEED$1 = \"\\f\".charCodeAt(0);\nconst TAB$1 = \"\t\".charCodeAt(0);\nconst CR$1 = \"\\r\".charCodeAt(0);\nconst OPEN_SQUARE$1 = \"[\".charCodeAt(0);\nconst CLOSE_SQUARE$1 = \"]\".charCodeAt(0);\nconst OPEN_PARENTHESES$1 = \"(\".charCodeAt(0);\nconst CLOSE_PARENTHESES$1 = \")\".charCodeAt(0);\nconst OPEN_CURLY$1 = \"{\".charCodeAt(0);\nconst CLOSE_CURLY$1 = \"}\".charCodeAt(0);\nconst SEMICOLON$1 = \";\".charCodeAt(0);\nconst ASTERISK$1 = \"*\".charCodeAt(0);\nconst COLON$1 = \":\".charCodeAt(0);\nconst AT$1 = \"@\".charCodeAt(0);\nconst RE_AT_END$1 = /[\\t\\n\\f\\r \"#'()/;[\\\\\\]{}]/g;\nconst RE_WORD_END$1 = /[\\t\\n\\f\\r !\"#'():;@[\\\\\\]{}]|\\/(?=\\*)/g;\nconst RE_BAD_BRACKET$1 = /.[\\r\\n\"'(/\\\\]/;\nconst RE_HEX_ESCAPE$1 = /[\\da-f]/i;\nvar tokenize$1 = function tokenizer(input2, options = {}) {\n  let css = input2.css.valueOf();\n  let ignore = options.ignoreErrors;\n  let code, next, quote, content, escape;\n  let escaped, escapePos, prev, n2, currentToken;\n  let length = css.length;\n  let pos = 0;\n  let buffer = [];\n  let returned = [];\n  function position() {\n    return pos;\n  }\n  function unclosed(what) {\n    throw input2.error(\"Unclosed \" + what, pos);\n  }\n  function endOfFile() {\n    return returned.length === 0 && pos >= length;\n  }\n  function nextToken(opts) {\n    if (returned.length) return returned.pop();\n    if (pos >= length) return;\n    let ignoreUnclosed = opts ? opts.ignoreUnclosed : false;\n    code = css.charCodeAt(pos);\n    switch (code) {\n      case NEWLINE$1:\n      case SPACE$1:\n      case TAB$1:\n      case CR$1:\n      case FEED$1: {\n        next = pos;\n        do {\n          next += 1;\n          code = css.charCodeAt(next);\n        } while (code === SPACE$1 || code === NEWLINE$1 || code === TAB$1 || code === CR$1 || code === FEED$1);\n        currentToken = [\"space\", css.slice(pos, next)];\n        pos = next - 1;\n        break;\n      }\n      case OPEN_SQUARE$1:\n      case CLOSE_SQUARE$1:\n      case OPEN_CURLY$1:\n      case CLOSE_CURLY$1:\n      case COLON$1:\n      case SEMICOLON$1:\n      case CLOSE_PARENTHESES$1: {\n        let controlChar = String.fromCharCode(code);\n        currentToken = [controlChar, controlChar, pos];\n        break;\n      }\n      case OPEN_PARENTHESES$1: {\n        prev = buffer.length ? buffer.pop()[1] : \"\";\n        n2 = css.charCodeAt(pos + 1);\n        if (prev === \"url\" && n2 !== SINGLE_QUOTE$1 && n2 !== DOUBLE_QUOTE$1 && n2 !== SPACE$1 && n2 !== NEWLINE$1 && n2 !== TAB$1 && n2 !== FEED$1 && n2 !== CR$1) {\n          next = pos;\n          do {\n            escaped = false;\n            next = css.indexOf(\")\", next + 1);\n            if (next === -1) {\n              if (ignore || ignoreUnclosed) {\n                next = pos;\n                break;\n              } else {\n                unclosed(\"bracket\");\n              }\n            }\n            escapePos = next;\n            while (css.charCodeAt(escapePos - 1) === BACKSLASH$1) {\n              escapePos -= 1;\n              escaped = !escaped;\n            }\n          } while (escaped);\n          currentToken = [\"brackets\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n        } else {\n          next = css.indexOf(\")\", pos + 1);\n          content = css.slice(pos, next + 1);\n          if (next === -1 || RE_BAD_BRACKET$1.test(content)) {\n            currentToken = [\"(\", \"(\", pos];\n          } else {\n            currentToken = [\"brackets\", content, pos, next];\n            pos = next;\n          }\n        }\n        break;\n      }\n      case SINGLE_QUOTE$1:\n      case DOUBLE_QUOTE$1: {\n        quote = code === SINGLE_QUOTE$1 ? \"'\" : '\"';\n        next = pos;\n        do {\n          escaped = false;\n          next = css.indexOf(quote, next + 1);\n          if (next === -1) {\n            if (ignore || ignoreUnclosed) {\n              next = pos + 1;\n              break;\n            } else {\n              unclosed(\"string\");\n            }\n          }\n          escapePos = next;\n          while (css.charCodeAt(escapePos - 1) === BACKSLASH$1) {\n            escapePos -= 1;\n            escaped = !escaped;\n          }\n        } while (escaped);\n        currentToken = [\"string\", css.slice(pos, next + 1), pos, next];\n        pos = next;\n        break;\n      }\n      case AT$1: {\n        RE_AT_END$1.lastIndex = pos + 1;\n        RE_AT_END$1.test(css);\n        if (RE_AT_END$1.lastIndex === 0) {\n          next = css.length - 1;\n        } else {\n          next = RE_AT_END$1.lastIndex - 2;\n        }\n        currentToken = [\"at-word\", css.slice(pos, next + 1), pos, next];\n        pos = next;\n        break;\n      }\n      case BACKSLASH$1: {\n        next = pos;\n        escape = true;\n        while (css.charCodeAt(next + 1) === BACKSLASH$1) {\n          next += 1;\n          escape = !escape;\n        }\n        code = css.charCodeAt(next + 1);\n        if (escape && code !== SLASH$1 && code !== SPACE$1 && code !== NEWLINE$1 && code !== TAB$1 && code !== CR$1 && code !== FEED$1) {\n          next += 1;\n          if (RE_HEX_ESCAPE$1.test(css.charAt(next))) {\n            while (RE_HEX_ESCAPE$1.test(css.charAt(next + 1))) {\n              next += 1;\n            }\n            if (css.charCodeAt(next + 1) === SPACE$1) {\n              next += 1;\n            }\n          }\n        }\n        currentToken = [\"word\", css.slice(pos, next + 1), pos, next];\n        pos = next;\n        break;\n      }\n      default: {\n        if (code === SLASH$1 && css.charCodeAt(pos + 1) === ASTERISK$1) {\n          next = css.indexOf(\"*/\", pos + 2) + 1;\n          if (next === 0) {\n            if (ignore || ignoreUnclosed) {\n              next = css.length;\n            } else {\n              unclosed(\"comment\");\n            }\n          }\n          currentToken = [\"comment\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n        } else {\n          RE_WORD_END$1.lastIndex = pos + 1;\n          RE_WORD_END$1.test(css);\n          if (RE_WORD_END$1.lastIndex === 0) {\n            next = css.length - 1;\n          } else {\n            next = RE_WORD_END$1.lastIndex - 2;\n          }\n          currentToken = [\"word\", css.slice(pos, next + 1), pos, next];\n          buffer.push(currentToken);\n          pos = next;\n        }\n        break;\n      }\n    }\n    pos++;\n    return currentToken;\n  }\n  function back(token) {\n    returned.push(token);\n  }\n  return {\n    back,\n    endOfFile,\n    nextToken,\n    position\n  };\n};\nlet Container$5$1 = container$1;\nlet AtRule$3$1 = class AtRule extends Container$5$1 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"atrule\";\n  }\n  append(...children) {\n    if (!this.proxyOf.nodes) this.nodes = [];\n    return super.append(...children);\n  }\n  prepend(...children) {\n    if (!this.proxyOf.nodes) this.nodes = [];\n    return super.prepend(...children);\n  }\n};\nvar atRule$1 = AtRule$3$1;\nAtRule$3$1.default = AtRule$3$1;\nContainer$5$1.registerAtRule(AtRule$3$1);\nlet Container$4$1 = container$1;\nlet LazyResult$3$1, Processor$2$1;\nlet Root$5$1 = class Root extends Container$4$1 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"root\";\n    if (!this.nodes) this.nodes = [];\n  }\n  normalize(child, sample, type) {\n    let nodes = super.normalize(child);\n    if (sample) {\n      if (type === \"prepend\") {\n        if (this.nodes.length > 1) {\n          sample.raws.before = this.nodes[1].raws.before;\n        } else {\n          delete sample.raws.before;\n        }\n      } else if (this.first !== sample) {\n        for (let node2 of nodes) {\n          node2.raws.before = sample.raws.before;\n        }\n      }\n    }\n    return nodes;\n  }\n  removeChild(child, ignore) {\n    let index2 = this.index(child);\n    if (!ignore && index2 === 0 && this.nodes.length > 1) {\n      this.nodes[1].raws.before = this.nodes[index2].raws.before;\n    }\n    return super.removeChild(child);\n  }\n  toResult(opts = {}) {\n    let lazy = new LazyResult$3$1(new Processor$2$1(), this, opts);\n    return lazy.stringify();\n  }\n};\nRoot$5$1.registerLazyResult = (dependant) => {\n  LazyResult$3$1 = dependant;\n};\nRoot$5$1.registerProcessor = (dependant) => {\n  Processor$2$1 = dependant;\n};\nvar root$1 = Root$5$1;\nRoot$5$1.default = Root$5$1;\nContainer$4$1.registerRoot(Root$5$1);\nlet list$2$1 = {\n  comma(string) {\n    return list$2$1.split(string, [\",\"], true);\n  },\n  space(string) {\n    let spaces = [\" \", \"\\n\", \"\t\"];\n    return list$2$1.split(string, spaces);\n  },\n  split(string, separators, last) {\n    let array = [];\n    let current = \"\";\n    let split = false;\n    let func = 0;\n    let inQuote = false;\n    let prevQuote = \"\";\n    let escape = false;\n    for (let letter of string) {\n      if (escape) {\n        escape = false;\n      } else if (letter === \"\\\\\") {\n        escape = true;\n      } else if (inQuote) {\n        if (letter === prevQuote) {\n          inQuote = false;\n        }\n      } else if (letter === '\"' || letter === \"'\") {\n        inQuote = true;\n        prevQuote = letter;\n      } else if (letter === \"(\") {\n        func += 1;\n      } else if (letter === \")\") {\n        if (func > 0) func -= 1;\n      } else if (func === 0) {\n        if (separators.includes(letter)) split = true;\n      }\n      if (split) {\n        if (current !== \"\") array.push(current.trim());\n        current = \"\";\n        split = false;\n      } else {\n        current += letter;\n      }\n    }\n    if (last || current !== \"\") array.push(current.trim());\n    return array;\n  }\n};\nvar list_1$1 = list$2$1;\nlist$2$1.default = list$2$1;\nlet Container$3$1 = container$1;\nlet list$1$1 = list_1$1;\nlet Rule$3$1 = class Rule extends Container$3$1 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"rule\";\n    if (!this.nodes) this.nodes = [];\n  }\n  get selectors() {\n    return list$1$1.comma(this.selector);\n  }\n  set selectors(values) {\n    let match = this.selector ? this.selector.match(/,\\s*/) : null;\n    let sep2 = match ? match[0] : \",\" + this.raw(\"between\", \"beforeOpen\");\n    this.selector = values.join(sep2);\n  }\n};\nvar rule$1 = Rule$3$1;\nRule$3$1.default = Rule$3$1;\nContainer$3$1.registerRule(Rule$3$1);\nlet Declaration$2$1 = declaration$1;\nlet tokenizer2$1 = tokenize$1;\nlet Comment$2$1 = comment$1;\nlet AtRule$2$1 = atRule$1;\nlet Root$4$1 = root$1;\nlet Rule$2$1 = rule$1;\nconst SAFE_COMMENT_NEIGHBOR$1 = {\n  empty: true,\n  space: true\n};\nfunction findLastWithPosition$1(tokens) {\n  for (let i2 = tokens.length - 1; i2 >= 0; i2--) {\n    let token = tokens[i2];\n    let pos = token[3] || token[2];\n    if (pos) return pos;\n  }\n}\nlet Parser$1$1 = class Parser {\n  constructor(input2) {\n    this.input = input2;\n    this.root = new Root$4$1();\n    this.current = this.root;\n    this.spaces = \"\";\n    this.semicolon = false;\n    this.createTokenizer();\n    this.root.source = { input: input2, start: { column: 1, line: 1, offset: 0 } };\n  }\n  atrule(token) {\n    let node2 = new AtRule$2$1();\n    node2.name = token[1].slice(1);\n    if (node2.name === \"\") {\n      this.unnamedAtrule(node2, token);\n    }\n    this.init(node2, token[2]);\n    let type;\n    let prev;\n    let shift;\n    let last = false;\n    let open = false;\n    let params = [];\n    let brackets = [];\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken();\n      type = token[0];\n      if (type === \"(\" || type === \"[\") {\n        brackets.push(type === \"(\" ? \")\" : \"]\");\n      } else if (type === \"{\" && brackets.length > 0) {\n        brackets.push(\"}\");\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop();\n      }\n      if (brackets.length === 0) {\n        if (type === \";\") {\n          node2.source.end = this.getPosition(token[2]);\n          node2.source.end.offset++;\n          this.semicolon = true;\n          break;\n        } else if (type === \"{\") {\n          open = true;\n          break;\n        } else if (type === \"}\") {\n          if (params.length > 0) {\n            shift = params.length - 1;\n            prev = params[shift];\n            while (prev && prev[0] === \"space\") {\n              prev = params[--shift];\n            }\n            if (prev) {\n              node2.source.end = this.getPosition(prev[3] || prev[2]);\n              node2.source.end.offset++;\n            }\n          }\n          this.end(token);\n          break;\n        } else {\n          params.push(token);\n        }\n      } else {\n        params.push(token);\n      }\n      if (this.tokenizer.endOfFile()) {\n        last = true;\n        break;\n      }\n    }\n    node2.raws.between = this.spacesAndCommentsFromEnd(params);\n    if (params.length) {\n      node2.raws.afterName = this.spacesAndCommentsFromStart(params);\n      this.raw(node2, \"params\", params);\n      if (last) {\n        token = params[params.length - 1];\n        node2.source.end = this.getPosition(token[3] || token[2]);\n        node2.source.end.offset++;\n        this.spaces = node2.raws.between;\n        node2.raws.between = \"\";\n      }\n    } else {\n      node2.raws.afterName = \"\";\n      node2.params = \"\";\n    }\n    if (open) {\n      node2.nodes = [];\n      this.current = node2;\n    }\n  }\n  checkMissedSemicolon(tokens) {\n    let colon = this.colon(tokens);\n    if (colon === false) return;\n    let founded = 0;\n    let token;\n    for (let j = colon - 1; j >= 0; j--) {\n      token = tokens[j];\n      if (token[0] !== \"space\") {\n        founded += 1;\n        if (founded === 2) break;\n      }\n    }\n    throw this.input.error(\n      \"Missed semicolon\",\n      token[0] === \"word\" ? token[3] + 1 : token[2]\n    );\n  }\n  colon(tokens) {\n    let brackets = 0;\n    let token, type, prev;\n    for (let [i2, element] of tokens.entries()) {\n      token = element;\n      type = token[0];\n      if (type === \"(\") {\n        brackets += 1;\n      }\n      if (type === \")\") {\n        brackets -= 1;\n      }\n      if (brackets === 0 && type === \":\") {\n        if (!prev) {\n          this.doubleColon(token);\n        } else if (prev[0] === \"word\" && prev[1] === \"progid\") {\n          continue;\n        } else {\n          return i2;\n        }\n      }\n      prev = token;\n    }\n    return false;\n  }\n  comment(token) {\n    let node2 = new Comment$2$1();\n    this.init(node2, token[2]);\n    node2.source.end = this.getPosition(token[3] || token[2]);\n    node2.source.end.offset++;\n    let text = token[1].slice(2, -2);\n    if (/^\\s*$/.test(text)) {\n      node2.text = \"\";\n      node2.raws.left = text;\n      node2.raws.right = \"\";\n    } else {\n      let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/);\n      node2.text = match[2];\n      node2.raws.left = match[1];\n      node2.raws.right = match[3];\n    }\n  }\n  createTokenizer() {\n    this.tokenizer = tokenizer2$1(this.input);\n  }\n  decl(tokens, customProperty) {\n    let node2 = new Declaration$2$1();\n    this.init(node2, tokens[0][2]);\n    let last = tokens[tokens.length - 1];\n    if (last[0] === \";\") {\n      this.semicolon = true;\n      tokens.pop();\n    }\n    node2.source.end = this.getPosition(\n      last[3] || last[2] || findLastWithPosition$1(tokens)\n    );\n    node2.source.end.offset++;\n    while (tokens[0][0] !== \"word\") {\n      if (tokens.length === 1) this.unknownWord(tokens);\n      node2.raws.before += tokens.shift()[1];\n    }\n    node2.source.start = this.getPosition(tokens[0][2]);\n    node2.prop = \"\";\n    while (tokens.length) {\n      let type = tokens[0][0];\n      if (type === \":\" || type === \"space\" || type === \"comment\") {\n        break;\n      }\n      node2.prop += tokens.shift()[1];\n    }\n    node2.raws.between = \"\";\n    let token;\n    while (tokens.length) {\n      token = tokens.shift();\n      if (token[0] === \":\") {\n        node2.raws.between += token[1];\n        break;\n      } else {\n        if (token[0] === \"word\" && /\\w/.test(token[1])) {\n          this.unknownWord([token]);\n        }\n        node2.raws.between += token[1];\n      }\n    }\n    if (node2.prop[0] === \"_\" || node2.prop[0] === \"*\") {\n      node2.raws.before += node2.prop[0];\n      node2.prop = node2.prop.slice(1);\n    }\n    let firstSpaces = [];\n    let next;\n    while (tokens.length) {\n      next = tokens[0][0];\n      if (next !== \"space\" && next !== \"comment\") break;\n      firstSpaces.push(tokens.shift());\n    }\n    this.precheckMissedSemicolon(tokens);\n    for (let i2 = tokens.length - 1; i2 >= 0; i2--) {\n      token = tokens[i2];\n      if (token[1].toLowerCase() === \"!important\") {\n        node2.important = true;\n        let string = this.stringFrom(tokens, i2);\n        string = this.spacesFromEnd(tokens) + string;\n        if (string !== \" !important\") node2.raws.important = string;\n        break;\n      } else if (token[1].toLowerCase() === \"important\") {\n        let cache = tokens.slice(0);\n        let str = \"\";\n        for (let j = i2; j > 0; j--) {\n          let type = cache[j][0];\n          if (str.trim().indexOf(\"!\") === 0 && type !== \"space\") {\n            break;\n          }\n          str = cache.pop()[1] + str;\n        }\n        if (str.trim().indexOf(\"!\") === 0) {\n          node2.important = true;\n          node2.raws.important = str;\n          tokens = cache;\n        }\n      }\n      if (token[0] !== \"space\" && token[0] !== \"comment\") {\n        break;\n      }\n    }\n    let hasWord = tokens.some((i2) => i2[0] !== \"space\" && i2[0] !== \"comment\");\n    if (hasWord) {\n      node2.raws.between += firstSpaces.map((i2) => i2[1]).join(\"\");\n      firstSpaces = [];\n    }\n    this.raw(node2, \"value\", firstSpaces.concat(tokens), customProperty);\n    if (node2.value.includes(\":\") && !customProperty) {\n      this.checkMissedSemicolon(tokens);\n    }\n  }\n  doubleColon(token) {\n    throw this.input.error(\n      \"Double colon\",\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    );\n  }\n  emptyRule(token) {\n    let node2 = new Rule$2$1();\n    this.init(node2, token[2]);\n    node2.selector = \"\";\n    node2.raws.between = \"\";\n    this.current = node2;\n  }\n  end(token) {\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon;\n    }\n    this.semicolon = false;\n    this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n    this.spaces = \"\";\n    if (this.current.parent) {\n      this.current.source.end = this.getPosition(token[2]);\n      this.current.source.end.offset++;\n      this.current = this.current.parent;\n    } else {\n      this.unexpectedClose(token);\n    }\n  }\n  endFile() {\n    if (this.current.parent) this.unclosedBlock();\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon;\n    }\n    this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n    this.root.source.end = this.getPosition(this.tokenizer.position());\n  }\n  freeSemicolon(token) {\n    this.spaces += token[1];\n    if (this.current.nodes) {\n      let prev = this.current.nodes[this.current.nodes.length - 1];\n      if (prev && prev.type === \"rule\" && !prev.raws.ownSemicolon) {\n        prev.raws.ownSemicolon = this.spaces;\n        this.spaces = \"\";\n      }\n    }\n  }\n  // Helpers\n  getPosition(offset) {\n    let pos = this.input.fromOffset(offset);\n    return {\n      column: pos.col,\n      line: pos.line,\n      offset\n    };\n  }\n  init(node2, offset) {\n    this.current.push(node2);\n    node2.source = {\n      input: this.input,\n      start: this.getPosition(offset)\n    };\n    node2.raws.before = this.spaces;\n    this.spaces = \"\";\n    if (node2.type !== \"comment\") this.semicolon = false;\n  }\n  other(start) {\n    let end = false;\n    let type = null;\n    let colon = false;\n    let bracket = null;\n    let brackets = [];\n    let customProperty = start[1].startsWith(\"--\");\n    let tokens = [];\n    let token = start;\n    while (token) {\n      type = token[0];\n      tokens.push(token);\n      if (type === \"(\" || type === \"[\") {\n        if (!bracket) bracket = token;\n        brackets.push(type === \"(\" ? \")\" : \"]\");\n      } else if (customProperty && colon && type === \"{\") {\n        if (!bracket) bracket = token;\n        brackets.push(\"}\");\n      } else if (brackets.length === 0) {\n        if (type === \";\") {\n          if (colon) {\n            this.decl(tokens, customProperty);\n            return;\n          } else {\n            break;\n          }\n        } else if (type === \"{\") {\n          this.rule(tokens);\n          return;\n        } else if (type === \"}\") {\n          this.tokenizer.back(tokens.pop());\n          end = true;\n          break;\n        } else if (type === \":\") {\n          colon = true;\n        }\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop();\n        if (brackets.length === 0) bracket = null;\n      }\n      token = this.tokenizer.nextToken();\n    }\n    if (this.tokenizer.endOfFile()) end = true;\n    if (brackets.length > 0) this.unclosedBracket(bracket);\n    if (end && colon) {\n      if (!customProperty) {\n        while (tokens.length) {\n          token = tokens[tokens.length - 1][0];\n          if (token !== \"space\" && token !== \"comment\") break;\n          this.tokenizer.back(tokens.pop());\n        }\n      }\n      this.decl(tokens, customProperty);\n    } else {\n      this.unknownWord(tokens);\n    }\n  }\n  parse() {\n    let token;\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken();\n      switch (token[0]) {\n        case \"space\":\n          this.spaces += token[1];\n          break;\n        case \";\":\n          this.freeSemicolon(token);\n          break;\n        case \"}\":\n          this.end(token);\n          break;\n        case \"comment\":\n          this.comment(token);\n          break;\n        case \"at-word\":\n          this.atrule(token);\n          break;\n        case \"{\":\n          this.emptyRule(token);\n          break;\n        default:\n          this.other(token);\n          break;\n      }\n    }\n    this.endFile();\n  }\n  precheckMissedSemicolon() {\n  }\n  raw(node2, prop, tokens, customProperty) {\n    let token, type;\n    let length = tokens.length;\n    let value = \"\";\n    let clean = true;\n    let next, prev;\n    for (let i2 = 0; i2 < length; i2 += 1) {\n      token = tokens[i2];\n      type = token[0];\n      if (type === \"space\" && i2 === length - 1 && !customProperty) {\n        clean = false;\n      } else if (type === \"comment\") {\n        prev = tokens[i2 - 1] ? tokens[i2 - 1][0] : \"empty\";\n        next = tokens[i2 + 1] ? tokens[i2 + 1][0] : \"empty\";\n        if (!SAFE_COMMENT_NEIGHBOR$1[prev] && !SAFE_COMMENT_NEIGHBOR$1[next]) {\n          if (value.slice(-1) === \",\") {\n            clean = false;\n          } else {\n            value += token[1];\n          }\n        } else {\n          clean = false;\n        }\n      } else {\n        value += token[1];\n      }\n    }\n    if (!clean) {\n      let raw = tokens.reduce((all, i2) => all + i2[1], \"\");\n      node2.raws[prop] = { raw, value };\n    }\n    node2[prop] = value;\n  }\n  rule(tokens) {\n    tokens.pop();\n    let node2 = new Rule$2$1();\n    this.init(node2, tokens[0][2]);\n    node2.raws.between = this.spacesAndCommentsFromEnd(tokens);\n    this.raw(node2, \"selector\", tokens);\n    this.current = node2;\n  }\n  spacesAndCommentsFromEnd(tokens) {\n    let lastTokenType;\n    let spaces = \"\";\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0];\n      if (lastTokenType !== \"space\" && lastTokenType !== \"comment\") break;\n      spaces = tokens.pop()[1] + spaces;\n    }\n    return spaces;\n  }\n  // Errors\n  spacesAndCommentsFromStart(tokens) {\n    let next;\n    let spaces = \"\";\n    while (tokens.length) {\n      next = tokens[0][0];\n      if (next !== \"space\" && next !== \"comment\") break;\n      spaces += tokens.shift()[1];\n    }\n    return spaces;\n  }\n  spacesFromEnd(tokens) {\n    let lastTokenType;\n    let spaces = \"\";\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0];\n      if (lastTokenType !== \"space\") break;\n      spaces = tokens.pop()[1] + spaces;\n    }\n    return spaces;\n  }\n  stringFrom(tokens, from) {\n    let result2 = \"\";\n    for (let i2 = from; i2 < tokens.length; i2++) {\n      result2 += tokens[i2][1];\n    }\n    tokens.splice(from, tokens.length - from);\n    return result2;\n  }\n  unclosedBlock() {\n    let pos = this.current.source.start;\n    throw this.input.error(\"Unclosed block\", pos.line, pos.column);\n  }\n  unclosedBracket(bracket) {\n    throw this.input.error(\n      \"Unclosed bracket\",\n      { offset: bracket[2] },\n      { offset: bracket[2] + 1 }\n    );\n  }\n  unexpectedClose(token) {\n    throw this.input.error(\n      \"Unexpected }\",\n      { offset: token[2] },\n      { offset: token[2] + 1 }\n    );\n  }\n  unknownWord(tokens) {\n    throw this.input.error(\n      \"Unknown word\",\n      { offset: tokens[0][2] },\n      { offset: tokens[0][2] + tokens[0][1].length }\n    );\n  }\n  unnamedAtrule(node2, token) {\n    throw this.input.error(\n      \"At-rule without name\",\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    );\n  }\n};\nvar parser$1 = Parser$1$1;\nlet Container$2$1 = container$1;\nlet Parser2$1 = parser$1;\nlet Input$2$1 = input$1;\nfunction parse$3$1(css, opts) {\n  let input2 = new Input$2$1(css, opts);\n  let parser2 = new Parser2$1(input2);\n  try {\n    parser2.parse();\n  } catch (e2) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (e2.name === \"CssSyntaxError\" && opts && opts.from) {\n        if (/\\.scss$/i.test(opts.from)) {\n          e2.message += \"\\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser\";\n        } else if (/\\.sass/i.test(opts.from)) {\n          e2.message += \"\\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser\";\n        } else if (/\\.less$/i.test(opts.from)) {\n          e2.message += \"\\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser\";\n        }\n      }\n    }\n    throw e2;\n  }\n  return parser2.root;\n}\nvar parse_1$1 = parse$3$1;\nparse$3$1.default = parse$3$1;\nContainer$2$1.registerParse(parse$3$1);\nlet { isClean: isClean$3, my: my$3 } = symbols$1;\nlet MapGenerator$1$1 = mapGenerator$1;\nlet stringify$2$1 = stringify_1$1;\nlet Container$1$1 = container$1;\nlet Document$2$1 = document$1$1;\nlet warnOnce$1$1 = warnOnce$2$1;\nlet Result$2$1 = result$1;\nlet parse$2$1 = parse_1$1;\nlet Root$3$1 = root$1;\nconst TYPE_TO_CLASS_NAME$1 = {\n  atrule: \"AtRule\",\n  comment: \"Comment\",\n  decl: \"Declaration\",\n  document: \"Document\",\n  root: \"Root\",\n  rule: \"Rule\"\n};\nconst PLUGIN_PROPS$1 = {\n  AtRule: true,\n  AtRuleExit: true,\n  Comment: true,\n  CommentExit: true,\n  Declaration: true,\n  DeclarationExit: true,\n  Document: true,\n  DocumentExit: true,\n  Once: true,\n  OnceExit: true,\n  postcssPlugin: true,\n  prepare: true,\n  Root: true,\n  RootExit: true,\n  Rule: true,\n  RuleExit: true\n};\nconst NOT_VISITORS$1 = {\n  Once: true,\n  postcssPlugin: true,\n  prepare: true\n};\nconst CHILDREN$1 = 0;\nfunction isPromise$1(obj) {\n  return typeof obj === \"object\" && typeof obj.then === \"function\";\n}\nfunction getEvents$1(node2) {\n  let key = false;\n  let type = TYPE_TO_CLASS_NAME$1[node2.type];\n  if (node2.type === \"decl\") {\n    key = node2.prop.toLowerCase();\n  } else if (node2.type === \"atrule\") {\n    key = node2.name.toLowerCase();\n  }\n  if (key && node2.append) {\n    return [\n      type,\n      type + \"-\" + key,\n      CHILDREN$1,\n      type + \"Exit\",\n      type + \"Exit-\" + key\n    ];\n  } else if (key) {\n    return [type, type + \"-\" + key, type + \"Exit\", type + \"Exit-\" + key];\n  } else if (node2.append) {\n    return [type, CHILDREN$1, type + \"Exit\"];\n  } else {\n    return [type, type + \"Exit\"];\n  }\n}\nfunction toStack$1(node2) {\n  let events;\n  if (node2.type === \"document\") {\n    events = [\"Document\", CHILDREN$1, \"DocumentExit\"];\n  } else if (node2.type === \"root\") {\n    events = [\"Root\", CHILDREN$1, \"RootExit\"];\n  } else {\n    events = getEvents$1(node2);\n  }\n  return {\n    eventIndex: 0,\n    events,\n    iterator: 0,\n    node: node2,\n    visitorIndex: 0,\n    visitors: []\n  };\n}\nfunction cleanMarks$1(node2) {\n  node2[isClean$3] = false;\n  if (node2.nodes) node2.nodes.forEach((i2) => cleanMarks$1(i2));\n  return node2;\n}\nlet postcss$2$1 = {};\nlet LazyResult$2$1 = class LazyResult {\n  constructor(processor2, css, opts) {\n    this.stringified = false;\n    this.processed = false;\n    let root2;\n    if (typeof css === \"object\" && css !== null && (css.type === \"root\" || css.type === \"document\")) {\n      root2 = cleanMarks$1(css);\n    } else if (css instanceof LazyResult || css instanceof Result$2$1) {\n      root2 = cleanMarks$1(css.root);\n      if (css.map) {\n        if (typeof opts.map === \"undefined\") opts.map = {};\n        if (!opts.map.inline) opts.map.inline = false;\n        opts.map.prev = css.map;\n      }\n    } else {\n      let parser2 = parse$2$1;\n      if (opts.syntax) parser2 = opts.syntax.parse;\n      if (opts.parser) parser2 = opts.parser;\n      if (parser2.parse) parser2 = parser2.parse;\n      try {\n        root2 = parser2(css, opts);\n      } catch (error) {\n        this.processed = true;\n        this.error = error;\n      }\n      if (root2 && !root2[my$3]) {\n        Container$1$1.rebuild(root2);\n      }\n    }\n    this.result = new Result$2$1(processor2, root2, opts);\n    this.helpers = { ...postcss$2$1, postcss: postcss$2$1, result: this.result };\n    this.plugins = this.processor.plugins.map((plugin22) => {\n      if (typeof plugin22 === \"object\" && plugin22.prepare) {\n        return { ...plugin22, ...plugin22.prepare(this.result) };\n      } else {\n        return plugin22;\n      }\n    });\n  }\n  async() {\n    if (this.error) return Promise.reject(this.error);\n    if (this.processed) return Promise.resolve(this.result);\n    if (!this.processing) {\n      this.processing = this.runAsync();\n    }\n    return this.processing;\n  }\n  catch(onRejected) {\n    return this.async().catch(onRejected);\n  }\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally);\n  }\n  getAsyncError() {\n    throw new Error(\"Use process(css).then(cb) to work with async plugins\");\n  }\n  handleError(error, node2) {\n    let plugin22 = this.result.lastPlugin;\n    try {\n      if (node2) node2.addToError(error);\n      this.error = error;\n      if (error.name === \"CssSyntaxError\" && !error.plugin) {\n        error.plugin = plugin22.postcssPlugin;\n        error.setMessage();\n      } else if (plugin22.postcssVersion) {\n        if (process.env.NODE_ENV !== \"production\") {\n          let pluginName = plugin22.postcssPlugin;\n          let pluginVer = plugin22.postcssVersion;\n          let runtimeVer = this.result.processor.version;\n          let a2 = pluginVer.split(\".\");\n          let b = runtimeVer.split(\".\");\n          if (a2[0] !== b[0] || parseInt(a2[1]) > parseInt(b[1])) {\n            console.error(\n              \"Unknown error from PostCSS plugin. Your current PostCSS version is \" + runtimeVer + \", but \" + pluginName + \" uses \" + pluginVer + \". Perhaps this is the source of the error below.\"\n            );\n          }\n        }\n      }\n    } catch (err) {\n      if (console && console.error) console.error(err);\n    }\n    return error;\n  }\n  prepareVisitors() {\n    this.listeners = {};\n    let add = (plugin22, type, cb) => {\n      if (!this.listeners[type]) this.listeners[type] = [];\n      this.listeners[type].push([plugin22, cb]);\n    };\n    for (let plugin22 of this.plugins) {\n      if (typeof plugin22 === \"object\") {\n        for (let event in plugin22) {\n          if (!PLUGIN_PROPS$1[event] && /^[A-Z]/.test(event)) {\n            throw new Error(\n              `Unknown event ${event} in ${plugin22.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`\n            );\n          }\n          if (!NOT_VISITORS$1[event]) {\n            if (typeof plugin22[event] === \"object\") {\n              for (let filter in plugin22[event]) {\n                if (filter === \"*\") {\n                  add(plugin22, event, plugin22[event][filter]);\n                } else {\n                  add(\n                    plugin22,\n                    event + \"-\" + filter.toLowerCase(),\n                    plugin22[event][filter]\n                  );\n                }\n              }\n            } else if (typeof plugin22[event] === \"function\") {\n              add(plugin22, event, plugin22[event]);\n            }\n          }\n        }\n      }\n    }\n    this.hasListener = Object.keys(this.listeners).length > 0;\n  }\n  async runAsync() {\n    this.plugin = 0;\n    for (let i2 = 0; i2 < this.plugins.length; i2++) {\n      let plugin22 = this.plugins[i2];\n      let promise = this.runOnRoot(plugin22);\n      if (isPromise$1(promise)) {\n        try {\n          await promise;\n        } catch (error) {\n          throw this.handleError(error);\n        }\n      }\n    }\n    this.prepareVisitors();\n    if (this.hasListener) {\n      let root2 = this.result.root;\n      while (!root2[isClean$3]) {\n        root2[isClean$3] = true;\n        let stack = [toStack$1(root2)];\n        while (stack.length > 0) {\n          let promise = this.visitTick(stack);\n          if (isPromise$1(promise)) {\n            try {\n              await promise;\n            } catch (e2) {\n              let node2 = stack[stack.length - 1].node;\n              throw this.handleError(e2, node2);\n            }\n          }\n        }\n      }\n      if (this.listeners.OnceExit) {\n        for (let [plugin22, visitor] of this.listeners.OnceExit) {\n          this.result.lastPlugin = plugin22;\n          try {\n            if (root2.type === \"document\") {\n              let roots = root2.nodes.map(\n                (subRoot) => visitor(subRoot, this.helpers)\n              );\n              await Promise.all(roots);\n            } else {\n              await visitor(root2, this.helpers);\n            }\n          } catch (e2) {\n            throw this.handleError(e2);\n          }\n        }\n      }\n    }\n    this.processed = true;\n    return this.stringify();\n  }\n  runOnRoot(plugin22) {\n    this.result.lastPlugin = plugin22;\n    try {\n      if (typeof plugin22 === \"object\" && plugin22.Once) {\n        if (this.result.root.type === \"document\") {\n          let roots = this.result.root.nodes.map(\n            (root2) => plugin22.Once(root2, this.helpers)\n          );\n          if (isPromise$1(roots[0])) {\n            return Promise.all(roots);\n          }\n          return roots;\n        }\n        return plugin22.Once(this.result.root, this.helpers);\n      } else if (typeof plugin22 === \"function\") {\n        return plugin22(this.result.root, this.result);\n      }\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n  stringify() {\n    if (this.error) throw this.error;\n    if (this.stringified) return this.result;\n    this.stringified = true;\n    this.sync();\n    let opts = this.result.opts;\n    let str = stringify$2$1;\n    if (opts.syntax) str = opts.syntax.stringify;\n    if (opts.stringifier) str = opts.stringifier;\n    if (str.stringify) str = str.stringify;\n    let map = new MapGenerator$1$1(str, this.result.root, this.result.opts);\n    let data = map.generate();\n    this.result.css = data[0];\n    this.result.map = data[1];\n    return this.result;\n  }\n  sync() {\n    if (this.error) throw this.error;\n    if (this.processed) return this.result;\n    this.processed = true;\n    if (this.processing) {\n      throw this.getAsyncError();\n    }\n    for (let plugin22 of this.plugins) {\n      let promise = this.runOnRoot(plugin22);\n      if (isPromise$1(promise)) {\n        throw this.getAsyncError();\n      }\n    }\n    this.prepareVisitors();\n    if (this.hasListener) {\n      let root2 = this.result.root;\n      while (!root2[isClean$3]) {\n        root2[isClean$3] = true;\n        this.walkSync(root2);\n      }\n      if (this.listeners.OnceExit) {\n        if (root2.type === \"document\") {\n          for (let subRoot of root2.nodes) {\n            this.visitSync(this.listeners.OnceExit, subRoot);\n          }\n        } else {\n          this.visitSync(this.listeners.OnceExit, root2);\n        }\n      }\n    }\n    return this.result;\n  }\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!(\"from\" in this.opts)) {\n        warnOnce$1$1(\n          \"Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.\"\n        );\n      }\n    }\n    return this.async().then(onFulfilled, onRejected);\n  }\n  toString() {\n    return this.css;\n  }\n  visitSync(visitors, node2) {\n    for (let [plugin22, visitor] of visitors) {\n      this.result.lastPlugin = plugin22;\n      let promise;\n      try {\n        promise = visitor(node2, this.helpers);\n      } catch (e2) {\n        throw this.handleError(e2, node2.proxyOf);\n      }\n      if (node2.type !== \"root\" && node2.type !== \"document\" && !node2.parent) {\n        return true;\n      }\n      if (isPromise$1(promise)) {\n        throw this.getAsyncError();\n      }\n    }\n  }\n  visitTick(stack) {\n    let visit2 = stack[stack.length - 1];\n    let { node: node2, visitors } = visit2;\n    if (node2.type !== \"root\" && node2.type !== \"document\" && !node2.parent) {\n      stack.pop();\n      return;\n    }\n    if (visitors.length > 0 && visit2.visitorIndex < visitors.length) {\n      let [plugin22, visitor] = visitors[visit2.visitorIndex];\n      visit2.visitorIndex += 1;\n      if (visit2.visitorIndex === visitors.length) {\n        visit2.visitors = [];\n        visit2.visitorIndex = 0;\n      }\n      this.result.lastPlugin = plugin22;\n      try {\n        return visitor(node2.toProxy(), this.helpers);\n      } catch (e2) {\n        throw this.handleError(e2, node2);\n      }\n    }\n    if (visit2.iterator !== 0) {\n      let iterator = visit2.iterator;\n      let child;\n      while (child = node2.nodes[node2.indexes[iterator]]) {\n        node2.indexes[iterator] += 1;\n        if (!child[isClean$3]) {\n          child[isClean$3] = true;\n          stack.push(toStack$1(child));\n          return;\n        }\n      }\n      visit2.iterator = 0;\n      delete node2.indexes[iterator];\n    }\n    let events = visit2.events;\n    while (visit2.eventIndex < events.length) {\n      let event = events[visit2.eventIndex];\n      visit2.eventIndex += 1;\n      if (event === CHILDREN$1) {\n        if (node2.nodes && node2.nodes.length) {\n          node2[isClean$3] = true;\n          visit2.iterator = node2.getIterator();\n        }\n        return;\n      } else if (this.listeners[event]) {\n        visit2.visitors = this.listeners[event];\n        return;\n      }\n    }\n    stack.pop();\n  }\n  walkSync(node2) {\n    node2[isClean$3] = true;\n    let events = getEvents$1(node2);\n    for (let event of events) {\n      if (event === CHILDREN$1) {\n        if (node2.nodes) {\n          node2.each((child) => {\n            if (!child[isClean$3]) this.walkSync(child);\n          });\n        }\n      } else {\n        let visitors = this.listeners[event];\n        if (visitors) {\n          if (this.visitSync(visitors, node2.toProxy())) return;\n        }\n      }\n    }\n  }\n  warnings() {\n    return this.sync().warnings();\n  }\n  get content() {\n    return this.stringify().content;\n  }\n  get css() {\n    return this.stringify().css;\n  }\n  get map() {\n    return this.stringify().map;\n  }\n  get messages() {\n    return this.sync().messages;\n  }\n  get opts() {\n    return this.result.opts;\n  }\n  get processor() {\n    return this.result.processor;\n  }\n  get root() {\n    return this.sync().root;\n  }\n  get [Symbol.toStringTag]() {\n    return \"LazyResult\";\n  }\n};\nLazyResult$2$1.registerPostcss = (dependant) => {\n  postcss$2$1 = dependant;\n};\nvar lazyResult$1 = LazyResult$2$1;\nLazyResult$2$1.default = LazyResult$2$1;\nRoot$3$1.registerLazyResult(LazyResult$2$1);\nDocument$2$1.registerLazyResult(LazyResult$2$1);\nlet MapGenerator2$1 = mapGenerator$1;\nlet stringify$1$1 = stringify_1$1;\nlet warnOnce2$1 = warnOnce$2$1;\nlet parse$1$1 = parse_1$1;\nconst Result$1$1 = result$1;\nlet NoWorkResult$1$1 = class NoWorkResult {\n  constructor(processor2, css, opts) {\n    css = css.toString();\n    this.stringified = false;\n    this._processor = processor2;\n    this._css = css;\n    this._opts = opts;\n    this._map = void 0;\n    let root2;\n    let str = stringify$1$1;\n    this.result = new Result$1$1(this._processor, root2, this._opts);\n    this.result.css = css;\n    let self = this;\n    Object.defineProperty(this.result, \"root\", {\n      get() {\n        return self.root;\n      }\n    });\n    let map = new MapGenerator2$1(str, root2, this._opts, css);\n    if (map.isMap()) {\n      let [generatedCSS, generatedMap] = map.generate();\n      if (generatedCSS) {\n        this.result.css = generatedCSS;\n      }\n      if (generatedMap) {\n        this.result.map = generatedMap;\n      }\n    } else {\n      map.clearAnnotation();\n      this.result.css = map.css;\n    }\n  }\n  async() {\n    if (this.error) return Promise.reject(this.error);\n    return Promise.resolve(this.result);\n  }\n  catch(onRejected) {\n    return this.async().catch(onRejected);\n  }\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally);\n  }\n  sync() {\n    if (this.error) throw this.error;\n    return this.result;\n  }\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!(\"from\" in this._opts)) {\n        warnOnce2$1(\n          \"Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.\"\n        );\n      }\n    }\n    return this.async().then(onFulfilled, onRejected);\n  }\n  toString() {\n    return this._css;\n  }\n  warnings() {\n    return [];\n  }\n  get content() {\n    return this.result.css;\n  }\n  get css() {\n    return this.result.css;\n  }\n  get map() {\n    return this.result.map;\n  }\n  get messages() {\n    return [];\n  }\n  get opts() {\n    return this.result.opts;\n  }\n  get processor() {\n    return this.result.processor;\n  }\n  get root() {\n    if (this._root) {\n      return this._root;\n    }\n    let root2;\n    let parser2 = parse$1$1;\n    try {\n      root2 = parser2(this._css, this._opts);\n    } catch (error) {\n      this.error = error;\n    }\n    if (this.error) {\n      throw this.error;\n    } else {\n      this._root = root2;\n      return root2;\n    }\n  }\n  get [Symbol.toStringTag]() {\n    return \"NoWorkResult\";\n  }\n};\nvar noWorkResult$1 = NoWorkResult$1$1;\nNoWorkResult$1$1.default = NoWorkResult$1$1;\nlet NoWorkResult2$1 = noWorkResult$1;\nlet LazyResult$1$1 = lazyResult$1;\nlet Document$1$1 = document$1$1;\nlet Root$2$1 = root$1;\nlet Processor$1$1 = class Processor {\n  constructor(plugins = []) {\n    this.version = \"8.4.38\";\n    this.plugins = this.normalize(plugins);\n  }\n  normalize(plugins) {\n    let normalized = [];\n    for (let i2 of plugins) {\n      if (i2.postcss === true) {\n        i2 = i2();\n      } else if (i2.postcss) {\n        i2 = i2.postcss;\n      }\n      if (typeof i2 === \"object\" && Array.isArray(i2.plugins)) {\n        normalized = normalized.concat(i2.plugins);\n      } else if (typeof i2 === \"object\" && i2.postcssPlugin) {\n        normalized.push(i2);\n      } else if (typeof i2 === \"function\") {\n        normalized.push(i2);\n      } else if (typeof i2 === \"object\" && (i2.parse || i2.stringify)) {\n        if (process.env.NODE_ENV !== \"production\") {\n          throw new Error(\n            \"PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.\"\n          );\n        }\n      } else {\n        throw new Error(i2 + \" is not a PostCSS plugin\");\n      }\n    }\n    return normalized;\n  }\n  process(css, opts = {}) {\n    if (!this.plugins.length && !opts.parser && !opts.stringifier && !opts.syntax) {\n      return new NoWorkResult2$1(this, css, opts);\n    } else {\n      return new LazyResult$1$1(this, css, opts);\n    }\n  }\n  use(plugin22) {\n    this.plugins = this.plugins.concat(this.normalize([plugin22]));\n    return this;\n  }\n};\nvar processor$1 = Processor$1$1;\nProcessor$1$1.default = Processor$1$1;\nRoot$2$1.registerProcessor(Processor$1$1);\nDocument$1$1.registerProcessor(Processor$1$1);\nlet Declaration$1$1 = declaration$1;\nlet PreviousMap2$1 = previousMap$1;\nlet Comment$1$1 = comment$1;\nlet AtRule$1$1 = atRule$1;\nlet Input$1$1 = input$1;\nlet Root$1$1 = root$1;\nlet Rule$1$1 = rule$1;\nfunction fromJSON$1$1(json, inputs) {\n  if (Array.isArray(json)) return json.map((n2) => fromJSON$1$1(n2));\n  let { inputs: ownInputs, ...defaults } = json;\n  if (ownInputs) {\n    inputs = [];\n    for (let input2 of ownInputs) {\n      let inputHydrated = { ...input2, __proto__: Input$1$1.prototype };\n      if (inputHydrated.map) {\n        inputHydrated.map = {\n          ...inputHydrated.map,\n          __proto__: PreviousMap2$1.prototype\n        };\n      }\n      inputs.push(inputHydrated);\n    }\n  }\n  if (defaults.nodes) {\n    defaults.nodes = json.nodes.map((n2) => fromJSON$1$1(n2, inputs));\n  }\n  if (defaults.source) {\n    let { inputId, ...source } = defaults.source;\n    defaults.source = source;\n    if (inputId != null) {\n      defaults.source.input = inputs[inputId];\n    }\n  }\n  if (defaults.type === \"root\") {\n    return new Root$1$1(defaults);\n  } else if (defaults.type === \"decl\") {\n    return new Declaration$1$1(defaults);\n  } else if (defaults.type === \"rule\") {\n    return new Rule$1$1(defaults);\n  } else if (defaults.type === \"comment\") {\n    return new Comment$1$1(defaults);\n  } else if (defaults.type === \"atrule\") {\n    return new AtRule$1$1(defaults);\n  } else {\n    throw new Error(\"Unknown node type: \" + json.type);\n  }\n}\nvar fromJSON_1$1 = fromJSON$1$1;\nfromJSON$1$1.default = fromJSON$1$1;\nlet CssSyntaxError2$1 = cssSyntaxError$1;\nlet Declaration2$1 = declaration$1;\nlet LazyResult2$1 = lazyResult$1;\nlet Container2$1 = container$1;\nlet Processor2$1 = processor$1;\nlet stringify$5 = stringify_1$1;\nlet fromJSON$2 = fromJSON_1$1;\nlet Document22 = document$1$1;\nlet Warning2$1 = warning$1;\nlet Comment2$1 = comment$1;\nlet AtRule2$1 = atRule$1;\nlet Result2$1 = result$1;\nlet Input2$1 = input$1;\nlet parse$5 = parse_1$1;\nlet list$3 = list_1$1;\nlet Rule2$1 = rule$1;\nlet Root2$1 = root$1;\nlet Node2$1 = node$1;\nfunction postcss$3(...plugins) {\n  if (plugins.length === 1 && Array.isArray(plugins[0])) {\n    plugins = plugins[0];\n  }\n  return new Processor2$1(plugins);\n}\npostcss$3.plugin = function plugin(name, initializer) {\n  let warningPrinted = false;\n  function creator(...args) {\n    if (console && console.warn && !warningPrinted) {\n      warningPrinted = true;\n      console.warn(\n        name + \": postcss.plugin was deprecated. Migration guide:\\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration\"\n      );\n      if (process.env.LANG && process.env.LANG.startsWith(\"cn\")) {\n        console.warn(\n          name + \": 里面 postcss.plugin 被弃用. 迁移指南:\\nhttps://www.w3ctech.com/topic/2226\"\n        );\n      }\n    }\n    let transformer = initializer(...args);\n    transformer.postcssPlugin = name;\n    transformer.postcssVersion = new Processor2$1().version;\n    return transformer;\n  }\n  let cache;\n  Object.defineProperty(creator, \"postcss\", {\n    get() {\n      if (!cache) cache = creator();\n      return cache;\n    }\n  });\n  creator.process = function(css, processOpts, pluginOpts) {\n    return postcss$3([creator(pluginOpts)]).process(css, processOpts);\n  };\n  return creator;\n};\npostcss$3.stringify = stringify$5;\npostcss$3.parse = parse$5;\npostcss$3.fromJSON = fromJSON$2;\npostcss$3.list = list$3;\npostcss$3.comment = (defaults) => new Comment2$1(defaults);\npostcss$3.atRule = (defaults) => new AtRule2$1(defaults);\npostcss$3.decl = (defaults) => new Declaration2$1(defaults);\npostcss$3.rule = (defaults) => new Rule2$1(defaults);\npostcss$3.root = (defaults) => new Root2$1(defaults);\npostcss$3.document = (defaults) => new Document22(defaults);\npostcss$3.CssSyntaxError = CssSyntaxError2$1;\npostcss$3.Declaration = Declaration2$1;\npostcss$3.Container = Container2$1;\npostcss$3.Processor = Processor2$1;\npostcss$3.Document = Document22;\npostcss$3.Comment = Comment2$1;\npostcss$3.Warning = Warning2$1;\npostcss$3.AtRule = AtRule2$1;\npostcss$3.Result = Result2$1;\npostcss$3.Input = Input2$1;\npostcss$3.Rule = Rule2$1;\npostcss$3.Root = Root2$1;\npostcss$3.Node = Node2$1;\nLazyResult2$1.registerPostcss(postcss$3);\nvar postcss_1$1 = postcss$3;\npostcss$3.default = postcss$3;\nconst postcss$1$1 = /* @__PURE__ */ getDefaultExportFromCjs$1(postcss_1$1);\npostcss$1$1.stringify;\npostcss$1$1.fromJSON;\npostcss$1$1.plugin;\npostcss$1$1.parse;\npostcss$1$1.list;\npostcss$1$1.document;\npostcss$1$1.comment;\npostcss$1$1.atRule;\npostcss$1$1.rule;\npostcss$1$1.decl;\npostcss$1$1.root;\npostcss$1$1.CssSyntaxError;\npostcss$1$1.Declaration;\npostcss$1$1.Container;\npostcss$1$1.Processor;\npostcss$1$1.Document;\npostcss$1$1.Comment;\npostcss$1$1.Warning;\npostcss$1$1.AtRule;\npostcss$1$1.Result;\npostcss$1$1.Input;\npostcss$1$1.Rule;\npostcss$1$1.Root;\npostcss$1$1.Node;\nvar __defProp22 = Object.defineProperty;\nvar __defNormalProp22 = (obj, key, value) => key in obj ? __defProp22(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField22 = (obj, key, value) => __defNormalProp22(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nfunction getDefaultExportFromCjs(x2) {\n  return x2 && x2.__esModule && Object.prototype.hasOwnProperty.call(x2, \"default\") ? x2[\"default\"] : x2;\n}\nfunction getAugmentedNamespace(n2) {\n  if (n2.__esModule) return n2;\n  var f2 = n2.default;\n  if (typeof f2 == \"function\") {\n    var a2 = function a22() {\n      if (this instanceof a22) {\n        return Reflect.construct(f2, arguments, this.constructor);\n      }\n      return f2.apply(this, arguments);\n    };\n    a2.prototype = f2.prototype;\n  } else a2 = {};\n  Object.defineProperty(a2, \"__esModule\", { value: true });\n  Object.keys(n2).forEach(function(k) {\n    var d = Object.getOwnPropertyDescriptor(n2, k);\n    Object.defineProperty(a2, k, d.get ? d : {\n      enumerable: true,\n      get: function() {\n        return n2[k];\n      }\n    });\n  });\n  return a2;\n}\nvar picocolors_browser = { exports: {} };\nvar x = String;\nvar create = function() {\n  return { isColorSupported: false, reset: x, bold: x, dim: x, italic: x, underline: x, inverse: x, hidden: x, strikethrough: x, black: x, red: x, green: x, yellow: x, blue: x, magenta: x, cyan: x, white: x, gray: x, bgBlack: x, bgRed: x, bgGreen: x, bgYellow: x, bgBlue: x, bgMagenta: x, bgCyan: x, bgWhite: x };\n};\npicocolors_browser.exports = create();\npicocolors_browser.exports.createColors = create;\nvar picocolors_browserExports = picocolors_browser.exports;\nconst __viteBrowserExternal = {};\nconst __viteBrowserExternal$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  default: __viteBrowserExternal\n}, Symbol.toStringTag, { value: \"Module\" }));\nconst require$$2 = /* @__PURE__ */ getAugmentedNamespace(__viteBrowserExternal$1);\nlet pico = picocolors_browserExports;\nlet terminalHighlight$1 = require$$2;\nlet CssSyntaxError$3 = class CssSyntaxError2 extends Error {\n  constructor(message, line, column, source, file, plugin22) {\n    super(message);\n    this.name = \"CssSyntaxError\";\n    this.reason = message;\n    if (file) {\n      this.file = file;\n    }\n    if (source) {\n      this.source = source;\n    }\n    if (plugin22) {\n      this.plugin = plugin22;\n    }\n    if (typeof line !== \"undefined\" && typeof column !== \"undefined\") {\n      if (typeof line === \"number\") {\n        this.line = line;\n        this.column = column;\n      } else {\n        this.line = line.line;\n        this.column = line.column;\n        this.endLine = column.line;\n        this.endColumn = column.column;\n      }\n    }\n    this.setMessage();\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, CssSyntaxError2);\n    }\n  }\n  setMessage() {\n    this.message = this.plugin ? this.plugin + \": \" : \"\";\n    this.message += this.file ? this.file : \"<css input>\";\n    if (typeof this.line !== \"undefined\") {\n      this.message += \":\" + this.line + \":\" + this.column;\n    }\n    this.message += \": \" + this.reason;\n  }\n  showSourceCode(color) {\n    if (!this.source) return \"\";\n    let css = this.source;\n    if (color == null) color = pico.isColorSupported;\n    if (terminalHighlight$1) {\n      if (color) css = terminalHighlight$1(css);\n    }\n    let lines = css.split(/\\r?\\n/);\n    let start = Math.max(this.line - 3, 0);\n    let end = Math.min(this.line + 2, lines.length);\n    let maxWidth = String(end).length;\n    let mark, aside;\n    if (color) {\n      let { bold, gray, red } = pico.createColors(true);\n      mark = (text) => bold(red(text));\n      aside = (text) => gray(text);\n    } else {\n      mark = aside = (str) => str;\n    }\n    return lines.slice(start, end).map((line, index2) => {\n      let number = start + 1 + index2;\n      let gutter = \" \" + (\" \" + number).slice(-maxWidth) + \" | \";\n      if (number === this.line) {\n        let spacing = aside(gutter.replace(/\\d/g, \" \")) + line.slice(0, this.column - 1).replace(/[^\\t]/g, \" \");\n        return mark(\">\") + aside(gutter) + line + \"\\n \" + spacing + mark(\"^\");\n      }\n      return \" \" + aside(gutter) + line;\n    }).join(\"\\n\");\n  }\n  toString() {\n    let code = this.showSourceCode();\n    if (code) {\n      code = \"\\n\\n\" + code + \"\\n\";\n    }\n    return this.name + \": \" + this.message + code;\n  }\n};\nvar cssSyntaxError = CssSyntaxError$3;\nCssSyntaxError$3.default = CssSyntaxError$3;\nvar symbols = {};\nsymbols.isClean = Symbol(\"isClean\");\nsymbols.my = Symbol(\"my\");\nconst DEFAULT_RAW = {\n  after: \"\\n\",\n  beforeClose: \"\\n\",\n  beforeComment: \"\\n\",\n  beforeDecl: \"\\n\",\n  beforeOpen: \" \",\n  beforeRule: \"\\n\",\n  colon: \": \",\n  commentLeft: \" \",\n  commentRight: \" \",\n  emptyBody: \"\",\n  indent: \"    \",\n  semicolon: false\n};\nfunction capitalize(str) {\n  return str[0].toUpperCase() + str.slice(1);\n}\nlet Stringifier$2 = class Stringifier2 {\n  constructor(builder) {\n    this.builder = builder;\n  }\n  atrule(node2, semicolon) {\n    let name = \"@\" + node2.name;\n    let params = node2.params ? this.rawValue(node2, \"params\") : \"\";\n    if (typeof node2.raws.afterName !== \"undefined\") {\n      name += node2.raws.afterName;\n    } else if (params) {\n      name += \" \";\n    }\n    if (node2.nodes) {\n      this.block(node2, name + params);\n    } else {\n      let end = (node2.raws.between || \"\") + (semicolon ? \";\" : \"\");\n      this.builder(name + params + end, node2);\n    }\n  }\n  beforeAfter(node2, detect) {\n    let value;\n    if (node2.type === \"decl\") {\n      value = this.raw(node2, null, \"beforeDecl\");\n    } else if (node2.type === \"comment\") {\n      value = this.raw(node2, null, \"beforeComment\");\n    } else if (detect === \"before\") {\n      value = this.raw(node2, null, \"beforeRule\");\n    } else {\n      value = this.raw(node2, null, \"beforeClose\");\n    }\n    let buf = node2.parent;\n    let depth = 0;\n    while (buf && buf.type !== \"root\") {\n      depth += 1;\n      buf = buf.parent;\n    }\n    if (value.includes(\"\\n\")) {\n      let indent = this.raw(node2, null, \"indent\");\n      if (indent.length) {\n        for (let step = 0; step < depth; step++) value += indent;\n      }\n    }\n    return value;\n  }\n  block(node2, start) {\n    let between = this.raw(node2, \"between\", \"beforeOpen\");\n    this.builder(start + between + \"{\", node2, \"start\");\n    let after;\n    if (node2.nodes && node2.nodes.length) {\n      this.body(node2);\n      after = this.raw(node2, \"after\");\n    } else {\n      after = this.raw(node2, \"after\", \"emptyBody\");\n    }\n    if (after) this.builder(after);\n    this.builder(\"}\", node2, \"end\");\n  }\n  body(node2) {\n    let last = node2.nodes.length - 1;\n    while (last > 0) {\n      if (node2.nodes[last].type !== \"comment\") break;\n      last -= 1;\n    }\n    let semicolon = this.raw(node2, \"semicolon\");\n    for (let i2 = 0; i2 < node2.nodes.length; i2++) {\n      let child = node2.nodes[i2];\n      let before = this.raw(child, \"before\");\n      if (before) this.builder(before);\n      this.stringify(child, last !== i2 || semicolon);\n    }\n  }\n  comment(node2) {\n    let left = this.raw(node2, \"left\", \"commentLeft\");\n    let right = this.raw(node2, \"right\", \"commentRight\");\n    this.builder(\"/*\" + left + node2.text + right + \"*/\", node2);\n  }\n  decl(node2, semicolon) {\n    let between = this.raw(node2, \"between\", \"colon\");\n    let string = node2.prop + between + this.rawValue(node2, \"value\");\n    if (node2.important) {\n      string += node2.raws.important || \" !important\";\n    }\n    if (semicolon) string += \";\";\n    this.builder(string, node2);\n  }\n  document(node2) {\n    this.body(node2);\n  }\n  raw(node2, own, detect) {\n    let value;\n    if (!detect) detect = own;\n    if (own) {\n      value = node2.raws[own];\n      if (typeof value !== \"undefined\") return value;\n    }\n    let parent = node2.parent;\n    if (detect === \"before\") {\n      if (!parent || parent.type === \"root\" && parent.first === node2) {\n        return \"\";\n      }\n      if (parent && parent.type === \"document\") {\n        return \"\";\n      }\n    }\n    if (!parent) return DEFAULT_RAW[detect];\n    let root2 = node2.root();\n    if (!root2.rawCache) root2.rawCache = {};\n    if (typeof root2.rawCache[detect] !== \"undefined\") {\n      return root2.rawCache[detect];\n    }\n    if (detect === \"before\" || detect === \"after\") {\n      return this.beforeAfter(node2, detect);\n    } else {\n      let method = \"raw\" + capitalize(detect);\n      if (this[method]) {\n        value = this[method](root2, node2);\n      } else {\n        root2.walk((i2) => {\n          value = i2.raws[own];\n          if (typeof value !== \"undefined\") return false;\n        });\n      }\n    }\n    if (typeof value === \"undefined\") value = DEFAULT_RAW[detect];\n    root2.rawCache[detect] = value;\n    return value;\n  }\n  rawBeforeClose(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && i2.nodes.length > 0) {\n        if (typeof i2.raws.after !== \"undefined\") {\n          value = i2.raws.after;\n          if (value.includes(\"\\n\")) {\n            value = value.replace(/[^\\n]+$/, \"\");\n          }\n          return false;\n        }\n      }\n    });\n    if (value) value = value.replace(/\\S/g, \"\");\n    return value;\n  }\n  rawBeforeComment(root2, node2) {\n    let value;\n    root2.walkComments((i2) => {\n      if (typeof i2.raws.before !== \"undefined\") {\n        value = i2.raws.before;\n        if (value.includes(\"\\n\")) {\n          value = value.replace(/[^\\n]+$/, \"\");\n        }\n        return false;\n      }\n    });\n    if (typeof value === \"undefined\") {\n      value = this.raw(node2, null, \"beforeDecl\");\n    } else if (value) {\n      value = value.replace(/\\S/g, \"\");\n    }\n    return value;\n  }\n  rawBeforeDecl(root2, node2) {\n    let value;\n    root2.walkDecls((i2) => {\n      if (typeof i2.raws.before !== \"undefined\") {\n        value = i2.raws.before;\n        if (value.includes(\"\\n\")) {\n          value = value.replace(/[^\\n]+$/, \"\");\n        }\n        return false;\n      }\n    });\n    if (typeof value === \"undefined\") {\n      value = this.raw(node2, null, \"beforeRule\");\n    } else if (value) {\n      value = value.replace(/\\S/g, \"\");\n    }\n    return value;\n  }\n  rawBeforeOpen(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.type !== \"decl\") {\n        value = i2.raws.between;\n        if (typeof value !== \"undefined\") return false;\n      }\n    });\n    return value;\n  }\n  rawBeforeRule(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && (i2.parent !== root2 || root2.first !== i2)) {\n        if (typeof i2.raws.before !== \"undefined\") {\n          value = i2.raws.before;\n          if (value.includes(\"\\n\")) {\n            value = value.replace(/[^\\n]+$/, \"\");\n          }\n          return false;\n        }\n      }\n    });\n    if (value) value = value.replace(/\\S/g, \"\");\n    return value;\n  }\n  rawColon(root2) {\n    let value;\n    root2.walkDecls((i2) => {\n      if (typeof i2.raws.between !== \"undefined\") {\n        value = i2.raws.between.replace(/[^\\s:]/g, \"\");\n        return false;\n      }\n    });\n    return value;\n  }\n  rawEmptyBody(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && i2.nodes.length === 0) {\n        value = i2.raws.after;\n        if (typeof value !== \"undefined\") return false;\n      }\n    });\n    return value;\n  }\n  rawIndent(root2) {\n    if (root2.raws.indent) return root2.raws.indent;\n    let value;\n    root2.walk((i2) => {\n      let p = i2.parent;\n      if (p && p !== root2 && p.parent && p.parent === root2) {\n        if (typeof i2.raws.before !== \"undefined\") {\n          let parts = i2.raws.before.split(\"\\n\");\n          value = parts[parts.length - 1];\n          value = value.replace(/\\S/g, \"\");\n          return false;\n        }\n      }\n    });\n    return value;\n  }\n  rawSemicolon(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && i2.nodes.length && i2.last.type === \"decl\") {\n        value = i2.raws.semicolon;\n        if (typeof value !== \"undefined\") return false;\n      }\n    });\n    return value;\n  }\n  rawValue(node2, prop) {\n    let value = node2[prop];\n    let raw = node2.raws[prop];\n    if (raw && raw.value === value) {\n      return raw.raw;\n    }\n    return value;\n  }\n  root(node2) {\n    this.body(node2);\n    if (node2.raws.after) this.builder(node2.raws.after);\n  }\n  rule(node2) {\n    this.block(node2, this.rawValue(node2, \"selector\"));\n    if (node2.raws.ownSemicolon) {\n      this.builder(node2.raws.ownSemicolon, node2, \"end\");\n    }\n  }\n  stringify(node2, semicolon) {\n    if (!this[node2.type]) {\n      throw new Error(\n        \"Unknown AST node type \" + node2.type + \". Maybe you need to change PostCSS stringifier.\"\n      );\n    }\n    this[node2.type](node2, semicolon);\n  }\n};\nvar stringifier = Stringifier$2;\nStringifier$2.default = Stringifier$2;\nlet Stringifier$1 = stringifier;\nfunction stringify$4(node2, builder) {\n  let str = new Stringifier$1(builder);\n  str.stringify(node2);\n}\nvar stringify_1 = stringify$4;\nstringify$4.default = stringify$4;\nlet { isClean: isClean$2, my: my$2 } = symbols;\nlet CssSyntaxError$2 = cssSyntaxError;\nlet Stringifier22 = stringifier;\nlet stringify$3 = stringify_1;\nfunction cloneNode(obj, parent) {\n  let cloned = new obj.constructor();\n  for (let i2 in obj) {\n    if (!Object.prototype.hasOwnProperty.call(obj, i2)) {\n      continue;\n    }\n    if (i2 === \"proxyCache\") continue;\n    let value = obj[i2];\n    let type = typeof value;\n    if (i2 === \"parent\" && type === \"object\") {\n      if (parent) cloned[i2] = parent;\n    } else if (i2 === \"source\") {\n      cloned[i2] = value;\n    } else if (Array.isArray(value)) {\n      cloned[i2] = value.map((j) => cloneNode(j, cloned));\n    } else {\n      if (type === \"object\" && value !== null) value = cloneNode(value);\n      cloned[i2] = value;\n    }\n  }\n  return cloned;\n}\nlet Node$4 = class Node3 {\n  constructor(defaults = {}) {\n    this.raws = {};\n    this[isClean$2] = false;\n    this[my$2] = true;\n    for (let name in defaults) {\n      if (name === \"nodes\") {\n        this.nodes = [];\n        for (let node2 of defaults[name]) {\n          if (typeof node2.clone === \"function\") {\n            this.append(node2.clone());\n          } else {\n            this.append(node2);\n          }\n        }\n      } else {\n        this[name] = defaults[name];\n      }\n    }\n  }\n  addToError(error) {\n    error.postcssNode = this;\n    if (error.stack && this.source && /\\n\\s{4}at /.test(error.stack)) {\n      let s2 = this.source;\n      error.stack = error.stack.replace(\n        /\\n\\s{4}at /,\n        `$&${s2.input.from}:${s2.start.line}:${s2.start.column}$&`\n      );\n    }\n    return error;\n  }\n  after(add) {\n    this.parent.insertAfter(this, add);\n    return this;\n  }\n  assign(overrides = {}) {\n    for (let name in overrides) {\n      this[name] = overrides[name];\n    }\n    return this;\n  }\n  before(add) {\n    this.parent.insertBefore(this, add);\n    return this;\n  }\n  cleanRaws(keepBetween) {\n    delete this.raws.before;\n    delete this.raws.after;\n    if (!keepBetween) delete this.raws.between;\n  }\n  clone(overrides = {}) {\n    let cloned = cloneNode(this);\n    for (let name in overrides) {\n      cloned[name] = overrides[name];\n    }\n    return cloned;\n  }\n  cloneAfter(overrides = {}) {\n    let cloned = this.clone(overrides);\n    this.parent.insertAfter(this, cloned);\n    return cloned;\n  }\n  cloneBefore(overrides = {}) {\n    let cloned = this.clone(overrides);\n    this.parent.insertBefore(this, cloned);\n    return cloned;\n  }\n  error(message, opts = {}) {\n    if (this.source) {\n      let { end, start } = this.rangeBy(opts);\n      return this.source.input.error(\n        message,\n        { column: start.column, line: start.line },\n        { column: end.column, line: end.line },\n        opts\n      );\n    }\n    return new CssSyntaxError$2(message);\n  }\n  getProxyProcessor() {\n    return {\n      get(node2, prop) {\n        if (prop === \"proxyOf\") {\n          return node2;\n        } else if (prop === \"root\") {\n          return () => node2.root().toProxy();\n        } else {\n          return node2[prop];\n        }\n      },\n      set(node2, prop, value) {\n        if (node2[prop] === value) return true;\n        node2[prop] = value;\n        if (prop === \"prop\" || prop === \"value\" || prop === \"name\" || prop === \"params\" || prop === \"important\" || /* c8 ignore next */\n        prop === \"text\") {\n          node2.markDirty();\n        }\n        return true;\n      }\n    };\n  }\n  markDirty() {\n    if (this[isClean$2]) {\n      this[isClean$2] = false;\n      let next = this;\n      while (next = next.parent) {\n        next[isClean$2] = false;\n      }\n    }\n  }\n  next() {\n    if (!this.parent) return void 0;\n    let index2 = this.parent.index(this);\n    return this.parent.nodes[index2 + 1];\n  }\n  positionBy(opts, stringRepresentation) {\n    let pos = this.source.start;\n    if (opts.index) {\n      pos = this.positionInside(opts.index, stringRepresentation);\n    } else if (opts.word) {\n      stringRepresentation = this.toString();\n      let index2 = stringRepresentation.indexOf(opts.word);\n      if (index2 !== -1) pos = this.positionInside(index2, stringRepresentation);\n    }\n    return pos;\n  }\n  positionInside(index2, stringRepresentation) {\n    let string = stringRepresentation || this.toString();\n    let column = this.source.start.column;\n    let line = this.source.start.line;\n    for (let i2 = 0; i2 < index2; i2++) {\n      if (string[i2] === \"\\n\") {\n        column = 1;\n        line += 1;\n      } else {\n        column += 1;\n      }\n    }\n    return { column, line };\n  }\n  prev() {\n    if (!this.parent) return void 0;\n    let index2 = this.parent.index(this);\n    return this.parent.nodes[index2 - 1];\n  }\n  rangeBy(opts) {\n    let start = {\n      column: this.source.start.column,\n      line: this.source.start.line\n    };\n    let end = this.source.end ? {\n      column: this.source.end.column + 1,\n      line: this.source.end.line\n    } : {\n      column: start.column + 1,\n      line: start.line\n    };\n    if (opts.word) {\n      let stringRepresentation = this.toString();\n      let index2 = stringRepresentation.indexOf(opts.word);\n      if (index2 !== -1) {\n        start = this.positionInside(index2, stringRepresentation);\n        end = this.positionInside(index2 + opts.word.length, stringRepresentation);\n      }\n    } else {\n      if (opts.start) {\n        start = {\n          column: opts.start.column,\n          line: opts.start.line\n        };\n      } else if (opts.index) {\n        start = this.positionInside(opts.index);\n      }\n      if (opts.end) {\n        end = {\n          column: opts.end.column,\n          line: opts.end.line\n        };\n      } else if (typeof opts.endIndex === \"number\") {\n        end = this.positionInside(opts.endIndex);\n      } else if (opts.index) {\n        end = this.positionInside(opts.index + 1);\n      }\n    }\n    if (end.line < start.line || end.line === start.line && end.column <= start.column) {\n      end = { column: start.column + 1, line: start.line };\n    }\n    return { end, start };\n  }\n  raw(prop, defaultType) {\n    let str = new Stringifier22();\n    return str.raw(this, prop, defaultType);\n  }\n  remove() {\n    if (this.parent) {\n      this.parent.removeChild(this);\n    }\n    this.parent = void 0;\n    return this;\n  }\n  replaceWith(...nodes) {\n    if (this.parent) {\n      let bookmark = this;\n      let foundSelf = false;\n      for (let node2 of nodes) {\n        if (node2 === this) {\n          foundSelf = true;\n        } else if (foundSelf) {\n          this.parent.insertAfter(bookmark, node2);\n          bookmark = node2;\n        } else {\n          this.parent.insertBefore(bookmark, node2);\n        }\n      }\n      if (!foundSelf) {\n        this.remove();\n      }\n    }\n    return this;\n  }\n  root() {\n    let result2 = this;\n    while (result2.parent && result2.parent.type !== \"document\") {\n      result2 = result2.parent;\n    }\n    return result2;\n  }\n  toJSON(_, inputs) {\n    let fixed = {};\n    let emitInputs = inputs == null;\n    inputs = inputs || /* @__PURE__ */ new Map();\n    let inputsNextIndex = 0;\n    for (let name in this) {\n      if (!Object.prototype.hasOwnProperty.call(this, name)) {\n        continue;\n      }\n      if (name === \"parent\" || name === \"proxyCache\") continue;\n      let value = this[name];\n      if (Array.isArray(value)) {\n        fixed[name] = value.map((i2) => {\n          if (typeof i2 === \"object\" && i2.toJSON) {\n            return i2.toJSON(null, inputs);\n          } else {\n            return i2;\n          }\n        });\n      } else if (typeof value === \"object\" && value.toJSON) {\n        fixed[name] = value.toJSON(null, inputs);\n      } else if (name === \"source\") {\n        let inputId = inputs.get(value.input);\n        if (inputId == null) {\n          inputId = inputsNextIndex;\n          inputs.set(value.input, inputsNextIndex);\n          inputsNextIndex++;\n        }\n        fixed[name] = {\n          end: value.end,\n          inputId,\n          start: value.start\n        };\n      } else {\n        fixed[name] = value;\n      }\n    }\n    if (emitInputs) {\n      fixed.inputs = [...inputs.keys()].map((input2) => input2.toJSON());\n    }\n    return fixed;\n  }\n  toProxy() {\n    if (!this.proxyCache) {\n      this.proxyCache = new Proxy(this, this.getProxyProcessor());\n    }\n    return this.proxyCache;\n  }\n  toString(stringifier2 = stringify$3) {\n    if (stringifier2.stringify) stringifier2 = stringifier2.stringify;\n    let result2 = \"\";\n    stringifier2(this, (i2) => {\n      result2 += i2;\n    });\n    return result2;\n  }\n  warn(result2, text, opts) {\n    let data = { node: this };\n    for (let i2 in opts) data[i2] = opts[i2];\n    return result2.warn(text, data);\n  }\n  get proxyOf() {\n    return this;\n  }\n};\nvar node = Node$4;\nNode$4.default = Node$4;\nlet Node$3 = node;\nlet Declaration$4 = class Declaration2 extends Node$3 {\n  constructor(defaults) {\n    if (defaults && typeof defaults.value !== \"undefined\" && typeof defaults.value !== \"string\") {\n      defaults = { ...defaults, value: String(defaults.value) };\n    }\n    super(defaults);\n    this.type = \"decl\";\n  }\n  get variable() {\n    return this.prop.startsWith(\"--\") || this.prop[0] === \"$\";\n  }\n};\nvar declaration = Declaration$4;\nDeclaration$4.default = Declaration$4;\nlet urlAlphabet = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\nlet customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = \"\";\n    let i2 = size;\n    while (i2--) {\n      id += alphabet[Math.random() * alphabet.length | 0];\n    }\n    return id;\n  };\n};\nlet nanoid$1 = (size = 21) => {\n  let id = \"\";\n  let i2 = size;\n  while (i2--) {\n    id += urlAlphabet[Math.random() * 64 | 0];\n  }\n  return id;\n};\nvar nonSecure = { nanoid: nanoid$1, customAlphabet };\nlet { SourceMapConsumer: SourceMapConsumer$2, SourceMapGenerator: SourceMapGenerator$2 } = require$$2;\nlet { existsSync, readFileSync } = require$$2;\nlet { dirname: dirname$1, join } = require$$2;\nfunction fromBase64(str) {\n  if (Buffer) {\n    return Buffer.from(str, \"base64\").toString();\n  } else {\n    return window.atob(str);\n  }\n}\nlet PreviousMap$2 = class PreviousMap2 {\n  constructor(css, opts) {\n    if (opts.map === false) return;\n    this.loadAnnotation(css);\n    this.inline = this.startWith(this.annotation, \"data:\");\n    let prev = opts.map ? opts.map.prev : void 0;\n    let text = this.loadMap(opts.from, prev);\n    if (!this.mapFile && opts.from) {\n      this.mapFile = opts.from;\n    }\n    if (this.mapFile) this.root = dirname$1(this.mapFile);\n    if (text) this.text = text;\n  }\n  consumer() {\n    if (!this.consumerCache) {\n      this.consumerCache = new SourceMapConsumer$2(this.text);\n    }\n    return this.consumerCache;\n  }\n  decodeInline(text) {\n    let baseCharsetUri = /^data:application\\/json;charset=utf-?8;base64,/;\n    let baseUri = /^data:application\\/json;base64,/;\n    let charsetUri = /^data:application\\/json;charset=utf-?8,/;\n    let uri = /^data:application\\/json,/;\n    if (charsetUri.test(text) || uri.test(text)) {\n      return decodeURIComponent(text.substr(RegExp.lastMatch.length));\n    }\n    if (baseCharsetUri.test(text) || baseUri.test(text)) {\n      return fromBase64(text.substr(RegExp.lastMatch.length));\n    }\n    let encoding = text.match(/data:application\\/json;([^,]+),/)[1];\n    throw new Error(\"Unsupported source map encoding \" + encoding);\n  }\n  getAnnotationURL(sourceMapString) {\n    return sourceMapString.replace(/^\\/\\*\\s*# sourceMappingURL=/, \"\").trim();\n  }\n  isMap(map) {\n    if (typeof map !== \"object\") return false;\n    return typeof map.mappings === \"string\" || typeof map._mappings === \"string\" || Array.isArray(map.sections);\n  }\n  loadAnnotation(css) {\n    let comments = css.match(/\\/\\*\\s*# sourceMappingURL=/gm);\n    if (!comments) return;\n    let start = css.lastIndexOf(comments.pop());\n    let end = css.indexOf(\"*/\", start);\n    if (start > -1 && end > -1) {\n      this.annotation = this.getAnnotationURL(css.substring(start, end));\n    }\n  }\n  loadFile(path) {\n    this.root = dirname$1(path);\n    if (existsSync(path)) {\n      this.mapFile = path;\n      return readFileSync(path, \"utf-8\").toString().trim();\n    }\n  }\n  loadMap(file, prev) {\n    if (prev === false) return false;\n    if (prev) {\n      if (typeof prev === \"string\") {\n        return prev;\n      } else if (typeof prev === \"function\") {\n        let prevPath = prev(file);\n        if (prevPath) {\n          let map = this.loadFile(prevPath);\n          if (!map) {\n            throw new Error(\n              \"Unable to load previous source map: \" + prevPath.toString()\n            );\n          }\n          return map;\n        }\n      } else if (prev instanceof SourceMapConsumer$2) {\n        return SourceMapGenerator$2.fromSourceMap(prev).toString();\n      } else if (prev instanceof SourceMapGenerator$2) {\n        return prev.toString();\n      } else if (this.isMap(prev)) {\n        return JSON.stringify(prev);\n      } else {\n        throw new Error(\n          \"Unsupported previous source map format: \" + prev.toString()\n        );\n      }\n    } else if (this.inline) {\n      return this.decodeInline(this.annotation);\n    } else if (this.annotation) {\n      let map = this.annotation;\n      if (file) map = join(dirname$1(file), map);\n      return this.loadFile(map);\n    }\n  }\n  startWith(string, start) {\n    if (!string) return false;\n    return string.substr(0, start.length) === start;\n  }\n  withContent() {\n    return !!(this.consumer().sourcesContent && this.consumer().sourcesContent.length > 0);\n  }\n};\nvar previousMap = PreviousMap$2;\nPreviousMap$2.default = PreviousMap$2;\nlet { SourceMapConsumer: SourceMapConsumer$1, SourceMapGenerator: SourceMapGenerator$1 } = require$$2;\nlet { fileURLToPath, pathToFileURL: pathToFileURL$1 } = require$$2;\nlet { isAbsolute, resolve: resolve$1 } = require$$2;\nlet { nanoid } = nonSecure;\nlet terminalHighlight = require$$2;\nlet CssSyntaxError$1 = cssSyntaxError;\nlet PreviousMap$1 = previousMap;\nlet fromOffsetCache = Symbol(\"fromOffsetCache\");\nlet sourceMapAvailable$1 = Boolean(SourceMapConsumer$1 && SourceMapGenerator$1);\nlet pathAvailable$1 = Boolean(resolve$1 && isAbsolute);\nlet Input$4 = class Input2 {\n  constructor(css, opts = {}) {\n    if (css === null || typeof css === \"undefined\" || typeof css === \"object\" && !css.toString) {\n      throw new Error(`PostCSS received ${css} instead of CSS string`);\n    }\n    this.css = css.toString();\n    if (this.css[0] === \"\\uFEFF\" || this.css[0] === \"￾\") {\n      this.hasBOM = true;\n      this.css = this.css.slice(1);\n    } else {\n      this.hasBOM = false;\n    }\n    if (opts.from) {\n      if (!pathAvailable$1 || /^\\w+:\\/\\//.test(opts.from) || isAbsolute(opts.from)) {\n        this.file = opts.from;\n      } else {\n        this.file = resolve$1(opts.from);\n      }\n    }\n    if (pathAvailable$1 && sourceMapAvailable$1) {\n      let map = new PreviousMap$1(this.css, opts);\n      if (map.text) {\n        this.map = map;\n        let file = map.consumer().file;\n        if (!this.file && file) this.file = this.mapResolve(file);\n      }\n    }\n    if (!this.file) {\n      this.id = \"<input css \" + nanoid(6) + \">\";\n    }\n    if (this.map) this.map.file = this.from;\n  }\n  error(message, line, column, opts = {}) {\n    let result2, endLine, endColumn;\n    if (line && typeof line === \"object\") {\n      let start = line;\n      let end = column;\n      if (typeof start.offset === \"number\") {\n        let pos = this.fromOffset(start.offset);\n        line = pos.line;\n        column = pos.col;\n      } else {\n        line = start.line;\n        column = start.column;\n      }\n      if (typeof end.offset === \"number\") {\n        let pos = this.fromOffset(end.offset);\n        endLine = pos.line;\n        endColumn = pos.col;\n      } else {\n        endLine = end.line;\n        endColumn = end.column;\n      }\n    } else if (!column) {\n      let pos = this.fromOffset(line);\n      line = pos.line;\n      column = pos.col;\n    }\n    let origin = this.origin(line, column, endLine, endColumn);\n    if (origin) {\n      result2 = new CssSyntaxError$1(\n        message,\n        origin.endLine === void 0 ? origin.line : { column: origin.column, line: origin.line },\n        origin.endLine === void 0 ? origin.column : { column: origin.endColumn, line: origin.endLine },\n        origin.source,\n        origin.file,\n        opts.plugin\n      );\n    } else {\n      result2 = new CssSyntaxError$1(\n        message,\n        endLine === void 0 ? line : { column, line },\n        endLine === void 0 ? column : { column: endColumn, line: endLine },\n        this.css,\n        this.file,\n        opts.plugin\n      );\n    }\n    result2.input = { column, endColumn, endLine, line, source: this.css };\n    if (this.file) {\n      if (pathToFileURL$1) {\n        result2.input.url = pathToFileURL$1(this.file).toString();\n      }\n      result2.input.file = this.file;\n    }\n    return result2;\n  }\n  fromOffset(offset) {\n    let lastLine, lineToIndex;\n    if (!this[fromOffsetCache]) {\n      let lines = this.css.split(\"\\n\");\n      lineToIndex = new Array(lines.length);\n      let prevIndex = 0;\n      for (let i2 = 0, l2 = lines.length; i2 < l2; i2++) {\n        lineToIndex[i2] = prevIndex;\n        prevIndex += lines[i2].length + 1;\n      }\n      this[fromOffsetCache] = lineToIndex;\n    } else {\n      lineToIndex = this[fromOffsetCache];\n    }\n    lastLine = lineToIndex[lineToIndex.length - 1];\n    let min = 0;\n    if (offset >= lastLine) {\n      min = lineToIndex.length - 1;\n    } else {\n      let max = lineToIndex.length - 2;\n      let mid;\n      while (min < max) {\n        mid = min + (max - min >> 1);\n        if (offset < lineToIndex[mid]) {\n          max = mid - 1;\n        } else if (offset >= lineToIndex[mid + 1]) {\n          min = mid + 1;\n        } else {\n          min = mid;\n          break;\n        }\n      }\n    }\n    return {\n      col: offset - lineToIndex[min] + 1,\n      line: min + 1\n    };\n  }\n  mapResolve(file) {\n    if (/^\\w+:\\/\\//.test(file)) {\n      return file;\n    }\n    return resolve$1(this.map.consumer().sourceRoot || this.map.root || \".\", file);\n  }\n  origin(line, column, endLine, endColumn) {\n    if (!this.map) return false;\n    let consumer = this.map.consumer();\n    let from = consumer.originalPositionFor({ column, line });\n    if (!from.source) return false;\n    let to;\n    if (typeof endLine === \"number\") {\n      to = consumer.originalPositionFor({ column: endColumn, line: endLine });\n    }\n    let fromUrl;\n    if (isAbsolute(from.source)) {\n      fromUrl = pathToFileURL$1(from.source);\n    } else {\n      fromUrl = new URL(\n        from.source,\n        this.map.consumer().sourceRoot || pathToFileURL$1(this.map.mapFile)\n      );\n    }\n    let result2 = {\n      column: from.column,\n      endColumn: to && to.column,\n      endLine: to && to.line,\n      line: from.line,\n      url: fromUrl.toString()\n    };\n    if (fromUrl.protocol === \"file:\") {\n      if (fileURLToPath) {\n        result2.file = fileURLToPath(fromUrl);\n      } else {\n        throw new Error(`file: protocol is not available in this PostCSS build`);\n      }\n    }\n    let source = consumer.sourceContentFor(from.source);\n    if (source) result2.source = source;\n    return result2;\n  }\n  toJSON() {\n    let json = {};\n    for (let name of [\"hasBOM\", \"css\", \"file\", \"id\"]) {\n      if (this[name] != null) {\n        json[name] = this[name];\n      }\n    }\n    if (this.map) {\n      json.map = { ...this.map };\n      if (json.map.consumerCache) {\n        json.map.consumerCache = void 0;\n      }\n    }\n    return json;\n  }\n  get from() {\n    return this.file || this.id;\n  }\n};\nvar input = Input$4;\nInput$4.default = Input$4;\nif (terminalHighlight && terminalHighlight.registerInput) {\n  terminalHighlight.registerInput(Input$4);\n}\nlet { SourceMapConsumer, SourceMapGenerator } = require$$2;\nlet { dirname, relative, resolve, sep } = require$$2;\nlet { pathToFileURL } = require$$2;\nlet Input$3 = input;\nlet sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator);\nlet pathAvailable = Boolean(dirname && resolve && relative && sep);\nlet MapGenerator$2 = class MapGenerator2 {\n  constructor(stringify2, root2, opts, cssString) {\n    this.stringify = stringify2;\n    this.mapOpts = opts.map || {};\n    this.root = root2;\n    this.opts = opts;\n    this.css = cssString;\n    this.originalCSS = cssString;\n    this.usesFileUrls = !this.mapOpts.from && this.mapOpts.absolute;\n    this.memoizedFileURLs = /* @__PURE__ */ new Map();\n    this.memoizedPaths = /* @__PURE__ */ new Map();\n    this.memoizedURLs = /* @__PURE__ */ new Map();\n  }\n  addAnnotation() {\n    let content;\n    if (this.isInline()) {\n      content = \"data:application/json;base64,\" + this.toBase64(this.map.toString());\n    } else if (typeof this.mapOpts.annotation === \"string\") {\n      content = this.mapOpts.annotation;\n    } else if (typeof this.mapOpts.annotation === \"function\") {\n      content = this.mapOpts.annotation(this.opts.to, this.root);\n    } else {\n      content = this.outputFile() + \".map\";\n    }\n    let eol = \"\\n\";\n    if (this.css.includes(\"\\r\\n\")) eol = \"\\r\\n\";\n    this.css += eol + \"/*# sourceMappingURL=\" + content + \" */\";\n  }\n  applyPrevMaps() {\n    for (let prev of this.previous()) {\n      let from = this.toUrl(this.path(prev.file));\n      let root2 = prev.root || dirname(prev.file);\n      let map;\n      if (this.mapOpts.sourcesContent === false) {\n        map = new SourceMapConsumer(prev.text);\n        if (map.sourcesContent) {\n          map.sourcesContent = null;\n        }\n      } else {\n        map = prev.consumer();\n      }\n      this.map.applySourceMap(map, from, this.toUrl(this.path(root2)));\n    }\n  }\n  clearAnnotation() {\n    if (this.mapOpts.annotation === false) return;\n    if (this.root) {\n      let node2;\n      for (let i2 = this.root.nodes.length - 1; i2 >= 0; i2--) {\n        node2 = this.root.nodes[i2];\n        if (node2.type !== \"comment\") continue;\n        if (node2.text.indexOf(\"# sourceMappingURL=\") === 0) {\n          this.root.removeChild(i2);\n        }\n      }\n    } else if (this.css) {\n      this.css = this.css.replace(/\\n*?\\/\\*#[\\S\\s]*?\\*\\/$/gm, \"\");\n    }\n  }\n  generate() {\n    this.clearAnnotation();\n    if (pathAvailable && sourceMapAvailable && this.isMap()) {\n      return this.generateMap();\n    } else {\n      let result2 = \"\";\n      this.stringify(this.root, (i2) => {\n        result2 += i2;\n      });\n      return [result2];\n    }\n  }\n  generateMap() {\n    if (this.root) {\n      this.generateString();\n    } else if (this.previous().length === 1) {\n      let prev = this.previous()[0].consumer();\n      prev.file = this.outputFile();\n      this.map = SourceMapGenerator.fromSourceMap(prev, {\n        ignoreInvalidMapping: true\n      });\n    } else {\n      this.map = new SourceMapGenerator({\n        file: this.outputFile(),\n        ignoreInvalidMapping: true\n      });\n      this.map.addMapping({\n        generated: { column: 0, line: 1 },\n        original: { column: 0, line: 1 },\n        source: this.opts.from ? this.toUrl(this.path(this.opts.from)) : \"<no source>\"\n      });\n    }\n    if (this.isSourcesContent()) this.setSourcesContent();\n    if (this.root && this.previous().length > 0) this.applyPrevMaps();\n    if (this.isAnnotation()) this.addAnnotation();\n    if (this.isInline()) {\n      return [this.css];\n    } else {\n      return [this.css, this.map];\n    }\n  }\n  generateString() {\n    this.css = \"\";\n    this.map = new SourceMapGenerator({\n      file: this.outputFile(),\n      ignoreInvalidMapping: true\n    });\n    let line = 1;\n    let column = 1;\n    let noSource = \"<no source>\";\n    let mapping = {\n      generated: { column: 0, line: 0 },\n      original: { column: 0, line: 0 },\n      source: \"\"\n    };\n    let lines, last;\n    this.stringify(this.root, (str, node2, type) => {\n      this.css += str;\n      if (node2 && type !== \"end\") {\n        mapping.generated.line = line;\n        mapping.generated.column = column - 1;\n        if (node2.source && node2.source.start) {\n          mapping.source = this.sourcePath(node2);\n          mapping.original.line = node2.source.start.line;\n          mapping.original.column = node2.source.start.column - 1;\n          this.map.addMapping(mapping);\n        } else {\n          mapping.source = noSource;\n          mapping.original.line = 1;\n          mapping.original.column = 0;\n          this.map.addMapping(mapping);\n        }\n      }\n      lines = str.match(/\\n/g);\n      if (lines) {\n        line += lines.length;\n        last = str.lastIndexOf(\"\\n\");\n        column = str.length - last;\n      } else {\n        column += str.length;\n      }\n      if (node2 && type !== \"start\") {\n        let p = node2.parent || { raws: {} };\n        let childless = node2.type === \"decl\" || node2.type === \"atrule\" && !node2.nodes;\n        if (!childless || node2 !== p.last || p.raws.semicolon) {\n          if (node2.source && node2.source.end) {\n            mapping.source = this.sourcePath(node2);\n            mapping.original.line = node2.source.end.line;\n            mapping.original.column = node2.source.end.column - 1;\n            mapping.generated.line = line;\n            mapping.generated.column = column - 2;\n            this.map.addMapping(mapping);\n          } else {\n            mapping.source = noSource;\n            mapping.original.line = 1;\n            mapping.original.column = 0;\n            mapping.generated.line = line;\n            mapping.generated.column = column - 1;\n            this.map.addMapping(mapping);\n          }\n        }\n      }\n    });\n  }\n  isAnnotation() {\n    if (this.isInline()) {\n      return true;\n    }\n    if (typeof this.mapOpts.annotation !== \"undefined\") {\n      return this.mapOpts.annotation;\n    }\n    if (this.previous().length) {\n      return this.previous().some((i2) => i2.annotation);\n    }\n    return true;\n  }\n  isInline() {\n    if (typeof this.mapOpts.inline !== \"undefined\") {\n      return this.mapOpts.inline;\n    }\n    let annotation = this.mapOpts.annotation;\n    if (typeof annotation !== \"undefined\" && annotation !== true) {\n      return false;\n    }\n    if (this.previous().length) {\n      return this.previous().some((i2) => i2.inline);\n    }\n    return true;\n  }\n  isMap() {\n    if (typeof this.opts.map !== \"undefined\") {\n      return !!this.opts.map;\n    }\n    return this.previous().length > 0;\n  }\n  isSourcesContent() {\n    if (typeof this.mapOpts.sourcesContent !== \"undefined\") {\n      return this.mapOpts.sourcesContent;\n    }\n    if (this.previous().length) {\n      return this.previous().some((i2) => i2.withContent());\n    }\n    return true;\n  }\n  outputFile() {\n    if (this.opts.to) {\n      return this.path(this.opts.to);\n    } else if (this.opts.from) {\n      return this.path(this.opts.from);\n    } else {\n      return \"to.css\";\n    }\n  }\n  path(file) {\n    if (this.mapOpts.absolute) return file;\n    if (file.charCodeAt(0) === 60) return file;\n    if (/^\\w+:\\/\\//.test(file)) return file;\n    let cached = this.memoizedPaths.get(file);\n    if (cached) return cached;\n    let from = this.opts.to ? dirname(this.opts.to) : \".\";\n    if (typeof this.mapOpts.annotation === \"string\") {\n      from = dirname(resolve(from, this.mapOpts.annotation));\n    }\n    let path = relative(from, file);\n    this.memoizedPaths.set(file, path);\n    return path;\n  }\n  previous() {\n    if (!this.previousMaps) {\n      this.previousMaps = [];\n      if (this.root) {\n        this.root.walk((node2) => {\n          if (node2.source && node2.source.input.map) {\n            let map = node2.source.input.map;\n            if (!this.previousMaps.includes(map)) {\n              this.previousMaps.push(map);\n            }\n          }\n        });\n      } else {\n        let input2 = new Input$3(this.originalCSS, this.opts);\n        if (input2.map) this.previousMaps.push(input2.map);\n      }\n    }\n    return this.previousMaps;\n  }\n  setSourcesContent() {\n    let already = {};\n    if (this.root) {\n      this.root.walk((node2) => {\n        if (node2.source) {\n          let from = node2.source.input.from;\n          if (from && !already[from]) {\n            already[from] = true;\n            let fromUrl = this.usesFileUrls ? this.toFileUrl(from) : this.toUrl(this.path(from));\n            this.map.setSourceContent(fromUrl, node2.source.input.css);\n          }\n        }\n      });\n    } else if (this.css) {\n      let from = this.opts.from ? this.toUrl(this.path(this.opts.from)) : \"<no source>\";\n      this.map.setSourceContent(from, this.css);\n    }\n  }\n  sourcePath(node2) {\n    if (this.mapOpts.from) {\n      return this.toUrl(this.mapOpts.from);\n    } else if (this.usesFileUrls) {\n      return this.toFileUrl(node2.source.input.from);\n    } else {\n      return this.toUrl(this.path(node2.source.input.from));\n    }\n  }\n  toBase64(str) {\n    if (Buffer) {\n      return Buffer.from(str).toString(\"base64\");\n    } else {\n      return window.btoa(unescape(encodeURIComponent(str)));\n    }\n  }\n  toFileUrl(path) {\n    let cached = this.memoizedFileURLs.get(path);\n    if (cached) return cached;\n    if (pathToFileURL) {\n      let fileURL = pathToFileURL(path).toString();\n      this.memoizedFileURLs.set(path, fileURL);\n      return fileURL;\n    } else {\n      throw new Error(\n        \"`map.absolute` option is not available in this PostCSS build\"\n      );\n    }\n  }\n  toUrl(path) {\n    let cached = this.memoizedURLs.get(path);\n    if (cached) return cached;\n    if (sep === \"\\\\\") {\n      path = path.replace(/\\\\/g, \"/\");\n    }\n    let url = encodeURI(path).replace(/[#?]/g, encodeURIComponent);\n    this.memoizedURLs.set(path, url);\n    return url;\n  }\n};\nvar mapGenerator = MapGenerator$2;\nlet Node$2 = node;\nlet Comment$4 = class Comment2 extends Node$2 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"comment\";\n  }\n};\nvar comment = Comment$4;\nComment$4.default = Comment$4;\nlet { isClean: isClean$1, my: my$1 } = symbols;\nlet Declaration$3 = declaration;\nlet Comment$3 = comment;\nlet Node$1 = node;\nlet parse$4, Rule$4, AtRule$4, Root$6;\nfunction cleanSource(nodes) {\n  return nodes.map((i2) => {\n    if (i2.nodes) i2.nodes = cleanSource(i2.nodes);\n    delete i2.source;\n    return i2;\n  });\n}\nfunction markDirtyUp(node2) {\n  node2[isClean$1] = false;\n  if (node2.proxyOf.nodes) {\n    for (let i2 of node2.proxyOf.nodes) {\n      markDirtyUp(i2);\n    }\n  }\n}\nlet Container$7 = class Container2 extends Node$1 {\n  append(...children) {\n    for (let child of children) {\n      let nodes = this.normalize(child, this.last);\n      for (let node2 of nodes) this.proxyOf.nodes.push(node2);\n    }\n    this.markDirty();\n    return this;\n  }\n  cleanRaws(keepBetween) {\n    super.cleanRaws(keepBetween);\n    if (this.nodes) {\n      for (let node2 of this.nodes) node2.cleanRaws(keepBetween);\n    }\n  }\n  each(callback) {\n    if (!this.proxyOf.nodes) return void 0;\n    let iterator = this.getIterator();\n    let index2, result2;\n    while (this.indexes[iterator] < this.proxyOf.nodes.length) {\n      index2 = this.indexes[iterator];\n      result2 = callback(this.proxyOf.nodes[index2], index2);\n      if (result2 === false) break;\n      this.indexes[iterator] += 1;\n    }\n    delete this.indexes[iterator];\n    return result2;\n  }\n  every(condition) {\n    return this.nodes.every(condition);\n  }\n  getIterator() {\n    if (!this.lastEach) this.lastEach = 0;\n    if (!this.indexes) this.indexes = {};\n    this.lastEach += 1;\n    let iterator = this.lastEach;\n    this.indexes[iterator] = 0;\n    return iterator;\n  }\n  getProxyProcessor() {\n    return {\n      get(node2, prop) {\n        if (prop === \"proxyOf\") {\n          return node2;\n        } else if (!node2[prop]) {\n          return node2[prop];\n        } else if (prop === \"each\" || typeof prop === \"string\" && prop.startsWith(\"walk\")) {\n          return (...args) => {\n            return node2[prop](\n              ...args.map((i2) => {\n                if (typeof i2 === \"function\") {\n                  return (child, index2) => i2(child.toProxy(), index2);\n                } else {\n                  return i2;\n                }\n              })\n            );\n          };\n        } else if (prop === \"every\" || prop === \"some\") {\n          return (cb) => {\n            return node2[prop](\n              (child, ...other) => cb(child.toProxy(), ...other)\n            );\n          };\n        } else if (prop === \"root\") {\n          return () => node2.root().toProxy();\n        } else if (prop === \"nodes\") {\n          return node2.nodes.map((i2) => i2.toProxy());\n        } else if (prop === \"first\" || prop === \"last\") {\n          return node2[prop].toProxy();\n        } else {\n          return node2[prop];\n        }\n      },\n      set(node2, prop, value) {\n        if (node2[prop] === value) return true;\n        node2[prop] = value;\n        if (prop === \"name\" || prop === \"params\" || prop === \"selector\") {\n          node2.markDirty();\n        }\n        return true;\n      }\n    };\n  }\n  index(child) {\n    if (typeof child === \"number\") return child;\n    if (child.proxyOf) child = child.proxyOf;\n    return this.proxyOf.nodes.indexOf(child);\n  }\n  insertAfter(exist, add) {\n    let existIndex = this.index(exist);\n    let nodes = this.normalize(add, this.proxyOf.nodes[existIndex]).reverse();\n    existIndex = this.index(exist);\n    for (let node2 of nodes) this.proxyOf.nodes.splice(existIndex + 1, 0, node2);\n    let index2;\n    for (let id in this.indexes) {\n      index2 = this.indexes[id];\n      if (existIndex < index2) {\n        this.indexes[id] = index2 + nodes.length;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  insertBefore(exist, add) {\n    let existIndex = this.index(exist);\n    let type = existIndex === 0 ? \"prepend\" : false;\n    let nodes = this.normalize(add, this.proxyOf.nodes[existIndex], type).reverse();\n    existIndex = this.index(exist);\n    for (let node2 of nodes) this.proxyOf.nodes.splice(existIndex, 0, node2);\n    let index2;\n    for (let id in this.indexes) {\n      index2 = this.indexes[id];\n      if (existIndex <= index2) {\n        this.indexes[id] = index2 + nodes.length;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  normalize(nodes, sample) {\n    if (typeof nodes === \"string\") {\n      nodes = cleanSource(parse$4(nodes).nodes);\n    } else if (typeof nodes === \"undefined\") {\n      nodes = [];\n    } else if (Array.isArray(nodes)) {\n      nodes = nodes.slice(0);\n      for (let i2 of nodes) {\n        if (i2.parent) i2.parent.removeChild(i2, \"ignore\");\n      }\n    } else if (nodes.type === \"root\" && this.type !== \"document\") {\n      nodes = nodes.nodes.slice(0);\n      for (let i2 of nodes) {\n        if (i2.parent) i2.parent.removeChild(i2, \"ignore\");\n      }\n    } else if (nodes.type) {\n      nodes = [nodes];\n    } else if (nodes.prop) {\n      if (typeof nodes.value === \"undefined\") {\n        throw new Error(\"Value field is missed in node creation\");\n      } else if (typeof nodes.value !== \"string\") {\n        nodes.value = String(nodes.value);\n      }\n      nodes = [new Declaration$3(nodes)];\n    } else if (nodes.selector) {\n      nodes = [new Rule$4(nodes)];\n    } else if (nodes.name) {\n      nodes = [new AtRule$4(nodes)];\n    } else if (nodes.text) {\n      nodes = [new Comment$3(nodes)];\n    } else {\n      throw new Error(\"Unknown node type in node creation\");\n    }\n    let processed = nodes.map((i2) => {\n      if (!i2[my$1]) Container2.rebuild(i2);\n      i2 = i2.proxyOf;\n      if (i2.parent) i2.parent.removeChild(i2);\n      if (i2[isClean$1]) markDirtyUp(i2);\n      if (typeof i2.raws.before === \"undefined\") {\n        if (sample && typeof sample.raws.before !== \"undefined\") {\n          i2.raws.before = sample.raws.before.replace(/\\S/g, \"\");\n        }\n      }\n      i2.parent = this.proxyOf;\n      return i2;\n    });\n    return processed;\n  }\n  prepend(...children) {\n    children = children.reverse();\n    for (let child of children) {\n      let nodes = this.normalize(child, this.first, \"prepend\").reverse();\n      for (let node2 of nodes) this.proxyOf.nodes.unshift(node2);\n      for (let id in this.indexes) {\n        this.indexes[id] = this.indexes[id] + nodes.length;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  push(child) {\n    child.parent = this;\n    this.proxyOf.nodes.push(child);\n    return this;\n  }\n  removeAll() {\n    for (let node2 of this.proxyOf.nodes) node2.parent = void 0;\n    this.proxyOf.nodes = [];\n    this.markDirty();\n    return this;\n  }\n  removeChild(child) {\n    child = this.index(child);\n    this.proxyOf.nodes[child].parent = void 0;\n    this.proxyOf.nodes.splice(child, 1);\n    let index2;\n    for (let id in this.indexes) {\n      index2 = this.indexes[id];\n      if (index2 >= child) {\n        this.indexes[id] = index2 - 1;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  replaceValues(pattern, opts, callback) {\n    if (!callback) {\n      callback = opts;\n      opts = {};\n    }\n    this.walkDecls((decl) => {\n      if (opts.props && !opts.props.includes(decl.prop)) return;\n      if (opts.fast && !decl.value.includes(opts.fast)) return;\n      decl.value = decl.value.replace(pattern, callback);\n    });\n    this.markDirty();\n    return this;\n  }\n  some(condition) {\n    return this.nodes.some(condition);\n  }\n  walk(callback) {\n    return this.each((child, i2) => {\n      let result2;\n      try {\n        result2 = callback(child, i2);\n      } catch (e2) {\n        throw child.addToError(e2);\n      }\n      if (result2 !== false && child.walk) {\n        result2 = child.walk(callback);\n      }\n      return result2;\n    });\n  }\n  walkAtRules(name, callback) {\n    if (!callback) {\n      callback = name;\n      return this.walk((child, i2) => {\n        if (child.type === \"atrule\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    if (name instanceof RegExp) {\n      return this.walk((child, i2) => {\n        if (child.type === \"atrule\" && name.test(child.name)) {\n          return callback(child, i2);\n        }\n      });\n    }\n    return this.walk((child, i2) => {\n      if (child.type === \"atrule\" && child.name === name) {\n        return callback(child, i2);\n      }\n    });\n  }\n  walkComments(callback) {\n    return this.walk((child, i2) => {\n      if (child.type === \"comment\") {\n        return callback(child, i2);\n      }\n    });\n  }\n  walkDecls(prop, callback) {\n    if (!callback) {\n      callback = prop;\n      return this.walk((child, i2) => {\n        if (child.type === \"decl\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    if (prop instanceof RegExp) {\n      return this.walk((child, i2) => {\n        if (child.type === \"decl\" && prop.test(child.prop)) {\n          return callback(child, i2);\n        }\n      });\n    }\n    return this.walk((child, i2) => {\n      if (child.type === \"decl\" && child.prop === prop) {\n        return callback(child, i2);\n      }\n    });\n  }\n  walkRules(selector, callback) {\n    if (!callback) {\n      callback = selector;\n      return this.walk((child, i2) => {\n        if (child.type === \"rule\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    if (selector instanceof RegExp) {\n      return this.walk((child, i2) => {\n        if (child.type === \"rule\" && selector.test(child.selector)) {\n          return callback(child, i2);\n        }\n      });\n    }\n    return this.walk((child, i2) => {\n      if (child.type === \"rule\" && child.selector === selector) {\n        return callback(child, i2);\n      }\n    });\n  }\n  get first() {\n    if (!this.proxyOf.nodes) return void 0;\n    return this.proxyOf.nodes[0];\n  }\n  get last() {\n    if (!this.proxyOf.nodes) return void 0;\n    return this.proxyOf.nodes[this.proxyOf.nodes.length - 1];\n  }\n};\nContainer$7.registerParse = (dependant) => {\n  parse$4 = dependant;\n};\nContainer$7.registerRule = (dependant) => {\n  Rule$4 = dependant;\n};\nContainer$7.registerAtRule = (dependant) => {\n  AtRule$4 = dependant;\n};\nContainer$7.registerRoot = (dependant) => {\n  Root$6 = dependant;\n};\nvar container = Container$7;\nContainer$7.default = Container$7;\nContainer$7.rebuild = (node2) => {\n  if (node2.type === \"atrule\") {\n    Object.setPrototypeOf(node2, AtRule$4.prototype);\n  } else if (node2.type === \"rule\") {\n    Object.setPrototypeOf(node2, Rule$4.prototype);\n  } else if (node2.type === \"decl\") {\n    Object.setPrototypeOf(node2, Declaration$3.prototype);\n  } else if (node2.type === \"comment\") {\n    Object.setPrototypeOf(node2, Comment$3.prototype);\n  } else if (node2.type === \"root\") {\n    Object.setPrototypeOf(node2, Root$6.prototype);\n  }\n  node2[my$1] = true;\n  if (node2.nodes) {\n    node2.nodes.forEach((child) => {\n      Container$7.rebuild(child);\n    });\n  }\n};\nlet Container$6 = container;\nlet LazyResult$4, Processor$3;\nlet Document$3 = class Document23 extends Container$6 {\n  constructor(defaults) {\n    super({ type: \"document\", ...defaults });\n    if (!this.nodes) {\n      this.nodes = [];\n    }\n  }\n  toResult(opts = {}) {\n    let lazy = new LazyResult$4(new Processor$3(), this, opts);\n    return lazy.stringify();\n  }\n};\nDocument$3.registerLazyResult = (dependant) => {\n  LazyResult$4 = dependant;\n};\nDocument$3.registerProcessor = (dependant) => {\n  Processor$3 = dependant;\n};\nvar document$1 = Document$3;\nDocument$3.default = Document$3;\nlet printed = {};\nvar warnOnce$2 = function warnOnce2(message) {\n  if (printed[message]) return;\n  printed[message] = true;\n  if (typeof console !== \"undefined\" && console.warn) {\n    console.warn(message);\n  }\n};\nlet Warning$2 = class Warning2 {\n  constructor(text, opts = {}) {\n    this.type = \"warning\";\n    this.text = text;\n    if (opts.node && opts.node.source) {\n      let range = opts.node.rangeBy(opts);\n      this.line = range.start.line;\n      this.column = range.start.column;\n      this.endLine = range.end.line;\n      this.endColumn = range.end.column;\n    }\n    for (let opt in opts) this[opt] = opts[opt];\n  }\n  toString() {\n    if (this.node) {\n      return this.node.error(this.text, {\n        index: this.index,\n        plugin: this.plugin,\n        word: this.word\n      }).message;\n    }\n    if (this.plugin) {\n      return this.plugin + \": \" + this.text;\n    }\n    return this.text;\n  }\n};\nvar warning = Warning$2;\nWarning$2.default = Warning$2;\nlet Warning$1 = warning;\nlet Result$3 = class Result2 {\n  constructor(processor2, root2, opts) {\n    this.processor = processor2;\n    this.messages = [];\n    this.root = root2;\n    this.opts = opts;\n    this.css = void 0;\n    this.map = void 0;\n  }\n  toString() {\n    return this.css;\n  }\n  warn(text, opts = {}) {\n    if (!opts.plugin) {\n      if (this.lastPlugin && this.lastPlugin.postcssPlugin) {\n        opts.plugin = this.lastPlugin.postcssPlugin;\n      }\n    }\n    let warning2 = new Warning$1(text, opts);\n    this.messages.push(warning2);\n    return warning2;\n  }\n  warnings() {\n    return this.messages.filter((i2) => i2.type === \"warning\");\n  }\n  get content() {\n    return this.css;\n  }\n};\nvar result = Result$3;\nResult$3.default = Result$3;\nconst SINGLE_QUOTE = \"'\".charCodeAt(0);\nconst DOUBLE_QUOTE = '\"'.charCodeAt(0);\nconst BACKSLASH = \"\\\\\".charCodeAt(0);\nconst SLASH = \"/\".charCodeAt(0);\nconst NEWLINE = \"\\n\".charCodeAt(0);\nconst SPACE = \" \".charCodeAt(0);\nconst FEED = \"\\f\".charCodeAt(0);\nconst TAB = \"\t\".charCodeAt(0);\nconst CR = \"\\r\".charCodeAt(0);\nconst OPEN_SQUARE = \"[\".charCodeAt(0);\nconst CLOSE_SQUARE = \"]\".charCodeAt(0);\nconst OPEN_PARENTHESES = \"(\".charCodeAt(0);\nconst CLOSE_PARENTHESES = \")\".charCodeAt(0);\nconst OPEN_CURLY = \"{\".charCodeAt(0);\nconst CLOSE_CURLY = \"}\".charCodeAt(0);\nconst SEMICOLON = \";\".charCodeAt(0);\nconst ASTERISK = \"*\".charCodeAt(0);\nconst COLON = \":\".charCodeAt(0);\nconst AT = \"@\".charCodeAt(0);\nconst RE_AT_END = /[\\t\\n\\f\\r \"#'()/;[\\\\\\]{}]/g;\nconst RE_WORD_END = /[\\t\\n\\f\\r !\"#'():;@[\\\\\\]{}]|\\/(?=\\*)/g;\nconst RE_BAD_BRACKET = /.[\\r\\n\"'(/\\\\]/;\nconst RE_HEX_ESCAPE = /[\\da-f]/i;\nvar tokenize = function tokenizer2(input2, options = {}) {\n  let css = input2.css.valueOf();\n  let ignore = options.ignoreErrors;\n  let code, next, quote, content, escape;\n  let escaped, escapePos, prev, n2, currentToken;\n  let length = css.length;\n  let pos = 0;\n  let buffer = [];\n  let returned = [];\n  function position() {\n    return pos;\n  }\n  function unclosed(what) {\n    throw input2.error(\"Unclosed \" + what, pos);\n  }\n  function endOfFile() {\n    return returned.length === 0 && pos >= length;\n  }\n  function nextToken(opts) {\n    if (returned.length) return returned.pop();\n    if (pos >= length) return;\n    let ignoreUnclosed = opts ? opts.ignoreUnclosed : false;\n    code = css.charCodeAt(pos);\n    switch (code) {\n      case NEWLINE:\n      case SPACE:\n      case TAB:\n      case CR:\n      case FEED: {\n        next = pos;\n        do {\n          next += 1;\n          code = css.charCodeAt(next);\n        } while (code === SPACE || code === NEWLINE || code === TAB || code === CR || code === FEED);\n        currentToken = [\"space\", css.slice(pos, next)];\n        pos = next - 1;\n        break;\n      }\n      case OPEN_SQUARE:\n      case CLOSE_SQUARE:\n      case OPEN_CURLY:\n      case CLOSE_CURLY:\n      case COLON:\n      case SEMICOLON:\n      case CLOSE_PARENTHESES: {\n        let controlChar = String.fromCharCode(code);\n        currentToken = [controlChar, controlChar, pos];\n        break;\n      }\n      case OPEN_PARENTHESES: {\n        prev = buffer.length ? buffer.pop()[1] : \"\";\n        n2 = css.charCodeAt(pos + 1);\n        if (prev === \"url\" && n2 !== SINGLE_QUOTE && n2 !== DOUBLE_QUOTE && n2 !== SPACE && n2 !== NEWLINE && n2 !== TAB && n2 !== FEED && n2 !== CR) {\n          next = pos;\n          do {\n            escaped = false;\n            next = css.indexOf(\")\", next + 1);\n            if (next === -1) {\n              if (ignore || ignoreUnclosed) {\n                next = pos;\n                break;\n              } else {\n                unclosed(\"bracket\");\n              }\n            }\n            escapePos = next;\n            while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n              escapePos -= 1;\n              escaped = !escaped;\n            }\n          } while (escaped);\n          currentToken = [\"brackets\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n        } else {\n          next = css.indexOf(\")\", pos + 1);\n          content = css.slice(pos, next + 1);\n          if (next === -1 || RE_BAD_BRACKET.test(content)) {\n            currentToken = [\"(\", \"(\", pos];\n          } else {\n            currentToken = [\"brackets\", content, pos, next];\n            pos = next;\n          }\n        }\n        break;\n      }\n      case SINGLE_QUOTE:\n      case DOUBLE_QUOTE: {\n        quote = code === SINGLE_QUOTE ? \"'\" : '\"';\n        next = pos;\n        do {\n          escaped = false;\n          next = css.indexOf(quote, next + 1);\n          if (next === -1) {\n            if (ignore || ignoreUnclosed) {\n              next = pos + 1;\n              break;\n            } else {\n              unclosed(\"string\");\n            }\n          }\n          escapePos = next;\n          while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n            escapePos -= 1;\n            escaped = !escaped;\n          }\n        } while (escaped);\n        currentToken = [\"string\", css.slice(pos, next + 1), pos, next];\n        pos = next;\n        break;\n      }\n      case AT: {\n        RE_AT_END.lastIndex = pos + 1;\n        RE_AT_END.test(css);\n        if (RE_AT_END.lastIndex === 0) {\n          next = css.length - 1;\n        } else {\n          next = RE_AT_END.lastIndex - 2;\n        }\n        currentToken = [\"at-word\", css.slice(pos, next + 1), pos, next];\n        pos = next;\n        break;\n      }\n      case BACKSLASH: {\n        next = pos;\n        escape = true;\n        while (css.charCodeAt(next + 1) === BACKSLASH) {\n          next += 1;\n          escape = !escape;\n        }\n        code = css.charCodeAt(next + 1);\n        if (escape && code !== SLASH && code !== SPACE && code !== NEWLINE && code !== TAB && code !== CR && code !== FEED) {\n          next += 1;\n          if (RE_HEX_ESCAPE.test(css.charAt(next))) {\n            while (RE_HEX_ESCAPE.test(css.charAt(next + 1))) {\n              next += 1;\n            }\n            if (css.charCodeAt(next + 1) === SPACE) {\n              next += 1;\n            }\n          }\n        }\n        currentToken = [\"word\", css.slice(pos, next + 1), pos, next];\n        pos = next;\n        break;\n      }\n      default: {\n        if (code === SLASH && css.charCodeAt(pos + 1) === ASTERISK) {\n          next = css.indexOf(\"*/\", pos + 2) + 1;\n          if (next === 0) {\n            if (ignore || ignoreUnclosed) {\n              next = css.length;\n            } else {\n              unclosed(\"comment\");\n            }\n          }\n          currentToken = [\"comment\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n        } else {\n          RE_WORD_END.lastIndex = pos + 1;\n          RE_WORD_END.test(css);\n          if (RE_WORD_END.lastIndex === 0) {\n            next = css.length - 1;\n          } else {\n            next = RE_WORD_END.lastIndex - 2;\n          }\n          currentToken = [\"word\", css.slice(pos, next + 1), pos, next];\n          buffer.push(currentToken);\n          pos = next;\n        }\n        break;\n      }\n    }\n    pos++;\n    return currentToken;\n  }\n  function back(token) {\n    returned.push(token);\n  }\n  return {\n    back,\n    endOfFile,\n    nextToken,\n    position\n  };\n};\nlet Container$5 = container;\nlet AtRule$3 = class AtRule2 extends Container$5 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"atrule\";\n  }\n  append(...children) {\n    if (!this.proxyOf.nodes) this.nodes = [];\n    return super.append(...children);\n  }\n  prepend(...children) {\n    if (!this.proxyOf.nodes) this.nodes = [];\n    return super.prepend(...children);\n  }\n};\nvar atRule = AtRule$3;\nAtRule$3.default = AtRule$3;\nContainer$5.registerAtRule(AtRule$3);\nlet Container$4 = container;\nlet LazyResult$3, Processor$2;\nlet Root$5 = class Root2 extends Container$4 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"root\";\n    if (!this.nodes) this.nodes = [];\n  }\n  normalize(child, sample, type) {\n    let nodes = super.normalize(child);\n    if (sample) {\n      if (type === \"prepend\") {\n        if (this.nodes.length > 1) {\n          sample.raws.before = this.nodes[1].raws.before;\n        } else {\n          delete sample.raws.before;\n        }\n      } else if (this.first !== sample) {\n        for (let node2 of nodes) {\n          node2.raws.before = sample.raws.before;\n        }\n      }\n    }\n    return nodes;\n  }\n  removeChild(child, ignore) {\n    let index2 = this.index(child);\n    if (!ignore && index2 === 0 && this.nodes.length > 1) {\n      this.nodes[1].raws.before = this.nodes[index2].raws.before;\n    }\n    return super.removeChild(child);\n  }\n  toResult(opts = {}) {\n    let lazy = new LazyResult$3(new Processor$2(), this, opts);\n    return lazy.stringify();\n  }\n};\nRoot$5.registerLazyResult = (dependant) => {\n  LazyResult$3 = dependant;\n};\nRoot$5.registerProcessor = (dependant) => {\n  Processor$2 = dependant;\n};\nvar root = Root$5;\nRoot$5.default = Root$5;\nContainer$4.registerRoot(Root$5);\nlet list$2 = {\n  comma(string) {\n    return list$2.split(string, [\",\"], true);\n  },\n  space(string) {\n    let spaces = [\" \", \"\\n\", \"\t\"];\n    return list$2.split(string, spaces);\n  },\n  split(string, separators, last) {\n    let array = [];\n    let current = \"\";\n    let split = false;\n    let func = 0;\n    let inQuote = false;\n    let prevQuote = \"\";\n    let escape = false;\n    for (let letter of string) {\n      if (escape) {\n        escape = false;\n      } else if (letter === \"\\\\\") {\n        escape = true;\n      } else if (inQuote) {\n        if (letter === prevQuote) {\n          inQuote = false;\n        }\n      } else if (letter === '\"' || letter === \"'\") {\n        inQuote = true;\n        prevQuote = letter;\n      } else if (letter === \"(\") {\n        func += 1;\n      } else if (letter === \")\") {\n        if (func > 0) func -= 1;\n      } else if (func === 0) {\n        if (separators.includes(letter)) split = true;\n      }\n      if (split) {\n        if (current !== \"\") array.push(current.trim());\n        current = \"\";\n        split = false;\n      } else {\n        current += letter;\n      }\n    }\n    if (last || current !== \"\") array.push(current.trim());\n    return array;\n  }\n};\nvar list_1 = list$2;\nlist$2.default = list$2;\nlet Container$3 = container;\nlet list$1 = list_1;\nlet Rule$3 = class Rule2 extends Container$3 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"rule\";\n    if (!this.nodes) this.nodes = [];\n  }\n  get selectors() {\n    return list$1.comma(this.selector);\n  }\n  set selectors(values) {\n    let match = this.selector ? this.selector.match(/,\\s*/) : null;\n    let sep2 = match ? match[0] : \",\" + this.raw(\"between\", \"beforeOpen\");\n    this.selector = values.join(sep2);\n  }\n};\nvar rule = Rule$3;\nRule$3.default = Rule$3;\nContainer$3.registerRule(Rule$3);\nlet Declaration$2 = declaration;\nlet tokenizer22 = tokenize;\nlet Comment$2 = comment;\nlet AtRule$2 = atRule;\nlet Root$4 = root;\nlet Rule$2 = rule;\nconst SAFE_COMMENT_NEIGHBOR = {\n  empty: true,\n  space: true\n};\nfunction findLastWithPosition(tokens) {\n  for (let i2 = tokens.length - 1; i2 >= 0; i2--) {\n    let token = tokens[i2];\n    let pos = token[3] || token[2];\n    if (pos) return pos;\n  }\n}\nlet Parser$1 = class Parser2 {\n  constructor(input2) {\n    this.input = input2;\n    this.root = new Root$4();\n    this.current = this.root;\n    this.spaces = \"\";\n    this.semicolon = false;\n    this.createTokenizer();\n    this.root.source = { input: input2, start: { column: 1, line: 1, offset: 0 } };\n  }\n  atrule(token) {\n    let node2 = new AtRule$2();\n    node2.name = token[1].slice(1);\n    if (node2.name === \"\") {\n      this.unnamedAtrule(node2, token);\n    }\n    this.init(node2, token[2]);\n    let type;\n    let prev;\n    let shift;\n    let last = false;\n    let open = false;\n    let params = [];\n    let brackets = [];\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken();\n      type = token[0];\n      if (type === \"(\" || type === \"[\") {\n        brackets.push(type === \"(\" ? \")\" : \"]\");\n      } else if (type === \"{\" && brackets.length > 0) {\n        brackets.push(\"}\");\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop();\n      }\n      if (brackets.length === 0) {\n        if (type === \";\") {\n          node2.source.end = this.getPosition(token[2]);\n          node2.source.end.offset++;\n          this.semicolon = true;\n          break;\n        } else if (type === \"{\") {\n          open = true;\n          break;\n        } else if (type === \"}\") {\n          if (params.length > 0) {\n            shift = params.length - 1;\n            prev = params[shift];\n            while (prev && prev[0] === \"space\") {\n              prev = params[--shift];\n            }\n            if (prev) {\n              node2.source.end = this.getPosition(prev[3] || prev[2]);\n              node2.source.end.offset++;\n            }\n          }\n          this.end(token);\n          break;\n        } else {\n          params.push(token);\n        }\n      } else {\n        params.push(token);\n      }\n      if (this.tokenizer.endOfFile()) {\n        last = true;\n        break;\n      }\n    }\n    node2.raws.between = this.spacesAndCommentsFromEnd(params);\n    if (params.length) {\n      node2.raws.afterName = this.spacesAndCommentsFromStart(params);\n      this.raw(node2, \"params\", params);\n      if (last) {\n        token = params[params.length - 1];\n        node2.source.end = this.getPosition(token[3] || token[2]);\n        node2.source.end.offset++;\n        this.spaces = node2.raws.between;\n        node2.raws.between = \"\";\n      }\n    } else {\n      node2.raws.afterName = \"\";\n      node2.params = \"\";\n    }\n    if (open) {\n      node2.nodes = [];\n      this.current = node2;\n    }\n  }\n  checkMissedSemicolon(tokens) {\n    let colon = this.colon(tokens);\n    if (colon === false) return;\n    let founded = 0;\n    let token;\n    for (let j = colon - 1; j >= 0; j--) {\n      token = tokens[j];\n      if (token[0] !== \"space\") {\n        founded += 1;\n        if (founded === 2) break;\n      }\n    }\n    throw this.input.error(\n      \"Missed semicolon\",\n      token[0] === \"word\" ? token[3] + 1 : token[2]\n    );\n  }\n  colon(tokens) {\n    let brackets = 0;\n    let token, type, prev;\n    for (let [i2, element] of tokens.entries()) {\n      token = element;\n      type = token[0];\n      if (type === \"(\") {\n        brackets += 1;\n      }\n      if (type === \")\") {\n        brackets -= 1;\n      }\n      if (brackets === 0 && type === \":\") {\n        if (!prev) {\n          this.doubleColon(token);\n        } else if (prev[0] === \"word\" && prev[1] === \"progid\") {\n          continue;\n        } else {\n          return i2;\n        }\n      }\n      prev = token;\n    }\n    return false;\n  }\n  comment(token) {\n    let node2 = new Comment$2();\n    this.init(node2, token[2]);\n    node2.source.end = this.getPosition(token[3] || token[2]);\n    node2.source.end.offset++;\n    let text = token[1].slice(2, -2);\n    if (/^\\s*$/.test(text)) {\n      node2.text = \"\";\n      node2.raws.left = text;\n      node2.raws.right = \"\";\n    } else {\n      let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/);\n      node2.text = match[2];\n      node2.raws.left = match[1];\n      node2.raws.right = match[3];\n    }\n  }\n  createTokenizer() {\n    this.tokenizer = tokenizer22(this.input);\n  }\n  decl(tokens, customProperty) {\n    let node2 = new Declaration$2();\n    this.init(node2, tokens[0][2]);\n    let last = tokens[tokens.length - 1];\n    if (last[0] === \";\") {\n      this.semicolon = true;\n      tokens.pop();\n    }\n    node2.source.end = this.getPosition(\n      last[3] || last[2] || findLastWithPosition(tokens)\n    );\n    node2.source.end.offset++;\n    while (tokens[0][0] !== \"word\") {\n      if (tokens.length === 1) this.unknownWord(tokens);\n      node2.raws.before += tokens.shift()[1];\n    }\n    node2.source.start = this.getPosition(tokens[0][2]);\n    node2.prop = \"\";\n    while (tokens.length) {\n      let type = tokens[0][0];\n      if (type === \":\" || type === \"space\" || type === \"comment\") {\n        break;\n      }\n      node2.prop += tokens.shift()[1];\n    }\n    node2.raws.between = \"\";\n    let token;\n    while (tokens.length) {\n      token = tokens.shift();\n      if (token[0] === \":\") {\n        node2.raws.between += token[1];\n        break;\n      } else {\n        if (token[0] === \"word\" && /\\w/.test(token[1])) {\n          this.unknownWord([token]);\n        }\n        node2.raws.between += token[1];\n      }\n    }\n    if (node2.prop[0] === \"_\" || node2.prop[0] === \"*\") {\n      node2.raws.before += node2.prop[0];\n      node2.prop = node2.prop.slice(1);\n    }\n    let firstSpaces = [];\n    let next;\n    while (tokens.length) {\n      next = tokens[0][0];\n      if (next !== \"space\" && next !== \"comment\") break;\n      firstSpaces.push(tokens.shift());\n    }\n    this.precheckMissedSemicolon(tokens);\n    for (let i2 = tokens.length - 1; i2 >= 0; i2--) {\n      token = tokens[i2];\n      if (token[1].toLowerCase() === \"!important\") {\n        node2.important = true;\n        let string = this.stringFrom(tokens, i2);\n        string = this.spacesFromEnd(tokens) + string;\n        if (string !== \" !important\") node2.raws.important = string;\n        break;\n      } else if (token[1].toLowerCase() === \"important\") {\n        let cache = tokens.slice(0);\n        let str = \"\";\n        for (let j = i2; j > 0; j--) {\n          let type = cache[j][0];\n          if (str.trim().indexOf(\"!\") === 0 && type !== \"space\") {\n            break;\n          }\n          str = cache.pop()[1] + str;\n        }\n        if (str.trim().indexOf(\"!\") === 0) {\n          node2.important = true;\n          node2.raws.important = str;\n          tokens = cache;\n        }\n      }\n      if (token[0] !== \"space\" && token[0] !== \"comment\") {\n        break;\n      }\n    }\n    let hasWord = tokens.some((i2) => i2[0] !== \"space\" && i2[0] !== \"comment\");\n    if (hasWord) {\n      node2.raws.between += firstSpaces.map((i2) => i2[1]).join(\"\");\n      firstSpaces = [];\n    }\n    this.raw(node2, \"value\", firstSpaces.concat(tokens), customProperty);\n    if (node2.value.includes(\":\") && !customProperty) {\n      this.checkMissedSemicolon(tokens);\n    }\n  }\n  doubleColon(token) {\n    throw this.input.error(\n      \"Double colon\",\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    );\n  }\n  emptyRule(token) {\n    let node2 = new Rule$2();\n    this.init(node2, token[2]);\n    node2.selector = \"\";\n    node2.raws.between = \"\";\n    this.current = node2;\n  }\n  end(token) {\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon;\n    }\n    this.semicolon = false;\n    this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n    this.spaces = \"\";\n    if (this.current.parent) {\n      this.current.source.end = this.getPosition(token[2]);\n      this.current.source.end.offset++;\n      this.current = this.current.parent;\n    } else {\n      this.unexpectedClose(token);\n    }\n  }\n  endFile() {\n    if (this.current.parent) this.unclosedBlock();\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon;\n    }\n    this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n    this.root.source.end = this.getPosition(this.tokenizer.position());\n  }\n  freeSemicolon(token) {\n    this.spaces += token[1];\n    if (this.current.nodes) {\n      let prev = this.current.nodes[this.current.nodes.length - 1];\n      if (prev && prev.type === \"rule\" && !prev.raws.ownSemicolon) {\n        prev.raws.ownSemicolon = this.spaces;\n        this.spaces = \"\";\n      }\n    }\n  }\n  // Helpers\n  getPosition(offset) {\n    let pos = this.input.fromOffset(offset);\n    return {\n      column: pos.col,\n      line: pos.line,\n      offset\n    };\n  }\n  init(node2, offset) {\n    this.current.push(node2);\n    node2.source = {\n      input: this.input,\n      start: this.getPosition(offset)\n    };\n    node2.raws.before = this.spaces;\n    this.spaces = \"\";\n    if (node2.type !== \"comment\") this.semicolon = false;\n  }\n  other(start) {\n    let end = false;\n    let type = null;\n    let colon = false;\n    let bracket = null;\n    let brackets = [];\n    let customProperty = start[1].startsWith(\"--\");\n    let tokens = [];\n    let token = start;\n    while (token) {\n      type = token[0];\n      tokens.push(token);\n      if (type === \"(\" || type === \"[\") {\n        if (!bracket) bracket = token;\n        brackets.push(type === \"(\" ? \")\" : \"]\");\n      } else if (customProperty && colon && type === \"{\") {\n        if (!bracket) bracket = token;\n        brackets.push(\"}\");\n      } else if (brackets.length === 0) {\n        if (type === \";\") {\n          if (colon) {\n            this.decl(tokens, customProperty);\n            return;\n          } else {\n            break;\n          }\n        } else if (type === \"{\") {\n          this.rule(tokens);\n          return;\n        } else if (type === \"}\") {\n          this.tokenizer.back(tokens.pop());\n          end = true;\n          break;\n        } else if (type === \":\") {\n          colon = true;\n        }\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop();\n        if (brackets.length === 0) bracket = null;\n      }\n      token = this.tokenizer.nextToken();\n    }\n    if (this.tokenizer.endOfFile()) end = true;\n    if (brackets.length > 0) this.unclosedBracket(bracket);\n    if (end && colon) {\n      if (!customProperty) {\n        while (tokens.length) {\n          token = tokens[tokens.length - 1][0];\n          if (token !== \"space\" && token !== \"comment\") break;\n          this.tokenizer.back(tokens.pop());\n        }\n      }\n      this.decl(tokens, customProperty);\n    } else {\n      this.unknownWord(tokens);\n    }\n  }\n  parse() {\n    let token;\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken();\n      switch (token[0]) {\n        case \"space\":\n          this.spaces += token[1];\n          break;\n        case \";\":\n          this.freeSemicolon(token);\n          break;\n        case \"}\":\n          this.end(token);\n          break;\n        case \"comment\":\n          this.comment(token);\n          break;\n        case \"at-word\":\n          this.atrule(token);\n          break;\n        case \"{\":\n          this.emptyRule(token);\n          break;\n        default:\n          this.other(token);\n          break;\n      }\n    }\n    this.endFile();\n  }\n  precheckMissedSemicolon() {\n  }\n  raw(node2, prop, tokens, customProperty) {\n    let token, type;\n    let length = tokens.length;\n    let value = \"\";\n    let clean = true;\n    let next, prev;\n    for (let i2 = 0; i2 < length; i2 += 1) {\n      token = tokens[i2];\n      type = token[0];\n      if (type === \"space\" && i2 === length - 1 && !customProperty) {\n        clean = false;\n      } else if (type === \"comment\") {\n        prev = tokens[i2 - 1] ? tokens[i2 - 1][0] : \"empty\";\n        next = tokens[i2 + 1] ? tokens[i2 + 1][0] : \"empty\";\n        if (!SAFE_COMMENT_NEIGHBOR[prev] && !SAFE_COMMENT_NEIGHBOR[next]) {\n          if (value.slice(-1) === \",\") {\n            clean = false;\n          } else {\n            value += token[1];\n          }\n        } else {\n          clean = false;\n        }\n      } else {\n        value += token[1];\n      }\n    }\n    if (!clean) {\n      let raw = tokens.reduce((all, i2) => all + i2[1], \"\");\n      node2.raws[prop] = { raw, value };\n    }\n    node2[prop] = value;\n  }\n  rule(tokens) {\n    tokens.pop();\n    let node2 = new Rule$2();\n    this.init(node2, tokens[0][2]);\n    node2.raws.between = this.spacesAndCommentsFromEnd(tokens);\n    this.raw(node2, \"selector\", tokens);\n    this.current = node2;\n  }\n  spacesAndCommentsFromEnd(tokens) {\n    let lastTokenType;\n    let spaces = \"\";\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0];\n      if (lastTokenType !== \"space\" && lastTokenType !== \"comment\") break;\n      spaces = tokens.pop()[1] + spaces;\n    }\n    return spaces;\n  }\n  // Errors\n  spacesAndCommentsFromStart(tokens) {\n    let next;\n    let spaces = \"\";\n    while (tokens.length) {\n      next = tokens[0][0];\n      if (next !== \"space\" && next !== \"comment\") break;\n      spaces += tokens.shift()[1];\n    }\n    return spaces;\n  }\n  spacesFromEnd(tokens) {\n    let lastTokenType;\n    let spaces = \"\";\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0];\n      if (lastTokenType !== \"space\") break;\n      spaces = tokens.pop()[1] + spaces;\n    }\n    return spaces;\n  }\n  stringFrom(tokens, from) {\n    let result2 = \"\";\n    for (let i2 = from; i2 < tokens.length; i2++) {\n      result2 += tokens[i2][1];\n    }\n    tokens.splice(from, tokens.length - from);\n    return result2;\n  }\n  unclosedBlock() {\n    let pos = this.current.source.start;\n    throw this.input.error(\"Unclosed block\", pos.line, pos.column);\n  }\n  unclosedBracket(bracket) {\n    throw this.input.error(\n      \"Unclosed bracket\",\n      { offset: bracket[2] },\n      { offset: bracket[2] + 1 }\n    );\n  }\n  unexpectedClose(token) {\n    throw this.input.error(\n      \"Unexpected }\",\n      { offset: token[2] },\n      { offset: token[2] + 1 }\n    );\n  }\n  unknownWord(tokens) {\n    throw this.input.error(\n      \"Unknown word\",\n      { offset: tokens[0][2] },\n      { offset: tokens[0][2] + tokens[0][1].length }\n    );\n  }\n  unnamedAtrule(node2, token) {\n    throw this.input.error(\n      \"At-rule without name\",\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    );\n  }\n};\nvar parser = Parser$1;\nlet Container$2 = container;\nlet Parser22 = parser;\nlet Input$2 = input;\nfunction parse$3(css, opts) {\n  let input2 = new Input$2(css, opts);\n  let parser2 = new Parser22(input2);\n  try {\n    parser2.parse();\n  } catch (e2) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (e2.name === \"CssSyntaxError\" && opts && opts.from) {\n        if (/\\.scss$/i.test(opts.from)) {\n          e2.message += \"\\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser\";\n        } else if (/\\.sass/i.test(opts.from)) {\n          e2.message += \"\\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser\";\n        } else if (/\\.less$/i.test(opts.from)) {\n          e2.message += \"\\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser\";\n        }\n      }\n    }\n    throw e2;\n  }\n  return parser2.root;\n}\nvar parse_1 = parse$3;\nparse$3.default = parse$3;\nContainer$2.registerParse(parse$3);\nlet { isClean, my } = symbols;\nlet MapGenerator$1 = mapGenerator;\nlet stringify$2 = stringify_1;\nlet Container$1 = container;\nlet Document$2 = document$1;\nlet warnOnce$1 = warnOnce$2;\nlet Result$2 = result;\nlet parse$2 = parse_1;\nlet Root$3 = root;\nconst TYPE_TO_CLASS_NAME = {\n  atrule: \"AtRule\",\n  comment: \"Comment\",\n  decl: \"Declaration\",\n  document: \"Document\",\n  root: \"Root\",\n  rule: \"Rule\"\n};\nconst PLUGIN_PROPS = {\n  AtRule: true,\n  AtRuleExit: true,\n  Comment: true,\n  CommentExit: true,\n  Declaration: true,\n  DeclarationExit: true,\n  Document: true,\n  DocumentExit: true,\n  Once: true,\n  OnceExit: true,\n  postcssPlugin: true,\n  prepare: true,\n  Root: true,\n  RootExit: true,\n  Rule: true,\n  RuleExit: true\n};\nconst NOT_VISITORS = {\n  Once: true,\n  postcssPlugin: true,\n  prepare: true\n};\nconst CHILDREN = 0;\nfunction isPromise(obj) {\n  return typeof obj === \"object\" && typeof obj.then === \"function\";\n}\nfunction getEvents(node2) {\n  let key = false;\n  let type = TYPE_TO_CLASS_NAME[node2.type];\n  if (node2.type === \"decl\") {\n    key = node2.prop.toLowerCase();\n  } else if (node2.type === \"atrule\") {\n    key = node2.name.toLowerCase();\n  }\n  if (key && node2.append) {\n    return [\n      type,\n      type + \"-\" + key,\n      CHILDREN,\n      type + \"Exit\",\n      type + \"Exit-\" + key\n    ];\n  } else if (key) {\n    return [type, type + \"-\" + key, type + \"Exit\", type + \"Exit-\" + key];\n  } else if (node2.append) {\n    return [type, CHILDREN, type + \"Exit\"];\n  } else {\n    return [type, type + \"Exit\"];\n  }\n}\nfunction toStack(node2) {\n  let events;\n  if (node2.type === \"document\") {\n    events = [\"Document\", CHILDREN, \"DocumentExit\"];\n  } else if (node2.type === \"root\") {\n    events = [\"Root\", CHILDREN, \"RootExit\"];\n  } else {\n    events = getEvents(node2);\n  }\n  return {\n    eventIndex: 0,\n    events,\n    iterator: 0,\n    node: node2,\n    visitorIndex: 0,\n    visitors: []\n  };\n}\nfunction cleanMarks(node2) {\n  node2[isClean] = false;\n  if (node2.nodes) node2.nodes.forEach((i2) => cleanMarks(i2));\n  return node2;\n}\nlet postcss$2 = {};\nlet LazyResult$2 = class LazyResult2 {\n  constructor(processor2, css, opts) {\n    this.stringified = false;\n    this.processed = false;\n    let root2;\n    if (typeof css === \"object\" && css !== null && (css.type === \"root\" || css.type === \"document\")) {\n      root2 = cleanMarks(css);\n    } else if (css instanceof LazyResult2 || css instanceof Result$2) {\n      root2 = cleanMarks(css.root);\n      if (css.map) {\n        if (typeof opts.map === \"undefined\") opts.map = {};\n        if (!opts.map.inline) opts.map.inline = false;\n        opts.map.prev = css.map;\n      }\n    } else {\n      let parser2 = parse$2;\n      if (opts.syntax) parser2 = opts.syntax.parse;\n      if (opts.parser) parser2 = opts.parser;\n      if (parser2.parse) parser2 = parser2.parse;\n      try {\n        root2 = parser2(css, opts);\n      } catch (error) {\n        this.processed = true;\n        this.error = error;\n      }\n      if (root2 && !root2[my]) {\n        Container$1.rebuild(root2);\n      }\n    }\n    this.result = new Result$2(processor2, root2, opts);\n    this.helpers = { ...postcss$2, postcss: postcss$2, result: this.result };\n    this.plugins = this.processor.plugins.map((plugin22) => {\n      if (typeof plugin22 === \"object\" && plugin22.prepare) {\n        return { ...plugin22, ...plugin22.prepare(this.result) };\n      } else {\n        return plugin22;\n      }\n    });\n  }\n  async() {\n    if (this.error) return Promise.reject(this.error);\n    if (this.processed) return Promise.resolve(this.result);\n    if (!this.processing) {\n      this.processing = this.runAsync();\n    }\n    return this.processing;\n  }\n  catch(onRejected) {\n    return this.async().catch(onRejected);\n  }\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally);\n  }\n  getAsyncError() {\n    throw new Error(\"Use process(css).then(cb) to work with async plugins\");\n  }\n  handleError(error, node2) {\n    let plugin22 = this.result.lastPlugin;\n    try {\n      if (node2) node2.addToError(error);\n      this.error = error;\n      if (error.name === \"CssSyntaxError\" && !error.plugin) {\n        error.plugin = plugin22.postcssPlugin;\n        error.setMessage();\n      } else if (plugin22.postcssVersion) {\n        if (process.env.NODE_ENV !== \"production\") {\n          let pluginName = plugin22.postcssPlugin;\n          let pluginVer = plugin22.postcssVersion;\n          let runtimeVer = this.result.processor.version;\n          let a2 = pluginVer.split(\".\");\n          let b = runtimeVer.split(\".\");\n          if (a2[0] !== b[0] || parseInt(a2[1]) > parseInt(b[1])) {\n            console.error(\n              \"Unknown error from PostCSS plugin. Your current PostCSS version is \" + runtimeVer + \", but \" + pluginName + \" uses \" + pluginVer + \". Perhaps this is the source of the error below.\"\n            );\n          }\n        }\n      }\n    } catch (err) {\n      if (console && console.error) console.error(err);\n    }\n    return error;\n  }\n  prepareVisitors() {\n    this.listeners = {};\n    let add = (plugin22, type, cb) => {\n      if (!this.listeners[type]) this.listeners[type] = [];\n      this.listeners[type].push([plugin22, cb]);\n    };\n    for (let plugin22 of this.plugins) {\n      if (typeof plugin22 === \"object\") {\n        for (let event in plugin22) {\n          if (!PLUGIN_PROPS[event] && /^[A-Z]/.test(event)) {\n            throw new Error(\n              `Unknown event ${event} in ${plugin22.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`\n            );\n          }\n          if (!NOT_VISITORS[event]) {\n            if (typeof plugin22[event] === \"object\") {\n              for (let filter in plugin22[event]) {\n                if (filter === \"*\") {\n                  add(plugin22, event, plugin22[event][filter]);\n                } else {\n                  add(\n                    plugin22,\n                    event + \"-\" + filter.toLowerCase(),\n                    plugin22[event][filter]\n                  );\n                }\n              }\n            } else if (typeof plugin22[event] === \"function\") {\n              add(plugin22, event, plugin22[event]);\n            }\n          }\n        }\n      }\n    }\n    this.hasListener = Object.keys(this.listeners).length > 0;\n  }\n  async runAsync() {\n    this.plugin = 0;\n    for (let i2 = 0; i2 < this.plugins.length; i2++) {\n      let plugin22 = this.plugins[i2];\n      let promise = this.runOnRoot(plugin22);\n      if (isPromise(promise)) {\n        try {\n          await promise;\n        } catch (error) {\n          throw this.handleError(error);\n        }\n      }\n    }\n    this.prepareVisitors();\n    if (this.hasListener) {\n      let root2 = this.result.root;\n      while (!root2[isClean]) {\n        root2[isClean] = true;\n        let stack = [toStack(root2)];\n        while (stack.length > 0) {\n          let promise = this.visitTick(stack);\n          if (isPromise(promise)) {\n            try {\n              await promise;\n            } catch (e2) {\n              let node2 = stack[stack.length - 1].node;\n              throw this.handleError(e2, node2);\n            }\n          }\n        }\n      }\n      if (this.listeners.OnceExit) {\n        for (let [plugin22, visitor] of this.listeners.OnceExit) {\n          this.result.lastPlugin = plugin22;\n          try {\n            if (root2.type === \"document\") {\n              let roots = root2.nodes.map(\n                (subRoot) => visitor(subRoot, this.helpers)\n              );\n              await Promise.all(roots);\n            } else {\n              await visitor(root2, this.helpers);\n            }\n          } catch (e2) {\n            throw this.handleError(e2);\n          }\n        }\n      }\n    }\n    this.processed = true;\n    return this.stringify();\n  }\n  runOnRoot(plugin22) {\n    this.result.lastPlugin = plugin22;\n    try {\n      if (typeof plugin22 === \"object\" && plugin22.Once) {\n        if (this.result.root.type === \"document\") {\n          let roots = this.result.root.nodes.map(\n            (root2) => plugin22.Once(root2, this.helpers)\n          );\n          if (isPromise(roots[0])) {\n            return Promise.all(roots);\n          }\n          return roots;\n        }\n        return plugin22.Once(this.result.root, this.helpers);\n      } else if (typeof plugin22 === \"function\") {\n        return plugin22(this.result.root, this.result);\n      }\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n  stringify() {\n    if (this.error) throw this.error;\n    if (this.stringified) return this.result;\n    this.stringified = true;\n    this.sync();\n    let opts = this.result.opts;\n    let str = stringify$2;\n    if (opts.syntax) str = opts.syntax.stringify;\n    if (opts.stringifier) str = opts.stringifier;\n    if (str.stringify) str = str.stringify;\n    let map = new MapGenerator$1(str, this.result.root, this.result.opts);\n    let data = map.generate();\n    this.result.css = data[0];\n    this.result.map = data[1];\n    return this.result;\n  }\n  sync() {\n    if (this.error) throw this.error;\n    if (this.processed) return this.result;\n    this.processed = true;\n    if (this.processing) {\n      throw this.getAsyncError();\n    }\n    for (let plugin22 of this.plugins) {\n      let promise = this.runOnRoot(plugin22);\n      if (isPromise(promise)) {\n        throw this.getAsyncError();\n      }\n    }\n    this.prepareVisitors();\n    if (this.hasListener) {\n      let root2 = this.result.root;\n      while (!root2[isClean]) {\n        root2[isClean] = true;\n        this.walkSync(root2);\n      }\n      if (this.listeners.OnceExit) {\n        if (root2.type === \"document\") {\n          for (let subRoot of root2.nodes) {\n            this.visitSync(this.listeners.OnceExit, subRoot);\n          }\n        } else {\n          this.visitSync(this.listeners.OnceExit, root2);\n        }\n      }\n    }\n    return this.result;\n  }\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!(\"from\" in this.opts)) {\n        warnOnce$1(\n          \"Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.\"\n        );\n      }\n    }\n    return this.async().then(onFulfilled, onRejected);\n  }\n  toString() {\n    return this.css;\n  }\n  visitSync(visitors, node2) {\n    for (let [plugin22, visitor] of visitors) {\n      this.result.lastPlugin = plugin22;\n      let promise;\n      try {\n        promise = visitor(node2, this.helpers);\n      } catch (e2) {\n        throw this.handleError(e2, node2.proxyOf);\n      }\n      if (node2.type !== \"root\" && node2.type !== \"document\" && !node2.parent) {\n        return true;\n      }\n      if (isPromise(promise)) {\n        throw this.getAsyncError();\n      }\n    }\n  }\n  visitTick(stack) {\n    let visit2 = stack[stack.length - 1];\n    let { node: node2, visitors } = visit2;\n    if (node2.type !== \"root\" && node2.type !== \"document\" && !node2.parent) {\n      stack.pop();\n      return;\n    }\n    if (visitors.length > 0 && visit2.visitorIndex < visitors.length) {\n      let [plugin22, visitor] = visitors[visit2.visitorIndex];\n      visit2.visitorIndex += 1;\n      if (visit2.visitorIndex === visitors.length) {\n        visit2.visitors = [];\n        visit2.visitorIndex = 0;\n      }\n      this.result.lastPlugin = plugin22;\n      try {\n        return visitor(node2.toProxy(), this.helpers);\n      } catch (e2) {\n        throw this.handleError(e2, node2);\n      }\n    }\n    if (visit2.iterator !== 0) {\n      let iterator = visit2.iterator;\n      let child;\n      while (child = node2.nodes[node2.indexes[iterator]]) {\n        node2.indexes[iterator] += 1;\n        if (!child[isClean]) {\n          child[isClean] = true;\n          stack.push(toStack(child));\n          return;\n        }\n      }\n      visit2.iterator = 0;\n      delete node2.indexes[iterator];\n    }\n    let events = visit2.events;\n    while (visit2.eventIndex < events.length) {\n      let event = events[visit2.eventIndex];\n      visit2.eventIndex += 1;\n      if (event === CHILDREN) {\n        if (node2.nodes && node2.nodes.length) {\n          node2[isClean] = true;\n          visit2.iterator = node2.getIterator();\n        }\n        return;\n      } else if (this.listeners[event]) {\n        visit2.visitors = this.listeners[event];\n        return;\n      }\n    }\n    stack.pop();\n  }\n  walkSync(node2) {\n    node2[isClean] = true;\n    let events = getEvents(node2);\n    for (let event of events) {\n      if (event === CHILDREN) {\n        if (node2.nodes) {\n          node2.each((child) => {\n            if (!child[isClean]) this.walkSync(child);\n          });\n        }\n      } else {\n        let visitors = this.listeners[event];\n        if (visitors) {\n          if (this.visitSync(visitors, node2.toProxy())) return;\n        }\n      }\n    }\n  }\n  warnings() {\n    return this.sync().warnings();\n  }\n  get content() {\n    return this.stringify().content;\n  }\n  get css() {\n    return this.stringify().css;\n  }\n  get map() {\n    return this.stringify().map;\n  }\n  get messages() {\n    return this.sync().messages;\n  }\n  get opts() {\n    return this.result.opts;\n  }\n  get processor() {\n    return this.result.processor;\n  }\n  get root() {\n    return this.sync().root;\n  }\n  get [Symbol.toStringTag]() {\n    return \"LazyResult\";\n  }\n};\nLazyResult$2.registerPostcss = (dependant) => {\n  postcss$2 = dependant;\n};\nvar lazyResult = LazyResult$2;\nLazyResult$2.default = LazyResult$2;\nRoot$3.registerLazyResult(LazyResult$2);\nDocument$2.registerLazyResult(LazyResult$2);\nlet MapGenerator22 = mapGenerator;\nlet stringify$1 = stringify_1;\nlet warnOnce22 = warnOnce$2;\nlet parse$1 = parse_1;\nconst Result$1 = result;\nlet NoWorkResult$1 = class NoWorkResult2 {\n  constructor(processor2, css, opts) {\n    css = css.toString();\n    this.stringified = false;\n    this._processor = processor2;\n    this._css = css;\n    this._opts = opts;\n    this._map = void 0;\n    let root2;\n    let str = stringify$1;\n    this.result = new Result$1(this._processor, root2, this._opts);\n    this.result.css = css;\n    let self = this;\n    Object.defineProperty(this.result, \"root\", {\n      get() {\n        return self.root;\n      }\n    });\n    let map = new MapGenerator22(str, root2, this._opts, css);\n    if (map.isMap()) {\n      let [generatedCSS, generatedMap] = map.generate();\n      if (generatedCSS) {\n        this.result.css = generatedCSS;\n      }\n      if (generatedMap) {\n        this.result.map = generatedMap;\n      }\n    } else {\n      map.clearAnnotation();\n      this.result.css = map.css;\n    }\n  }\n  async() {\n    if (this.error) return Promise.reject(this.error);\n    return Promise.resolve(this.result);\n  }\n  catch(onRejected) {\n    return this.async().catch(onRejected);\n  }\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally);\n  }\n  sync() {\n    if (this.error) throw this.error;\n    return this.result;\n  }\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!(\"from\" in this._opts)) {\n        warnOnce22(\n          \"Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.\"\n        );\n      }\n    }\n    return this.async().then(onFulfilled, onRejected);\n  }\n  toString() {\n    return this._css;\n  }\n  warnings() {\n    return [];\n  }\n  get content() {\n    return this.result.css;\n  }\n  get css() {\n    return this.result.css;\n  }\n  get map() {\n    return this.result.map;\n  }\n  get messages() {\n    return [];\n  }\n  get opts() {\n    return this.result.opts;\n  }\n  get processor() {\n    return this.result.processor;\n  }\n  get root() {\n    if (this._root) {\n      return this._root;\n    }\n    let root2;\n    let parser2 = parse$1;\n    try {\n      root2 = parser2(this._css, this._opts);\n    } catch (error) {\n      this.error = error;\n    }\n    if (this.error) {\n      throw this.error;\n    } else {\n      this._root = root2;\n      return root2;\n    }\n  }\n  get [Symbol.toStringTag]() {\n    return \"NoWorkResult\";\n  }\n};\nvar noWorkResult = NoWorkResult$1;\nNoWorkResult$1.default = NoWorkResult$1;\nlet NoWorkResult22 = noWorkResult;\nlet LazyResult$1 = lazyResult;\nlet Document$1 = document$1;\nlet Root$2 = root;\nlet Processor$1 = class Processor2 {\n  constructor(plugins = []) {\n    this.version = \"8.4.38\";\n    this.plugins = this.normalize(plugins);\n  }\n  normalize(plugins) {\n    let normalized = [];\n    for (let i2 of plugins) {\n      if (i2.postcss === true) {\n        i2 = i2();\n      } else if (i2.postcss) {\n        i2 = i2.postcss;\n      }\n      if (typeof i2 === \"object\" && Array.isArray(i2.plugins)) {\n        normalized = normalized.concat(i2.plugins);\n      } else if (typeof i2 === \"object\" && i2.postcssPlugin) {\n        normalized.push(i2);\n      } else if (typeof i2 === \"function\") {\n        normalized.push(i2);\n      } else if (typeof i2 === \"object\" && (i2.parse || i2.stringify)) {\n        if (process.env.NODE_ENV !== \"production\") {\n          throw new Error(\n            \"PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.\"\n          );\n        }\n      } else {\n        throw new Error(i2 + \" is not a PostCSS plugin\");\n      }\n    }\n    return normalized;\n  }\n  process(css, opts = {}) {\n    if (!this.plugins.length && !opts.parser && !opts.stringifier && !opts.syntax) {\n      return new NoWorkResult22(this, css, opts);\n    } else {\n      return new LazyResult$1(this, css, opts);\n    }\n  }\n  use(plugin22) {\n    this.plugins = this.plugins.concat(this.normalize([plugin22]));\n    return this;\n  }\n};\nvar processor = Processor$1;\nProcessor$1.default = Processor$1;\nRoot$2.registerProcessor(Processor$1);\nDocument$1.registerProcessor(Processor$1);\nlet Declaration$1 = declaration;\nlet PreviousMap22 = previousMap;\nlet Comment$1 = comment;\nlet AtRule$1 = atRule;\nlet Input$1 = input;\nlet Root$1 = root;\nlet Rule$1 = rule;\nfunction fromJSON$1(json, inputs) {\n  if (Array.isArray(json)) return json.map((n2) => fromJSON$1(n2));\n  let { inputs: ownInputs, ...defaults } = json;\n  if (ownInputs) {\n    inputs = [];\n    for (let input2 of ownInputs) {\n      let inputHydrated = { ...input2, __proto__: Input$1.prototype };\n      if (inputHydrated.map) {\n        inputHydrated.map = {\n          ...inputHydrated.map,\n          __proto__: PreviousMap22.prototype\n        };\n      }\n      inputs.push(inputHydrated);\n    }\n  }\n  if (defaults.nodes) {\n    defaults.nodes = json.nodes.map((n2) => fromJSON$1(n2, inputs));\n  }\n  if (defaults.source) {\n    let { inputId, ...source } = defaults.source;\n    defaults.source = source;\n    if (inputId != null) {\n      defaults.source.input = inputs[inputId];\n    }\n  }\n  if (defaults.type === \"root\") {\n    return new Root$1(defaults);\n  } else if (defaults.type === \"decl\") {\n    return new Declaration$1(defaults);\n  } else if (defaults.type === \"rule\") {\n    return new Rule$1(defaults);\n  } else if (defaults.type === \"comment\") {\n    return new Comment$1(defaults);\n  } else if (defaults.type === \"atrule\") {\n    return new AtRule$1(defaults);\n  } else {\n    throw new Error(\"Unknown node type: \" + json.type);\n  }\n}\nvar fromJSON_1 = fromJSON$1;\nfromJSON$1.default = fromJSON$1;\nlet CssSyntaxError22 = cssSyntaxError;\nlet Declaration22 = declaration;\nlet LazyResult22 = lazyResult;\nlet Container22 = container;\nlet Processor22 = processor;\nlet stringify$6 = stringify_1;\nlet fromJSON = fromJSON_1;\nlet Document222 = document$1;\nlet Warning22 = warning;\nlet Comment22 = comment;\nlet AtRule22 = atRule;\nlet Result22 = result;\nlet Input22 = input;\nlet parse = parse_1;\nlet list = list_1;\nlet Rule22 = rule;\nlet Root22 = root;\nlet Node22 = node;\nfunction postcss(...plugins) {\n  if (plugins.length === 1 && Array.isArray(plugins[0])) {\n    plugins = plugins[0];\n  }\n  return new Processor22(plugins);\n}\npostcss.plugin = function plugin2(name, initializer) {\n  let warningPrinted = false;\n  function creator(...args) {\n    if (console && console.warn && !warningPrinted) {\n      warningPrinted = true;\n      console.warn(\n        name + \": postcss.plugin was deprecated. Migration guide:\\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration\"\n      );\n      if (process.env.LANG && process.env.LANG.startsWith(\"cn\")) {\n        console.warn(\n          name + \": 里面 postcss.plugin 被弃用. 迁移指南:\\nhttps://www.w3ctech.com/topic/2226\"\n        );\n      }\n    }\n    let transformer = initializer(...args);\n    transformer.postcssPlugin = name;\n    transformer.postcssVersion = new Processor22().version;\n    return transformer;\n  }\n  let cache;\n  Object.defineProperty(creator, \"postcss\", {\n    get() {\n      if (!cache) cache = creator();\n      return cache;\n    }\n  });\n  creator.process = function(css, processOpts, pluginOpts) {\n    return postcss([creator(pluginOpts)]).process(css, processOpts);\n  };\n  return creator;\n};\npostcss.stringify = stringify$6;\npostcss.parse = parse;\npostcss.fromJSON = fromJSON;\npostcss.list = list;\npostcss.comment = (defaults) => new Comment22(defaults);\npostcss.atRule = (defaults) => new AtRule22(defaults);\npostcss.decl = (defaults) => new Declaration22(defaults);\npostcss.rule = (defaults) => new Rule22(defaults);\npostcss.root = (defaults) => new Root22(defaults);\npostcss.document = (defaults) => new Document222(defaults);\npostcss.CssSyntaxError = CssSyntaxError22;\npostcss.Declaration = Declaration22;\npostcss.Container = Container22;\npostcss.Processor = Processor22;\npostcss.Document = Document222;\npostcss.Comment = Comment22;\npostcss.Warning = Warning22;\npostcss.AtRule = AtRule22;\npostcss.Result = Result22;\npostcss.Input = Input22;\npostcss.Rule = Rule22;\npostcss.Root = Root22;\npostcss.Node = Node22;\nLazyResult22.registerPostcss(postcss);\nvar postcss_1 = postcss;\npostcss.default = postcss;\nconst postcss$1 = /* @__PURE__ */ getDefaultExportFromCjs(postcss_1);\npostcss$1.stringify;\npostcss$1.fromJSON;\npostcss$1.plugin;\npostcss$1.parse;\npostcss$1.list;\npostcss$1.document;\npostcss$1.comment;\npostcss$1.atRule;\npostcss$1.rule;\npostcss$1.decl;\npostcss$1.root;\npostcss$1.CssSyntaxError;\npostcss$1.Declaration;\npostcss$1.Container;\npostcss$1.Processor;\npostcss$1.Document;\npostcss$1.Comment;\npostcss$1.Warning;\npostcss$1.AtRule;\npostcss$1.Result;\npostcss$1.Input;\npostcss$1.Rule;\npostcss$1.Root;\npostcss$1.Node;\nclass BaseRRNode {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-explicit-any\n  constructor(..._args) {\n    __publicField22(this, \"parentElement\", null);\n    __publicField22(this, \"parentNode\", null);\n    __publicField22(this, \"ownerDocument\");\n    __publicField22(this, \"firstChild\", null);\n    __publicField22(this, \"lastChild\", null);\n    __publicField22(this, \"previousSibling\", null);\n    __publicField22(this, \"nextSibling\", null);\n    __publicField22(this, \"ELEMENT_NODE\", 1);\n    __publicField22(this, \"TEXT_NODE\", 3);\n    __publicField22(this, \"nodeType\");\n    __publicField22(this, \"nodeName\");\n    __publicField22(this, \"RRNodeType\");\n  }\n  get childNodes() {\n    const childNodes2 = [];\n    let childIterator = this.firstChild;\n    while (childIterator) {\n      childNodes2.push(childIterator);\n      childIterator = childIterator.nextSibling;\n    }\n    return childNodes2;\n  }\n  contains(node2) {\n    if (!(node2 instanceof BaseRRNode)) return false;\n    else if (node2.ownerDocument !== this.ownerDocument) return false;\n    else if (node2 === this) return true;\n    while (node2.parentNode) {\n      if (node2.parentNode === this) return true;\n      node2 = node2.parentNode;\n    }\n    return false;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  appendChild(_newChild) {\n    throw new Error(\n      `RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.`\n    );\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  insertBefore(_newChild, _refChild) {\n    throw new Error(\n      `RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.`\n    );\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  removeChild(_node) {\n    throw new Error(\n      `RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.`\n    );\n  }\n  toString() {\n    return \"RRNode\";\n  }\n}\nconst testableAccessors = {\n  Node: [\"childNodes\", \"parentNode\", \"parentElement\", \"textContent\"],\n  ShadowRoot: [\"host\", \"styleSheets\"],\n  Element: [\"shadowRoot\", \"querySelector\", \"querySelectorAll\"],\n  MutationObserver: []\n};\nconst testableMethods = {\n  Node: [\"contains\", \"getRootNode\"],\n  ShadowRoot: [\"getSelection\"],\n  Element: [],\n  MutationObserver: [\"constructor\"]\n};\nconst untaintedBasePrototype = {};\nfunction angularZoneUnpatchedAlternative(key) {\n  var _a2, _b;\n  const angularUnpatchedVersionSymbol = (_b = (_a2 = globalThis == null ? void 0 : globalThis.Zone) == null ? void 0 : _a2.__symbol__) == null ? void 0 : _b.call(_a2, key);\n  if (angularUnpatchedVersionSymbol && globalThis[angularUnpatchedVersionSymbol]) {\n    return globalThis[angularUnpatchedVersionSymbol];\n  } else {\n    return void 0;\n  }\n}\nfunction getUntaintedPrototype(key) {\n  if (untaintedBasePrototype[key])\n    return untaintedBasePrototype[key];\n  const candidate = angularZoneUnpatchedAlternative(key) || globalThis[key];\n  const defaultPrototype = candidate.prototype;\n  const accessorNames = key in testableAccessors ? testableAccessors[key] : void 0;\n  const isUntaintedAccessors = Boolean(\n    accessorNames && // @ts-expect-error 2345\n    accessorNames.every(\n      (accessor) => {\n        var _a2, _b;\n        return Boolean(\n          (_b = (_a2 = Object.getOwnPropertyDescriptor(defaultPrototype, accessor)) == null ? void 0 : _a2.get) == null ? void 0 : _b.toString().includes(\"[native code]\")\n        );\n      }\n    )\n  );\n  const methodNames = key in testableMethods ? testableMethods[key] : void 0;\n  const isUntaintedMethods = Boolean(\n    methodNames && methodNames.every(\n      // @ts-expect-error 2345\n      (method) => {\n        var _a2;\n        return typeof defaultPrototype[method] === \"function\" && ((_a2 = defaultPrototype[method]) == null ? void 0 : _a2.toString().includes(\"[native code]\"));\n      }\n    )\n  );\n  if (isUntaintedAccessors && isUntaintedMethods) {\n    untaintedBasePrototype[key] = candidate.prototype;\n    return candidate.prototype;\n  }\n  try {\n    const iframeEl = document.createElement(\"iframe\");\n    document.body.appendChild(iframeEl);\n    const win = iframeEl.contentWindow;\n    if (!win) return candidate.prototype;\n    const untaintedObject = win[key].prototype;\n    document.body.removeChild(iframeEl);\n    if (!untaintedObject) return defaultPrototype;\n    return untaintedBasePrototype[key] = untaintedObject;\n  } catch {\n    return defaultPrototype;\n  }\n}\nconst untaintedAccessorCache = {};\nfunction getUntaintedAccessor(key, instance, accessor) {\n  var _a2;\n  const cacheKey = `${key}.${String(accessor)}`;\n  if (untaintedAccessorCache[cacheKey])\n    return untaintedAccessorCache[cacheKey].call(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype(key);\n  const untaintedAccessor = (_a2 = Object.getOwnPropertyDescriptor(\n    untaintedPrototype,\n    accessor\n  )) == null ? void 0 : _a2.get;\n  if (!untaintedAccessor) return instance[accessor];\n  untaintedAccessorCache[cacheKey] = untaintedAccessor;\n  return untaintedAccessor.call(instance);\n}\nconst untaintedMethodCache = {};\nfunction getUntaintedMethod(key, instance, method) {\n  const cacheKey = `${key}.${String(method)}`;\n  if (untaintedMethodCache[cacheKey])\n    return untaintedMethodCache[cacheKey].bind(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype(key);\n  const untaintedMethod = untaintedPrototype[method];\n  if (typeof untaintedMethod !== \"function\") return instance[method];\n  untaintedMethodCache[cacheKey] = untaintedMethod;\n  return untaintedMethod.bind(instance);\n}\nfunction childNodes(n2) {\n  return getUntaintedAccessor(\"Node\", n2, \"childNodes\");\n}\nfunction parentNode(n2) {\n  return getUntaintedAccessor(\"Node\", n2, \"parentNode\");\n}\nfunction parentElement(n2) {\n  return getUntaintedAccessor(\"Node\", n2, \"parentElement\");\n}\nfunction textContent(n2) {\n  return getUntaintedAccessor(\"Node\", n2, \"textContent\");\n}\nfunction contains(n2, other) {\n  return getUntaintedMethod(\"Node\", n2, \"contains\")(other);\n}\nfunction getRootNode(n2) {\n  return getUntaintedMethod(\"Node\", n2, \"getRootNode\")();\n}\nfunction host(n2) {\n  if (!n2 || !(\"host\" in n2)) return null;\n  return getUntaintedAccessor(\"ShadowRoot\", n2, \"host\");\n}\nfunction styleSheets(n2) {\n  return n2.styleSheets;\n}\nfunction shadowRoot(n2) {\n  if (!n2 || !(\"shadowRoot\" in n2)) return null;\n  return getUntaintedAccessor(\"Element\", n2, \"shadowRoot\");\n}\nfunction querySelector(n2, selectors) {\n  return getUntaintedAccessor(\"Element\", n2, \"querySelector\")(selectors);\n}\nfunction querySelectorAll(n2, selectors) {\n  return getUntaintedAccessor(\"Element\", n2, \"querySelectorAll\")(selectors);\n}\nfunction mutationObserverCtor() {\n  return getUntaintedPrototype(\"MutationObserver\").constructor;\n}\nconst index = {\n  childNodes,\n  parentNode,\n  parentElement,\n  textContent,\n  contains,\n  getRootNode,\n  host,\n  styleSheets,\n  shadowRoot,\n  querySelector,\n  querySelectorAll,\n  mutationObserver: mutationObserverCtor\n};\nfunction on(type, fn, target = document) {\n  const options = { capture: true, passive: true };\n  target.addEventListener(type, fn, options);\n  return () => target.removeEventListener(type, fn, options);\n}\nconst DEPARTED_MIRROR_ACCESS_WARNING = \"Please stop import mirror directly. Instead of that,\\r\\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\\r\\nor you can use record.mirror to access the mirror instance during recording.\";\nlet _mirror = {\n  map: {},\n  getId() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n    return -1;\n  },\n  getNode() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n    return null;\n  },\n  removeNodeFromMap() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n  },\n  has() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n    return false;\n  },\n  reset() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n  }\n};\nif (typeof window !== \"undefined\" && window.Proxy && window.Reflect) {\n  _mirror = new Proxy(_mirror, {\n    get(target, prop, receiver) {\n      if (prop === \"map\") {\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n      }\n      return Reflect.get(target, prop, receiver);\n    }\n  });\n}\nfunction throttle(func, wait, options = {}) {\n  let timeout = null;\n  let previous = 0;\n  return function(...args) {\n    const now = Date.now();\n    if (!previous && options.leading === false) {\n      previous = now;\n    }\n    const remaining = wait - (now - previous);\n    const context = this;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      func.apply(context, args);\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(() => {\n        previous = options.leading === false ? 0 : Date.now();\n        timeout = null;\n        func.apply(context, args);\n      }, remaining);\n    }\n  };\n}\nfunction hookSetter(target, key, d, isRevoked, win = window) {\n  const original = win.Object.getOwnPropertyDescriptor(target, key);\n  win.Object.defineProperty(\n    target,\n    key,\n    isRevoked ? d : {\n      set(value) {\n        setTimeout(() => {\n          d.set.call(this, value);\n        }, 0);\n        if (original && original.set) {\n          original.set.call(this, value);\n        }\n      }\n    }\n  );\n  return () => hookSetter(target, key, original || {}, true);\n}\nfunction patch(source, name, replacement) {\n  try {\n    if (!(name in source)) {\n      return () => {\n      };\n    }\n    const original = source[name];\n    const wrapped = replacement(original);\n    if (typeof wrapped === \"function\") {\n      wrapped.prototype = wrapped.prototype || {};\n      Object.defineProperties(wrapped, {\n        __rrweb_original__: {\n          enumerable: false,\n          value: original\n        }\n      });\n    }\n    source[name] = wrapped;\n    return () => {\n      source[name] = original;\n    };\n  } catch {\n    return () => {\n    };\n  }\n}\nlet nowTimestamp = Date.now;\nif (!/* @__PURE__ */ /[1-9][0-9]{12}/.test(Date.now().toString())) {\n  nowTimestamp = () => (/* @__PURE__ */ new Date()).getTime();\n}\nfunction getWindowScroll(win) {\n  var _a2, _b, _c, _d;\n  const doc = win.document;\n  return {\n    left: doc.scrollingElement ? doc.scrollingElement.scrollLeft : win.pageXOffset !== void 0 ? win.pageXOffset : doc.documentElement.scrollLeft || (doc == null ? void 0 : doc.body) && ((_a2 = index.parentElement(doc.body)) == null ? void 0 : _a2.scrollLeft) || ((_b = doc == null ? void 0 : doc.body) == null ? void 0 : _b.scrollLeft) || 0,\n    top: doc.scrollingElement ? doc.scrollingElement.scrollTop : win.pageYOffset !== void 0 ? win.pageYOffset : (doc == null ? void 0 : doc.documentElement.scrollTop) || (doc == null ? void 0 : doc.body) && ((_c = index.parentElement(doc.body)) == null ? void 0 : _c.scrollTop) || ((_d = doc == null ? void 0 : doc.body) == null ? void 0 : _d.scrollTop) || 0\n  };\n}\nfunction getWindowHeight() {\n  return window.innerHeight || document.documentElement && document.documentElement.clientHeight || document.body && document.body.clientHeight;\n}\nfunction getWindowWidth() {\n  return window.innerWidth || document.documentElement && document.documentElement.clientWidth || document.body && document.body.clientWidth;\n}\nfunction closestElementOfNode(node2) {\n  if (!node2) {\n    return null;\n  }\n  const el = node2.nodeType === node2.ELEMENT_NODE ? node2 : index.parentElement(node2);\n  return el;\n}\nfunction isBlocked(node2, blockClass, blockSelector, checkAncestors) {\n  if (!node2) {\n    return false;\n  }\n  const el = closestElementOfNode(node2);\n  if (!el) {\n    return false;\n  }\n  try {\n    if (typeof blockClass === \"string\") {\n      if (el.classList.contains(blockClass)) return true;\n      if (checkAncestors && el.closest(\".\" + blockClass) !== null) return true;\n    } else {\n      if (classMatchesRegex(el, blockClass, checkAncestors)) return true;\n    }\n  } catch (e2) {\n  }\n  if (blockSelector) {\n    if (el.matches(blockSelector)) return true;\n    if (checkAncestors && el.closest(blockSelector) !== null) return true;\n  }\n  return false;\n}\nfunction isSerialized(n2, mirror2) {\n  return mirror2.getId(n2) !== -1;\n}\nfunction isIgnored(n2, mirror2, slimDOMOptions) {\n  if (n2.tagName === \"TITLE\" && slimDOMOptions.headTitleMutations) {\n    return true;\n  }\n  return mirror2.getId(n2) === IGNORED_NODE;\n}\nfunction isAncestorRemoved(target, mirror2) {\n  if (isShadowRoot(target)) {\n    return false;\n  }\n  const id = mirror2.getId(target);\n  if (!mirror2.has(id)) {\n    return true;\n  }\n  const parent = index.parentNode(target);\n  if (parent && parent.nodeType === target.DOCUMENT_NODE) {\n    return false;\n  }\n  if (!parent) {\n    return true;\n  }\n  return isAncestorRemoved(parent, mirror2);\n}\nfunction legacy_isTouchEvent(event) {\n  return Boolean(event.changedTouches);\n}\nfunction polyfill$1(win = window) {\n  if (\"NodeList\" in win && !win.NodeList.prototype.forEach) {\n    win.NodeList.prototype.forEach = Array.prototype.forEach;\n  }\n  if (\"DOMTokenList\" in win && !win.DOMTokenList.prototype.forEach) {\n    win.DOMTokenList.prototype.forEach = Array.prototype.forEach;\n  }\n}\nfunction queueToResolveTrees(queue) {\n  const queueNodeMap = {};\n  const putIntoMap = (m, parent) => {\n    const nodeInTree = {\n      value: m,\n      parent,\n      children: []\n    };\n    queueNodeMap[m.node.id] = nodeInTree;\n    return nodeInTree;\n  };\n  const queueNodeTrees = [];\n  for (const mutation of queue) {\n    const { nextId, parentId } = mutation;\n    if (nextId && nextId in queueNodeMap) {\n      const nextInTree = queueNodeMap[nextId];\n      if (nextInTree.parent) {\n        const idx = nextInTree.parent.children.indexOf(nextInTree);\n        nextInTree.parent.children.splice(\n          idx,\n          0,\n          putIntoMap(mutation, nextInTree.parent)\n        );\n      } else {\n        const idx = queueNodeTrees.indexOf(nextInTree);\n        queueNodeTrees.splice(idx, 0, putIntoMap(mutation, null));\n      }\n      continue;\n    }\n    if (parentId in queueNodeMap) {\n      const parentInTree = queueNodeMap[parentId];\n      parentInTree.children.push(putIntoMap(mutation, parentInTree));\n      continue;\n    }\n    queueNodeTrees.push(putIntoMap(mutation, null));\n  }\n  return queueNodeTrees;\n}\nfunction iterateResolveTree(tree, cb) {\n  cb(tree.value);\n  for (let i2 = tree.children.length - 1; i2 >= 0; i2--) {\n    iterateResolveTree(tree.children[i2], cb);\n  }\n}\nfunction isSerializedIframe(n2, mirror2) {\n  return Boolean(n2.nodeName === \"IFRAME\" && mirror2.getMeta(n2));\n}\nfunction isSerializedStylesheet(n2, mirror2) {\n  return Boolean(\n    n2.nodeName === \"LINK\" && n2.nodeType === n2.ELEMENT_NODE && n2.getAttribute && n2.getAttribute(\"rel\") === \"stylesheet\" && mirror2.getMeta(n2)\n  );\n}\nfunction getBaseDimension(node2, rootIframe) {\n  var _a2, _b;\n  const frameElement = (_b = (_a2 = node2.ownerDocument) == null ? void 0 : _a2.defaultView) == null ? void 0 : _b.frameElement;\n  if (!frameElement || frameElement === rootIframe) {\n    return {\n      x: 0,\n      y: 0,\n      relativeScale: 1,\n      absoluteScale: 1\n    };\n  }\n  const frameDimension = frameElement.getBoundingClientRect();\n  const frameBaseDimension = getBaseDimension(frameElement, rootIframe);\n  const relativeScale = frameDimension.height / frameElement.clientHeight;\n  return {\n    x: frameDimension.x * frameBaseDimension.relativeScale + frameBaseDimension.x,\n    y: frameDimension.y * frameBaseDimension.relativeScale + frameBaseDimension.y,\n    relativeScale,\n    absoluteScale: frameBaseDimension.absoluteScale * relativeScale\n  };\n}\nfunction hasShadowRoot(n2) {\n  if (!n2) return false;\n  if (n2 instanceof BaseRRNode && \"shadowRoot\" in n2) {\n    return Boolean(n2.shadowRoot);\n  }\n  return Boolean(index.shadowRoot(n2));\n}\nfunction getNestedRule(rules2, position) {\n  const rule2 = rules2[position[0]];\n  if (position.length === 1) {\n    return rule2;\n  } else {\n    return getNestedRule(\n      rule2.cssRules[position[1]].cssRules,\n      position.slice(2)\n    );\n  }\n}\nfunction getPositionsAndIndex(nestedIndex) {\n  const positions = [...nestedIndex];\n  const index2 = positions.pop();\n  return { positions, index: index2 };\n}\nfunction uniqueTextMutations(mutations) {\n  const idSet = /* @__PURE__ */ new Set();\n  const uniqueMutations = [];\n  for (let i2 = mutations.length; i2--; ) {\n    const mutation = mutations[i2];\n    if (!idSet.has(mutation.id)) {\n      uniqueMutations.push(mutation);\n      idSet.add(mutation.id);\n    }\n  }\n  return uniqueMutations;\n}\nclass StyleSheetMirror {\n  constructor() {\n    __publicField2(this, \"id\", 1);\n    __publicField2(this, \"styleIDMap\", /* @__PURE__ */ new WeakMap());\n    __publicField2(this, \"idStyleMap\", /* @__PURE__ */ new Map());\n  }\n  getId(stylesheet) {\n    return this.styleIDMap.get(stylesheet) ?? -1;\n  }\n  has(stylesheet) {\n    return this.styleIDMap.has(stylesheet);\n  }\n  /**\n   * @returns If the stylesheet is in the mirror, returns the id of the stylesheet. If not, return the new assigned id.\n   */\n  add(stylesheet, id) {\n    if (this.has(stylesheet)) return this.getId(stylesheet);\n    let newId;\n    if (id === void 0) {\n      newId = this.id++;\n    } else newId = id;\n    this.styleIDMap.set(stylesheet, newId);\n    this.idStyleMap.set(newId, stylesheet);\n    return newId;\n  }\n  getStyle(id) {\n    return this.idStyleMap.get(id) || null;\n  }\n  reset() {\n    this.styleIDMap = /* @__PURE__ */ new WeakMap();\n    this.idStyleMap = /* @__PURE__ */ new Map();\n    this.id = 1;\n  }\n  generateId() {\n    return this.id++;\n  }\n}\nfunction getShadowHost(n2) {\n  var _a2;\n  let shadowHost = null;\n  if (\"getRootNode\" in n2 && ((_a2 = index.getRootNode(n2)) == null ? void 0 : _a2.nodeType) === Node.DOCUMENT_FRAGMENT_NODE && index.host(index.getRootNode(n2)))\n    shadowHost = index.host(index.getRootNode(n2));\n  return shadowHost;\n}\nfunction getRootShadowHost(n2) {\n  let rootShadowHost = n2;\n  let shadowHost;\n  while (shadowHost = getShadowHost(rootShadowHost))\n    rootShadowHost = shadowHost;\n  return rootShadowHost;\n}\nfunction shadowHostInDom(n2) {\n  const doc = n2.ownerDocument;\n  if (!doc) return false;\n  const shadowHost = getRootShadowHost(n2);\n  return index.contains(doc, shadowHost);\n}\nfunction inDom(n2) {\n  const doc = n2.ownerDocument;\n  if (!doc) return false;\n  return index.contains(doc, n2) || shadowHostInDom(n2);\n}\nconst utils = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  StyleSheetMirror,\n  get _mirror() {\n    return _mirror;\n  },\n  closestElementOfNode,\n  getBaseDimension,\n  getNestedRule,\n  getPositionsAndIndex,\n  getRootShadowHost,\n  getShadowHost,\n  getWindowHeight,\n  getWindowScroll,\n  getWindowWidth,\n  hasShadowRoot,\n  hookSetter,\n  inDom,\n  isAncestorRemoved,\n  isBlocked,\n  isIgnored,\n  isSerialized,\n  isSerializedIframe,\n  isSerializedStylesheet,\n  iterateResolveTree,\n  legacy_isTouchEvent,\n  get nowTimestamp() {\n    return nowTimestamp;\n  },\n  on,\n  patch,\n  polyfill: polyfill$1,\n  queueToResolveTrees,\n  shadowHostInDom,\n  throttle,\n  uniqueTextMutations\n}, Symbol.toStringTag, { value: \"Module\" }));\nvar chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\nvar lookup = typeof Uint8Array === \"undefined\" ? [] : new Uint8Array(256);\nfor (var i$1 = 0; i$1 < chars.length; i$1++) {\n  lookup[chars.charCodeAt(i$1)] = i$1;\n}\nconst encodedJs = \"KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=\";\nconst decodeBase64 = (base64) => Uint8Array.from(atob(base64), (c2) => c2.charCodeAt(0));\ntypeof window !== \"undefined\" && window.Blob && new Blob([decodeBase64(encodedJs)], { type: \"text/javascript;charset=utf-8\" });\ntry {\n  if (Array.from([1], (x2) => x2 * 2)[0] !== 2) {\n    const cleanFrame = document.createElement(\"iframe\");\n    document.body.appendChild(cleanFrame);\n    Array.from = ((_a = cleanFrame.contentWindow) == null ? void 0 : _a.Array.from) || Array.from;\n    document.body.removeChild(cleanFrame);\n  }\n} catch (err) {\n  console.debug(\"Unable to override Array.from\", err);\n}\ncreateMirror$2();\nvar n;\n!function(t2) {\n  t2[t2.NotStarted = 0] = \"NotStarted\", t2[t2.Running = 1] = \"Running\", t2[t2.Stopped = 2] = \"Stopped\";\n}(n || (n = {}));\nclass StackFrame {\n  constructor(obj) {\n    __publicField(this, \"fileName\");\n    __publicField(this, \"functionName\");\n    __publicField(this, \"lineNumber\");\n    __publicField(this, \"columnNumber\");\n    this.fileName = obj.fileName || \"\";\n    this.functionName = obj.functionName || \"\";\n    this.lineNumber = obj.lineNumber;\n    this.columnNumber = obj.columnNumber;\n  }\n  toString() {\n    const lineNumber = this.lineNumber || \"\";\n    const columnNumber = this.columnNumber || \"\";\n    if (this.functionName)\n      return `${this.functionName} (${this.fileName}:${lineNumber}:${columnNumber})`;\n    return `${this.fileName}:${lineNumber}:${columnNumber}`;\n  }\n}\nconst FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+:\\d+/;\nconst CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+:\\d+|\\(native\\))/m;\nconst SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code])?$/;\nconst ErrorStackParser = {\n  /**\n   * Given an Error object, extract the most information from it.\n   */\n  parse: function(error) {\n    if (!error) {\n      return [];\n    }\n    if (\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      typeof error.stacktrace !== \"undefined\" || // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      typeof error[\"opera#sourceloc\"] !== \"undefined\"\n    ) {\n      return this.parseOpera(\n        error\n      );\n    } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n      return this.parseV8OrIE(error);\n    } else if (error.stack) {\n      return this.parseFFOrSafari(error);\n    } else {\n      console.warn(\n        \"[console-record-plugin]: Failed to parse error object:\",\n        error\n      );\n      return [];\n    }\n  },\n  // Separate line and column numbers from a string of the form: (URI:Line:Column)\n  extractLocation: function(urlLike) {\n    if (urlLike.indexOf(\":\") === -1) {\n      return [urlLike];\n    }\n    const regExp = /(.+?)(?::(\\d+))?(?::(\\d+))?$/;\n    const parts = regExp.exec(urlLike.replace(/[()]/g, \"\"));\n    if (!parts) throw new Error(`Cannot parse given url: ${urlLike}`);\n    return [parts[1], parts[2] || void 0, parts[3] || void 0];\n  },\n  parseV8OrIE: function(error) {\n    const filtered = error.stack.split(\"\\n\").filter(function(line) {\n      return !!line.match(CHROME_IE_STACK_REGEXP);\n    }, this);\n    return filtered.map(function(line) {\n      if (line.indexOf(\"(eval \") > -1) {\n        line = line.replace(/eval code/g, \"eval\").replace(/(\\(eval at [^()]*)|(\\),.*$)/g, \"\");\n      }\n      let sanitizedLine = line.replace(/^\\s+/, \"\").replace(/\\(eval code/g, \"(\");\n      const location = sanitizedLine.match(/ (\\((.+):(\\d+):(\\d+)\\)$)/);\n      sanitizedLine = location ? sanitizedLine.replace(location[0], \"\") : sanitizedLine;\n      const tokens = sanitizedLine.split(/\\s+/).slice(1);\n      const locationParts = this.extractLocation(\n        location ? location[1] : tokens.pop()\n      );\n      const functionName = tokens.join(\" \") || void 0;\n      const fileName = [\"eval\", \"<anonymous>\"].indexOf(locationParts[0]) > -1 ? void 0 : locationParts[0];\n      return new StackFrame({\n        functionName,\n        fileName,\n        lineNumber: locationParts[1],\n        columnNumber: locationParts[2]\n      });\n    }, this);\n  },\n  parseFFOrSafari: function(error) {\n    const filtered = error.stack.split(\"\\n\").filter(function(line) {\n      return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n    }, this);\n    return filtered.map(function(line) {\n      if (line.indexOf(\" > eval\") > -1) {\n        line = line.replace(\n          / line (\\d+)(?: > eval line \\d+)* > eval:\\d+:\\d+/g,\n          \":$1\"\n        );\n      }\n      if (line.indexOf(\"@\") === -1 && line.indexOf(\":\") === -1) {\n        return new StackFrame({\n          functionName: line\n        });\n      } else {\n        const functionNameRegex = /((.*\".+\"[^@]*)?[^@]*)(?:@)/;\n        const matches = line.match(functionNameRegex);\n        const functionName = matches && matches[1] ? matches[1] : void 0;\n        const locationParts = this.extractLocation(\n          line.replace(functionNameRegex, \"\")\n        );\n        return new StackFrame({\n          functionName,\n          fileName: locationParts[0],\n          lineNumber: locationParts[1],\n          columnNumber: locationParts[2]\n        });\n      }\n    }, this);\n  },\n  parseOpera: function(e) {\n    if (!e.stacktrace || e.message.indexOf(\"\\n\") > -1 && e.message.split(\"\\n\").length > e.stacktrace.split(\"\\n\").length) {\n      return this.parseOpera9(e);\n    } else if (!e.stack) {\n      return this.parseOpera10(e);\n    } else {\n      return this.parseOpera11(e);\n    }\n  },\n  parseOpera9: function(e) {\n    const lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n    const lines = e.message.split(\"\\n\");\n    const result2 = [];\n    for (let i = 2, len = lines.length; i < len; i += 2) {\n      const match = lineRE.exec(lines[i]);\n      if (match) {\n        result2.push(\n          new StackFrame({\n            fileName: match[2],\n            lineNumber: parseFloat(match[1])\n          })\n        );\n      }\n    }\n    return result2;\n  },\n  parseOpera10: function(e) {\n    const lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n    const lines = e.stacktrace.split(\"\\n\");\n    const result2 = [];\n    for (let i = 0, len = lines.length; i < len; i += 2) {\n      const match = lineRE.exec(lines[i]);\n      if (match) {\n        result2.push(\n          new StackFrame({\n            functionName: match[3] || void 0,\n            fileName: match[2],\n            lineNumber: parseFloat(match[1])\n          })\n        );\n      }\n    }\n    return result2;\n  },\n  // Opera 10.65+ Error.stack very similar to FF/Safari\n  parseOpera11: function(error) {\n    const filtered = error.stack.split(\"\\n\").filter(function(line) {\n      return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n    }, this);\n    return filtered.map(function(line) {\n      const tokens = line.split(\"@\");\n      const locationParts = this.extractLocation(tokens.pop());\n      const functionCall = tokens.shift() || \"\";\n      const functionName = functionCall.replace(/<anonymous function(: (\\w+))?>/, \"$2\").replace(/\\([^)]*\\)/g, \"\") || void 0;\n      return new StackFrame({\n        functionName,\n        fileName: locationParts[0],\n        lineNumber: locationParts[1],\n        columnNumber: locationParts[2]\n      });\n    }, this);\n  }\n};\nfunction pathToSelector(node2) {\n  if (!node2 || !node2.outerHTML) {\n    return \"\";\n  }\n  let path = \"\";\n  while (node2.parentElement) {\n    let name = node2.localName;\n    if (!name) {\n      break;\n    }\n    name = name.toLowerCase();\n    const parent = node2.parentElement;\n    const domSiblings = [];\n    if (parent.children && parent.children.length > 0) {\n      for (let i = 0; i < parent.children.length; i++) {\n        const sibling = parent.children[i];\n        if (sibling.localName && sibling.localName.toLowerCase) {\n          if (sibling.localName.toLowerCase() === name) {\n            domSiblings.push(sibling);\n          }\n        }\n      }\n    }\n    if (domSiblings.length > 1) {\n      name += `:eq(${domSiblings.indexOf(node2)})`;\n    }\n    path = name + (path ? \">\" + path : \"\");\n    node2 = parent;\n  }\n  return path;\n}\nfunction isObject(obj) {\n  return Object.prototype.toString.call(obj) === \"[object Object]\";\n}\nfunction isObjTooDeep(obj, limit) {\n  if (limit === 0) {\n    return true;\n  }\n  const keys = Object.keys(obj);\n  for (const key of keys) {\n    if (isObject(obj[key]) && isObjTooDeep(obj[key], limit - 1)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction stringify(obj, stringifyOptions) {\n  const options = {\n    numOfKeysLimit: 50,\n    depthOfLimit: 4\n  };\n  Object.assign(options, stringifyOptions);\n  const stack = [];\n  const keys = [];\n  return JSON.stringify(\n    obj,\n    function(key, value) {\n      if (stack.length > 0) {\n        const thisPos = stack.indexOf(this);\n        ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\n        ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\n        if (~stack.indexOf(value)) {\n          if (stack[0] === value) {\n            value = \"[Circular ~]\";\n          } else {\n            value = \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\";\n          }\n        }\n      } else {\n        stack.push(value);\n      }\n      if (value === null) return value;\n      if (value === void 0) return \"undefined\";\n      if (shouldIgnore(value)) {\n        return toString(value);\n      }\n      if (typeof value === \"bigint\") {\n        return value.toString() + \"n\";\n      }\n      if (value instanceof Event) {\n        const eventResult = {};\n        for (const eventKey in value) {\n          const eventValue = value[eventKey];\n          if (Array.isArray(eventValue)) {\n            eventResult[eventKey] = pathToSelector(\n              eventValue.length ? eventValue[0] : null\n            );\n          } else {\n            eventResult[eventKey] = eventValue;\n          }\n        }\n        return eventResult;\n      } else if (value instanceof Node) {\n        if (value instanceof HTMLElement) {\n          return value ? value.outerHTML : \"\";\n        }\n        return value.nodeName;\n      } else if (value instanceof Error) {\n        return value.stack ? value.stack + \"\\nEnd of stack for Error object\" : value.name + \": \" + value.message;\n      }\n      return value;\n    }\n  );\n  function shouldIgnore(_obj) {\n    if (isObject(_obj) && Object.keys(_obj).length > options.numOfKeysLimit) {\n      return true;\n    }\n    if (typeof _obj === \"function\") {\n      return true;\n    }\n    if (isObject(_obj) && isObjTooDeep(_obj, options.depthOfLimit)) {\n      return true;\n    }\n    return false;\n  }\n  function toString(_obj) {\n    let str = _obj.toString();\n    if (options.stringLengthLimit && str.length > options.stringLengthLimit) {\n      str = `${str.slice(0, options.stringLengthLimit)}...`;\n    }\n    return str;\n  }\n}\nconst defaultLogOptions = {\n  level: [\n    \"assert\",\n    \"clear\",\n    \"count\",\n    \"countReset\",\n    \"debug\",\n    \"dir\",\n    \"dirxml\",\n    \"error\",\n    \"group\",\n    \"groupCollapsed\",\n    \"groupEnd\",\n    \"info\",\n    \"log\",\n    \"table\",\n    \"time\",\n    \"timeEnd\",\n    \"timeLog\",\n    \"trace\",\n    \"warn\"\n  ],\n  lengthThreshold: 1e3,\n  logger: \"console\"\n};\nfunction initLogObserver(cb, win, options) {\n  const logOptions = options ? Object.assign({}, defaultLogOptions, options) : defaultLogOptions;\n  const loggerType = logOptions.logger;\n  if (!loggerType) {\n    return () => {\n    };\n  }\n  let logger;\n  if (typeof loggerType === \"string\") {\n    logger = win[loggerType];\n  } else {\n    logger = loggerType;\n  }\n  let logCount = 0;\n  let inStack = false;\n  const cancelHandlers = [];\n  if (logOptions.level.includes(\"error\")) {\n    const errorHandler = (event) => {\n      const message = event.message, error = event.error;\n      const trace = ErrorStackParser.parse(error).map(\n        (stackFrame) => stackFrame.toString()\n      );\n      const payload = [stringify(message, logOptions.stringifyOptions)];\n      cb({\n        level: \"error\",\n        trace,\n        payload\n      });\n    };\n    win.addEventListener(\"error\", errorHandler);\n    cancelHandlers.push(() => {\n      win.removeEventListener(\"error\", errorHandler);\n    });\n    const unhandledrejectionHandler = (event) => {\n      let error;\n      let payload;\n      if (event.reason instanceof Error) {\n        error = event.reason;\n        payload = [\n          stringify(\n            `Uncaught (in promise) ${error.name}: ${error.message}`,\n            logOptions.stringifyOptions\n          )\n        ];\n      } else {\n        error = new Error();\n        payload = [\n          stringify(\"Uncaught (in promise)\", logOptions.stringifyOptions),\n          stringify(event.reason, logOptions.stringifyOptions)\n        ];\n      }\n      const trace = ErrorStackParser.parse(error).map(\n        (stackFrame) => stackFrame.toString()\n      );\n      cb({\n        level: \"error\",\n        trace,\n        payload\n      });\n    };\n    win.addEventListener(\"unhandledrejection\", unhandledrejectionHandler);\n    cancelHandlers.push(() => {\n      win.removeEventListener(\"unhandledrejection\", unhandledrejectionHandler);\n    });\n  }\n  for (const levelType of logOptions.level) {\n    cancelHandlers.push(replace(logger, levelType));\n  }\n  return () => {\n    cancelHandlers.forEach((h) => h());\n  };\n  function replace(_logger, level) {\n    if (!_logger[level]) {\n      return () => {\n      };\n    }\n    return utils.patch(\n      _logger,\n      level,\n      (original) => {\n        return (...args) => {\n          original.apply(this, args);\n          if (level === \"assert\" && !!args[0]) {\n            return;\n          }\n          if (inStack) {\n            return;\n          }\n          inStack = true;\n          try {\n            const trace = ErrorStackParser.parse(new Error()).map((stackFrame) => stackFrame.toString()).splice(1);\n            const argsForPayload = level === \"assert\" ? args.slice(1) : args;\n            const payload = argsForPayload.map(\n              (s) => stringify(s, logOptions.stringifyOptions)\n            );\n            logCount++;\n            if (logCount < logOptions.lengthThreshold) {\n              cb({\n                level,\n                trace,\n                payload\n              });\n            } else if (logCount === logOptions.lengthThreshold) {\n              cb({\n                level: \"warn\",\n                trace: [],\n                payload: [\n                  stringify(\"The number of log records reached the threshold.\")\n                ]\n              });\n            }\n          } catch (error) {\n            original(\"rrweb logger error:\", error, ...args);\n          } finally {\n            inStack = false;\n          }\n        };\n      }\n    );\n  }\n}\nconst PLUGIN_NAME = \"rrweb/console@1\";\nconst getRecordConsolePlugin = (options) => ({\n  name: PLUGIN_NAME,\n  observer: initLogObserver,\n  options\n});\nexport {\n  PLUGIN_NAME,\n  getRecordConsolePlugin\n};\n//# sourceMappingURL=rrweb-plugin-console-record.js.map\n","import { __awaiter, __generator } from \"tslib\";\nimport { EvaluationEngine } from '@amplitude/experiment-core';\nimport { targetingIDBStore } from './targeting-idb-store';\nvar Targeting = /** @class */ (function () {\n    function Targeting() {\n        var _this = this;\n        this.evaluateTargeting = function (_a) {\n            var apiKey = _a.apiKey, loggerProvider = _a.loggerProvider, event = _a.event, sessionId = _a.sessionId, userProperties = _a.userProperties, deviceId = _a.deviceId, flag = _a.flag;\n            return __awaiter(_this, void 0, void 0, function () {\n                var eventTypes, _b, eventStrings, context, targetingBucket;\n                return __generator(this, function (_c) {\n                    switch (_c.label) {\n                        case 0:\n                            if (!(event && event.time)) return [3 /*break*/, 2];\n                            return [4 /*yield*/, targetingIDBStore.storeEventTypeForSession({\n                                    loggerProvider: loggerProvider,\n                                    apiKey: apiKey,\n                                    sessionId: sessionId,\n                                    eventType: event.event_type,\n                                    eventTime: event.time,\n                                })];\n                        case 1:\n                            _b = _c.sent();\n                            return [3 /*break*/, 3];\n                        case 2:\n                            _b = undefined;\n                            _c.label = 3;\n                        case 3:\n                            eventTypes = _b;\n                            eventStrings = eventTypes && new Set(Object.keys(eventTypes));\n                            context = {\n                                session_id: sessionId,\n                                event: event,\n                                event_types: eventStrings && Array.from(eventStrings),\n                                user: {\n                                    device_id: deviceId,\n                                    user_properties: userProperties,\n                                },\n                            };\n                            targetingBucket = this.evaluationEngine.evaluate(context, [flag]);\n                            return [2 /*return*/, targetingBucket];\n                    }\n                });\n            });\n        };\n        this.evaluationEngine = new EvaluationEngine();\n    }\n    return Targeting;\n}());\nexport { Targeting };\n//# sourceMappingURL=targeting.js.map","import targeting from './targeting-factory';\nexport var evaluateTargeting = targeting.evaluateTargeting;\n//# sourceMappingURL=index.js.map","import { Targeting } from './targeting';\nvar createInstance = function () {\n    var targeting = new Targeting();\n    return {\n        evaluateTargeting: targeting.evaluateTargeting.bind(targeting),\n    };\n};\nexport default createInstance();\n//# sourceMappingURL=targeting-factory.js.map","var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar _a;\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar NodeType$3 = /* @__PURE__ */ ((NodeType2) => {\n  NodeType2[NodeType2[\"Document\"] = 0] = \"Document\";\n  NodeType2[NodeType2[\"DocumentType\"] = 1] = \"DocumentType\";\n  NodeType2[NodeType2[\"Element\"] = 2] = \"Element\";\n  NodeType2[NodeType2[\"Text\"] = 3] = \"Text\";\n  NodeType2[NodeType2[\"CDATA\"] = 4] = \"CDATA\";\n  NodeType2[NodeType2[\"Comment\"] = 5] = \"Comment\";\n  return NodeType2;\n})(NodeType$3 || {});\nconst testableAccessors$1 = {\n  Node: [\"childNodes\", \"parentNode\", \"parentElement\", \"textContent\"],\n  ShadowRoot: [\"host\", \"styleSheets\"],\n  Element: [\"shadowRoot\", \"querySelector\", \"querySelectorAll\"],\n  MutationObserver: []\n};\nconst testableMethods$1 = {\n  Node: [\"contains\", \"getRootNode\"],\n  ShadowRoot: [\"getSelection\"],\n  Element: [],\n  MutationObserver: [\"constructor\"]\n};\nconst untaintedBasePrototype$1 = {};\nfunction angularZoneUnpatchedAlternative$1(key) {\n  var _a2, _b;\n  const angularUnpatchedVersionSymbol = (_b = (_a2 = globalThis == null ? void 0 : globalThis.Zone) == null ? void 0 : _a2.__symbol__) == null ? void 0 : _b.call(_a2, key);\n  if (angularUnpatchedVersionSymbol && globalThis[angularUnpatchedVersionSymbol]) {\n    return globalThis[angularUnpatchedVersionSymbol];\n  } else {\n    return void 0;\n  }\n}\nfunction getUntaintedPrototype$1(key) {\n  if (untaintedBasePrototype$1[key])\n    return untaintedBasePrototype$1[key];\n  const candidate = angularZoneUnpatchedAlternative$1(key) || globalThis[key];\n  const defaultPrototype = candidate.prototype;\n  const accessorNames = key in testableAccessors$1 ? testableAccessors$1[key] : void 0;\n  const isUntaintedAccessors = Boolean(\n    accessorNames && // @ts-expect-error 2345\n    accessorNames.every(\n      (accessor) => {\n        var _a2, _b;\n        return Boolean(\n          (_b = (_a2 = Object.getOwnPropertyDescriptor(defaultPrototype, accessor)) == null ? void 0 : _a2.get) == null ? void 0 : _b.toString().includes(\"[native code]\")\n        );\n      }\n    )\n  );\n  const methodNames = key in testableMethods$1 ? testableMethods$1[key] : void 0;\n  const isUntaintedMethods = Boolean(\n    methodNames && methodNames.every(\n      // @ts-expect-error 2345\n      (method) => {\n        var _a2;\n        return typeof defaultPrototype[method] === \"function\" && ((_a2 = defaultPrototype[method]) == null ? void 0 : _a2.toString().includes(\"[native code]\"));\n      }\n    )\n  );\n  if (isUntaintedAccessors && isUntaintedMethods) {\n    untaintedBasePrototype$1[key] = candidate.prototype;\n    return candidate.prototype;\n  }\n  try {\n    const iframeEl = document.createElement(\"iframe\");\n    document.body.appendChild(iframeEl);\n    const win = iframeEl.contentWindow;\n    if (!win) return candidate.prototype;\n    const untaintedObject = win[key].prototype;\n    document.body.removeChild(iframeEl);\n    if (!untaintedObject) return defaultPrototype;\n    return untaintedBasePrototype$1[key] = untaintedObject;\n  } catch {\n    return defaultPrototype;\n  }\n}\nconst untaintedAccessorCache$1 = {};\nfunction getUntaintedAccessor$1(key, instance, accessor) {\n  var _a2;\n  const cacheKey = `${key}.${String(accessor)}`;\n  if (untaintedAccessorCache$1[cacheKey])\n    return untaintedAccessorCache$1[cacheKey].call(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype$1(key);\n  const untaintedAccessor = (_a2 = Object.getOwnPropertyDescriptor(\n    untaintedPrototype,\n    accessor\n  )) == null ? void 0 : _a2.get;\n  if (!untaintedAccessor) return instance[accessor];\n  untaintedAccessorCache$1[cacheKey] = untaintedAccessor;\n  return untaintedAccessor.call(instance);\n}\nconst untaintedMethodCache$1 = {};\nfunction getUntaintedMethod$1(key, instance, method) {\n  const cacheKey = `${key}.${String(method)}`;\n  if (untaintedMethodCache$1[cacheKey])\n    return untaintedMethodCache$1[cacheKey].bind(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype$1(key);\n  const untaintedMethod = untaintedPrototype[method];\n  if (typeof untaintedMethod !== \"function\") return instance[method];\n  untaintedMethodCache$1[cacheKey] = untaintedMethod;\n  return untaintedMethod.bind(instance);\n}\nfunction childNodes$1(n2) {\n  return getUntaintedAccessor$1(\"Node\", n2, \"childNodes\");\n}\nfunction parentNode$1(n2) {\n  return getUntaintedAccessor$1(\"Node\", n2, \"parentNode\");\n}\nfunction parentElement$1(n2) {\n  return getUntaintedAccessor$1(\"Node\", n2, \"parentElement\");\n}\nfunction textContent$1(n2) {\n  return getUntaintedAccessor$1(\"Node\", n2, \"textContent\");\n}\nfunction contains$1(n2, other) {\n  return getUntaintedMethod$1(\"Node\", n2, \"contains\")(other);\n}\nfunction getRootNode$1(n2) {\n  return getUntaintedMethod$1(\"Node\", n2, \"getRootNode\")();\n}\nfunction host$1(n2) {\n  if (!n2 || !(\"host\" in n2)) return null;\n  return getUntaintedAccessor$1(\"ShadowRoot\", n2, \"host\");\n}\nfunction styleSheets$1(n2) {\n  return n2.styleSheets;\n}\nfunction shadowRoot$1(n2) {\n  if (!n2 || !(\"shadowRoot\" in n2)) return null;\n  return getUntaintedAccessor$1(\"Element\", n2, \"shadowRoot\");\n}\nfunction querySelector$1(n2, selectors) {\n  return getUntaintedAccessor$1(\"Element\", n2, \"querySelector\")(selectors);\n}\nfunction querySelectorAll$1(n2, selectors) {\n  return getUntaintedAccessor$1(\"Element\", n2, \"querySelectorAll\")(selectors);\n}\nfunction mutationObserverCtor$1() {\n  return getUntaintedPrototype$1(\"MutationObserver\").constructor;\n}\nconst index$1 = {\n  childNodes: childNodes$1,\n  parentNode: parentNode$1,\n  parentElement: parentElement$1,\n  textContent: textContent$1,\n  contains: contains$1,\n  getRootNode: getRootNode$1,\n  host: host$1,\n  styleSheets: styleSheets$1,\n  shadowRoot: shadowRoot$1,\n  querySelector: querySelector$1,\n  querySelectorAll: querySelectorAll$1,\n  mutationObserver: mutationObserverCtor$1\n};\nfunction isElement(n2) {\n  return n2.nodeType === n2.ELEMENT_NODE;\n}\nfunction isShadowRoot(n2) {\n  const hostEl = (\n    // anchor and textarea elements also have a `host` property\n    // but only shadow roots have a `mode` property\n    n2 && \"host\" in n2 && \"mode\" in n2 && index$1.host(n2) || null\n  );\n  return Boolean(\n    hostEl && \"shadowRoot\" in hostEl && index$1.shadowRoot(hostEl) === n2\n  );\n}\nfunction isNativeShadowDom(shadowRoot2) {\n  return Object.prototype.toString.call(shadowRoot2) === \"[object ShadowRoot]\";\n}\nfunction fixBrowserCompatibilityIssuesInCSS(cssText) {\n  if (cssText.includes(\" background-clip: text;\") && !cssText.includes(\" -webkit-background-clip: text;\")) {\n    cssText = cssText.replace(\n      /\\sbackground-clip:\\s*text;/g,\n      \" -webkit-background-clip: text; background-clip: text;\"\n    );\n  }\n  return cssText;\n}\nfunction escapeImportStatement(rule2) {\n  const { cssText } = rule2;\n  if (cssText.split('\"').length < 3) return cssText;\n  const statement = [\"@import\", `url(${JSON.stringify(rule2.href)})`];\n  if (rule2.layerName === \"\") {\n    statement.push(`layer`);\n  } else if (rule2.layerName) {\n    statement.push(`layer(${rule2.layerName})`);\n  }\n  if (rule2.supportsText) {\n    statement.push(`supports(${rule2.supportsText})`);\n  }\n  if (rule2.media.length) {\n    statement.push(rule2.media.mediaText);\n  }\n  return statement.join(\" \") + \";\";\n}\nfunction stringifyStylesheet(s2) {\n  try {\n    const rules2 = s2.rules || s2.cssRules;\n    if (!rules2) {\n      return null;\n    }\n    let sheetHref = s2.href;\n    if (!sheetHref && s2.ownerNode && s2.ownerNode.ownerDocument) {\n      sheetHref = s2.ownerNode.ownerDocument.location.href;\n    }\n    const stringifiedRules = Array.from(\n      rules2,\n      (rule2) => stringifyRule(rule2, sheetHref)\n    ).join(\"\");\n    return fixBrowserCompatibilityIssuesInCSS(stringifiedRules);\n  } catch (error) {\n    return null;\n  }\n}\nfunction stringifyRule(rule2, sheetHref) {\n  if (isCSSImportRule(rule2)) {\n    let importStringified;\n    try {\n      importStringified = // for same-origin stylesheets,\n      // we can access the imported stylesheet rules directly\n      stringifyStylesheet(rule2.styleSheet) || // work around browser issues with the raw string `@import url(...)` statement\n      escapeImportStatement(rule2);\n    } catch (error) {\n      importStringified = rule2.cssText;\n    }\n    if (rule2.styleSheet.href) {\n      return absolutifyURLs(importStringified, rule2.styleSheet.href);\n    }\n    return importStringified;\n  } else {\n    let ruleStringified = rule2.cssText;\n    if (isCSSStyleRule(rule2) && rule2.selectorText.includes(\":\")) {\n      ruleStringified = fixSafariColons(ruleStringified);\n    }\n    if (sheetHref) {\n      return absolutifyURLs(ruleStringified, sheetHref);\n    }\n    return ruleStringified;\n  }\n}\nfunction fixSafariColons(cssStringified) {\n  const regex = /(\\[(?:[\\w-]+)[^\\\\])(:(?:[\\w-]+)\\])/gm;\n  return cssStringified.replace(regex, \"$1\\\\$2\");\n}\nfunction isCSSImportRule(rule2) {\n  return \"styleSheet\" in rule2;\n}\nfunction isCSSStyleRule(rule2) {\n  return \"selectorText\" in rule2;\n}\nclass Mirror {\n  constructor() {\n    __publicField$1(this, \"idNodeMap\", /* @__PURE__ */ new Map());\n    __publicField$1(this, \"nodeMetaMap\", /* @__PURE__ */ new WeakMap());\n  }\n  getId(n2) {\n    var _a2;\n    if (!n2) return -1;\n    const id = (_a2 = this.getMeta(n2)) == null ? void 0 : _a2.id;\n    return id ?? -1;\n  }\n  getNode(id) {\n    return this.idNodeMap.get(id) || null;\n  }\n  getIds() {\n    return Array.from(this.idNodeMap.keys());\n  }\n  getMeta(n2) {\n    return this.nodeMetaMap.get(n2) || null;\n  }\n  // removes the node from idNodeMap\n  // doesn't remove the node from nodeMetaMap\n  removeNodeFromMap(n2) {\n    const id = this.getId(n2);\n    this.idNodeMap.delete(id);\n    if (n2.childNodes) {\n      n2.childNodes.forEach(\n        (childNode) => this.removeNodeFromMap(childNode)\n      );\n    }\n  }\n  has(id) {\n    return this.idNodeMap.has(id);\n  }\n  hasNode(node2) {\n    return this.nodeMetaMap.has(node2);\n  }\n  add(n2, meta) {\n    const id = meta.id;\n    this.idNodeMap.set(id, n2);\n    this.nodeMetaMap.set(n2, meta);\n  }\n  replace(id, n2) {\n    const oldNode = this.getNode(id);\n    if (oldNode) {\n      const meta = this.nodeMetaMap.get(oldNode);\n      if (meta) this.nodeMetaMap.set(n2, meta);\n    }\n    this.idNodeMap.set(id, n2);\n  }\n  reset() {\n    this.idNodeMap = /* @__PURE__ */ new Map();\n    this.nodeMetaMap = /* @__PURE__ */ new WeakMap();\n  }\n}\nfunction createMirror$2() {\n  return new Mirror();\n}\nfunction maskInputValue({\n  element,\n  maskInputOptions,\n  tagName,\n  type,\n  value,\n  maskInputFn\n}) {\n  let text = value || \"\";\n  const actualType = type && toLowerCase(type);\n  if (maskInputOptions[tagName.toLowerCase()] || actualType && maskInputOptions[actualType]) {\n    if (maskInputFn) {\n      text = maskInputFn(text, element);\n    } else {\n      text = \"*\".repeat(text.length);\n    }\n  }\n  return text;\n}\nfunction toLowerCase(str) {\n  return str.toLowerCase();\n}\nconst ORIGINAL_ATTRIBUTE_NAME = \"__rrweb_original__\";\nfunction is2DCanvasBlank(canvas) {\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) return true;\n  const chunkSize = 50;\n  for (let x2 = 0; x2 < canvas.width; x2 += chunkSize) {\n    for (let y = 0; y < canvas.height; y += chunkSize) {\n      const getImageData = ctx.getImageData;\n      const originalGetImageData = ORIGINAL_ATTRIBUTE_NAME in getImageData ? getImageData[ORIGINAL_ATTRIBUTE_NAME] : getImageData;\n      const pixelBuffer = new Uint32Array(\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-unsafe-member-access\n        originalGetImageData.call(\n          ctx,\n          x2,\n          y,\n          Math.min(chunkSize, canvas.width - x2),\n          Math.min(chunkSize, canvas.height - y)\n        ).data.buffer\n      );\n      if (pixelBuffer.some((pixel) => pixel !== 0)) return false;\n    }\n  }\n  return true;\n}\nfunction getInputType(element) {\n  const type = element.type;\n  return element.hasAttribute(\"data-rr-is-password\") ? \"password\" : type ? (\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n    toLowerCase(type)\n  ) : null;\n}\nfunction extractFileExtension(path, baseURL) {\n  let url;\n  try {\n    url = new URL(path, baseURL ?? window.location.href);\n  } catch (err) {\n    return null;\n  }\n  const regex = /\\.([0-9a-z]+)(?:$)/i;\n  const match = url.pathname.match(regex);\n  return (match == null ? void 0 : match[1]) ?? null;\n}\nfunction extractOrigin(url) {\n  let origin = \"\";\n  if (url.indexOf(\"//\") > -1) {\n    origin = url.split(\"/\").slice(0, 3).join(\"/\");\n  } else {\n    origin = url.split(\"/\")[0];\n  }\n  origin = origin.split(\"?\")[0];\n  return origin;\n}\nconst URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")(.*?)\"|([^)]*))\\)/gm;\nconst URL_PROTOCOL_MATCH = /^(?:[a-z+]+:)?\\/\\//i;\nconst URL_WWW_MATCH = /^www\\..*/i;\nconst DATA_URI = /^(data:)([^,]*),(.*)/i;\nfunction absolutifyURLs(cssText, href) {\n  return (cssText || \"\").replace(\n    URL_IN_CSS_REF,\n    (origin, quote1, path1, quote2, path2, path3) => {\n      const filePath = path1 || path2 || path3;\n      const maybeQuote = quote1 || quote2 || \"\";\n      if (!filePath) {\n        return origin;\n      }\n      if (URL_PROTOCOL_MATCH.test(filePath) || URL_WWW_MATCH.test(filePath)) {\n        return `url(${maybeQuote}${filePath}${maybeQuote})`;\n      }\n      if (DATA_URI.test(filePath)) {\n        return `url(${maybeQuote}${filePath}${maybeQuote})`;\n      }\n      if (filePath[0] === \"/\") {\n        return `url(${maybeQuote}${extractOrigin(href) + filePath}${maybeQuote})`;\n      }\n      const stack = href.split(\"/\");\n      const parts = filePath.split(\"/\");\n      stack.pop();\n      for (const part of parts) {\n        if (part === \".\") {\n          continue;\n        } else if (part === \"..\") {\n          stack.pop();\n        } else {\n          stack.push(part);\n        }\n      }\n      return `url(${maybeQuote}${stack.join(\"/\")}${maybeQuote})`;\n    }\n  );\n}\nfunction normalizeCssString(cssText, _testNoPxNorm = false) {\n  if (_testNoPxNorm) {\n    return cssText.replace(/(\\/\\*[^*]*\\*\\/)|[\\s;]/g, \"\");\n  } else {\n    return cssText.replace(/(\\/\\*[^*]*\\*\\/)|[\\s;]/g, \"\").replace(/0px/g, \"0\");\n  }\n}\nfunction splitCssText(cssText, style, _testNoPxNorm = false) {\n  const childNodes2 = Array.from(style.childNodes);\n  const splits = [];\n  let iterCount = 0;\n  if (childNodes2.length > 1 && cssText && typeof cssText === \"string\") {\n    let cssTextNorm = normalizeCssString(cssText, _testNoPxNorm);\n    const normFactor = cssTextNorm.length / cssText.length;\n    for (let i2 = 1; i2 < childNodes2.length; i2++) {\n      if (childNodes2[i2].textContent && typeof childNodes2[i2].textContent === \"string\") {\n        const textContentNorm = normalizeCssString(\n          childNodes2[i2].textContent,\n          _testNoPxNorm\n        );\n        const jLimit = 100;\n        let j = 3;\n        for (; j < textContentNorm.length; j++) {\n          if (\n            // keep consuming css identifiers (to get a decent chunk more quickly)\n            textContentNorm[j].match(/[a-zA-Z0-9]/) || // substring needs to be unique to this section\n            textContentNorm.indexOf(textContentNorm.substring(0, j), 1) !== -1\n          ) {\n            continue;\n          }\n          break;\n        }\n        for (; j < textContentNorm.length; j++) {\n          let startSubstring = textContentNorm.substring(0, j);\n          let cssNormSplits = cssTextNorm.split(startSubstring);\n          let splitNorm = -1;\n          if (cssNormSplits.length === 2) {\n            splitNorm = cssNormSplits[0].length;\n          } else if (cssNormSplits.length > 2 && cssNormSplits[0] === \"\" && childNodes2[i2 - 1].textContent !== \"\") {\n            splitNorm = cssTextNorm.indexOf(startSubstring, 1);\n          } else if (cssNormSplits.length === 1) {\n            startSubstring = startSubstring.substring(\n              0,\n              startSubstring.length - 1\n            );\n            cssNormSplits = cssTextNorm.split(startSubstring);\n            if (cssNormSplits.length <= 1) {\n              splits.push(cssText);\n              return splits;\n            }\n            j = jLimit + 1;\n          } else if (j === textContentNorm.length - 1) {\n            splitNorm = cssTextNorm.indexOf(startSubstring);\n          }\n          if (cssNormSplits.length >= 2 && j > jLimit) {\n            const prevTextContent = childNodes2[i2 - 1].textContent;\n            if (prevTextContent && typeof prevTextContent === \"string\") {\n              const prevMinLength = normalizeCssString(prevTextContent).length;\n              splitNorm = cssTextNorm.indexOf(startSubstring, prevMinLength);\n            }\n            if (splitNorm === -1) {\n              splitNorm = cssNormSplits[0].length;\n            }\n          }\n          if (splitNorm !== -1) {\n            let k = Math.floor(splitNorm / normFactor);\n            for (; k > 0 && k < cssText.length; ) {\n              iterCount += 1;\n              if (iterCount > 50 * childNodes2.length) {\n                splits.push(cssText);\n                return splits;\n              }\n              const normPart = normalizeCssString(\n                cssText.substring(0, k),\n                _testNoPxNorm\n              );\n              if (normPart.length === splitNorm) {\n                splits.push(cssText.substring(0, k));\n                cssText = cssText.substring(k);\n                cssTextNorm = cssTextNorm.substring(splitNorm);\n                break;\n              } else if (normPart.length < splitNorm) {\n                k += Math.max(\n                  1,\n                  Math.floor((splitNorm - normPart.length) / normFactor)\n                );\n              } else {\n                k -= Math.max(\n                  1,\n                  Math.floor((normPart.length - splitNorm) * normFactor)\n                );\n              }\n            }\n            break;\n          }\n        }\n      }\n    }\n  }\n  splits.push(cssText);\n  return splits;\n}\nfunction markCssSplits(cssText, style) {\n  return splitCssText(cssText, style).join(\"/* rr_split */\");\n}\nconst _DEFAULT_BLOCKED_ELEMENT_BACKGROUND_COLOR = \"lightgrey\";\nlet _id = 1;\nconst tagNameRegex = new RegExp(\"[^a-z0-9-_:]\");\nconst IGNORED_NODE = -2;\nfunction genId() {\n  return _id++;\n}\nfunction getValidTagName$1(element) {\n  if (element instanceof HTMLFormElement) {\n    return \"form\";\n  }\n  const processedTagName = toLowerCase(element.tagName);\n  if (tagNameRegex.test(processedTagName)) {\n    return \"div\";\n  }\n  return processedTagName;\n}\nlet canvasService;\nlet canvasCtx;\nconst SRCSET_NOT_SPACES = /^[^ \\t\\n\\r\\u000c]+/;\nconst SRCSET_COMMAS_OR_SPACES = /^[, \\t\\n\\r\\u000c]+/;\nfunction getAbsoluteSrcsetString(doc, attributeValue) {\n  if (attributeValue.trim() === \"\") {\n    return attributeValue;\n  }\n  let pos = 0;\n  function collectCharacters(regEx) {\n    let chars2;\n    const match = regEx.exec(attributeValue.substring(pos));\n    if (match) {\n      chars2 = match[0];\n      pos += chars2.length;\n      return chars2;\n    }\n    return \"\";\n  }\n  const output = [];\n  while (true) {\n    collectCharacters(SRCSET_COMMAS_OR_SPACES);\n    if (pos >= attributeValue.length) {\n      break;\n    }\n    let url = collectCharacters(SRCSET_NOT_SPACES);\n    if (url.slice(-1) === \",\") {\n      url = absoluteToDoc(doc, url.substring(0, url.length - 1));\n      output.push(url);\n    } else {\n      let descriptorsStr = \"\";\n      url = absoluteToDoc(doc, url);\n      let inParens = false;\n      while (true) {\n        const c2 = attributeValue.charAt(pos);\n        if (c2 === \"\") {\n          output.push((url + descriptorsStr).trim());\n          break;\n        } else if (!inParens) {\n          if (c2 === \",\") {\n            pos += 1;\n            output.push((url + descriptorsStr).trim());\n            break;\n          } else if (c2 === \"(\") {\n            inParens = true;\n          }\n        } else {\n          if (c2 === \")\") {\n            inParens = false;\n          }\n        }\n        descriptorsStr += c2;\n        pos += 1;\n      }\n    }\n  }\n  return output.join(\", \");\n}\nconst cachedDocument = /* @__PURE__ */ new WeakMap();\nfunction absoluteToDoc(doc, attributeValue) {\n  if (!attributeValue || attributeValue.trim() === \"\") {\n    return attributeValue;\n  }\n  return getHref(doc, attributeValue);\n}\nfunction isSVGElement(el) {\n  return Boolean(el.tagName === \"svg\" || el.ownerSVGElement);\n}\nfunction getHref(doc, customHref) {\n  let a2 = cachedDocument.get(doc);\n  if (!a2) {\n    a2 = doc.createElement(\"a\");\n    cachedDocument.set(doc, a2);\n  }\n  if (!customHref) {\n    customHref = \"\";\n  } else if (customHref.startsWith(\"blob:\") || customHref.startsWith(\"data:\")) {\n    return customHref;\n  }\n  a2.setAttribute(\"href\", customHref);\n  return a2.href;\n}\nfunction transformAttribute(doc, tagName, name, value) {\n  if (!value) {\n    return value;\n  }\n  if (name === \"src\" || name === \"href\" && !(tagName === \"use\" && value[0] === \"#\")) {\n    return absoluteToDoc(doc, value);\n  } else if (name === \"xlink:href\" && value[0] !== \"#\") {\n    return absoluteToDoc(doc, value);\n  } else if (name === \"background\" && (tagName === \"table\" || tagName === \"td\" || tagName === \"th\")) {\n    return absoluteToDoc(doc, value);\n  } else if (name === \"srcset\") {\n    return getAbsoluteSrcsetString(doc, value);\n  } else if (name === \"style\") {\n    return absolutifyURLs(value, getHref(doc));\n  } else if (tagName === \"object\" && name === \"data\") {\n    return absoluteToDoc(doc, value);\n  }\n  return value;\n}\nfunction ignoreAttribute(tagName, name, _value) {\n  return (tagName === \"video\" || tagName === \"audio\") && name === \"autoplay\";\n}\nfunction _isBlockedElement(element, blockClass, blockSelector) {\n  try {\n    if (typeof blockClass === \"string\") {\n      if (element.classList.contains(blockClass)) {\n        return true;\n      }\n    } else {\n      for (let eIndex = element.classList.length; eIndex--; ) {\n        const className = element.classList[eIndex];\n        if (blockClass.test(className)) {\n          return true;\n        }\n      }\n    }\n    if (blockSelector) {\n      return element.matches(blockSelector);\n    }\n  } catch (e2) {\n  }\n  return false;\n}\nfunction classMatchesRegex(node2, regex, checkAncestors) {\n  if (!node2) return false;\n  if (node2.nodeType !== node2.ELEMENT_NODE) {\n    if (!checkAncestors) return false;\n    return classMatchesRegex(index$1.parentNode(node2), regex, checkAncestors);\n  }\n  for (let eIndex = node2.classList.length; eIndex--; ) {\n    const className = node2.classList[eIndex];\n    if (regex.test(className)) {\n      return true;\n    }\n  }\n  if (!checkAncestors) return false;\n  return classMatchesRegex(index$1.parentNode(node2), regex, checkAncestors);\n}\nfunction needMaskingText(node2, maskTextClass, maskTextSelector, checkAncestors) {\n  let el;\n  if (isElement(node2)) {\n    el = node2;\n    if (!index$1.childNodes(el).length) {\n      return false;\n    }\n  } else if (index$1.parentElement(node2) === null) {\n    return false;\n  } else {\n    el = index$1.parentElement(node2);\n  }\n  try {\n    if (typeof maskTextClass === \"string\") {\n      if (checkAncestors) {\n        if (el.closest(`.${maskTextClass}`)) return true;\n      } else {\n        if (el.classList.contains(maskTextClass)) return true;\n      }\n    } else {\n      if (classMatchesRegex(el, maskTextClass, checkAncestors)) return true;\n    }\n    if (maskTextSelector) {\n      if (checkAncestors) {\n        if (el.closest(maskTextSelector)) return true;\n      } else {\n        if (el.matches(maskTextSelector)) return true;\n      }\n    }\n  } catch (e2) {\n  }\n  return false;\n}\nfunction onceIframeLoaded(iframeEl, listener, iframeLoadTimeout) {\n  const win = iframeEl.contentWindow;\n  if (!win) {\n    return;\n  }\n  let fired = false;\n  let readyState;\n  try {\n    readyState = win.document.readyState;\n  } catch (error) {\n    return;\n  }\n  if (readyState !== \"complete\") {\n    const timer = setTimeout(() => {\n      if (!fired) {\n        listener();\n        fired = true;\n      }\n    }, iframeLoadTimeout);\n    iframeEl.addEventListener(\"load\", () => {\n      clearTimeout(timer);\n      fired = true;\n      listener();\n    });\n    return;\n  }\n  const blankUrl = \"about:blank\";\n  if (win.location.href !== blankUrl || iframeEl.src === blankUrl || iframeEl.src === \"\") {\n    setTimeout(listener, 0);\n    return iframeEl.addEventListener(\"load\", listener);\n  }\n  iframeEl.addEventListener(\"load\", listener);\n}\nfunction onceStylesheetLoaded(link, listener, styleSheetLoadTimeout) {\n  let fired = false;\n  let styleSheetLoaded;\n  try {\n    styleSheetLoaded = link.sheet;\n  } catch (error) {\n    return;\n  }\n  if (styleSheetLoaded) return;\n  const timer = setTimeout(() => {\n    if (!fired) {\n      listener();\n      fired = true;\n    }\n  }, styleSheetLoadTimeout);\n  link.addEventListener(\"load\", () => {\n    clearTimeout(timer);\n    fired = true;\n    listener();\n  });\n}\nfunction serializeNode(n2, options) {\n  const {\n    doc,\n    mirror: mirror2,\n    blockClass,\n    blockSelector,\n    needsMask,\n    inlineStylesheet,\n    maskInputOptions = {},\n    maskTextFn,\n    maskInputFn,\n    dataURLOptions = {},\n    inlineImages,\n    recordCanvas,\n    keepIframeSrcFn,\n    newlyAddedElement = false,\n    cssCaptured = false,\n    applyBackgroundColorToBlockedElements = false\n  } = options;\n  const rootId = getRootId(doc, mirror2);\n  switch (n2.nodeType) {\n    case n2.DOCUMENT_NODE:\n      if (n2.compatMode !== \"CSS1Compat\") {\n        return {\n          type: NodeType$3.Document,\n          childNodes: [],\n          compatMode: n2.compatMode\n          // probably \"BackCompat\"\n        };\n      } else {\n        return {\n          type: NodeType$3.Document,\n          childNodes: []\n        };\n      }\n    case n2.DOCUMENT_TYPE_NODE:\n      return {\n        type: NodeType$3.DocumentType,\n        name: n2.name,\n        publicId: n2.publicId,\n        systemId: n2.systemId,\n        rootId\n      };\n    case n2.ELEMENT_NODE:\n      return serializeElementNode(n2, {\n        doc,\n        blockClass,\n        blockSelector,\n        inlineStylesheet,\n        maskInputOptions,\n        maskInputFn,\n        dataURLOptions,\n        inlineImages,\n        recordCanvas,\n        keepIframeSrcFn,\n        newlyAddedElement,\n        rootId,\n        applyBackgroundColorToBlockedElements\n      });\n    case n2.TEXT_NODE:\n      return serializeTextNode(n2, {\n        doc,\n        needsMask,\n        maskTextFn,\n        rootId,\n        cssCaptured\n      });\n    case n2.CDATA_SECTION_NODE:\n      return {\n        type: NodeType$3.CDATA,\n        textContent: \"\",\n        rootId\n      };\n    case n2.COMMENT_NODE:\n      return {\n        type: NodeType$3.Comment,\n        textContent: index$1.textContent(n2) || \"\",\n        rootId\n      };\n    default:\n      return false;\n  }\n}\nfunction getRootId(doc, mirror2) {\n  if (!mirror2.hasNode(doc)) return void 0;\n  const docId = mirror2.getId(doc);\n  return docId === 1 ? void 0 : docId;\n}\nfunction serializeTextNode(n2, options) {\n  const { needsMask, maskTextFn, rootId, cssCaptured } = options;\n  const parent = index$1.parentNode(n2);\n  const parentTagName = parent && parent.tagName;\n  let textContent2 = \"\";\n  const isStyle = parentTagName === \"STYLE\" ? true : void 0;\n  const isScript = parentTagName === \"SCRIPT\" ? true : void 0;\n  if (isScript) {\n    textContent2 = \"SCRIPT_PLACEHOLDER\";\n  } else if (!cssCaptured) {\n    textContent2 = index$1.textContent(n2);\n    if (isStyle && textContent2) {\n      textContent2 = absolutifyURLs(textContent2, getHref(options.doc));\n    }\n  }\n  if (!isStyle && !isScript && textContent2 && needsMask) {\n    textContent2 = maskTextFn ? maskTextFn(textContent2, index$1.parentElement(n2)) : textContent2.replace(/[\\S]/g, \"*\");\n  }\n  return {\n    type: NodeType$3.Text,\n    textContent: textContent2 || \"\",\n    rootId\n  };\n}\nfunction serializeElementNode(n2, options) {\n  const {\n    doc,\n    blockClass,\n    blockSelector,\n    inlineStylesheet,\n    maskInputOptions = {},\n    maskInputFn,\n    dataURLOptions = {},\n    inlineImages,\n    recordCanvas,\n    keepIframeSrcFn,\n    newlyAddedElement = false,\n    rootId,\n    applyBackgroundColorToBlockedElements = false\n  } = options;\n  const needBlock = _isBlockedElement(n2, blockClass, blockSelector);\n  const tagName = getValidTagName$1(n2);\n  let attributes = {};\n  const len = n2.attributes.length;\n  for (let i2 = 0; i2 < len; i2++) {\n    const attr = n2.attributes[i2];\n    if (!ignoreAttribute(tagName, attr.name, attr.value)) {\n      attributes[attr.name] = transformAttribute(\n        doc,\n        tagName,\n        toLowerCase(attr.name),\n        attr.value\n      );\n    }\n  }\n  if (tagName === \"link\" && inlineStylesheet) {\n    const stylesheet = Array.from(doc.styleSheets).find((s2) => {\n      return s2.href === n2.href;\n    });\n    let cssText = null;\n    if (stylesheet) {\n      cssText = stringifyStylesheet(stylesheet);\n    }\n    if (cssText) {\n      delete attributes.rel;\n      delete attributes.href;\n      attributes._cssText = cssText;\n    }\n  }\n  if (tagName === \"style\" && n2.sheet) {\n    let cssText = stringifyStylesheet(\n      n2.sheet\n    );\n    if (cssText) {\n      if (n2.childNodes.length > 1) {\n        cssText = markCssSplits(cssText, n2);\n      }\n      attributes._cssText = cssText;\n    }\n  }\n  if (tagName === \"input\" || tagName === \"textarea\" || tagName === \"select\") {\n    const value = n2.value;\n    const checked = n2.checked;\n    if (attributes.type !== \"radio\" && attributes.type !== \"checkbox\" && attributes.type !== \"submit\" && attributes.type !== \"button\" && value) {\n      attributes.value = maskInputValue({\n        element: n2,\n        type: getInputType(n2),\n        tagName,\n        value,\n        maskInputOptions,\n        maskInputFn\n      });\n    } else if (checked) {\n      attributes.checked = checked;\n    }\n  }\n  if (tagName === \"option\") {\n    if (n2.selected && !maskInputOptions[\"select\"]) {\n      attributes.selected = true;\n    } else {\n      delete attributes.selected;\n    }\n  }\n  if (tagName === \"dialog\" && n2.open) {\n    attributes.rr_open_mode = n2.matches(\"dialog:modal\") ? \"modal\" : \"non-modal\";\n  }\n  if (tagName === \"canvas\" && recordCanvas) {\n    if (n2.__context === \"2d\") {\n      if (!is2DCanvasBlank(n2)) {\n        attributes.rr_dataURL = n2.toDataURL(\n          dataURLOptions.type,\n          dataURLOptions.quality\n        );\n      }\n    } else if (!(\"__context\" in n2)) {\n      const canvasDataURL = n2.toDataURL(\n        dataURLOptions.type,\n        dataURLOptions.quality\n      );\n      const blankCanvas = doc.createElement(\"canvas\");\n      blankCanvas.width = n2.width;\n      blankCanvas.height = n2.height;\n      const blankCanvasDataURL = blankCanvas.toDataURL(\n        dataURLOptions.type,\n        dataURLOptions.quality\n      );\n      if (canvasDataURL !== blankCanvasDataURL) {\n        attributes.rr_dataURL = canvasDataURL;\n      }\n    }\n  }\n  if (tagName === \"img\" && inlineImages) {\n    if (!canvasService) {\n      canvasService = doc.createElement(\"canvas\");\n      canvasCtx = canvasService.getContext(\"2d\");\n    }\n    const image = n2;\n    const imageSrc = image.currentSrc || image.getAttribute(\"src\") || \"<unknown-src>\";\n    const priorCrossOrigin = image.crossOrigin;\n    const recordInlineImage = () => {\n      image.removeEventListener(\"load\", recordInlineImage);\n      try {\n        canvasService.width = image.naturalWidth;\n        canvasService.height = image.naturalHeight;\n        canvasCtx.drawImage(image, 0, 0);\n        attributes.rr_dataURL = canvasService.toDataURL(\n          dataURLOptions.type,\n          dataURLOptions.quality\n        );\n      } catch (err) {\n        if (image.crossOrigin !== \"anonymous\") {\n          image.crossOrigin = \"anonymous\";\n          if (image.complete && image.naturalWidth !== 0)\n            recordInlineImage();\n          else image.addEventListener(\"load\", recordInlineImage);\n          return;\n        } else {\n          console.warn(\n            `Cannot inline img src=${imageSrc}! Error: ${err}`\n          );\n        }\n      }\n      if (image.crossOrigin === \"anonymous\") {\n        priorCrossOrigin ? attributes.crossOrigin = priorCrossOrigin : image.removeAttribute(\"crossorigin\");\n      }\n    };\n    if (image.complete && image.naturalWidth !== 0) recordInlineImage();\n    else image.addEventListener(\"load\", recordInlineImage);\n  }\n  if (tagName === \"audio\" || tagName === \"video\") {\n    const mediaAttributes = attributes;\n    mediaAttributes.rr_mediaState = n2.paused ? \"paused\" : \"played\";\n    mediaAttributes.rr_mediaCurrentTime = n2.currentTime;\n    mediaAttributes.rr_mediaPlaybackRate = n2.playbackRate;\n    mediaAttributes.rr_mediaMuted = n2.muted;\n    mediaAttributes.rr_mediaLoop = n2.loop;\n    mediaAttributes.rr_mediaVolume = n2.volume;\n  }\n  if (!newlyAddedElement) {\n    if (n2.scrollLeft) {\n      attributes.rr_scrollLeft = n2.scrollLeft;\n    }\n    if (n2.scrollTop) {\n      attributes.rr_scrollTop = n2.scrollTop;\n    }\n  }\n  if (needBlock) {\n    const { width, height } = n2.getBoundingClientRect();\n    attributes = {\n      class: attributes.class,\n      rr_width: `${width}px`,\n      rr_height: `${height}px`,\n      ...applyBackgroundColorToBlockedElements ? { rr_background_color: _DEFAULT_BLOCKED_ELEMENT_BACKGROUND_COLOR } : {}\n    };\n  }\n  if (tagName === \"iframe\" && !keepIframeSrcFn(attributes.src)) {\n    if (!n2.contentDocument) {\n      attributes.rr_src = attributes.src;\n    }\n    delete attributes.src;\n  }\n  let isCustomElement;\n  try {\n    if (customElements.get(tagName)) isCustomElement = true;\n  } catch (e2) {\n  }\n  return {\n    type: NodeType$3.Element,\n    tagName,\n    attributes,\n    childNodes: [],\n    isSVG: isSVGElement(n2) || void 0,\n    needBlock,\n    rootId,\n    isCustom: isCustomElement\n  };\n}\nfunction lowerIfExists(maybeAttr) {\n  if (maybeAttr === void 0 || maybeAttr === null) {\n    return \"\";\n  } else {\n    return maybeAttr.toLowerCase();\n  }\n}\nfunction slimDOMExcluded(sn, slimDOMOptions) {\n  if (slimDOMOptions.comment && sn.type === NodeType$3.Comment) {\n    return true;\n  } else if (sn.type === NodeType$3.Element) {\n    if (slimDOMOptions.script && // script tag\n    (sn.tagName === \"script\" || // (module)preload link\n    sn.tagName === \"link\" && (sn.attributes.rel === \"preload\" || sn.attributes.rel === \"modulepreload\") && sn.attributes.as === \"script\" || // prefetch link\n    sn.tagName === \"link\" && sn.attributes.rel === \"prefetch\" && typeof sn.attributes.href === \"string\" && extractFileExtension(sn.attributes.href) === \"js\")) {\n      return true;\n    } else if (slimDOMOptions.headFavicon && (sn.tagName === \"link\" && sn.attributes.rel === \"shortcut icon\" || sn.tagName === \"meta\" && (lowerIfExists(sn.attributes.name).match(\n      /^msapplication-tile(image|color)$/\n    ) || lowerIfExists(sn.attributes.name) === \"application-name\" || lowerIfExists(sn.attributes.rel) === \"icon\" || lowerIfExists(sn.attributes.rel) === \"apple-touch-icon\" || lowerIfExists(sn.attributes.rel) === \"shortcut icon\"))) {\n      return true;\n    } else if (sn.tagName === \"meta\") {\n      if (slimDOMOptions.headMetaDescKeywords && lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {\n        return true;\n      } else if (slimDOMOptions.headMetaSocial && (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) || // og = opengraph (facebook)\n      lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) || lowerIfExists(sn.attributes.name) === \"pinterest\")) {\n        return true;\n      } else if (slimDOMOptions.headMetaRobots && (lowerIfExists(sn.attributes.name) === \"robots\" || lowerIfExists(sn.attributes.name) === \"googlebot\" || lowerIfExists(sn.attributes.name) === \"bingbot\")) {\n        return true;\n      } else if (slimDOMOptions.headMetaHttpEquiv && sn.attributes[\"http-equiv\"] !== void 0) {\n        return true;\n      } else if (slimDOMOptions.headMetaAuthorship && (lowerIfExists(sn.attributes.name) === \"author\" || lowerIfExists(sn.attributes.name) === \"generator\" || lowerIfExists(sn.attributes.name) === \"framework\" || lowerIfExists(sn.attributes.name) === \"publisher\" || lowerIfExists(sn.attributes.name) === \"progid\" || lowerIfExists(sn.attributes.property).match(/^article:/) || lowerIfExists(sn.attributes.property).match(/^product:/))) {\n        return true;\n      } else if (slimDOMOptions.headMetaVerification && (lowerIfExists(sn.attributes.name) === \"google-site-verification\" || lowerIfExists(sn.attributes.name) === \"yandex-verification\" || lowerIfExists(sn.attributes.name) === \"csrf-token\" || lowerIfExists(sn.attributes.name) === \"p:domain_verify\" || lowerIfExists(sn.attributes.name) === \"verify-v1\" || lowerIfExists(sn.attributes.name) === \"verification\" || lowerIfExists(sn.attributes.name) === \"shopify-checkout-api-token\")) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\nfunction serializeNodeWithId(n2, options) {\n  const {\n    doc,\n    mirror: mirror2,\n    blockClass,\n    blockSelector,\n    maskTextClass,\n    maskTextSelector,\n    skipChild = false,\n    inlineStylesheet = true,\n    maskInputOptions = {},\n    maskTextFn,\n    maskInputFn,\n    slimDOMOptions,\n    dataURLOptions = {},\n    inlineImages = false,\n    recordCanvas = false,\n    onSerialize,\n    onIframeLoad,\n    iframeLoadTimeout = 5e3,\n    onStylesheetLoad,\n    stylesheetLoadTimeout = 5e3,\n    keepIframeSrcFn = () => false,\n    newlyAddedElement = false,\n    cssCaptured = false,\n    applyBackgroundColorToBlockedElements = false\n  } = options;\n  let { needsMask } = options;\n  let { preserveWhiteSpace = true } = options;\n  if (!needsMask) {\n    const checkAncestors = needsMask === void 0;\n    needsMask = needMaskingText(\n      n2,\n      maskTextClass,\n      maskTextSelector,\n      checkAncestors\n    );\n  }\n  const _serializedNode = serializeNode(n2, {\n    doc,\n    mirror: mirror2,\n    blockClass,\n    blockSelector,\n    needsMask,\n    inlineStylesheet,\n    maskInputOptions,\n    maskTextFn,\n    maskInputFn,\n    dataURLOptions,\n    inlineImages,\n    recordCanvas,\n    keepIframeSrcFn,\n    newlyAddedElement,\n    cssCaptured,\n    applyBackgroundColorToBlockedElements\n  });\n  if (!_serializedNode) {\n    console.warn(n2, \"not serialized\");\n    return null;\n  }\n  let id;\n  if (mirror2.hasNode(n2)) {\n    id = mirror2.getId(n2);\n  } else if (slimDOMExcluded(_serializedNode, slimDOMOptions) || !preserveWhiteSpace && _serializedNode.type === NodeType$3.Text && !_serializedNode.textContent.replace(/^\\s+|\\s+$/gm, \"\").length) {\n    id = IGNORED_NODE;\n  } else {\n    id = genId();\n  }\n  const serializedNode = Object.assign(_serializedNode, { id });\n  mirror2.add(n2, serializedNode);\n  if (id === IGNORED_NODE) {\n    return null;\n  }\n  if (onSerialize) {\n    onSerialize(n2);\n  }\n  let recordChild = !skipChild;\n  if (serializedNode.type === NodeType$3.Element) {\n    recordChild = recordChild && !serializedNode.needBlock;\n    delete serializedNode.needBlock;\n    const shadowRootEl = index$1.shadowRoot(n2);\n    if (shadowRootEl && isNativeShadowDom(shadowRootEl))\n      serializedNode.isShadowHost = true;\n  }\n  if ((serializedNode.type === NodeType$3.Document || serializedNode.type === NodeType$3.Element) && recordChild) {\n    if (slimDOMOptions.headWhitespace && serializedNode.type === NodeType$3.Element && serializedNode.tagName === \"head\") {\n      preserveWhiteSpace = false;\n    }\n    const bypassOptions = {\n      doc,\n      mirror: mirror2,\n      blockClass,\n      blockSelector,\n      needsMask,\n      maskTextClass,\n      maskTextSelector,\n      skipChild,\n      inlineStylesheet,\n      maskInputOptions,\n      maskTextFn,\n      maskInputFn,\n      slimDOMOptions,\n      dataURLOptions,\n      inlineImages,\n      recordCanvas,\n      preserveWhiteSpace,\n      onSerialize,\n      onIframeLoad,\n      iframeLoadTimeout,\n      onStylesheetLoad,\n      stylesheetLoadTimeout,\n      keepIframeSrcFn,\n      cssCaptured: false,\n      applyBackgroundColorToBlockedElements\n    };\n    if (serializedNode.type === NodeType$3.Element && serializedNode.tagName === \"textarea\" && serializedNode.attributes.value !== void 0) ;\n    else {\n      if (serializedNode.type === NodeType$3.Element && serializedNode.attributes._cssText !== void 0 && typeof serializedNode.attributes._cssText === \"string\") {\n        bypassOptions.cssCaptured = true;\n      }\n      for (const childN of Array.from(index$1.childNodes(n2))) {\n        const serializedChildNode = serializeNodeWithId(childN, bypassOptions);\n        if (serializedChildNode) {\n          serializedNode.childNodes.push(serializedChildNode);\n        }\n      }\n    }\n    let shadowRootEl = null;\n    if (isElement(n2) && (shadowRootEl = index$1.shadowRoot(n2))) {\n      for (const childN of Array.from(index$1.childNodes(shadowRootEl))) {\n        const serializedChildNode = serializeNodeWithId(childN, bypassOptions);\n        if (serializedChildNode) {\n          isNativeShadowDom(shadowRootEl) && (serializedChildNode.isShadow = true);\n          serializedNode.childNodes.push(serializedChildNode);\n        }\n      }\n    }\n  }\n  const parent = index$1.parentNode(n2);\n  if (parent && isShadowRoot(parent) && isNativeShadowDom(parent)) {\n    serializedNode.isShadow = true;\n  }\n  if (serializedNode.type === NodeType$3.Element && serializedNode.tagName === \"iframe\") {\n    onceIframeLoaded(\n      n2,\n      () => {\n        const iframeDoc = n2.contentDocument;\n        if (iframeDoc && onIframeLoad) {\n          const serializedIframeNode = serializeNodeWithId(iframeDoc, {\n            doc: iframeDoc,\n            mirror: mirror2,\n            blockClass,\n            blockSelector,\n            needsMask,\n            maskTextClass,\n            maskTextSelector,\n            skipChild: false,\n            inlineStylesheet,\n            maskInputOptions,\n            maskTextFn,\n            maskInputFn,\n            slimDOMOptions,\n            dataURLOptions,\n            inlineImages,\n            recordCanvas,\n            preserveWhiteSpace,\n            onSerialize,\n            onIframeLoad,\n            iframeLoadTimeout,\n            onStylesheetLoad,\n            stylesheetLoadTimeout,\n            keepIframeSrcFn\n          });\n          if (serializedIframeNode) {\n            onIframeLoad(\n              n2,\n              serializedIframeNode\n            );\n          }\n        }\n      },\n      iframeLoadTimeout\n    );\n  }\n  if (serializedNode.type === NodeType$3.Element && serializedNode.tagName === \"link\" && typeof serializedNode.attributes.rel === \"string\" && (serializedNode.attributes.rel === \"stylesheet\" || serializedNode.attributes.rel === \"preload\" && typeof serializedNode.attributes.href === \"string\" && extractFileExtension(serializedNode.attributes.href) === \"css\")) {\n    onceStylesheetLoaded(\n      n2,\n      () => {\n        if (onStylesheetLoad) {\n          const serializedLinkNode = serializeNodeWithId(n2, {\n            doc,\n            mirror: mirror2,\n            blockClass,\n            blockSelector,\n            needsMask,\n            maskTextClass,\n            maskTextSelector,\n            skipChild: false,\n            inlineStylesheet,\n            maskInputOptions,\n            maskTextFn,\n            maskInputFn,\n            slimDOMOptions,\n            dataURLOptions,\n            inlineImages,\n            recordCanvas,\n            preserveWhiteSpace,\n            onSerialize,\n            onIframeLoad,\n            iframeLoadTimeout,\n            onStylesheetLoad,\n            stylesheetLoadTimeout,\n            keepIframeSrcFn\n          });\n          if (serializedLinkNode) {\n            onStylesheetLoad(\n              n2,\n              serializedLinkNode\n            );\n          }\n        }\n      },\n      stylesheetLoadTimeout\n    );\n  }\n  return serializedNode;\n}\nfunction snapshot(n2, options) {\n  const {\n    mirror: mirror2 = new Mirror(),\n    blockClass = \"rr-block\",\n    blockSelector = null,\n    maskTextClass = \"rr-mask\",\n    maskTextSelector = null,\n    inlineStylesheet = true,\n    inlineImages = false,\n    recordCanvas = false,\n    maskAllInputs = false,\n    maskTextFn,\n    maskInputFn,\n    slimDOM = false,\n    dataURLOptions,\n    preserveWhiteSpace,\n    onSerialize,\n    onIframeLoad,\n    iframeLoadTimeout,\n    onStylesheetLoad,\n    stylesheetLoadTimeout,\n    keepIframeSrcFn = () => false,\n    applyBackgroundColorToBlockedElements = false\n  } = options || {};\n  const maskInputOptions = maskAllInputs === true ? {\n    color: true,\n    date: true,\n    \"datetime-local\": true,\n    email: true,\n    month: true,\n    number: true,\n    range: true,\n    search: true,\n    tel: true,\n    text: true,\n    time: true,\n    url: true,\n    week: true,\n    textarea: true,\n    select: true,\n    password: true\n  } : maskAllInputs === false ? {\n    password: true\n  } : maskAllInputs;\n  const slimDOMOptions = slimDOM === true || slimDOM === \"all\" ? (\n    // if true: set of sensible options that should not throw away any information\n    {\n      script: true,\n      comment: true,\n      headFavicon: true,\n      headWhitespace: true,\n      headMetaDescKeywords: slimDOM === \"all\",\n      // destructive\n      headMetaSocial: true,\n      headMetaRobots: true,\n      headMetaHttpEquiv: true,\n      headMetaAuthorship: true,\n      headMetaVerification: true\n    }\n  ) : slimDOM === false ? {} : slimDOM;\n  return serializeNodeWithId(n2, {\n    doc: n2,\n    mirror: mirror2,\n    blockClass,\n    blockSelector,\n    maskTextClass,\n    maskTextSelector,\n    skipChild: false,\n    inlineStylesheet,\n    maskInputOptions,\n    maskTextFn,\n    maskInputFn,\n    slimDOMOptions,\n    dataURLOptions,\n    inlineImages,\n    recordCanvas,\n    preserveWhiteSpace,\n    onSerialize,\n    onIframeLoad,\n    iframeLoadTimeout,\n    onStylesheetLoad,\n    stylesheetLoadTimeout,\n    keepIframeSrcFn,\n    newlyAddedElement: false,\n    applyBackgroundColorToBlockedElements\n  });\n}\nfunction getDefaultExportFromCjs$1(x2) {\n  return x2 && x2.__esModule && Object.prototype.hasOwnProperty.call(x2, \"default\") ? x2[\"default\"] : x2;\n}\nfunction getAugmentedNamespace$1(n2) {\n  if (n2.__esModule) return n2;\n  var f2 = n2.default;\n  if (typeof f2 == \"function\") {\n    var a2 = function a22() {\n      if (this instanceof a22) {\n        return Reflect.construct(f2, arguments, this.constructor);\n      }\n      return f2.apply(this, arguments);\n    };\n    a2.prototype = f2.prototype;\n  } else a2 = {};\n  Object.defineProperty(a2, \"__esModule\", { value: true });\n  Object.keys(n2).forEach(function(k) {\n    var d = Object.getOwnPropertyDescriptor(n2, k);\n    Object.defineProperty(a2, k, d.get ? d : {\n      enumerable: true,\n      get: function() {\n        return n2[k];\n      }\n    });\n  });\n  return a2;\n}\nvar picocolors_browser$1 = { exports: {} };\nvar x$1 = String;\nvar create$1 = function() {\n  return { isColorSupported: false, reset: x$1, bold: x$1, dim: x$1, italic: x$1, underline: x$1, inverse: x$1, hidden: x$1, strikethrough: x$1, black: x$1, red: x$1, green: x$1, yellow: x$1, blue: x$1, magenta: x$1, cyan: x$1, white: x$1, gray: x$1, bgBlack: x$1, bgRed: x$1, bgGreen: x$1, bgYellow: x$1, bgBlue: x$1, bgMagenta: x$1, bgCyan: x$1, bgWhite: x$1 };\n};\npicocolors_browser$1.exports = create$1();\npicocolors_browser$1.exports.createColors = create$1;\nvar picocolors_browserExports$1 = picocolors_browser$1.exports;\nconst __viteBrowserExternal$2 = {};\nconst __viteBrowserExternal$1$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  default: __viteBrowserExternal$2\n}, Symbol.toStringTag, { value: \"Module\" }));\nconst require$$2$1 = /* @__PURE__ */ getAugmentedNamespace$1(__viteBrowserExternal$1$1);\nlet pico$1 = picocolors_browserExports$1;\nlet terminalHighlight$1$1 = require$$2$1;\nlet CssSyntaxError$3$1 = class CssSyntaxError extends Error {\n  constructor(message, line, column, source, file, plugin22) {\n    super(message);\n    this.name = \"CssSyntaxError\";\n    this.reason = message;\n    if (file) {\n      this.file = file;\n    }\n    if (source) {\n      this.source = source;\n    }\n    if (plugin22) {\n      this.plugin = plugin22;\n    }\n    if (typeof line !== \"undefined\" && typeof column !== \"undefined\") {\n      if (typeof line === \"number\") {\n        this.line = line;\n        this.column = column;\n      } else {\n        this.line = line.line;\n        this.column = line.column;\n        this.endLine = column.line;\n        this.endColumn = column.column;\n      }\n    }\n    this.setMessage();\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, CssSyntaxError);\n    }\n  }\n  setMessage() {\n    this.message = this.plugin ? this.plugin + \": \" : \"\";\n    this.message += this.file ? this.file : \"<css input>\";\n    if (typeof this.line !== \"undefined\") {\n      this.message += \":\" + this.line + \":\" + this.column;\n    }\n    this.message += \": \" + this.reason;\n  }\n  showSourceCode(color) {\n    if (!this.source) return \"\";\n    let css = this.source;\n    if (color == null) color = pico$1.isColorSupported;\n    if (terminalHighlight$1$1) {\n      if (color) css = terminalHighlight$1$1(css);\n    }\n    let lines = css.split(/\\r?\\n/);\n    let start = Math.max(this.line - 3, 0);\n    let end = Math.min(this.line + 2, lines.length);\n    let maxWidth = String(end).length;\n    let mark, aside;\n    if (color) {\n      let { bold, gray, red } = pico$1.createColors(true);\n      mark = (text) => bold(red(text));\n      aside = (text) => gray(text);\n    } else {\n      mark = aside = (str) => str;\n    }\n    return lines.slice(start, end).map((line, index2) => {\n      let number = start + 1 + index2;\n      let gutter = \" \" + (\" \" + number).slice(-maxWidth) + \" | \";\n      if (number === this.line) {\n        let spacing = aside(gutter.replace(/\\d/g, \" \")) + line.slice(0, this.column - 1).replace(/[^\\t]/g, \" \");\n        return mark(\">\") + aside(gutter) + line + \"\\n \" + spacing + mark(\"^\");\n      }\n      return \" \" + aside(gutter) + line;\n    }).join(\"\\n\");\n  }\n  toString() {\n    let code = this.showSourceCode();\n    if (code) {\n      code = \"\\n\\n\" + code + \"\\n\";\n    }\n    return this.name + \": \" + this.message + code;\n  }\n};\nvar cssSyntaxError$1 = CssSyntaxError$3$1;\nCssSyntaxError$3$1.default = CssSyntaxError$3$1;\nvar symbols$1 = {};\nsymbols$1.isClean = Symbol(\"isClean\");\nsymbols$1.my = Symbol(\"my\");\nconst DEFAULT_RAW$1 = {\n  after: \"\\n\",\n  beforeClose: \"\\n\",\n  beforeComment: \"\\n\",\n  beforeDecl: \"\\n\",\n  beforeOpen: \" \",\n  beforeRule: \"\\n\",\n  colon: \": \",\n  commentLeft: \" \",\n  commentRight: \" \",\n  emptyBody: \"\",\n  indent: \"    \",\n  semicolon: false\n};\nfunction capitalize$1(str) {\n  return str[0].toUpperCase() + str.slice(1);\n}\nlet Stringifier$2$1 = class Stringifier {\n  constructor(builder) {\n    this.builder = builder;\n  }\n  atrule(node2, semicolon) {\n    let name = \"@\" + node2.name;\n    let params = node2.params ? this.rawValue(node2, \"params\") : \"\";\n    if (typeof node2.raws.afterName !== \"undefined\") {\n      name += node2.raws.afterName;\n    } else if (params) {\n      name += \" \";\n    }\n    if (node2.nodes) {\n      this.block(node2, name + params);\n    } else {\n      let end = (node2.raws.between || \"\") + (semicolon ? \";\" : \"\");\n      this.builder(name + params + end, node2);\n    }\n  }\n  beforeAfter(node2, detect) {\n    let value;\n    if (node2.type === \"decl\") {\n      value = this.raw(node2, null, \"beforeDecl\");\n    } else if (node2.type === \"comment\") {\n      value = this.raw(node2, null, \"beforeComment\");\n    } else if (detect === \"before\") {\n      value = this.raw(node2, null, \"beforeRule\");\n    } else {\n      value = this.raw(node2, null, \"beforeClose\");\n    }\n    let buf = node2.parent;\n    let depth = 0;\n    while (buf && buf.type !== \"root\") {\n      depth += 1;\n      buf = buf.parent;\n    }\n    if (value.includes(\"\\n\")) {\n      let indent = this.raw(node2, null, \"indent\");\n      if (indent.length) {\n        for (let step = 0; step < depth; step++) value += indent;\n      }\n    }\n    return value;\n  }\n  block(node2, start) {\n    let between = this.raw(node2, \"between\", \"beforeOpen\");\n    this.builder(start + between + \"{\", node2, \"start\");\n    let after;\n    if (node2.nodes && node2.nodes.length) {\n      this.body(node2);\n      after = this.raw(node2, \"after\");\n    } else {\n      after = this.raw(node2, \"after\", \"emptyBody\");\n    }\n    if (after) this.builder(after);\n    this.builder(\"}\", node2, \"end\");\n  }\n  body(node2) {\n    let last = node2.nodes.length - 1;\n    while (last > 0) {\n      if (node2.nodes[last].type !== \"comment\") break;\n      last -= 1;\n    }\n    let semicolon = this.raw(node2, \"semicolon\");\n    for (let i2 = 0; i2 < node2.nodes.length; i2++) {\n      let child = node2.nodes[i2];\n      let before = this.raw(child, \"before\");\n      if (before) this.builder(before);\n      this.stringify(child, last !== i2 || semicolon);\n    }\n  }\n  comment(node2) {\n    let left = this.raw(node2, \"left\", \"commentLeft\");\n    let right = this.raw(node2, \"right\", \"commentRight\");\n    this.builder(\"/*\" + left + node2.text + right + \"*/\", node2);\n  }\n  decl(node2, semicolon) {\n    let between = this.raw(node2, \"between\", \"colon\");\n    let string = node2.prop + between + this.rawValue(node2, \"value\");\n    if (node2.important) {\n      string += node2.raws.important || \" !important\";\n    }\n    if (semicolon) string += \";\";\n    this.builder(string, node2);\n  }\n  document(node2) {\n    this.body(node2);\n  }\n  raw(node2, own, detect) {\n    let value;\n    if (!detect) detect = own;\n    if (own) {\n      value = node2.raws[own];\n      if (typeof value !== \"undefined\") return value;\n    }\n    let parent = node2.parent;\n    if (detect === \"before\") {\n      if (!parent || parent.type === \"root\" && parent.first === node2) {\n        return \"\";\n      }\n      if (parent && parent.type === \"document\") {\n        return \"\";\n      }\n    }\n    if (!parent) return DEFAULT_RAW$1[detect];\n    let root2 = node2.root();\n    if (!root2.rawCache) root2.rawCache = {};\n    if (typeof root2.rawCache[detect] !== \"undefined\") {\n      return root2.rawCache[detect];\n    }\n    if (detect === \"before\" || detect === \"after\") {\n      return this.beforeAfter(node2, detect);\n    } else {\n      let method = \"raw\" + capitalize$1(detect);\n      if (this[method]) {\n        value = this[method](root2, node2);\n      } else {\n        root2.walk((i2) => {\n          value = i2.raws[own];\n          if (typeof value !== \"undefined\") return false;\n        });\n      }\n    }\n    if (typeof value === \"undefined\") value = DEFAULT_RAW$1[detect];\n    root2.rawCache[detect] = value;\n    return value;\n  }\n  rawBeforeClose(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && i2.nodes.length > 0) {\n        if (typeof i2.raws.after !== \"undefined\") {\n          value = i2.raws.after;\n          if (value.includes(\"\\n\")) {\n            value = value.replace(/[^\\n]+$/, \"\");\n          }\n          return false;\n        }\n      }\n    });\n    if (value) value = value.replace(/\\S/g, \"\");\n    return value;\n  }\n  rawBeforeComment(root2, node2) {\n    let value;\n    root2.walkComments((i2) => {\n      if (typeof i2.raws.before !== \"undefined\") {\n        value = i2.raws.before;\n        if (value.includes(\"\\n\")) {\n          value = value.replace(/[^\\n]+$/, \"\");\n        }\n        return false;\n      }\n    });\n    if (typeof value === \"undefined\") {\n      value = this.raw(node2, null, \"beforeDecl\");\n    } else if (value) {\n      value = value.replace(/\\S/g, \"\");\n    }\n    return value;\n  }\n  rawBeforeDecl(root2, node2) {\n    let value;\n    root2.walkDecls((i2) => {\n      if (typeof i2.raws.before !== \"undefined\") {\n        value = i2.raws.before;\n        if (value.includes(\"\\n\")) {\n          value = value.replace(/[^\\n]+$/, \"\");\n        }\n        return false;\n      }\n    });\n    if (typeof value === \"undefined\") {\n      value = this.raw(node2, null, \"beforeRule\");\n    } else if (value) {\n      value = value.replace(/\\S/g, \"\");\n    }\n    return value;\n  }\n  rawBeforeOpen(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.type !== \"decl\") {\n        value = i2.raws.between;\n        if (typeof value !== \"undefined\") return false;\n      }\n    });\n    return value;\n  }\n  rawBeforeRule(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && (i2.parent !== root2 || root2.first !== i2)) {\n        if (typeof i2.raws.before !== \"undefined\") {\n          value = i2.raws.before;\n          if (value.includes(\"\\n\")) {\n            value = value.replace(/[^\\n]+$/, \"\");\n          }\n          return false;\n        }\n      }\n    });\n    if (value) value = value.replace(/\\S/g, \"\");\n    return value;\n  }\n  rawColon(root2) {\n    let value;\n    root2.walkDecls((i2) => {\n      if (typeof i2.raws.between !== \"undefined\") {\n        value = i2.raws.between.replace(/[^\\s:]/g, \"\");\n        return false;\n      }\n    });\n    return value;\n  }\n  rawEmptyBody(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && i2.nodes.length === 0) {\n        value = i2.raws.after;\n        if (typeof value !== \"undefined\") return false;\n      }\n    });\n    return value;\n  }\n  rawIndent(root2) {\n    if (root2.raws.indent) return root2.raws.indent;\n    let value;\n    root2.walk((i2) => {\n      let p = i2.parent;\n      if (p && p !== root2 && p.parent && p.parent === root2) {\n        if (typeof i2.raws.before !== \"undefined\") {\n          let parts = i2.raws.before.split(\"\\n\");\n          value = parts[parts.length - 1];\n          value = value.replace(/\\S/g, \"\");\n          return false;\n        }\n      }\n    });\n    return value;\n  }\n  rawSemicolon(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && i2.nodes.length && i2.last.type === \"decl\") {\n        value = i2.raws.semicolon;\n        if (typeof value !== \"undefined\") return false;\n      }\n    });\n    return value;\n  }\n  rawValue(node2, prop) {\n    let value = node2[prop];\n    let raw = node2.raws[prop];\n    if (raw && raw.value === value) {\n      return raw.raw;\n    }\n    return value;\n  }\n  root(node2) {\n    this.body(node2);\n    if (node2.raws.after) this.builder(node2.raws.after);\n  }\n  rule(node2) {\n    this.block(node2, this.rawValue(node2, \"selector\"));\n    if (node2.raws.ownSemicolon) {\n      this.builder(node2.raws.ownSemicolon, node2, \"end\");\n    }\n  }\n  stringify(node2, semicolon) {\n    if (!this[node2.type]) {\n      throw new Error(\n        \"Unknown AST node type \" + node2.type + \". Maybe you need to change PostCSS stringifier.\"\n      );\n    }\n    this[node2.type](node2, semicolon);\n  }\n};\nvar stringifier$1 = Stringifier$2$1;\nStringifier$2$1.default = Stringifier$2$1;\nlet Stringifier$1$1 = stringifier$1;\nfunction stringify$4$1(node2, builder) {\n  let str = new Stringifier$1$1(builder);\n  str.stringify(node2);\n}\nvar stringify_1$1 = stringify$4$1;\nstringify$4$1.default = stringify$4$1;\nlet { isClean: isClean$2$1, my: my$2$1 } = symbols$1;\nlet CssSyntaxError$2$1 = cssSyntaxError$1;\nlet Stringifier2$1 = stringifier$1;\nlet stringify$3$1 = stringify_1$1;\nfunction cloneNode$1(obj, parent) {\n  let cloned = new obj.constructor();\n  for (let i2 in obj) {\n    if (!Object.prototype.hasOwnProperty.call(obj, i2)) {\n      continue;\n    }\n    if (i2 === \"proxyCache\") continue;\n    let value = obj[i2];\n    let type = typeof value;\n    if (i2 === \"parent\" && type === \"object\") {\n      if (parent) cloned[i2] = parent;\n    } else if (i2 === \"source\") {\n      cloned[i2] = value;\n    } else if (Array.isArray(value)) {\n      cloned[i2] = value.map((j) => cloneNode$1(j, cloned));\n    } else {\n      if (type === \"object\" && value !== null) value = cloneNode$1(value);\n      cloned[i2] = value;\n    }\n  }\n  return cloned;\n}\nlet Node$4$1 = class Node2 {\n  constructor(defaults = {}) {\n    this.raws = {};\n    this[isClean$2$1] = false;\n    this[my$2$1] = true;\n    for (let name in defaults) {\n      if (name === \"nodes\") {\n        this.nodes = [];\n        for (let node2 of defaults[name]) {\n          if (typeof node2.clone === \"function\") {\n            this.append(node2.clone());\n          } else {\n            this.append(node2);\n          }\n        }\n      } else {\n        this[name] = defaults[name];\n      }\n    }\n  }\n  addToError(error) {\n    error.postcssNode = this;\n    if (error.stack && this.source && /\\n\\s{4}at /.test(error.stack)) {\n      let s2 = this.source;\n      error.stack = error.stack.replace(\n        /\\n\\s{4}at /,\n        `$&${s2.input.from}:${s2.start.line}:${s2.start.column}$&`\n      );\n    }\n    return error;\n  }\n  after(add) {\n    this.parent.insertAfter(this, add);\n    return this;\n  }\n  assign(overrides = {}) {\n    for (let name in overrides) {\n      this[name] = overrides[name];\n    }\n    return this;\n  }\n  before(add) {\n    this.parent.insertBefore(this, add);\n    return this;\n  }\n  cleanRaws(keepBetween) {\n    delete this.raws.before;\n    delete this.raws.after;\n    if (!keepBetween) delete this.raws.between;\n  }\n  clone(overrides = {}) {\n    let cloned = cloneNode$1(this);\n    for (let name in overrides) {\n      cloned[name] = overrides[name];\n    }\n    return cloned;\n  }\n  cloneAfter(overrides = {}) {\n    let cloned = this.clone(overrides);\n    this.parent.insertAfter(this, cloned);\n    return cloned;\n  }\n  cloneBefore(overrides = {}) {\n    let cloned = this.clone(overrides);\n    this.parent.insertBefore(this, cloned);\n    return cloned;\n  }\n  error(message, opts = {}) {\n    if (this.source) {\n      let { end, start } = this.rangeBy(opts);\n      return this.source.input.error(\n        message,\n        { column: start.column, line: start.line },\n        { column: end.column, line: end.line },\n        opts\n      );\n    }\n    return new CssSyntaxError$2$1(message);\n  }\n  getProxyProcessor() {\n    return {\n      get(node2, prop) {\n        if (prop === \"proxyOf\") {\n          return node2;\n        } else if (prop === \"root\") {\n          return () => node2.root().toProxy();\n        } else {\n          return node2[prop];\n        }\n      },\n      set(node2, prop, value) {\n        if (node2[prop] === value) return true;\n        node2[prop] = value;\n        if (prop === \"prop\" || prop === \"value\" || prop === \"name\" || prop === \"params\" || prop === \"important\" || /* c8 ignore next */\n        prop === \"text\") {\n          node2.markDirty();\n        }\n        return true;\n      }\n    };\n  }\n  markDirty() {\n    if (this[isClean$2$1]) {\n      this[isClean$2$1] = false;\n      let next = this;\n      while (next = next.parent) {\n        next[isClean$2$1] = false;\n      }\n    }\n  }\n  next() {\n    if (!this.parent) return void 0;\n    let index2 = this.parent.index(this);\n    return this.parent.nodes[index2 + 1];\n  }\n  positionBy(opts, stringRepresentation) {\n    let pos = this.source.start;\n    if (opts.index) {\n      pos = this.positionInside(opts.index, stringRepresentation);\n    } else if (opts.word) {\n      stringRepresentation = this.toString();\n      let index2 = stringRepresentation.indexOf(opts.word);\n      if (index2 !== -1) pos = this.positionInside(index2, stringRepresentation);\n    }\n    return pos;\n  }\n  positionInside(index2, stringRepresentation) {\n    let string = stringRepresentation || this.toString();\n    let column = this.source.start.column;\n    let line = this.source.start.line;\n    for (let i2 = 0; i2 < index2; i2++) {\n      if (string[i2] === \"\\n\") {\n        column = 1;\n        line += 1;\n      } else {\n        column += 1;\n      }\n    }\n    return { column, line };\n  }\n  prev() {\n    if (!this.parent) return void 0;\n    let index2 = this.parent.index(this);\n    return this.parent.nodes[index2 - 1];\n  }\n  rangeBy(opts) {\n    let start = {\n      column: this.source.start.column,\n      line: this.source.start.line\n    };\n    let end = this.source.end ? {\n      column: this.source.end.column + 1,\n      line: this.source.end.line\n    } : {\n      column: start.column + 1,\n      line: start.line\n    };\n    if (opts.word) {\n      let stringRepresentation = this.toString();\n      let index2 = stringRepresentation.indexOf(opts.word);\n      if (index2 !== -1) {\n        start = this.positionInside(index2, stringRepresentation);\n        end = this.positionInside(index2 + opts.word.length, stringRepresentation);\n      }\n    } else {\n      if (opts.start) {\n        start = {\n          column: opts.start.column,\n          line: opts.start.line\n        };\n      } else if (opts.index) {\n        start = this.positionInside(opts.index);\n      }\n      if (opts.end) {\n        end = {\n          column: opts.end.column,\n          line: opts.end.line\n        };\n      } else if (typeof opts.endIndex === \"number\") {\n        end = this.positionInside(opts.endIndex);\n      } else if (opts.index) {\n        end = this.positionInside(opts.index + 1);\n      }\n    }\n    if (end.line < start.line || end.line === start.line && end.column <= start.column) {\n      end = { column: start.column + 1, line: start.line };\n    }\n    return { end, start };\n  }\n  raw(prop, defaultType) {\n    let str = new Stringifier2$1();\n    return str.raw(this, prop, defaultType);\n  }\n  remove() {\n    if (this.parent) {\n      this.parent.removeChild(this);\n    }\n    this.parent = void 0;\n    return this;\n  }\n  replaceWith(...nodes) {\n    if (this.parent) {\n      let bookmark = this;\n      let foundSelf = false;\n      for (let node2 of nodes) {\n        if (node2 === this) {\n          foundSelf = true;\n        } else if (foundSelf) {\n          this.parent.insertAfter(bookmark, node2);\n          bookmark = node2;\n        } else {\n          this.parent.insertBefore(bookmark, node2);\n        }\n      }\n      if (!foundSelf) {\n        this.remove();\n      }\n    }\n    return this;\n  }\n  root() {\n    let result2 = this;\n    while (result2.parent && result2.parent.type !== \"document\") {\n      result2 = result2.parent;\n    }\n    return result2;\n  }\n  toJSON(_, inputs) {\n    let fixed = {};\n    let emitInputs = inputs == null;\n    inputs = inputs || /* @__PURE__ */ new Map();\n    let inputsNextIndex = 0;\n    for (let name in this) {\n      if (!Object.prototype.hasOwnProperty.call(this, name)) {\n        continue;\n      }\n      if (name === \"parent\" || name === \"proxyCache\") continue;\n      let value = this[name];\n      if (Array.isArray(value)) {\n        fixed[name] = value.map((i2) => {\n          if (typeof i2 === \"object\" && i2.toJSON) {\n            return i2.toJSON(null, inputs);\n          } else {\n            return i2;\n          }\n        });\n      } else if (typeof value === \"object\" && value.toJSON) {\n        fixed[name] = value.toJSON(null, inputs);\n      } else if (name === \"source\") {\n        let inputId = inputs.get(value.input);\n        if (inputId == null) {\n          inputId = inputsNextIndex;\n          inputs.set(value.input, inputsNextIndex);\n          inputsNextIndex++;\n        }\n        fixed[name] = {\n          end: value.end,\n          inputId,\n          start: value.start\n        };\n      } else {\n        fixed[name] = value;\n      }\n    }\n    if (emitInputs) {\n      fixed.inputs = [...inputs.keys()].map((input2) => input2.toJSON());\n    }\n    return fixed;\n  }\n  toProxy() {\n    if (!this.proxyCache) {\n      this.proxyCache = new Proxy(this, this.getProxyProcessor());\n    }\n    return this.proxyCache;\n  }\n  toString(stringifier2 = stringify$3$1) {\n    if (stringifier2.stringify) stringifier2 = stringifier2.stringify;\n    let result2 = \"\";\n    stringifier2(this, (i2) => {\n      result2 += i2;\n    });\n    return result2;\n  }\n  warn(result2, text, opts) {\n    let data = { node: this };\n    for (let i2 in opts) data[i2] = opts[i2];\n    return result2.warn(text, data);\n  }\n  get proxyOf() {\n    return this;\n  }\n};\nvar node$1 = Node$4$1;\nNode$4$1.default = Node$4$1;\nlet Node$3$1 = node$1;\nlet Declaration$4$1 = class Declaration extends Node$3$1 {\n  constructor(defaults) {\n    if (defaults && typeof defaults.value !== \"undefined\" && typeof defaults.value !== \"string\") {\n      defaults = { ...defaults, value: String(defaults.value) };\n    }\n    super(defaults);\n    this.type = \"decl\";\n  }\n  get variable() {\n    return this.prop.startsWith(\"--\") || this.prop[0] === \"$\";\n  }\n};\nvar declaration$1 = Declaration$4$1;\nDeclaration$4$1.default = Declaration$4$1;\nlet urlAlphabet$1 = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\nlet customAlphabet$1 = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = \"\";\n    let i2 = size;\n    while (i2--) {\n      id += alphabet[Math.random() * alphabet.length | 0];\n    }\n    return id;\n  };\n};\nlet nanoid$1$1 = (size = 21) => {\n  let id = \"\";\n  let i2 = size;\n  while (i2--) {\n    id += urlAlphabet$1[Math.random() * 64 | 0];\n  }\n  return id;\n};\nvar nonSecure$1 = { nanoid: nanoid$1$1, customAlphabet: customAlphabet$1 };\nlet { SourceMapConsumer: SourceMapConsumer$2$1, SourceMapGenerator: SourceMapGenerator$2$1 } = require$$2$1;\nlet { existsSync: existsSync$1, readFileSync: readFileSync$1 } = require$$2$1;\nlet { dirname: dirname$1$1, join: join$1 } = require$$2$1;\nfunction fromBase64$1(str) {\n  if (Buffer) {\n    return Buffer.from(str, \"base64\").toString();\n  } else {\n    return window.atob(str);\n  }\n}\nlet PreviousMap$2$1 = class PreviousMap {\n  constructor(css, opts) {\n    if (opts.map === false) return;\n    this.loadAnnotation(css);\n    this.inline = this.startWith(this.annotation, \"data:\");\n    let prev = opts.map ? opts.map.prev : void 0;\n    let text = this.loadMap(opts.from, prev);\n    if (!this.mapFile && opts.from) {\n      this.mapFile = opts.from;\n    }\n    if (this.mapFile) this.root = dirname$1$1(this.mapFile);\n    if (text) this.text = text;\n  }\n  consumer() {\n    if (!this.consumerCache) {\n      this.consumerCache = new SourceMapConsumer$2$1(this.text);\n    }\n    return this.consumerCache;\n  }\n  decodeInline(text) {\n    let baseCharsetUri = /^data:application\\/json;charset=utf-?8;base64,/;\n    let baseUri = /^data:application\\/json;base64,/;\n    let charsetUri = /^data:application\\/json;charset=utf-?8,/;\n    let uri = /^data:application\\/json,/;\n    if (charsetUri.test(text) || uri.test(text)) {\n      return decodeURIComponent(text.substr(RegExp.lastMatch.length));\n    }\n    if (baseCharsetUri.test(text) || baseUri.test(text)) {\n      return fromBase64$1(text.substr(RegExp.lastMatch.length));\n    }\n    let encoding = text.match(/data:application\\/json;([^,]+),/)[1];\n    throw new Error(\"Unsupported source map encoding \" + encoding);\n  }\n  getAnnotationURL(sourceMapString) {\n    return sourceMapString.replace(/^\\/\\*\\s*# sourceMappingURL=/, \"\").trim();\n  }\n  isMap(map) {\n    if (typeof map !== \"object\") return false;\n    return typeof map.mappings === \"string\" || typeof map._mappings === \"string\" || Array.isArray(map.sections);\n  }\n  loadAnnotation(css) {\n    let comments = css.match(/\\/\\*\\s*# sourceMappingURL=/gm);\n    if (!comments) return;\n    let start = css.lastIndexOf(comments.pop());\n    let end = css.indexOf(\"*/\", start);\n    if (start > -1 && end > -1) {\n      this.annotation = this.getAnnotationURL(css.substring(start, end));\n    }\n  }\n  loadFile(path) {\n    this.root = dirname$1$1(path);\n    if (existsSync$1(path)) {\n      this.mapFile = path;\n      return readFileSync$1(path, \"utf-8\").toString().trim();\n    }\n  }\n  loadMap(file, prev) {\n    if (prev === false) return false;\n    if (prev) {\n      if (typeof prev === \"string\") {\n        return prev;\n      } else if (typeof prev === \"function\") {\n        let prevPath = prev(file);\n        if (prevPath) {\n          let map = this.loadFile(prevPath);\n          if (!map) {\n            throw new Error(\n              \"Unable to load previous source map: \" + prevPath.toString()\n            );\n          }\n          return map;\n        }\n      } else if (prev instanceof SourceMapConsumer$2$1) {\n        return SourceMapGenerator$2$1.fromSourceMap(prev).toString();\n      } else if (prev instanceof SourceMapGenerator$2$1) {\n        return prev.toString();\n      } else if (this.isMap(prev)) {\n        return JSON.stringify(prev);\n      } else {\n        throw new Error(\n          \"Unsupported previous source map format: \" + prev.toString()\n        );\n      }\n    } else if (this.inline) {\n      return this.decodeInline(this.annotation);\n    } else if (this.annotation) {\n      let map = this.annotation;\n      if (file) map = join$1(dirname$1$1(file), map);\n      return this.loadFile(map);\n    }\n  }\n  startWith(string, start) {\n    if (!string) return false;\n    return string.substr(0, start.length) === start;\n  }\n  withContent() {\n    return !!(this.consumer().sourcesContent && this.consumer().sourcesContent.length > 0);\n  }\n};\nvar previousMap$1 = PreviousMap$2$1;\nPreviousMap$2$1.default = PreviousMap$2$1;\nlet { SourceMapConsumer: SourceMapConsumer$1$1, SourceMapGenerator: SourceMapGenerator$1$1 } = require$$2$1;\nlet { fileURLToPath: fileURLToPath$1, pathToFileURL: pathToFileURL$1$1 } = require$$2$1;\nlet { isAbsolute: isAbsolute$1, resolve: resolve$1$1 } = require$$2$1;\nlet { nanoid: nanoid$2 } = nonSecure$1;\nlet terminalHighlight$2 = require$$2$1;\nlet CssSyntaxError$1$1 = cssSyntaxError$1;\nlet PreviousMap$1$1 = previousMap$1;\nlet fromOffsetCache$1 = Symbol(\"fromOffsetCache\");\nlet sourceMapAvailable$1$1 = Boolean(SourceMapConsumer$1$1 && SourceMapGenerator$1$1);\nlet pathAvailable$1$1 = Boolean(resolve$1$1 && isAbsolute$1);\nlet Input$4$1 = class Input {\n  constructor(css, opts = {}) {\n    if (css === null || typeof css === \"undefined\" || typeof css === \"object\" && !css.toString) {\n      throw new Error(`PostCSS received ${css} instead of CSS string`);\n    }\n    this.css = css.toString();\n    if (this.css[0] === \"\\uFEFF\" || this.css[0] === \"￾\") {\n      this.hasBOM = true;\n      this.css = this.css.slice(1);\n    } else {\n      this.hasBOM = false;\n    }\n    if (opts.from) {\n      if (!pathAvailable$1$1 || /^\\w+:\\/\\//.test(opts.from) || isAbsolute$1(opts.from)) {\n        this.file = opts.from;\n      } else {\n        this.file = resolve$1$1(opts.from);\n      }\n    }\n    if (pathAvailable$1$1 && sourceMapAvailable$1$1) {\n      let map = new PreviousMap$1$1(this.css, opts);\n      if (map.text) {\n        this.map = map;\n        let file = map.consumer().file;\n        if (!this.file && file) this.file = this.mapResolve(file);\n      }\n    }\n    if (!this.file) {\n      this.id = \"<input css \" + nanoid$2(6) + \">\";\n    }\n    if (this.map) this.map.file = this.from;\n  }\n  error(message, line, column, opts = {}) {\n    let result2, endLine, endColumn;\n    if (line && typeof line === \"object\") {\n      let start = line;\n      let end = column;\n      if (typeof start.offset === \"number\") {\n        let pos = this.fromOffset(start.offset);\n        line = pos.line;\n        column = pos.col;\n      } else {\n        line = start.line;\n        column = start.column;\n      }\n      if (typeof end.offset === \"number\") {\n        let pos = this.fromOffset(end.offset);\n        endLine = pos.line;\n        endColumn = pos.col;\n      } else {\n        endLine = end.line;\n        endColumn = end.column;\n      }\n    } else if (!column) {\n      let pos = this.fromOffset(line);\n      line = pos.line;\n      column = pos.col;\n    }\n    let origin = this.origin(line, column, endLine, endColumn);\n    if (origin) {\n      result2 = new CssSyntaxError$1$1(\n        message,\n        origin.endLine === void 0 ? origin.line : { column: origin.column, line: origin.line },\n        origin.endLine === void 0 ? origin.column : { column: origin.endColumn, line: origin.endLine },\n        origin.source,\n        origin.file,\n        opts.plugin\n      );\n    } else {\n      result2 = new CssSyntaxError$1$1(\n        message,\n        endLine === void 0 ? line : { column, line },\n        endLine === void 0 ? column : { column: endColumn, line: endLine },\n        this.css,\n        this.file,\n        opts.plugin\n      );\n    }\n    result2.input = { column, endColumn, endLine, line, source: this.css };\n    if (this.file) {\n      if (pathToFileURL$1$1) {\n        result2.input.url = pathToFileURL$1$1(this.file).toString();\n      }\n      result2.input.file = this.file;\n    }\n    return result2;\n  }\n  fromOffset(offset) {\n    let lastLine, lineToIndex;\n    if (!this[fromOffsetCache$1]) {\n      let lines = this.css.split(\"\\n\");\n      lineToIndex = new Array(lines.length);\n      let prevIndex = 0;\n      for (let i2 = 0, l2 = lines.length; i2 < l2; i2++) {\n        lineToIndex[i2] = prevIndex;\n        prevIndex += lines[i2].length + 1;\n      }\n      this[fromOffsetCache$1] = lineToIndex;\n    } else {\n      lineToIndex = this[fromOffsetCache$1];\n    }\n    lastLine = lineToIndex[lineToIndex.length - 1];\n    let min = 0;\n    if (offset >= lastLine) {\n      min = lineToIndex.length - 1;\n    } else {\n      let max = lineToIndex.length - 2;\n      let mid;\n      while (min < max) {\n        mid = min + (max - min >> 1);\n        if (offset < lineToIndex[mid]) {\n          max = mid - 1;\n        } else if (offset >= lineToIndex[mid + 1]) {\n          min = mid + 1;\n        } else {\n          min = mid;\n          break;\n        }\n      }\n    }\n    return {\n      col: offset - lineToIndex[min] + 1,\n      line: min + 1\n    };\n  }\n  mapResolve(file) {\n    if (/^\\w+:\\/\\//.test(file)) {\n      return file;\n    }\n    return resolve$1$1(this.map.consumer().sourceRoot || this.map.root || \".\", file);\n  }\n  origin(line, column, endLine, endColumn) {\n    if (!this.map) return false;\n    let consumer = this.map.consumer();\n    let from = consumer.originalPositionFor({ column, line });\n    if (!from.source) return false;\n    let to;\n    if (typeof endLine === \"number\") {\n      to = consumer.originalPositionFor({ column: endColumn, line: endLine });\n    }\n    let fromUrl;\n    if (isAbsolute$1(from.source)) {\n      fromUrl = pathToFileURL$1$1(from.source);\n    } else {\n      fromUrl = new URL(\n        from.source,\n        this.map.consumer().sourceRoot || pathToFileURL$1$1(this.map.mapFile)\n      );\n    }\n    let result2 = {\n      column: from.column,\n      endColumn: to && to.column,\n      endLine: to && to.line,\n      line: from.line,\n      url: fromUrl.toString()\n    };\n    if (fromUrl.protocol === \"file:\") {\n      if (fileURLToPath$1) {\n        result2.file = fileURLToPath$1(fromUrl);\n      } else {\n        throw new Error(`file: protocol is not available in this PostCSS build`);\n      }\n    }\n    let source = consumer.sourceContentFor(from.source);\n    if (source) result2.source = source;\n    return result2;\n  }\n  toJSON() {\n    let json = {};\n    for (let name of [\"hasBOM\", \"css\", \"file\", \"id\"]) {\n      if (this[name] != null) {\n        json[name] = this[name];\n      }\n    }\n    if (this.map) {\n      json.map = { ...this.map };\n      if (json.map.consumerCache) {\n        json.map.consumerCache = void 0;\n      }\n    }\n    return json;\n  }\n  get from() {\n    return this.file || this.id;\n  }\n};\nvar input$1 = Input$4$1;\nInput$4$1.default = Input$4$1;\nif (terminalHighlight$2 && terminalHighlight$2.registerInput) {\n  terminalHighlight$2.registerInput(Input$4$1);\n}\nlet { SourceMapConsumer: SourceMapConsumer$3, SourceMapGenerator: SourceMapGenerator$3 } = require$$2$1;\nlet { dirname: dirname$2, relative: relative$1, resolve: resolve$2, sep: sep$1 } = require$$2$1;\nlet { pathToFileURL: pathToFileURL$2 } = require$$2$1;\nlet Input$3$1 = input$1;\nlet sourceMapAvailable$2 = Boolean(SourceMapConsumer$3 && SourceMapGenerator$3);\nlet pathAvailable$2 = Boolean(dirname$2 && resolve$2 && relative$1 && sep$1);\nlet MapGenerator$2$1 = class MapGenerator {\n  constructor(stringify2, root2, opts, cssString) {\n    this.stringify = stringify2;\n    this.mapOpts = opts.map || {};\n    this.root = root2;\n    this.opts = opts;\n    this.css = cssString;\n    this.originalCSS = cssString;\n    this.usesFileUrls = !this.mapOpts.from && this.mapOpts.absolute;\n    this.memoizedFileURLs = /* @__PURE__ */ new Map();\n    this.memoizedPaths = /* @__PURE__ */ new Map();\n    this.memoizedURLs = /* @__PURE__ */ new Map();\n  }\n  addAnnotation() {\n    let content;\n    if (this.isInline()) {\n      content = \"data:application/json;base64,\" + this.toBase64(this.map.toString());\n    } else if (typeof this.mapOpts.annotation === \"string\") {\n      content = this.mapOpts.annotation;\n    } else if (typeof this.mapOpts.annotation === \"function\") {\n      content = this.mapOpts.annotation(this.opts.to, this.root);\n    } else {\n      content = this.outputFile() + \".map\";\n    }\n    let eol = \"\\n\";\n    if (this.css.includes(\"\\r\\n\")) eol = \"\\r\\n\";\n    this.css += eol + \"/*# sourceMappingURL=\" + content + \" */\";\n  }\n  applyPrevMaps() {\n    for (let prev of this.previous()) {\n      let from = this.toUrl(this.path(prev.file));\n      let root2 = prev.root || dirname$2(prev.file);\n      let map;\n      if (this.mapOpts.sourcesContent === false) {\n        map = new SourceMapConsumer$3(prev.text);\n        if (map.sourcesContent) {\n          map.sourcesContent = null;\n        }\n      } else {\n        map = prev.consumer();\n      }\n      this.map.applySourceMap(map, from, this.toUrl(this.path(root2)));\n    }\n  }\n  clearAnnotation() {\n    if (this.mapOpts.annotation === false) return;\n    if (this.root) {\n      let node2;\n      for (let i2 = this.root.nodes.length - 1; i2 >= 0; i2--) {\n        node2 = this.root.nodes[i2];\n        if (node2.type !== \"comment\") continue;\n        if (node2.text.indexOf(\"# sourceMappingURL=\") === 0) {\n          this.root.removeChild(i2);\n        }\n      }\n    } else if (this.css) {\n      this.css = this.css.replace(/\\n*?\\/\\*#[\\S\\s]*?\\*\\/$/gm, \"\");\n    }\n  }\n  generate() {\n    this.clearAnnotation();\n    if (pathAvailable$2 && sourceMapAvailable$2 && this.isMap()) {\n      return this.generateMap();\n    } else {\n      let result2 = \"\";\n      this.stringify(this.root, (i2) => {\n        result2 += i2;\n      });\n      return [result2];\n    }\n  }\n  generateMap() {\n    if (this.root) {\n      this.generateString();\n    } else if (this.previous().length === 1) {\n      let prev = this.previous()[0].consumer();\n      prev.file = this.outputFile();\n      this.map = SourceMapGenerator$3.fromSourceMap(prev, {\n        ignoreInvalidMapping: true\n      });\n    } else {\n      this.map = new SourceMapGenerator$3({\n        file: this.outputFile(),\n        ignoreInvalidMapping: true\n      });\n      this.map.addMapping({\n        generated: { column: 0, line: 1 },\n        original: { column: 0, line: 1 },\n        source: this.opts.from ? this.toUrl(this.path(this.opts.from)) : \"<no source>\"\n      });\n    }\n    if (this.isSourcesContent()) this.setSourcesContent();\n    if (this.root && this.previous().length > 0) this.applyPrevMaps();\n    if (this.isAnnotation()) this.addAnnotation();\n    if (this.isInline()) {\n      return [this.css];\n    } else {\n      return [this.css, this.map];\n    }\n  }\n  generateString() {\n    this.css = \"\";\n    this.map = new SourceMapGenerator$3({\n      file: this.outputFile(),\n      ignoreInvalidMapping: true\n    });\n    let line = 1;\n    let column = 1;\n    let noSource = \"<no source>\";\n    let mapping = {\n      generated: { column: 0, line: 0 },\n      original: { column: 0, line: 0 },\n      source: \"\"\n    };\n    let lines, last;\n    this.stringify(this.root, (str, node2, type) => {\n      this.css += str;\n      if (node2 && type !== \"end\") {\n        mapping.generated.line = line;\n        mapping.generated.column = column - 1;\n        if (node2.source && node2.source.start) {\n          mapping.source = this.sourcePath(node2);\n          mapping.original.line = node2.source.start.line;\n          mapping.original.column = node2.source.start.column - 1;\n          this.map.addMapping(mapping);\n        } else {\n          mapping.source = noSource;\n          mapping.original.line = 1;\n          mapping.original.column = 0;\n          this.map.addMapping(mapping);\n        }\n      }\n      lines = str.match(/\\n/g);\n      if (lines) {\n        line += lines.length;\n        last = str.lastIndexOf(\"\\n\");\n        column = str.length - last;\n      } else {\n        column += str.length;\n      }\n      if (node2 && type !== \"start\") {\n        let p = node2.parent || { raws: {} };\n        let childless = node2.type === \"decl\" || node2.type === \"atrule\" && !node2.nodes;\n        if (!childless || node2 !== p.last || p.raws.semicolon) {\n          if (node2.source && node2.source.end) {\n            mapping.source = this.sourcePath(node2);\n            mapping.original.line = node2.source.end.line;\n            mapping.original.column = node2.source.end.column - 1;\n            mapping.generated.line = line;\n            mapping.generated.column = column - 2;\n            this.map.addMapping(mapping);\n          } else {\n            mapping.source = noSource;\n            mapping.original.line = 1;\n            mapping.original.column = 0;\n            mapping.generated.line = line;\n            mapping.generated.column = column - 1;\n            this.map.addMapping(mapping);\n          }\n        }\n      }\n    });\n  }\n  isAnnotation() {\n    if (this.isInline()) {\n      return true;\n    }\n    if (typeof this.mapOpts.annotation !== \"undefined\") {\n      return this.mapOpts.annotation;\n    }\n    if (this.previous().length) {\n      return this.previous().some((i2) => i2.annotation);\n    }\n    return true;\n  }\n  isInline() {\n    if (typeof this.mapOpts.inline !== \"undefined\") {\n      return this.mapOpts.inline;\n    }\n    let annotation = this.mapOpts.annotation;\n    if (typeof annotation !== \"undefined\" && annotation !== true) {\n      return false;\n    }\n    if (this.previous().length) {\n      return this.previous().some((i2) => i2.inline);\n    }\n    return true;\n  }\n  isMap() {\n    if (typeof this.opts.map !== \"undefined\") {\n      return !!this.opts.map;\n    }\n    return this.previous().length > 0;\n  }\n  isSourcesContent() {\n    if (typeof this.mapOpts.sourcesContent !== \"undefined\") {\n      return this.mapOpts.sourcesContent;\n    }\n    if (this.previous().length) {\n      return this.previous().some((i2) => i2.withContent());\n    }\n    return true;\n  }\n  outputFile() {\n    if (this.opts.to) {\n      return this.path(this.opts.to);\n    } else if (this.opts.from) {\n      return this.path(this.opts.from);\n    } else {\n      return \"to.css\";\n    }\n  }\n  path(file) {\n    if (this.mapOpts.absolute) return file;\n    if (file.charCodeAt(0) === 60) return file;\n    if (/^\\w+:\\/\\//.test(file)) return file;\n    let cached = this.memoizedPaths.get(file);\n    if (cached) return cached;\n    let from = this.opts.to ? dirname$2(this.opts.to) : \".\";\n    if (typeof this.mapOpts.annotation === \"string\") {\n      from = dirname$2(resolve$2(from, this.mapOpts.annotation));\n    }\n    let path = relative$1(from, file);\n    this.memoizedPaths.set(file, path);\n    return path;\n  }\n  previous() {\n    if (!this.previousMaps) {\n      this.previousMaps = [];\n      if (this.root) {\n        this.root.walk((node2) => {\n          if (node2.source && node2.source.input.map) {\n            let map = node2.source.input.map;\n            if (!this.previousMaps.includes(map)) {\n              this.previousMaps.push(map);\n            }\n          }\n        });\n      } else {\n        let input2 = new Input$3$1(this.originalCSS, this.opts);\n        if (input2.map) this.previousMaps.push(input2.map);\n      }\n    }\n    return this.previousMaps;\n  }\n  setSourcesContent() {\n    let already = {};\n    if (this.root) {\n      this.root.walk((node2) => {\n        if (node2.source) {\n          let from = node2.source.input.from;\n          if (from && !already[from]) {\n            already[from] = true;\n            let fromUrl = this.usesFileUrls ? this.toFileUrl(from) : this.toUrl(this.path(from));\n            this.map.setSourceContent(fromUrl, node2.source.input.css);\n          }\n        }\n      });\n    } else if (this.css) {\n      let from = this.opts.from ? this.toUrl(this.path(this.opts.from)) : \"<no source>\";\n      this.map.setSourceContent(from, this.css);\n    }\n  }\n  sourcePath(node2) {\n    if (this.mapOpts.from) {\n      return this.toUrl(this.mapOpts.from);\n    } else if (this.usesFileUrls) {\n      return this.toFileUrl(node2.source.input.from);\n    } else {\n      return this.toUrl(this.path(node2.source.input.from));\n    }\n  }\n  toBase64(str) {\n    if (Buffer) {\n      return Buffer.from(str).toString(\"base64\");\n    } else {\n      return window.btoa(unescape(encodeURIComponent(str)));\n    }\n  }\n  toFileUrl(path) {\n    let cached = this.memoizedFileURLs.get(path);\n    if (cached) return cached;\n    if (pathToFileURL$2) {\n      let fileURL = pathToFileURL$2(path).toString();\n      this.memoizedFileURLs.set(path, fileURL);\n      return fileURL;\n    } else {\n      throw new Error(\n        \"`map.absolute` option is not available in this PostCSS build\"\n      );\n    }\n  }\n  toUrl(path) {\n    let cached = this.memoizedURLs.get(path);\n    if (cached) return cached;\n    if (sep$1 === \"\\\\\") {\n      path = path.replace(/\\\\/g, \"/\");\n    }\n    let url = encodeURI(path).replace(/[#?]/g, encodeURIComponent);\n    this.memoizedURLs.set(path, url);\n    return url;\n  }\n};\nvar mapGenerator$1 = MapGenerator$2$1;\nlet Node$2$1 = node$1;\nlet Comment$4$1 = class Comment extends Node$2$1 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"comment\";\n  }\n};\nvar comment$1 = Comment$4$1;\nComment$4$1.default = Comment$4$1;\nlet { isClean: isClean$1$1, my: my$1$1 } = symbols$1;\nlet Declaration$3$1 = declaration$1;\nlet Comment$3$1 = comment$1;\nlet Node$1$1 = node$1;\nlet parse$4$1, Rule$4$1, AtRule$4$1, Root$6$1;\nfunction cleanSource$1(nodes) {\n  return nodes.map((i2) => {\n    if (i2.nodes) i2.nodes = cleanSource$1(i2.nodes);\n    delete i2.source;\n    return i2;\n  });\n}\nfunction markDirtyUp$1(node2) {\n  node2[isClean$1$1] = false;\n  if (node2.proxyOf.nodes) {\n    for (let i2 of node2.proxyOf.nodes) {\n      markDirtyUp$1(i2);\n    }\n  }\n}\nlet Container$7$1 = class Container extends Node$1$1 {\n  append(...children) {\n    for (let child of children) {\n      let nodes = this.normalize(child, this.last);\n      for (let node2 of nodes) this.proxyOf.nodes.push(node2);\n    }\n    this.markDirty();\n    return this;\n  }\n  cleanRaws(keepBetween) {\n    super.cleanRaws(keepBetween);\n    if (this.nodes) {\n      for (let node2 of this.nodes) node2.cleanRaws(keepBetween);\n    }\n  }\n  each(callback) {\n    if (!this.proxyOf.nodes) return void 0;\n    let iterator = this.getIterator();\n    let index2, result2;\n    while (this.indexes[iterator] < this.proxyOf.nodes.length) {\n      index2 = this.indexes[iterator];\n      result2 = callback(this.proxyOf.nodes[index2], index2);\n      if (result2 === false) break;\n      this.indexes[iterator] += 1;\n    }\n    delete this.indexes[iterator];\n    return result2;\n  }\n  every(condition) {\n    return this.nodes.every(condition);\n  }\n  getIterator() {\n    if (!this.lastEach) this.lastEach = 0;\n    if (!this.indexes) this.indexes = {};\n    this.lastEach += 1;\n    let iterator = this.lastEach;\n    this.indexes[iterator] = 0;\n    return iterator;\n  }\n  getProxyProcessor() {\n    return {\n      get(node2, prop) {\n        if (prop === \"proxyOf\") {\n          return node2;\n        } else if (!node2[prop]) {\n          return node2[prop];\n        } else if (prop === \"each\" || typeof prop === \"string\" && prop.startsWith(\"walk\")) {\n          return (...args) => {\n            return node2[prop](\n              ...args.map((i2) => {\n                if (typeof i2 === \"function\") {\n                  return (child, index2) => i2(child.toProxy(), index2);\n                } else {\n                  return i2;\n                }\n              })\n            );\n          };\n        } else if (prop === \"every\" || prop === \"some\") {\n          return (cb) => {\n            return node2[prop](\n              (child, ...other) => cb(child.toProxy(), ...other)\n            );\n          };\n        } else if (prop === \"root\") {\n          return () => node2.root().toProxy();\n        } else if (prop === \"nodes\") {\n          return node2.nodes.map((i2) => i2.toProxy());\n        } else if (prop === \"first\" || prop === \"last\") {\n          return node2[prop].toProxy();\n        } else {\n          return node2[prop];\n        }\n      },\n      set(node2, prop, value) {\n        if (node2[prop] === value) return true;\n        node2[prop] = value;\n        if (prop === \"name\" || prop === \"params\" || prop === \"selector\") {\n          node2.markDirty();\n        }\n        return true;\n      }\n    };\n  }\n  index(child) {\n    if (typeof child === \"number\") return child;\n    if (child.proxyOf) child = child.proxyOf;\n    return this.proxyOf.nodes.indexOf(child);\n  }\n  insertAfter(exist, add) {\n    let existIndex = this.index(exist);\n    let nodes = this.normalize(add, this.proxyOf.nodes[existIndex]).reverse();\n    existIndex = this.index(exist);\n    for (let node2 of nodes) this.proxyOf.nodes.splice(existIndex + 1, 0, node2);\n    let index2;\n    for (let id in this.indexes) {\n      index2 = this.indexes[id];\n      if (existIndex < index2) {\n        this.indexes[id] = index2 + nodes.length;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  insertBefore(exist, add) {\n    let existIndex = this.index(exist);\n    let type = existIndex === 0 ? \"prepend\" : false;\n    let nodes = this.normalize(add, this.proxyOf.nodes[existIndex], type).reverse();\n    existIndex = this.index(exist);\n    for (let node2 of nodes) this.proxyOf.nodes.splice(existIndex, 0, node2);\n    let index2;\n    for (let id in this.indexes) {\n      index2 = this.indexes[id];\n      if (existIndex <= index2) {\n        this.indexes[id] = index2 + nodes.length;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  normalize(nodes, sample) {\n    if (typeof nodes === \"string\") {\n      nodes = cleanSource$1(parse$4$1(nodes).nodes);\n    } else if (typeof nodes === \"undefined\") {\n      nodes = [];\n    } else if (Array.isArray(nodes)) {\n      nodes = nodes.slice(0);\n      for (let i2 of nodes) {\n        if (i2.parent) i2.parent.removeChild(i2, \"ignore\");\n      }\n    } else if (nodes.type === \"root\" && this.type !== \"document\") {\n      nodes = nodes.nodes.slice(0);\n      for (let i2 of nodes) {\n        if (i2.parent) i2.parent.removeChild(i2, \"ignore\");\n      }\n    } else if (nodes.type) {\n      nodes = [nodes];\n    } else if (nodes.prop) {\n      if (typeof nodes.value === \"undefined\") {\n        throw new Error(\"Value field is missed in node creation\");\n      } else if (typeof nodes.value !== \"string\") {\n        nodes.value = String(nodes.value);\n      }\n      nodes = [new Declaration$3$1(nodes)];\n    } else if (nodes.selector) {\n      nodes = [new Rule$4$1(nodes)];\n    } else if (nodes.name) {\n      nodes = [new AtRule$4$1(nodes)];\n    } else if (nodes.text) {\n      nodes = [new Comment$3$1(nodes)];\n    } else {\n      throw new Error(\"Unknown node type in node creation\");\n    }\n    let processed = nodes.map((i2) => {\n      if (!i2[my$1$1]) Container.rebuild(i2);\n      i2 = i2.proxyOf;\n      if (i2.parent) i2.parent.removeChild(i2);\n      if (i2[isClean$1$1]) markDirtyUp$1(i2);\n      if (typeof i2.raws.before === \"undefined\") {\n        if (sample && typeof sample.raws.before !== \"undefined\") {\n          i2.raws.before = sample.raws.before.replace(/\\S/g, \"\");\n        }\n      }\n      i2.parent = this.proxyOf;\n      return i2;\n    });\n    return processed;\n  }\n  prepend(...children) {\n    children = children.reverse();\n    for (let child of children) {\n      let nodes = this.normalize(child, this.first, \"prepend\").reverse();\n      for (let node2 of nodes) this.proxyOf.nodes.unshift(node2);\n      for (let id in this.indexes) {\n        this.indexes[id] = this.indexes[id] + nodes.length;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  push(child) {\n    child.parent = this;\n    this.proxyOf.nodes.push(child);\n    return this;\n  }\n  removeAll() {\n    for (let node2 of this.proxyOf.nodes) node2.parent = void 0;\n    this.proxyOf.nodes = [];\n    this.markDirty();\n    return this;\n  }\n  removeChild(child) {\n    child = this.index(child);\n    this.proxyOf.nodes[child].parent = void 0;\n    this.proxyOf.nodes.splice(child, 1);\n    let index2;\n    for (let id in this.indexes) {\n      index2 = this.indexes[id];\n      if (index2 >= child) {\n        this.indexes[id] = index2 - 1;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  replaceValues(pattern, opts, callback) {\n    if (!callback) {\n      callback = opts;\n      opts = {};\n    }\n    this.walkDecls((decl) => {\n      if (opts.props && !opts.props.includes(decl.prop)) return;\n      if (opts.fast && !decl.value.includes(opts.fast)) return;\n      decl.value = decl.value.replace(pattern, callback);\n    });\n    this.markDirty();\n    return this;\n  }\n  some(condition) {\n    return this.nodes.some(condition);\n  }\n  walk(callback) {\n    return this.each((child, i2) => {\n      let result2;\n      try {\n        result2 = callback(child, i2);\n      } catch (e2) {\n        throw child.addToError(e2);\n      }\n      if (result2 !== false && child.walk) {\n        result2 = child.walk(callback);\n      }\n      return result2;\n    });\n  }\n  walkAtRules(name, callback) {\n    if (!callback) {\n      callback = name;\n      return this.walk((child, i2) => {\n        if (child.type === \"atrule\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    if (name instanceof RegExp) {\n      return this.walk((child, i2) => {\n        if (child.type === \"atrule\" && name.test(child.name)) {\n          return callback(child, i2);\n        }\n      });\n    }\n    return this.walk((child, i2) => {\n      if (child.type === \"atrule\" && child.name === name) {\n        return callback(child, i2);\n      }\n    });\n  }\n  walkComments(callback) {\n    return this.walk((child, i2) => {\n      if (child.type === \"comment\") {\n        return callback(child, i2);\n      }\n    });\n  }\n  walkDecls(prop, callback) {\n    if (!callback) {\n      callback = prop;\n      return this.walk((child, i2) => {\n        if (child.type === \"decl\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    if (prop instanceof RegExp) {\n      return this.walk((child, i2) => {\n        if (child.type === \"decl\" && prop.test(child.prop)) {\n          return callback(child, i2);\n        }\n      });\n    }\n    return this.walk((child, i2) => {\n      if (child.type === \"decl\" && child.prop === prop) {\n        return callback(child, i2);\n      }\n    });\n  }\n  walkRules(selector, callback) {\n    if (!callback) {\n      callback = selector;\n      return this.walk((child, i2) => {\n        if (child.type === \"rule\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    if (selector instanceof RegExp) {\n      return this.walk((child, i2) => {\n        if (child.type === \"rule\" && selector.test(child.selector)) {\n          return callback(child, i2);\n        }\n      });\n    }\n    return this.walk((child, i2) => {\n      if (child.type === \"rule\" && child.selector === selector) {\n        return callback(child, i2);\n      }\n    });\n  }\n  get first() {\n    if (!this.proxyOf.nodes) return void 0;\n    return this.proxyOf.nodes[0];\n  }\n  get last() {\n    if (!this.proxyOf.nodes) return void 0;\n    return this.proxyOf.nodes[this.proxyOf.nodes.length - 1];\n  }\n};\nContainer$7$1.registerParse = (dependant) => {\n  parse$4$1 = dependant;\n};\nContainer$7$1.registerRule = (dependant) => {\n  Rule$4$1 = dependant;\n};\nContainer$7$1.registerAtRule = (dependant) => {\n  AtRule$4$1 = dependant;\n};\nContainer$7$1.registerRoot = (dependant) => {\n  Root$6$1 = dependant;\n};\nvar container$1 = Container$7$1;\nContainer$7$1.default = Container$7$1;\nContainer$7$1.rebuild = (node2) => {\n  if (node2.type === \"atrule\") {\n    Object.setPrototypeOf(node2, AtRule$4$1.prototype);\n  } else if (node2.type === \"rule\") {\n    Object.setPrototypeOf(node2, Rule$4$1.prototype);\n  } else if (node2.type === \"decl\") {\n    Object.setPrototypeOf(node2, Declaration$3$1.prototype);\n  } else if (node2.type === \"comment\") {\n    Object.setPrototypeOf(node2, Comment$3$1.prototype);\n  } else if (node2.type === \"root\") {\n    Object.setPrototypeOf(node2, Root$6$1.prototype);\n  }\n  node2[my$1$1] = true;\n  if (node2.nodes) {\n    node2.nodes.forEach((child) => {\n      Container$7$1.rebuild(child);\n    });\n  }\n};\nlet Container$6$1 = container$1;\nlet LazyResult$4$1, Processor$3$1;\nlet Document$3$1 = class Document2 extends Container$6$1 {\n  constructor(defaults) {\n    super({ type: \"document\", ...defaults });\n    if (!this.nodes) {\n      this.nodes = [];\n    }\n  }\n  toResult(opts = {}) {\n    let lazy = new LazyResult$4$1(new Processor$3$1(), this, opts);\n    return lazy.stringify();\n  }\n};\nDocument$3$1.registerLazyResult = (dependant) => {\n  LazyResult$4$1 = dependant;\n};\nDocument$3$1.registerProcessor = (dependant) => {\n  Processor$3$1 = dependant;\n};\nvar document$1$1 = Document$3$1;\nDocument$3$1.default = Document$3$1;\nlet printed$1 = {};\nvar warnOnce$2$1 = function warnOnce(message) {\n  if (printed$1[message]) return;\n  printed$1[message] = true;\n  if (typeof console !== \"undefined\" && console.warn) {\n    console.warn(message);\n  }\n};\nlet Warning$2$1 = class Warning {\n  constructor(text, opts = {}) {\n    this.type = \"warning\";\n    this.text = text;\n    if (opts.node && opts.node.source) {\n      let range = opts.node.rangeBy(opts);\n      this.line = range.start.line;\n      this.column = range.start.column;\n      this.endLine = range.end.line;\n      this.endColumn = range.end.column;\n    }\n    for (let opt in opts) this[opt] = opts[opt];\n  }\n  toString() {\n    if (this.node) {\n      return this.node.error(this.text, {\n        index: this.index,\n        plugin: this.plugin,\n        word: this.word\n      }).message;\n    }\n    if (this.plugin) {\n      return this.plugin + \": \" + this.text;\n    }\n    return this.text;\n  }\n};\nvar warning$1 = Warning$2$1;\nWarning$2$1.default = Warning$2$1;\nlet Warning$1$1 = warning$1;\nlet Result$3$1 = class Result {\n  constructor(processor2, root2, opts) {\n    this.processor = processor2;\n    this.messages = [];\n    this.root = root2;\n    this.opts = opts;\n    this.css = void 0;\n    this.map = void 0;\n  }\n  toString() {\n    return this.css;\n  }\n  warn(text, opts = {}) {\n    if (!opts.plugin) {\n      if (this.lastPlugin && this.lastPlugin.postcssPlugin) {\n        opts.plugin = this.lastPlugin.postcssPlugin;\n      }\n    }\n    let warning2 = new Warning$1$1(text, opts);\n    this.messages.push(warning2);\n    return warning2;\n  }\n  warnings() {\n    return this.messages.filter((i2) => i2.type === \"warning\");\n  }\n  get content() {\n    return this.css;\n  }\n};\nvar result$1 = Result$3$1;\nResult$3$1.default = Result$3$1;\nconst SINGLE_QUOTE$1 = \"'\".charCodeAt(0);\nconst DOUBLE_QUOTE$1 = '\"'.charCodeAt(0);\nconst BACKSLASH$1 = \"\\\\\".charCodeAt(0);\nconst SLASH$1 = \"/\".charCodeAt(0);\nconst NEWLINE$1 = \"\\n\".charCodeAt(0);\nconst SPACE$1 = \" \".charCodeAt(0);\nconst FEED$1 = \"\\f\".charCodeAt(0);\nconst TAB$1 = \"\t\".charCodeAt(0);\nconst CR$1 = \"\\r\".charCodeAt(0);\nconst OPEN_SQUARE$1 = \"[\".charCodeAt(0);\nconst CLOSE_SQUARE$1 = \"]\".charCodeAt(0);\nconst OPEN_PARENTHESES$1 = \"(\".charCodeAt(0);\nconst CLOSE_PARENTHESES$1 = \")\".charCodeAt(0);\nconst OPEN_CURLY$1 = \"{\".charCodeAt(0);\nconst CLOSE_CURLY$1 = \"}\".charCodeAt(0);\nconst SEMICOLON$1 = \";\".charCodeAt(0);\nconst ASTERISK$1 = \"*\".charCodeAt(0);\nconst COLON$1 = \":\".charCodeAt(0);\nconst AT$1 = \"@\".charCodeAt(0);\nconst RE_AT_END$1 = /[\\t\\n\\f\\r \"#'()/;[\\\\\\]{}]/g;\nconst RE_WORD_END$1 = /[\\t\\n\\f\\r !\"#'():;@[\\\\\\]{}]|\\/(?=\\*)/g;\nconst RE_BAD_BRACKET$1 = /.[\\r\\n\"'(/\\\\]/;\nconst RE_HEX_ESCAPE$1 = /[\\da-f]/i;\nvar tokenize$1 = function tokenizer(input2, options = {}) {\n  let css = input2.css.valueOf();\n  let ignore = options.ignoreErrors;\n  let code, next, quote, content, escape;\n  let escaped, escapePos, prev, n2, currentToken;\n  let length = css.length;\n  let pos = 0;\n  let buffer = [];\n  let returned = [];\n  function position() {\n    return pos;\n  }\n  function unclosed(what) {\n    throw input2.error(\"Unclosed \" + what, pos);\n  }\n  function endOfFile() {\n    return returned.length === 0 && pos >= length;\n  }\n  function nextToken(opts) {\n    if (returned.length) return returned.pop();\n    if (pos >= length) return;\n    let ignoreUnclosed = opts ? opts.ignoreUnclosed : false;\n    code = css.charCodeAt(pos);\n    switch (code) {\n      case NEWLINE$1:\n      case SPACE$1:\n      case TAB$1:\n      case CR$1:\n      case FEED$1: {\n        next = pos;\n        do {\n          next += 1;\n          code = css.charCodeAt(next);\n        } while (code === SPACE$1 || code === NEWLINE$1 || code === TAB$1 || code === CR$1 || code === FEED$1);\n        currentToken = [\"space\", css.slice(pos, next)];\n        pos = next - 1;\n        break;\n      }\n      case OPEN_SQUARE$1:\n      case CLOSE_SQUARE$1:\n      case OPEN_CURLY$1:\n      case CLOSE_CURLY$1:\n      case COLON$1:\n      case SEMICOLON$1:\n      case CLOSE_PARENTHESES$1: {\n        let controlChar = String.fromCharCode(code);\n        currentToken = [controlChar, controlChar, pos];\n        break;\n      }\n      case OPEN_PARENTHESES$1: {\n        prev = buffer.length ? buffer.pop()[1] : \"\";\n        n2 = css.charCodeAt(pos + 1);\n        if (prev === \"url\" && n2 !== SINGLE_QUOTE$1 && n2 !== DOUBLE_QUOTE$1 && n2 !== SPACE$1 && n2 !== NEWLINE$1 && n2 !== TAB$1 && n2 !== FEED$1 && n2 !== CR$1) {\n          next = pos;\n          do {\n            escaped = false;\n            next = css.indexOf(\")\", next + 1);\n            if (next === -1) {\n              if (ignore || ignoreUnclosed) {\n                next = pos;\n                break;\n              } else {\n                unclosed(\"bracket\");\n              }\n            }\n            escapePos = next;\n            while (css.charCodeAt(escapePos - 1) === BACKSLASH$1) {\n              escapePos -= 1;\n              escaped = !escaped;\n            }\n          } while (escaped);\n          currentToken = [\"brackets\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n        } else {\n          next = css.indexOf(\")\", pos + 1);\n          content = css.slice(pos, next + 1);\n          if (next === -1 || RE_BAD_BRACKET$1.test(content)) {\n            currentToken = [\"(\", \"(\", pos];\n          } else {\n            currentToken = [\"brackets\", content, pos, next];\n            pos = next;\n          }\n        }\n        break;\n      }\n      case SINGLE_QUOTE$1:\n      case DOUBLE_QUOTE$1: {\n        quote = code === SINGLE_QUOTE$1 ? \"'\" : '\"';\n        next = pos;\n        do {\n          escaped = false;\n          next = css.indexOf(quote, next + 1);\n          if (next === -1) {\n            if (ignore || ignoreUnclosed) {\n              next = pos + 1;\n              break;\n            } else {\n              unclosed(\"string\");\n            }\n          }\n          escapePos = next;\n          while (css.charCodeAt(escapePos - 1) === BACKSLASH$1) {\n            escapePos -= 1;\n            escaped = !escaped;\n          }\n        } while (escaped);\n        currentToken = [\"string\", css.slice(pos, next + 1), pos, next];\n        pos = next;\n        break;\n      }\n      case AT$1: {\n        RE_AT_END$1.lastIndex = pos + 1;\n        RE_AT_END$1.test(css);\n        if (RE_AT_END$1.lastIndex === 0) {\n          next = css.length - 1;\n        } else {\n          next = RE_AT_END$1.lastIndex - 2;\n        }\n        currentToken = [\"at-word\", css.slice(pos, next + 1), pos, next];\n        pos = next;\n        break;\n      }\n      case BACKSLASH$1: {\n        next = pos;\n        escape = true;\n        while (css.charCodeAt(next + 1) === BACKSLASH$1) {\n          next += 1;\n          escape = !escape;\n        }\n        code = css.charCodeAt(next + 1);\n        if (escape && code !== SLASH$1 && code !== SPACE$1 && code !== NEWLINE$1 && code !== TAB$1 && code !== CR$1 && code !== FEED$1) {\n          next += 1;\n          if (RE_HEX_ESCAPE$1.test(css.charAt(next))) {\n            while (RE_HEX_ESCAPE$1.test(css.charAt(next + 1))) {\n              next += 1;\n            }\n            if (css.charCodeAt(next + 1) === SPACE$1) {\n              next += 1;\n            }\n          }\n        }\n        currentToken = [\"word\", css.slice(pos, next + 1), pos, next];\n        pos = next;\n        break;\n      }\n      default: {\n        if (code === SLASH$1 && css.charCodeAt(pos + 1) === ASTERISK$1) {\n          next = css.indexOf(\"*/\", pos + 2) + 1;\n          if (next === 0) {\n            if (ignore || ignoreUnclosed) {\n              next = css.length;\n            } else {\n              unclosed(\"comment\");\n            }\n          }\n          currentToken = [\"comment\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n        } else {\n          RE_WORD_END$1.lastIndex = pos + 1;\n          RE_WORD_END$1.test(css);\n          if (RE_WORD_END$1.lastIndex === 0) {\n            next = css.length - 1;\n          } else {\n            next = RE_WORD_END$1.lastIndex - 2;\n          }\n          currentToken = [\"word\", css.slice(pos, next + 1), pos, next];\n          buffer.push(currentToken);\n          pos = next;\n        }\n        break;\n      }\n    }\n    pos++;\n    return currentToken;\n  }\n  function back(token) {\n    returned.push(token);\n  }\n  return {\n    back,\n    endOfFile,\n    nextToken,\n    position\n  };\n};\nlet Container$5$1 = container$1;\nlet AtRule$3$1 = class AtRule extends Container$5$1 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"atrule\";\n  }\n  append(...children) {\n    if (!this.proxyOf.nodes) this.nodes = [];\n    return super.append(...children);\n  }\n  prepend(...children) {\n    if (!this.proxyOf.nodes) this.nodes = [];\n    return super.prepend(...children);\n  }\n};\nvar atRule$1 = AtRule$3$1;\nAtRule$3$1.default = AtRule$3$1;\nContainer$5$1.registerAtRule(AtRule$3$1);\nlet Container$4$1 = container$1;\nlet LazyResult$3$1, Processor$2$1;\nlet Root$5$1 = class Root extends Container$4$1 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"root\";\n    if (!this.nodes) this.nodes = [];\n  }\n  normalize(child, sample, type) {\n    let nodes = super.normalize(child);\n    if (sample) {\n      if (type === \"prepend\") {\n        if (this.nodes.length > 1) {\n          sample.raws.before = this.nodes[1].raws.before;\n        } else {\n          delete sample.raws.before;\n        }\n      } else if (this.first !== sample) {\n        for (let node2 of nodes) {\n          node2.raws.before = sample.raws.before;\n        }\n      }\n    }\n    return nodes;\n  }\n  removeChild(child, ignore) {\n    let index2 = this.index(child);\n    if (!ignore && index2 === 0 && this.nodes.length > 1) {\n      this.nodes[1].raws.before = this.nodes[index2].raws.before;\n    }\n    return super.removeChild(child);\n  }\n  toResult(opts = {}) {\n    let lazy = new LazyResult$3$1(new Processor$2$1(), this, opts);\n    return lazy.stringify();\n  }\n};\nRoot$5$1.registerLazyResult = (dependant) => {\n  LazyResult$3$1 = dependant;\n};\nRoot$5$1.registerProcessor = (dependant) => {\n  Processor$2$1 = dependant;\n};\nvar root$1 = Root$5$1;\nRoot$5$1.default = Root$5$1;\nContainer$4$1.registerRoot(Root$5$1);\nlet list$2$1 = {\n  comma(string) {\n    return list$2$1.split(string, [\",\"], true);\n  },\n  space(string) {\n    let spaces = [\" \", \"\\n\", \"\t\"];\n    return list$2$1.split(string, spaces);\n  },\n  split(string, separators, last) {\n    let array = [];\n    let current = \"\";\n    let split = false;\n    let func = 0;\n    let inQuote = false;\n    let prevQuote = \"\";\n    let escape = false;\n    for (let letter of string) {\n      if (escape) {\n        escape = false;\n      } else if (letter === \"\\\\\") {\n        escape = true;\n      } else if (inQuote) {\n        if (letter === prevQuote) {\n          inQuote = false;\n        }\n      } else if (letter === '\"' || letter === \"'\") {\n        inQuote = true;\n        prevQuote = letter;\n      } else if (letter === \"(\") {\n        func += 1;\n      } else if (letter === \")\") {\n        if (func > 0) func -= 1;\n      } else if (func === 0) {\n        if (separators.includes(letter)) split = true;\n      }\n      if (split) {\n        if (current !== \"\") array.push(current.trim());\n        current = \"\";\n        split = false;\n      } else {\n        current += letter;\n      }\n    }\n    if (last || current !== \"\") array.push(current.trim());\n    return array;\n  }\n};\nvar list_1$1 = list$2$1;\nlist$2$1.default = list$2$1;\nlet Container$3$1 = container$1;\nlet list$1$1 = list_1$1;\nlet Rule$3$1 = class Rule extends Container$3$1 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"rule\";\n    if (!this.nodes) this.nodes = [];\n  }\n  get selectors() {\n    return list$1$1.comma(this.selector);\n  }\n  set selectors(values) {\n    let match = this.selector ? this.selector.match(/,\\s*/) : null;\n    let sep2 = match ? match[0] : \",\" + this.raw(\"between\", \"beforeOpen\");\n    this.selector = values.join(sep2);\n  }\n};\nvar rule$1 = Rule$3$1;\nRule$3$1.default = Rule$3$1;\nContainer$3$1.registerRule(Rule$3$1);\nlet Declaration$2$1 = declaration$1;\nlet tokenizer2$1 = tokenize$1;\nlet Comment$2$1 = comment$1;\nlet AtRule$2$1 = atRule$1;\nlet Root$4$1 = root$1;\nlet Rule$2$1 = rule$1;\nconst SAFE_COMMENT_NEIGHBOR$1 = {\n  empty: true,\n  space: true\n};\nfunction findLastWithPosition$1(tokens) {\n  for (let i2 = tokens.length - 1; i2 >= 0; i2--) {\n    let token = tokens[i2];\n    let pos = token[3] || token[2];\n    if (pos) return pos;\n  }\n}\nlet Parser$1$1 = class Parser {\n  constructor(input2) {\n    this.input = input2;\n    this.root = new Root$4$1();\n    this.current = this.root;\n    this.spaces = \"\";\n    this.semicolon = false;\n    this.createTokenizer();\n    this.root.source = { input: input2, start: { column: 1, line: 1, offset: 0 } };\n  }\n  atrule(token) {\n    let node2 = new AtRule$2$1();\n    node2.name = token[1].slice(1);\n    if (node2.name === \"\") {\n      this.unnamedAtrule(node2, token);\n    }\n    this.init(node2, token[2]);\n    let type;\n    let prev;\n    let shift;\n    let last = false;\n    let open = false;\n    let params = [];\n    let brackets = [];\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken();\n      type = token[0];\n      if (type === \"(\" || type === \"[\") {\n        brackets.push(type === \"(\" ? \")\" : \"]\");\n      } else if (type === \"{\" && brackets.length > 0) {\n        brackets.push(\"}\");\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop();\n      }\n      if (brackets.length === 0) {\n        if (type === \";\") {\n          node2.source.end = this.getPosition(token[2]);\n          node2.source.end.offset++;\n          this.semicolon = true;\n          break;\n        } else if (type === \"{\") {\n          open = true;\n          break;\n        } else if (type === \"}\") {\n          if (params.length > 0) {\n            shift = params.length - 1;\n            prev = params[shift];\n            while (prev && prev[0] === \"space\") {\n              prev = params[--shift];\n            }\n            if (prev) {\n              node2.source.end = this.getPosition(prev[3] || prev[2]);\n              node2.source.end.offset++;\n            }\n          }\n          this.end(token);\n          break;\n        } else {\n          params.push(token);\n        }\n      } else {\n        params.push(token);\n      }\n      if (this.tokenizer.endOfFile()) {\n        last = true;\n        break;\n      }\n    }\n    node2.raws.between = this.spacesAndCommentsFromEnd(params);\n    if (params.length) {\n      node2.raws.afterName = this.spacesAndCommentsFromStart(params);\n      this.raw(node2, \"params\", params);\n      if (last) {\n        token = params[params.length - 1];\n        node2.source.end = this.getPosition(token[3] || token[2]);\n        node2.source.end.offset++;\n        this.spaces = node2.raws.between;\n        node2.raws.between = \"\";\n      }\n    } else {\n      node2.raws.afterName = \"\";\n      node2.params = \"\";\n    }\n    if (open) {\n      node2.nodes = [];\n      this.current = node2;\n    }\n  }\n  checkMissedSemicolon(tokens) {\n    let colon = this.colon(tokens);\n    if (colon === false) return;\n    let founded = 0;\n    let token;\n    for (let j = colon - 1; j >= 0; j--) {\n      token = tokens[j];\n      if (token[0] !== \"space\") {\n        founded += 1;\n        if (founded === 2) break;\n      }\n    }\n    throw this.input.error(\n      \"Missed semicolon\",\n      token[0] === \"word\" ? token[3] + 1 : token[2]\n    );\n  }\n  colon(tokens) {\n    let brackets = 0;\n    let token, type, prev;\n    for (let [i2, element] of tokens.entries()) {\n      token = element;\n      type = token[0];\n      if (type === \"(\") {\n        brackets += 1;\n      }\n      if (type === \")\") {\n        brackets -= 1;\n      }\n      if (brackets === 0 && type === \":\") {\n        if (!prev) {\n          this.doubleColon(token);\n        } else if (prev[0] === \"word\" && prev[1] === \"progid\") {\n          continue;\n        } else {\n          return i2;\n        }\n      }\n      prev = token;\n    }\n    return false;\n  }\n  comment(token) {\n    let node2 = new Comment$2$1();\n    this.init(node2, token[2]);\n    node2.source.end = this.getPosition(token[3] || token[2]);\n    node2.source.end.offset++;\n    let text = token[1].slice(2, -2);\n    if (/^\\s*$/.test(text)) {\n      node2.text = \"\";\n      node2.raws.left = text;\n      node2.raws.right = \"\";\n    } else {\n      let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/);\n      node2.text = match[2];\n      node2.raws.left = match[1];\n      node2.raws.right = match[3];\n    }\n  }\n  createTokenizer() {\n    this.tokenizer = tokenizer2$1(this.input);\n  }\n  decl(tokens, customProperty) {\n    let node2 = new Declaration$2$1();\n    this.init(node2, tokens[0][2]);\n    let last = tokens[tokens.length - 1];\n    if (last[0] === \";\") {\n      this.semicolon = true;\n      tokens.pop();\n    }\n    node2.source.end = this.getPosition(\n      last[3] || last[2] || findLastWithPosition$1(tokens)\n    );\n    node2.source.end.offset++;\n    while (tokens[0][0] !== \"word\") {\n      if (tokens.length === 1) this.unknownWord(tokens);\n      node2.raws.before += tokens.shift()[1];\n    }\n    node2.source.start = this.getPosition(tokens[0][2]);\n    node2.prop = \"\";\n    while (tokens.length) {\n      let type = tokens[0][0];\n      if (type === \":\" || type === \"space\" || type === \"comment\") {\n        break;\n      }\n      node2.prop += tokens.shift()[1];\n    }\n    node2.raws.between = \"\";\n    let token;\n    while (tokens.length) {\n      token = tokens.shift();\n      if (token[0] === \":\") {\n        node2.raws.between += token[1];\n        break;\n      } else {\n        if (token[0] === \"word\" && /\\w/.test(token[1])) {\n          this.unknownWord([token]);\n        }\n        node2.raws.between += token[1];\n      }\n    }\n    if (node2.prop[0] === \"_\" || node2.prop[0] === \"*\") {\n      node2.raws.before += node2.prop[0];\n      node2.prop = node2.prop.slice(1);\n    }\n    let firstSpaces = [];\n    let next;\n    while (tokens.length) {\n      next = tokens[0][0];\n      if (next !== \"space\" && next !== \"comment\") break;\n      firstSpaces.push(tokens.shift());\n    }\n    this.precheckMissedSemicolon(tokens);\n    for (let i2 = tokens.length - 1; i2 >= 0; i2--) {\n      token = tokens[i2];\n      if (token[1].toLowerCase() === \"!important\") {\n        node2.important = true;\n        let string = this.stringFrom(tokens, i2);\n        string = this.spacesFromEnd(tokens) + string;\n        if (string !== \" !important\") node2.raws.important = string;\n        break;\n      } else if (token[1].toLowerCase() === \"important\") {\n        let cache = tokens.slice(0);\n        let str = \"\";\n        for (let j = i2; j > 0; j--) {\n          let type = cache[j][0];\n          if (str.trim().indexOf(\"!\") === 0 && type !== \"space\") {\n            break;\n          }\n          str = cache.pop()[1] + str;\n        }\n        if (str.trim().indexOf(\"!\") === 0) {\n          node2.important = true;\n          node2.raws.important = str;\n          tokens = cache;\n        }\n      }\n      if (token[0] !== \"space\" && token[0] !== \"comment\") {\n        break;\n      }\n    }\n    let hasWord = tokens.some((i2) => i2[0] !== \"space\" && i2[0] !== \"comment\");\n    if (hasWord) {\n      node2.raws.between += firstSpaces.map((i2) => i2[1]).join(\"\");\n      firstSpaces = [];\n    }\n    this.raw(node2, \"value\", firstSpaces.concat(tokens), customProperty);\n    if (node2.value.includes(\":\") && !customProperty) {\n      this.checkMissedSemicolon(tokens);\n    }\n  }\n  doubleColon(token) {\n    throw this.input.error(\n      \"Double colon\",\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    );\n  }\n  emptyRule(token) {\n    let node2 = new Rule$2$1();\n    this.init(node2, token[2]);\n    node2.selector = \"\";\n    node2.raws.between = \"\";\n    this.current = node2;\n  }\n  end(token) {\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon;\n    }\n    this.semicolon = false;\n    this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n    this.spaces = \"\";\n    if (this.current.parent) {\n      this.current.source.end = this.getPosition(token[2]);\n      this.current.source.end.offset++;\n      this.current = this.current.parent;\n    } else {\n      this.unexpectedClose(token);\n    }\n  }\n  endFile() {\n    if (this.current.parent) this.unclosedBlock();\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon;\n    }\n    this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n    this.root.source.end = this.getPosition(this.tokenizer.position());\n  }\n  freeSemicolon(token) {\n    this.spaces += token[1];\n    if (this.current.nodes) {\n      let prev = this.current.nodes[this.current.nodes.length - 1];\n      if (prev && prev.type === \"rule\" && !prev.raws.ownSemicolon) {\n        prev.raws.ownSemicolon = this.spaces;\n        this.spaces = \"\";\n      }\n    }\n  }\n  // Helpers\n  getPosition(offset) {\n    let pos = this.input.fromOffset(offset);\n    return {\n      column: pos.col,\n      line: pos.line,\n      offset\n    };\n  }\n  init(node2, offset) {\n    this.current.push(node2);\n    node2.source = {\n      input: this.input,\n      start: this.getPosition(offset)\n    };\n    node2.raws.before = this.spaces;\n    this.spaces = \"\";\n    if (node2.type !== \"comment\") this.semicolon = false;\n  }\n  other(start) {\n    let end = false;\n    let type = null;\n    let colon = false;\n    let bracket = null;\n    let brackets = [];\n    let customProperty = start[1].startsWith(\"--\");\n    let tokens = [];\n    let token = start;\n    while (token) {\n      type = token[0];\n      tokens.push(token);\n      if (type === \"(\" || type === \"[\") {\n        if (!bracket) bracket = token;\n        brackets.push(type === \"(\" ? \")\" : \"]\");\n      } else if (customProperty && colon && type === \"{\") {\n        if (!bracket) bracket = token;\n        brackets.push(\"}\");\n      } else if (brackets.length === 0) {\n        if (type === \";\") {\n          if (colon) {\n            this.decl(tokens, customProperty);\n            return;\n          } else {\n            break;\n          }\n        } else if (type === \"{\") {\n          this.rule(tokens);\n          return;\n        } else if (type === \"}\") {\n          this.tokenizer.back(tokens.pop());\n          end = true;\n          break;\n        } else if (type === \":\") {\n          colon = true;\n        }\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop();\n        if (brackets.length === 0) bracket = null;\n      }\n      token = this.tokenizer.nextToken();\n    }\n    if (this.tokenizer.endOfFile()) end = true;\n    if (brackets.length > 0) this.unclosedBracket(bracket);\n    if (end && colon) {\n      if (!customProperty) {\n        while (tokens.length) {\n          token = tokens[tokens.length - 1][0];\n          if (token !== \"space\" && token !== \"comment\") break;\n          this.tokenizer.back(tokens.pop());\n        }\n      }\n      this.decl(tokens, customProperty);\n    } else {\n      this.unknownWord(tokens);\n    }\n  }\n  parse() {\n    let token;\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken();\n      switch (token[0]) {\n        case \"space\":\n          this.spaces += token[1];\n          break;\n        case \";\":\n          this.freeSemicolon(token);\n          break;\n        case \"}\":\n          this.end(token);\n          break;\n        case \"comment\":\n          this.comment(token);\n          break;\n        case \"at-word\":\n          this.atrule(token);\n          break;\n        case \"{\":\n          this.emptyRule(token);\n          break;\n        default:\n          this.other(token);\n          break;\n      }\n    }\n    this.endFile();\n  }\n  precheckMissedSemicolon() {\n  }\n  raw(node2, prop, tokens, customProperty) {\n    let token, type;\n    let length = tokens.length;\n    let value = \"\";\n    let clean = true;\n    let next, prev;\n    for (let i2 = 0; i2 < length; i2 += 1) {\n      token = tokens[i2];\n      type = token[0];\n      if (type === \"space\" && i2 === length - 1 && !customProperty) {\n        clean = false;\n      } else if (type === \"comment\") {\n        prev = tokens[i2 - 1] ? tokens[i2 - 1][0] : \"empty\";\n        next = tokens[i2 + 1] ? tokens[i2 + 1][0] : \"empty\";\n        if (!SAFE_COMMENT_NEIGHBOR$1[prev] && !SAFE_COMMENT_NEIGHBOR$1[next]) {\n          if (value.slice(-1) === \",\") {\n            clean = false;\n          } else {\n            value += token[1];\n          }\n        } else {\n          clean = false;\n        }\n      } else {\n        value += token[1];\n      }\n    }\n    if (!clean) {\n      let raw = tokens.reduce((all, i2) => all + i2[1], \"\");\n      node2.raws[prop] = { raw, value };\n    }\n    node2[prop] = value;\n  }\n  rule(tokens) {\n    tokens.pop();\n    let node2 = new Rule$2$1();\n    this.init(node2, tokens[0][2]);\n    node2.raws.between = this.spacesAndCommentsFromEnd(tokens);\n    this.raw(node2, \"selector\", tokens);\n    this.current = node2;\n  }\n  spacesAndCommentsFromEnd(tokens) {\n    let lastTokenType;\n    let spaces = \"\";\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0];\n      if (lastTokenType !== \"space\" && lastTokenType !== \"comment\") break;\n      spaces = tokens.pop()[1] + spaces;\n    }\n    return spaces;\n  }\n  // Errors\n  spacesAndCommentsFromStart(tokens) {\n    let next;\n    let spaces = \"\";\n    while (tokens.length) {\n      next = tokens[0][0];\n      if (next !== \"space\" && next !== \"comment\") break;\n      spaces += tokens.shift()[1];\n    }\n    return spaces;\n  }\n  spacesFromEnd(tokens) {\n    let lastTokenType;\n    let spaces = \"\";\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0];\n      if (lastTokenType !== \"space\") break;\n      spaces = tokens.pop()[1] + spaces;\n    }\n    return spaces;\n  }\n  stringFrom(tokens, from) {\n    let result2 = \"\";\n    for (let i2 = from; i2 < tokens.length; i2++) {\n      result2 += tokens[i2][1];\n    }\n    tokens.splice(from, tokens.length - from);\n    return result2;\n  }\n  unclosedBlock() {\n    let pos = this.current.source.start;\n    throw this.input.error(\"Unclosed block\", pos.line, pos.column);\n  }\n  unclosedBracket(bracket) {\n    throw this.input.error(\n      \"Unclosed bracket\",\n      { offset: bracket[2] },\n      { offset: bracket[2] + 1 }\n    );\n  }\n  unexpectedClose(token) {\n    throw this.input.error(\n      \"Unexpected }\",\n      { offset: token[2] },\n      { offset: token[2] + 1 }\n    );\n  }\n  unknownWord(tokens) {\n    throw this.input.error(\n      \"Unknown word\",\n      { offset: tokens[0][2] },\n      { offset: tokens[0][2] + tokens[0][1].length }\n    );\n  }\n  unnamedAtrule(node2, token) {\n    throw this.input.error(\n      \"At-rule without name\",\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    );\n  }\n};\nvar parser$1 = Parser$1$1;\nlet Container$2$1 = container$1;\nlet Parser2$1 = parser$1;\nlet Input$2$1 = input$1;\nfunction parse$3$1(css, opts) {\n  let input2 = new Input$2$1(css, opts);\n  let parser2 = new Parser2$1(input2);\n  try {\n    parser2.parse();\n  } catch (e2) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (e2.name === \"CssSyntaxError\" && opts && opts.from) {\n        if (/\\.scss$/i.test(opts.from)) {\n          e2.message += \"\\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser\";\n        } else if (/\\.sass/i.test(opts.from)) {\n          e2.message += \"\\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser\";\n        } else if (/\\.less$/i.test(opts.from)) {\n          e2.message += \"\\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser\";\n        }\n      }\n    }\n    throw e2;\n  }\n  return parser2.root;\n}\nvar parse_1$1 = parse$3$1;\nparse$3$1.default = parse$3$1;\nContainer$2$1.registerParse(parse$3$1);\nlet { isClean: isClean$3, my: my$3 } = symbols$1;\nlet MapGenerator$1$1 = mapGenerator$1;\nlet stringify$2$1 = stringify_1$1;\nlet Container$1$1 = container$1;\nlet Document$2$1 = document$1$1;\nlet warnOnce$1$1 = warnOnce$2$1;\nlet Result$2$1 = result$1;\nlet parse$2$1 = parse_1$1;\nlet Root$3$1 = root$1;\nconst TYPE_TO_CLASS_NAME$1 = {\n  atrule: \"AtRule\",\n  comment: \"Comment\",\n  decl: \"Declaration\",\n  document: \"Document\",\n  root: \"Root\",\n  rule: \"Rule\"\n};\nconst PLUGIN_PROPS$1 = {\n  AtRule: true,\n  AtRuleExit: true,\n  Comment: true,\n  CommentExit: true,\n  Declaration: true,\n  DeclarationExit: true,\n  Document: true,\n  DocumentExit: true,\n  Once: true,\n  OnceExit: true,\n  postcssPlugin: true,\n  prepare: true,\n  Root: true,\n  RootExit: true,\n  Rule: true,\n  RuleExit: true\n};\nconst NOT_VISITORS$1 = {\n  Once: true,\n  postcssPlugin: true,\n  prepare: true\n};\nconst CHILDREN$1 = 0;\nfunction isPromise$1(obj) {\n  return typeof obj === \"object\" && typeof obj.then === \"function\";\n}\nfunction getEvents$1(node2) {\n  let key = false;\n  let type = TYPE_TO_CLASS_NAME$1[node2.type];\n  if (node2.type === \"decl\") {\n    key = node2.prop.toLowerCase();\n  } else if (node2.type === \"atrule\") {\n    key = node2.name.toLowerCase();\n  }\n  if (key && node2.append) {\n    return [\n      type,\n      type + \"-\" + key,\n      CHILDREN$1,\n      type + \"Exit\",\n      type + \"Exit-\" + key\n    ];\n  } else if (key) {\n    return [type, type + \"-\" + key, type + \"Exit\", type + \"Exit-\" + key];\n  } else if (node2.append) {\n    return [type, CHILDREN$1, type + \"Exit\"];\n  } else {\n    return [type, type + \"Exit\"];\n  }\n}\nfunction toStack$1(node2) {\n  let events;\n  if (node2.type === \"document\") {\n    events = [\"Document\", CHILDREN$1, \"DocumentExit\"];\n  } else if (node2.type === \"root\") {\n    events = [\"Root\", CHILDREN$1, \"RootExit\"];\n  } else {\n    events = getEvents$1(node2);\n  }\n  return {\n    eventIndex: 0,\n    events,\n    iterator: 0,\n    node: node2,\n    visitorIndex: 0,\n    visitors: []\n  };\n}\nfunction cleanMarks$1(node2) {\n  node2[isClean$3] = false;\n  if (node2.nodes) node2.nodes.forEach((i2) => cleanMarks$1(i2));\n  return node2;\n}\nlet postcss$2$1 = {};\nlet LazyResult$2$1 = class LazyResult {\n  constructor(processor2, css, opts) {\n    this.stringified = false;\n    this.processed = false;\n    let root2;\n    if (typeof css === \"object\" && css !== null && (css.type === \"root\" || css.type === \"document\")) {\n      root2 = cleanMarks$1(css);\n    } else if (css instanceof LazyResult || css instanceof Result$2$1) {\n      root2 = cleanMarks$1(css.root);\n      if (css.map) {\n        if (typeof opts.map === \"undefined\") opts.map = {};\n        if (!opts.map.inline) opts.map.inline = false;\n        opts.map.prev = css.map;\n      }\n    } else {\n      let parser2 = parse$2$1;\n      if (opts.syntax) parser2 = opts.syntax.parse;\n      if (opts.parser) parser2 = opts.parser;\n      if (parser2.parse) parser2 = parser2.parse;\n      try {\n        root2 = parser2(css, opts);\n      } catch (error) {\n        this.processed = true;\n        this.error = error;\n      }\n      if (root2 && !root2[my$3]) {\n        Container$1$1.rebuild(root2);\n      }\n    }\n    this.result = new Result$2$1(processor2, root2, opts);\n    this.helpers = { ...postcss$2$1, postcss: postcss$2$1, result: this.result };\n    this.plugins = this.processor.plugins.map((plugin22) => {\n      if (typeof plugin22 === \"object\" && plugin22.prepare) {\n        return { ...plugin22, ...plugin22.prepare(this.result) };\n      } else {\n        return plugin22;\n      }\n    });\n  }\n  async() {\n    if (this.error) return Promise.reject(this.error);\n    if (this.processed) return Promise.resolve(this.result);\n    if (!this.processing) {\n      this.processing = this.runAsync();\n    }\n    return this.processing;\n  }\n  catch(onRejected) {\n    return this.async().catch(onRejected);\n  }\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally);\n  }\n  getAsyncError() {\n    throw new Error(\"Use process(css).then(cb) to work with async plugins\");\n  }\n  handleError(error, node2) {\n    let plugin22 = this.result.lastPlugin;\n    try {\n      if (node2) node2.addToError(error);\n      this.error = error;\n      if (error.name === \"CssSyntaxError\" && !error.plugin) {\n        error.plugin = plugin22.postcssPlugin;\n        error.setMessage();\n      } else if (plugin22.postcssVersion) {\n        if (process.env.NODE_ENV !== \"production\") {\n          let pluginName = plugin22.postcssPlugin;\n          let pluginVer = plugin22.postcssVersion;\n          let runtimeVer = this.result.processor.version;\n          let a2 = pluginVer.split(\".\");\n          let b = runtimeVer.split(\".\");\n          if (a2[0] !== b[0] || parseInt(a2[1]) > parseInt(b[1])) {\n            console.error(\n              \"Unknown error from PostCSS plugin. Your current PostCSS version is \" + runtimeVer + \", but \" + pluginName + \" uses \" + pluginVer + \". Perhaps this is the source of the error below.\"\n            );\n          }\n        }\n      }\n    } catch (err) {\n      if (console && console.error) console.error(err);\n    }\n    return error;\n  }\n  prepareVisitors() {\n    this.listeners = {};\n    let add = (plugin22, type, cb) => {\n      if (!this.listeners[type]) this.listeners[type] = [];\n      this.listeners[type].push([plugin22, cb]);\n    };\n    for (let plugin22 of this.plugins) {\n      if (typeof plugin22 === \"object\") {\n        for (let event in plugin22) {\n          if (!PLUGIN_PROPS$1[event] && /^[A-Z]/.test(event)) {\n            throw new Error(\n              `Unknown event ${event} in ${plugin22.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`\n            );\n          }\n          if (!NOT_VISITORS$1[event]) {\n            if (typeof plugin22[event] === \"object\") {\n              for (let filter in plugin22[event]) {\n                if (filter === \"*\") {\n                  add(plugin22, event, plugin22[event][filter]);\n                } else {\n                  add(\n                    plugin22,\n                    event + \"-\" + filter.toLowerCase(),\n                    plugin22[event][filter]\n                  );\n                }\n              }\n            } else if (typeof plugin22[event] === \"function\") {\n              add(plugin22, event, plugin22[event]);\n            }\n          }\n        }\n      }\n    }\n    this.hasListener = Object.keys(this.listeners).length > 0;\n  }\n  async runAsync() {\n    this.plugin = 0;\n    for (let i2 = 0; i2 < this.plugins.length; i2++) {\n      let plugin22 = this.plugins[i2];\n      let promise = this.runOnRoot(plugin22);\n      if (isPromise$1(promise)) {\n        try {\n          await promise;\n        } catch (error) {\n          throw this.handleError(error);\n        }\n      }\n    }\n    this.prepareVisitors();\n    if (this.hasListener) {\n      let root2 = this.result.root;\n      while (!root2[isClean$3]) {\n        root2[isClean$3] = true;\n        let stack = [toStack$1(root2)];\n        while (stack.length > 0) {\n          let promise = this.visitTick(stack);\n          if (isPromise$1(promise)) {\n            try {\n              await promise;\n            } catch (e2) {\n              let node2 = stack[stack.length - 1].node;\n              throw this.handleError(e2, node2);\n            }\n          }\n        }\n      }\n      if (this.listeners.OnceExit) {\n        for (let [plugin22, visitor] of this.listeners.OnceExit) {\n          this.result.lastPlugin = plugin22;\n          try {\n            if (root2.type === \"document\") {\n              let roots = root2.nodes.map(\n                (subRoot) => visitor(subRoot, this.helpers)\n              );\n              await Promise.all(roots);\n            } else {\n              await visitor(root2, this.helpers);\n            }\n          } catch (e2) {\n            throw this.handleError(e2);\n          }\n        }\n      }\n    }\n    this.processed = true;\n    return this.stringify();\n  }\n  runOnRoot(plugin22) {\n    this.result.lastPlugin = plugin22;\n    try {\n      if (typeof plugin22 === \"object\" && plugin22.Once) {\n        if (this.result.root.type === \"document\") {\n          let roots = this.result.root.nodes.map(\n            (root2) => plugin22.Once(root2, this.helpers)\n          );\n          if (isPromise$1(roots[0])) {\n            return Promise.all(roots);\n          }\n          return roots;\n        }\n        return plugin22.Once(this.result.root, this.helpers);\n      } else if (typeof plugin22 === \"function\") {\n        return plugin22(this.result.root, this.result);\n      }\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n  stringify() {\n    if (this.error) throw this.error;\n    if (this.stringified) return this.result;\n    this.stringified = true;\n    this.sync();\n    let opts = this.result.opts;\n    let str = stringify$2$1;\n    if (opts.syntax) str = opts.syntax.stringify;\n    if (opts.stringifier) str = opts.stringifier;\n    if (str.stringify) str = str.stringify;\n    let map = new MapGenerator$1$1(str, this.result.root, this.result.opts);\n    let data = map.generate();\n    this.result.css = data[0];\n    this.result.map = data[1];\n    return this.result;\n  }\n  sync() {\n    if (this.error) throw this.error;\n    if (this.processed) return this.result;\n    this.processed = true;\n    if (this.processing) {\n      throw this.getAsyncError();\n    }\n    for (let plugin22 of this.plugins) {\n      let promise = this.runOnRoot(plugin22);\n      if (isPromise$1(promise)) {\n        throw this.getAsyncError();\n      }\n    }\n    this.prepareVisitors();\n    if (this.hasListener) {\n      let root2 = this.result.root;\n      while (!root2[isClean$3]) {\n        root2[isClean$3] = true;\n        this.walkSync(root2);\n      }\n      if (this.listeners.OnceExit) {\n        if (root2.type === \"document\") {\n          for (let subRoot of root2.nodes) {\n            this.visitSync(this.listeners.OnceExit, subRoot);\n          }\n        } else {\n          this.visitSync(this.listeners.OnceExit, root2);\n        }\n      }\n    }\n    return this.result;\n  }\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!(\"from\" in this.opts)) {\n        warnOnce$1$1(\n          \"Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.\"\n        );\n      }\n    }\n    return this.async().then(onFulfilled, onRejected);\n  }\n  toString() {\n    return this.css;\n  }\n  visitSync(visitors, node2) {\n    for (let [plugin22, visitor] of visitors) {\n      this.result.lastPlugin = plugin22;\n      let promise;\n      try {\n        promise = visitor(node2, this.helpers);\n      } catch (e2) {\n        throw this.handleError(e2, node2.proxyOf);\n      }\n      if (node2.type !== \"root\" && node2.type !== \"document\" && !node2.parent) {\n        return true;\n      }\n      if (isPromise$1(promise)) {\n        throw this.getAsyncError();\n      }\n    }\n  }\n  visitTick(stack) {\n    let visit2 = stack[stack.length - 1];\n    let { node: node2, visitors } = visit2;\n    if (node2.type !== \"root\" && node2.type !== \"document\" && !node2.parent) {\n      stack.pop();\n      return;\n    }\n    if (visitors.length > 0 && visit2.visitorIndex < visitors.length) {\n      let [plugin22, visitor] = visitors[visit2.visitorIndex];\n      visit2.visitorIndex += 1;\n      if (visit2.visitorIndex === visitors.length) {\n        visit2.visitors = [];\n        visit2.visitorIndex = 0;\n      }\n      this.result.lastPlugin = plugin22;\n      try {\n        return visitor(node2.toProxy(), this.helpers);\n      } catch (e2) {\n        throw this.handleError(e2, node2);\n      }\n    }\n    if (visit2.iterator !== 0) {\n      let iterator = visit2.iterator;\n      let child;\n      while (child = node2.nodes[node2.indexes[iterator]]) {\n        node2.indexes[iterator] += 1;\n        if (!child[isClean$3]) {\n          child[isClean$3] = true;\n          stack.push(toStack$1(child));\n          return;\n        }\n      }\n      visit2.iterator = 0;\n      delete node2.indexes[iterator];\n    }\n    let events = visit2.events;\n    while (visit2.eventIndex < events.length) {\n      let event = events[visit2.eventIndex];\n      visit2.eventIndex += 1;\n      if (event === CHILDREN$1) {\n        if (node2.nodes && node2.nodes.length) {\n          node2[isClean$3] = true;\n          visit2.iterator = node2.getIterator();\n        }\n        return;\n      } else if (this.listeners[event]) {\n        visit2.visitors = this.listeners[event];\n        return;\n      }\n    }\n    stack.pop();\n  }\n  walkSync(node2) {\n    node2[isClean$3] = true;\n    let events = getEvents$1(node2);\n    for (let event of events) {\n      if (event === CHILDREN$1) {\n        if (node2.nodes) {\n          node2.each((child) => {\n            if (!child[isClean$3]) this.walkSync(child);\n          });\n        }\n      } else {\n        let visitors = this.listeners[event];\n        if (visitors) {\n          if (this.visitSync(visitors, node2.toProxy())) return;\n        }\n      }\n    }\n  }\n  warnings() {\n    return this.sync().warnings();\n  }\n  get content() {\n    return this.stringify().content;\n  }\n  get css() {\n    return this.stringify().css;\n  }\n  get map() {\n    return this.stringify().map;\n  }\n  get messages() {\n    return this.sync().messages;\n  }\n  get opts() {\n    return this.result.opts;\n  }\n  get processor() {\n    return this.result.processor;\n  }\n  get root() {\n    return this.sync().root;\n  }\n  get [Symbol.toStringTag]() {\n    return \"LazyResult\";\n  }\n};\nLazyResult$2$1.registerPostcss = (dependant) => {\n  postcss$2$1 = dependant;\n};\nvar lazyResult$1 = LazyResult$2$1;\nLazyResult$2$1.default = LazyResult$2$1;\nRoot$3$1.registerLazyResult(LazyResult$2$1);\nDocument$2$1.registerLazyResult(LazyResult$2$1);\nlet MapGenerator2$1 = mapGenerator$1;\nlet stringify$1$1 = stringify_1$1;\nlet warnOnce2$1 = warnOnce$2$1;\nlet parse$1$1 = parse_1$1;\nconst Result$1$1 = result$1;\nlet NoWorkResult$1$1 = class NoWorkResult {\n  constructor(processor2, css, opts) {\n    css = css.toString();\n    this.stringified = false;\n    this._processor = processor2;\n    this._css = css;\n    this._opts = opts;\n    this._map = void 0;\n    let root2;\n    let str = stringify$1$1;\n    this.result = new Result$1$1(this._processor, root2, this._opts);\n    this.result.css = css;\n    let self = this;\n    Object.defineProperty(this.result, \"root\", {\n      get() {\n        return self.root;\n      }\n    });\n    let map = new MapGenerator2$1(str, root2, this._opts, css);\n    if (map.isMap()) {\n      let [generatedCSS, generatedMap] = map.generate();\n      if (generatedCSS) {\n        this.result.css = generatedCSS;\n      }\n      if (generatedMap) {\n        this.result.map = generatedMap;\n      }\n    } else {\n      map.clearAnnotation();\n      this.result.css = map.css;\n    }\n  }\n  async() {\n    if (this.error) return Promise.reject(this.error);\n    return Promise.resolve(this.result);\n  }\n  catch(onRejected) {\n    return this.async().catch(onRejected);\n  }\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally);\n  }\n  sync() {\n    if (this.error) throw this.error;\n    return this.result;\n  }\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!(\"from\" in this._opts)) {\n        warnOnce2$1(\n          \"Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.\"\n        );\n      }\n    }\n    return this.async().then(onFulfilled, onRejected);\n  }\n  toString() {\n    return this._css;\n  }\n  warnings() {\n    return [];\n  }\n  get content() {\n    return this.result.css;\n  }\n  get css() {\n    return this.result.css;\n  }\n  get map() {\n    return this.result.map;\n  }\n  get messages() {\n    return [];\n  }\n  get opts() {\n    return this.result.opts;\n  }\n  get processor() {\n    return this.result.processor;\n  }\n  get root() {\n    if (this._root) {\n      return this._root;\n    }\n    let root2;\n    let parser2 = parse$1$1;\n    try {\n      root2 = parser2(this._css, this._opts);\n    } catch (error) {\n      this.error = error;\n    }\n    if (this.error) {\n      throw this.error;\n    } else {\n      this._root = root2;\n      return root2;\n    }\n  }\n  get [Symbol.toStringTag]() {\n    return \"NoWorkResult\";\n  }\n};\nvar noWorkResult$1 = NoWorkResult$1$1;\nNoWorkResult$1$1.default = NoWorkResult$1$1;\nlet NoWorkResult2$1 = noWorkResult$1;\nlet LazyResult$1$1 = lazyResult$1;\nlet Document$1$1 = document$1$1;\nlet Root$2$1 = root$1;\nlet Processor$1$1 = class Processor {\n  constructor(plugins = []) {\n    this.version = \"8.4.38\";\n    this.plugins = this.normalize(plugins);\n  }\n  normalize(plugins) {\n    let normalized = [];\n    for (let i2 of plugins) {\n      if (i2.postcss === true) {\n        i2 = i2();\n      } else if (i2.postcss) {\n        i2 = i2.postcss;\n      }\n      if (typeof i2 === \"object\" && Array.isArray(i2.plugins)) {\n        normalized = normalized.concat(i2.plugins);\n      } else if (typeof i2 === \"object\" && i2.postcssPlugin) {\n        normalized.push(i2);\n      } else if (typeof i2 === \"function\") {\n        normalized.push(i2);\n      } else if (typeof i2 === \"object\" && (i2.parse || i2.stringify)) {\n        if (process.env.NODE_ENV !== \"production\") {\n          throw new Error(\n            \"PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.\"\n          );\n        }\n      } else {\n        throw new Error(i2 + \" is not a PostCSS plugin\");\n      }\n    }\n    return normalized;\n  }\n  process(css, opts = {}) {\n    if (!this.plugins.length && !opts.parser && !opts.stringifier && !opts.syntax) {\n      return new NoWorkResult2$1(this, css, opts);\n    } else {\n      return new LazyResult$1$1(this, css, opts);\n    }\n  }\n  use(plugin22) {\n    this.plugins = this.plugins.concat(this.normalize([plugin22]));\n    return this;\n  }\n};\nvar processor$1 = Processor$1$1;\nProcessor$1$1.default = Processor$1$1;\nRoot$2$1.registerProcessor(Processor$1$1);\nDocument$1$1.registerProcessor(Processor$1$1);\nlet Declaration$1$1 = declaration$1;\nlet PreviousMap2$1 = previousMap$1;\nlet Comment$1$1 = comment$1;\nlet AtRule$1$1 = atRule$1;\nlet Input$1$1 = input$1;\nlet Root$1$1 = root$1;\nlet Rule$1$1 = rule$1;\nfunction fromJSON$1$1(json, inputs) {\n  if (Array.isArray(json)) return json.map((n2) => fromJSON$1$1(n2));\n  let { inputs: ownInputs, ...defaults } = json;\n  if (ownInputs) {\n    inputs = [];\n    for (let input2 of ownInputs) {\n      let inputHydrated = { ...input2, __proto__: Input$1$1.prototype };\n      if (inputHydrated.map) {\n        inputHydrated.map = {\n          ...inputHydrated.map,\n          __proto__: PreviousMap2$1.prototype\n        };\n      }\n      inputs.push(inputHydrated);\n    }\n  }\n  if (defaults.nodes) {\n    defaults.nodes = json.nodes.map((n2) => fromJSON$1$1(n2, inputs));\n  }\n  if (defaults.source) {\n    let { inputId, ...source } = defaults.source;\n    defaults.source = source;\n    if (inputId != null) {\n      defaults.source.input = inputs[inputId];\n    }\n  }\n  if (defaults.type === \"root\") {\n    return new Root$1$1(defaults);\n  } else if (defaults.type === \"decl\") {\n    return new Declaration$1$1(defaults);\n  } else if (defaults.type === \"rule\") {\n    return new Rule$1$1(defaults);\n  } else if (defaults.type === \"comment\") {\n    return new Comment$1$1(defaults);\n  } else if (defaults.type === \"atrule\") {\n    return new AtRule$1$1(defaults);\n  } else {\n    throw new Error(\"Unknown node type: \" + json.type);\n  }\n}\nvar fromJSON_1$1 = fromJSON$1$1;\nfromJSON$1$1.default = fromJSON$1$1;\nlet CssSyntaxError2$1 = cssSyntaxError$1;\nlet Declaration2$1 = declaration$1;\nlet LazyResult2$1 = lazyResult$1;\nlet Container2$1 = container$1;\nlet Processor2$1 = processor$1;\nlet stringify$5 = stringify_1$1;\nlet fromJSON$2 = fromJSON_1$1;\nlet Document22 = document$1$1;\nlet Warning2$1 = warning$1;\nlet Comment2$1 = comment$1;\nlet AtRule2$1 = atRule$1;\nlet Result2$1 = result$1;\nlet Input2$1 = input$1;\nlet parse$5 = parse_1$1;\nlet list$3 = list_1$1;\nlet Rule2$1 = rule$1;\nlet Root2$1 = root$1;\nlet Node2$1 = node$1;\nfunction postcss$3(...plugins) {\n  if (plugins.length === 1 && Array.isArray(plugins[0])) {\n    plugins = plugins[0];\n  }\n  return new Processor2$1(plugins);\n}\npostcss$3.plugin = function plugin(name, initializer) {\n  let warningPrinted = false;\n  function creator(...args) {\n    if (console && console.warn && !warningPrinted) {\n      warningPrinted = true;\n      console.warn(\n        name + \": postcss.plugin was deprecated. Migration guide:\\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration\"\n      );\n      if (process.env.LANG && process.env.LANG.startsWith(\"cn\")) {\n        console.warn(\n          name + \": 里面 postcss.plugin 被弃用. 迁移指南:\\nhttps://www.w3ctech.com/topic/2226\"\n        );\n      }\n    }\n    let transformer = initializer(...args);\n    transformer.postcssPlugin = name;\n    transformer.postcssVersion = new Processor2$1().version;\n    return transformer;\n  }\n  let cache;\n  Object.defineProperty(creator, \"postcss\", {\n    get() {\n      if (!cache) cache = creator();\n      return cache;\n    }\n  });\n  creator.process = function(css, processOpts, pluginOpts) {\n    return postcss$3([creator(pluginOpts)]).process(css, processOpts);\n  };\n  return creator;\n};\npostcss$3.stringify = stringify$5;\npostcss$3.parse = parse$5;\npostcss$3.fromJSON = fromJSON$2;\npostcss$3.list = list$3;\npostcss$3.comment = (defaults) => new Comment2$1(defaults);\npostcss$3.atRule = (defaults) => new AtRule2$1(defaults);\npostcss$3.decl = (defaults) => new Declaration2$1(defaults);\npostcss$3.rule = (defaults) => new Rule2$1(defaults);\npostcss$3.root = (defaults) => new Root2$1(defaults);\npostcss$3.document = (defaults) => new Document22(defaults);\npostcss$3.CssSyntaxError = CssSyntaxError2$1;\npostcss$3.Declaration = Declaration2$1;\npostcss$3.Container = Container2$1;\npostcss$3.Processor = Processor2$1;\npostcss$3.Document = Document22;\npostcss$3.Comment = Comment2$1;\npostcss$3.Warning = Warning2$1;\npostcss$3.AtRule = AtRule2$1;\npostcss$3.Result = Result2$1;\npostcss$3.Input = Input2$1;\npostcss$3.Rule = Rule2$1;\npostcss$3.Root = Root2$1;\npostcss$3.Node = Node2$1;\nLazyResult2$1.registerPostcss(postcss$3);\nvar postcss_1$1 = postcss$3;\npostcss$3.default = postcss$3;\nconst postcss$1$1 = /* @__PURE__ */ getDefaultExportFromCjs$1(postcss_1$1);\npostcss$1$1.stringify;\npostcss$1$1.fromJSON;\npostcss$1$1.plugin;\npostcss$1$1.parse;\npostcss$1$1.list;\npostcss$1$1.document;\npostcss$1$1.comment;\npostcss$1$1.atRule;\npostcss$1$1.rule;\npostcss$1$1.decl;\npostcss$1$1.root;\npostcss$1$1.CssSyntaxError;\npostcss$1$1.Declaration;\npostcss$1$1.Container;\npostcss$1$1.Processor;\npostcss$1$1.Document;\npostcss$1$1.Comment;\npostcss$1$1.Warning;\npostcss$1$1.AtRule;\npostcss$1$1.Result;\npostcss$1$1.Input;\npostcss$1$1.Rule;\npostcss$1$1.Root;\npostcss$1$1.Node;\nvar __defProp2 = Object.defineProperty;\nvar __defNormalProp2 = (obj, key, value) => key in obj ? __defProp2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField2 = (obj, key, value) => __defNormalProp2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nfunction getDefaultExportFromCjs(x2) {\n  return x2 && x2.__esModule && Object.prototype.hasOwnProperty.call(x2, \"default\") ? x2[\"default\"] : x2;\n}\nfunction getAugmentedNamespace(n2) {\n  if (n2.__esModule) return n2;\n  var f2 = n2.default;\n  if (typeof f2 == \"function\") {\n    var a2 = function a22() {\n      if (this instanceof a22) {\n        return Reflect.construct(f2, arguments, this.constructor);\n      }\n      return f2.apply(this, arguments);\n    };\n    a2.prototype = f2.prototype;\n  } else a2 = {};\n  Object.defineProperty(a2, \"__esModule\", { value: true });\n  Object.keys(n2).forEach(function(k) {\n    var d = Object.getOwnPropertyDescriptor(n2, k);\n    Object.defineProperty(a2, k, d.get ? d : {\n      enumerable: true,\n      get: function() {\n        return n2[k];\n      }\n    });\n  });\n  return a2;\n}\nvar picocolors_browser = { exports: {} };\nvar x = String;\nvar create = function() {\n  return { isColorSupported: false, reset: x, bold: x, dim: x, italic: x, underline: x, inverse: x, hidden: x, strikethrough: x, black: x, red: x, green: x, yellow: x, blue: x, magenta: x, cyan: x, white: x, gray: x, bgBlack: x, bgRed: x, bgGreen: x, bgYellow: x, bgBlue: x, bgMagenta: x, bgCyan: x, bgWhite: x };\n};\npicocolors_browser.exports = create();\npicocolors_browser.exports.createColors = create;\nvar picocolors_browserExports = picocolors_browser.exports;\nconst __viteBrowserExternal = {};\nconst __viteBrowserExternal$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  default: __viteBrowserExternal\n}, Symbol.toStringTag, { value: \"Module\" }));\nconst require$$2 = /* @__PURE__ */ getAugmentedNamespace(__viteBrowserExternal$1);\nlet pico = picocolors_browserExports;\nlet terminalHighlight$1 = require$$2;\nlet CssSyntaxError$3 = class CssSyntaxError2 extends Error {\n  constructor(message, line, column, source, file, plugin22) {\n    super(message);\n    this.name = \"CssSyntaxError\";\n    this.reason = message;\n    if (file) {\n      this.file = file;\n    }\n    if (source) {\n      this.source = source;\n    }\n    if (plugin22) {\n      this.plugin = plugin22;\n    }\n    if (typeof line !== \"undefined\" && typeof column !== \"undefined\") {\n      if (typeof line === \"number\") {\n        this.line = line;\n        this.column = column;\n      } else {\n        this.line = line.line;\n        this.column = line.column;\n        this.endLine = column.line;\n        this.endColumn = column.column;\n      }\n    }\n    this.setMessage();\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, CssSyntaxError2);\n    }\n  }\n  setMessage() {\n    this.message = this.plugin ? this.plugin + \": \" : \"\";\n    this.message += this.file ? this.file : \"<css input>\";\n    if (typeof this.line !== \"undefined\") {\n      this.message += \":\" + this.line + \":\" + this.column;\n    }\n    this.message += \": \" + this.reason;\n  }\n  showSourceCode(color) {\n    if (!this.source) return \"\";\n    let css = this.source;\n    if (color == null) color = pico.isColorSupported;\n    if (terminalHighlight$1) {\n      if (color) css = terminalHighlight$1(css);\n    }\n    let lines = css.split(/\\r?\\n/);\n    let start = Math.max(this.line - 3, 0);\n    let end = Math.min(this.line + 2, lines.length);\n    let maxWidth = String(end).length;\n    let mark, aside;\n    if (color) {\n      let { bold, gray, red } = pico.createColors(true);\n      mark = (text) => bold(red(text));\n      aside = (text) => gray(text);\n    } else {\n      mark = aside = (str) => str;\n    }\n    return lines.slice(start, end).map((line, index2) => {\n      let number = start + 1 + index2;\n      let gutter = \" \" + (\" \" + number).slice(-maxWidth) + \" | \";\n      if (number === this.line) {\n        let spacing = aside(gutter.replace(/\\d/g, \" \")) + line.slice(0, this.column - 1).replace(/[^\\t]/g, \" \");\n        return mark(\">\") + aside(gutter) + line + \"\\n \" + spacing + mark(\"^\");\n      }\n      return \" \" + aside(gutter) + line;\n    }).join(\"\\n\");\n  }\n  toString() {\n    let code = this.showSourceCode();\n    if (code) {\n      code = \"\\n\\n\" + code + \"\\n\";\n    }\n    return this.name + \": \" + this.message + code;\n  }\n};\nvar cssSyntaxError = CssSyntaxError$3;\nCssSyntaxError$3.default = CssSyntaxError$3;\nvar symbols = {};\nsymbols.isClean = Symbol(\"isClean\");\nsymbols.my = Symbol(\"my\");\nconst DEFAULT_RAW = {\n  after: \"\\n\",\n  beforeClose: \"\\n\",\n  beforeComment: \"\\n\",\n  beforeDecl: \"\\n\",\n  beforeOpen: \" \",\n  beforeRule: \"\\n\",\n  colon: \": \",\n  commentLeft: \" \",\n  commentRight: \" \",\n  emptyBody: \"\",\n  indent: \"    \",\n  semicolon: false\n};\nfunction capitalize(str) {\n  return str[0].toUpperCase() + str.slice(1);\n}\nlet Stringifier$2 = class Stringifier2 {\n  constructor(builder) {\n    this.builder = builder;\n  }\n  atrule(node2, semicolon) {\n    let name = \"@\" + node2.name;\n    let params = node2.params ? this.rawValue(node2, \"params\") : \"\";\n    if (typeof node2.raws.afterName !== \"undefined\") {\n      name += node2.raws.afterName;\n    } else if (params) {\n      name += \" \";\n    }\n    if (node2.nodes) {\n      this.block(node2, name + params);\n    } else {\n      let end = (node2.raws.between || \"\") + (semicolon ? \";\" : \"\");\n      this.builder(name + params + end, node2);\n    }\n  }\n  beforeAfter(node2, detect) {\n    let value;\n    if (node2.type === \"decl\") {\n      value = this.raw(node2, null, \"beforeDecl\");\n    } else if (node2.type === \"comment\") {\n      value = this.raw(node2, null, \"beforeComment\");\n    } else if (detect === \"before\") {\n      value = this.raw(node2, null, \"beforeRule\");\n    } else {\n      value = this.raw(node2, null, \"beforeClose\");\n    }\n    let buf = node2.parent;\n    let depth = 0;\n    while (buf && buf.type !== \"root\") {\n      depth += 1;\n      buf = buf.parent;\n    }\n    if (value.includes(\"\\n\")) {\n      let indent = this.raw(node2, null, \"indent\");\n      if (indent.length) {\n        for (let step = 0; step < depth; step++) value += indent;\n      }\n    }\n    return value;\n  }\n  block(node2, start) {\n    let between = this.raw(node2, \"between\", \"beforeOpen\");\n    this.builder(start + between + \"{\", node2, \"start\");\n    let after;\n    if (node2.nodes && node2.nodes.length) {\n      this.body(node2);\n      after = this.raw(node2, \"after\");\n    } else {\n      after = this.raw(node2, \"after\", \"emptyBody\");\n    }\n    if (after) this.builder(after);\n    this.builder(\"}\", node2, \"end\");\n  }\n  body(node2) {\n    let last = node2.nodes.length - 1;\n    while (last > 0) {\n      if (node2.nodes[last].type !== \"comment\") break;\n      last -= 1;\n    }\n    let semicolon = this.raw(node2, \"semicolon\");\n    for (let i2 = 0; i2 < node2.nodes.length; i2++) {\n      let child = node2.nodes[i2];\n      let before = this.raw(child, \"before\");\n      if (before) this.builder(before);\n      this.stringify(child, last !== i2 || semicolon);\n    }\n  }\n  comment(node2) {\n    let left = this.raw(node2, \"left\", \"commentLeft\");\n    let right = this.raw(node2, \"right\", \"commentRight\");\n    this.builder(\"/*\" + left + node2.text + right + \"*/\", node2);\n  }\n  decl(node2, semicolon) {\n    let between = this.raw(node2, \"between\", \"colon\");\n    let string = node2.prop + between + this.rawValue(node2, \"value\");\n    if (node2.important) {\n      string += node2.raws.important || \" !important\";\n    }\n    if (semicolon) string += \";\";\n    this.builder(string, node2);\n  }\n  document(node2) {\n    this.body(node2);\n  }\n  raw(node2, own, detect) {\n    let value;\n    if (!detect) detect = own;\n    if (own) {\n      value = node2.raws[own];\n      if (typeof value !== \"undefined\") return value;\n    }\n    let parent = node2.parent;\n    if (detect === \"before\") {\n      if (!parent || parent.type === \"root\" && parent.first === node2) {\n        return \"\";\n      }\n      if (parent && parent.type === \"document\") {\n        return \"\";\n      }\n    }\n    if (!parent) return DEFAULT_RAW[detect];\n    let root2 = node2.root();\n    if (!root2.rawCache) root2.rawCache = {};\n    if (typeof root2.rawCache[detect] !== \"undefined\") {\n      return root2.rawCache[detect];\n    }\n    if (detect === \"before\" || detect === \"after\") {\n      return this.beforeAfter(node2, detect);\n    } else {\n      let method = \"raw\" + capitalize(detect);\n      if (this[method]) {\n        value = this[method](root2, node2);\n      } else {\n        root2.walk((i2) => {\n          value = i2.raws[own];\n          if (typeof value !== \"undefined\") return false;\n        });\n      }\n    }\n    if (typeof value === \"undefined\") value = DEFAULT_RAW[detect];\n    root2.rawCache[detect] = value;\n    return value;\n  }\n  rawBeforeClose(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && i2.nodes.length > 0) {\n        if (typeof i2.raws.after !== \"undefined\") {\n          value = i2.raws.after;\n          if (value.includes(\"\\n\")) {\n            value = value.replace(/[^\\n]+$/, \"\");\n          }\n          return false;\n        }\n      }\n    });\n    if (value) value = value.replace(/\\S/g, \"\");\n    return value;\n  }\n  rawBeforeComment(root2, node2) {\n    let value;\n    root2.walkComments((i2) => {\n      if (typeof i2.raws.before !== \"undefined\") {\n        value = i2.raws.before;\n        if (value.includes(\"\\n\")) {\n          value = value.replace(/[^\\n]+$/, \"\");\n        }\n        return false;\n      }\n    });\n    if (typeof value === \"undefined\") {\n      value = this.raw(node2, null, \"beforeDecl\");\n    } else if (value) {\n      value = value.replace(/\\S/g, \"\");\n    }\n    return value;\n  }\n  rawBeforeDecl(root2, node2) {\n    let value;\n    root2.walkDecls((i2) => {\n      if (typeof i2.raws.before !== \"undefined\") {\n        value = i2.raws.before;\n        if (value.includes(\"\\n\")) {\n          value = value.replace(/[^\\n]+$/, \"\");\n        }\n        return false;\n      }\n    });\n    if (typeof value === \"undefined\") {\n      value = this.raw(node2, null, \"beforeRule\");\n    } else if (value) {\n      value = value.replace(/\\S/g, \"\");\n    }\n    return value;\n  }\n  rawBeforeOpen(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.type !== \"decl\") {\n        value = i2.raws.between;\n        if (typeof value !== \"undefined\") return false;\n      }\n    });\n    return value;\n  }\n  rawBeforeRule(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && (i2.parent !== root2 || root2.first !== i2)) {\n        if (typeof i2.raws.before !== \"undefined\") {\n          value = i2.raws.before;\n          if (value.includes(\"\\n\")) {\n            value = value.replace(/[^\\n]+$/, \"\");\n          }\n          return false;\n        }\n      }\n    });\n    if (value) value = value.replace(/\\S/g, \"\");\n    return value;\n  }\n  rawColon(root2) {\n    let value;\n    root2.walkDecls((i2) => {\n      if (typeof i2.raws.between !== \"undefined\") {\n        value = i2.raws.between.replace(/[^\\s:]/g, \"\");\n        return false;\n      }\n    });\n    return value;\n  }\n  rawEmptyBody(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && i2.nodes.length === 0) {\n        value = i2.raws.after;\n        if (typeof value !== \"undefined\") return false;\n      }\n    });\n    return value;\n  }\n  rawIndent(root2) {\n    if (root2.raws.indent) return root2.raws.indent;\n    let value;\n    root2.walk((i2) => {\n      let p = i2.parent;\n      if (p && p !== root2 && p.parent && p.parent === root2) {\n        if (typeof i2.raws.before !== \"undefined\") {\n          let parts = i2.raws.before.split(\"\\n\");\n          value = parts[parts.length - 1];\n          value = value.replace(/\\S/g, \"\");\n          return false;\n        }\n      }\n    });\n    return value;\n  }\n  rawSemicolon(root2) {\n    let value;\n    root2.walk((i2) => {\n      if (i2.nodes && i2.nodes.length && i2.last.type === \"decl\") {\n        value = i2.raws.semicolon;\n        if (typeof value !== \"undefined\") return false;\n      }\n    });\n    return value;\n  }\n  rawValue(node2, prop) {\n    let value = node2[prop];\n    let raw = node2.raws[prop];\n    if (raw && raw.value === value) {\n      return raw.raw;\n    }\n    return value;\n  }\n  root(node2) {\n    this.body(node2);\n    if (node2.raws.after) this.builder(node2.raws.after);\n  }\n  rule(node2) {\n    this.block(node2, this.rawValue(node2, \"selector\"));\n    if (node2.raws.ownSemicolon) {\n      this.builder(node2.raws.ownSemicolon, node2, \"end\");\n    }\n  }\n  stringify(node2, semicolon) {\n    if (!this[node2.type]) {\n      throw new Error(\n        \"Unknown AST node type \" + node2.type + \". Maybe you need to change PostCSS stringifier.\"\n      );\n    }\n    this[node2.type](node2, semicolon);\n  }\n};\nvar stringifier = Stringifier$2;\nStringifier$2.default = Stringifier$2;\nlet Stringifier$1 = stringifier;\nfunction stringify$4(node2, builder) {\n  let str = new Stringifier$1(builder);\n  str.stringify(node2);\n}\nvar stringify_1 = stringify$4;\nstringify$4.default = stringify$4;\nlet { isClean: isClean$2, my: my$2 } = symbols;\nlet CssSyntaxError$2 = cssSyntaxError;\nlet Stringifier22 = stringifier;\nlet stringify$3 = stringify_1;\nfunction cloneNode(obj, parent) {\n  let cloned = new obj.constructor();\n  for (let i2 in obj) {\n    if (!Object.prototype.hasOwnProperty.call(obj, i2)) {\n      continue;\n    }\n    if (i2 === \"proxyCache\") continue;\n    let value = obj[i2];\n    let type = typeof value;\n    if (i2 === \"parent\" && type === \"object\") {\n      if (parent) cloned[i2] = parent;\n    } else if (i2 === \"source\") {\n      cloned[i2] = value;\n    } else if (Array.isArray(value)) {\n      cloned[i2] = value.map((j) => cloneNode(j, cloned));\n    } else {\n      if (type === \"object\" && value !== null) value = cloneNode(value);\n      cloned[i2] = value;\n    }\n  }\n  return cloned;\n}\nlet Node$4 = class Node3 {\n  constructor(defaults = {}) {\n    this.raws = {};\n    this[isClean$2] = false;\n    this[my$2] = true;\n    for (let name in defaults) {\n      if (name === \"nodes\") {\n        this.nodes = [];\n        for (let node2 of defaults[name]) {\n          if (typeof node2.clone === \"function\") {\n            this.append(node2.clone());\n          } else {\n            this.append(node2);\n          }\n        }\n      } else {\n        this[name] = defaults[name];\n      }\n    }\n  }\n  addToError(error) {\n    error.postcssNode = this;\n    if (error.stack && this.source && /\\n\\s{4}at /.test(error.stack)) {\n      let s2 = this.source;\n      error.stack = error.stack.replace(\n        /\\n\\s{4}at /,\n        `$&${s2.input.from}:${s2.start.line}:${s2.start.column}$&`\n      );\n    }\n    return error;\n  }\n  after(add) {\n    this.parent.insertAfter(this, add);\n    return this;\n  }\n  assign(overrides = {}) {\n    for (let name in overrides) {\n      this[name] = overrides[name];\n    }\n    return this;\n  }\n  before(add) {\n    this.parent.insertBefore(this, add);\n    return this;\n  }\n  cleanRaws(keepBetween) {\n    delete this.raws.before;\n    delete this.raws.after;\n    if (!keepBetween) delete this.raws.between;\n  }\n  clone(overrides = {}) {\n    let cloned = cloneNode(this);\n    for (let name in overrides) {\n      cloned[name] = overrides[name];\n    }\n    return cloned;\n  }\n  cloneAfter(overrides = {}) {\n    let cloned = this.clone(overrides);\n    this.parent.insertAfter(this, cloned);\n    return cloned;\n  }\n  cloneBefore(overrides = {}) {\n    let cloned = this.clone(overrides);\n    this.parent.insertBefore(this, cloned);\n    return cloned;\n  }\n  error(message, opts = {}) {\n    if (this.source) {\n      let { end, start } = this.rangeBy(opts);\n      return this.source.input.error(\n        message,\n        { column: start.column, line: start.line },\n        { column: end.column, line: end.line },\n        opts\n      );\n    }\n    return new CssSyntaxError$2(message);\n  }\n  getProxyProcessor() {\n    return {\n      get(node2, prop) {\n        if (prop === \"proxyOf\") {\n          return node2;\n        } else if (prop === \"root\") {\n          return () => node2.root().toProxy();\n        } else {\n          return node2[prop];\n        }\n      },\n      set(node2, prop, value) {\n        if (node2[prop] === value) return true;\n        node2[prop] = value;\n        if (prop === \"prop\" || prop === \"value\" || prop === \"name\" || prop === \"params\" || prop === \"important\" || /* c8 ignore next */\n        prop === \"text\") {\n          node2.markDirty();\n        }\n        return true;\n      }\n    };\n  }\n  markDirty() {\n    if (this[isClean$2]) {\n      this[isClean$2] = false;\n      let next = this;\n      while (next = next.parent) {\n        next[isClean$2] = false;\n      }\n    }\n  }\n  next() {\n    if (!this.parent) return void 0;\n    let index2 = this.parent.index(this);\n    return this.parent.nodes[index2 + 1];\n  }\n  positionBy(opts, stringRepresentation) {\n    let pos = this.source.start;\n    if (opts.index) {\n      pos = this.positionInside(opts.index, stringRepresentation);\n    } else if (opts.word) {\n      stringRepresentation = this.toString();\n      let index2 = stringRepresentation.indexOf(opts.word);\n      if (index2 !== -1) pos = this.positionInside(index2, stringRepresentation);\n    }\n    return pos;\n  }\n  positionInside(index2, stringRepresentation) {\n    let string = stringRepresentation || this.toString();\n    let column = this.source.start.column;\n    let line = this.source.start.line;\n    for (let i2 = 0; i2 < index2; i2++) {\n      if (string[i2] === \"\\n\") {\n        column = 1;\n        line += 1;\n      } else {\n        column += 1;\n      }\n    }\n    return { column, line };\n  }\n  prev() {\n    if (!this.parent) return void 0;\n    let index2 = this.parent.index(this);\n    return this.parent.nodes[index2 - 1];\n  }\n  rangeBy(opts) {\n    let start = {\n      column: this.source.start.column,\n      line: this.source.start.line\n    };\n    let end = this.source.end ? {\n      column: this.source.end.column + 1,\n      line: this.source.end.line\n    } : {\n      column: start.column + 1,\n      line: start.line\n    };\n    if (opts.word) {\n      let stringRepresentation = this.toString();\n      let index2 = stringRepresentation.indexOf(opts.word);\n      if (index2 !== -1) {\n        start = this.positionInside(index2, stringRepresentation);\n        end = this.positionInside(index2 + opts.word.length, stringRepresentation);\n      }\n    } else {\n      if (opts.start) {\n        start = {\n          column: opts.start.column,\n          line: opts.start.line\n        };\n      } else if (opts.index) {\n        start = this.positionInside(opts.index);\n      }\n      if (opts.end) {\n        end = {\n          column: opts.end.column,\n          line: opts.end.line\n        };\n      } else if (typeof opts.endIndex === \"number\") {\n        end = this.positionInside(opts.endIndex);\n      } else if (opts.index) {\n        end = this.positionInside(opts.index + 1);\n      }\n    }\n    if (end.line < start.line || end.line === start.line && end.column <= start.column) {\n      end = { column: start.column + 1, line: start.line };\n    }\n    return { end, start };\n  }\n  raw(prop, defaultType) {\n    let str = new Stringifier22();\n    return str.raw(this, prop, defaultType);\n  }\n  remove() {\n    if (this.parent) {\n      this.parent.removeChild(this);\n    }\n    this.parent = void 0;\n    return this;\n  }\n  replaceWith(...nodes) {\n    if (this.parent) {\n      let bookmark = this;\n      let foundSelf = false;\n      for (let node2 of nodes) {\n        if (node2 === this) {\n          foundSelf = true;\n        } else if (foundSelf) {\n          this.parent.insertAfter(bookmark, node2);\n          bookmark = node2;\n        } else {\n          this.parent.insertBefore(bookmark, node2);\n        }\n      }\n      if (!foundSelf) {\n        this.remove();\n      }\n    }\n    return this;\n  }\n  root() {\n    let result2 = this;\n    while (result2.parent && result2.parent.type !== \"document\") {\n      result2 = result2.parent;\n    }\n    return result2;\n  }\n  toJSON(_, inputs) {\n    let fixed = {};\n    let emitInputs = inputs == null;\n    inputs = inputs || /* @__PURE__ */ new Map();\n    let inputsNextIndex = 0;\n    for (let name in this) {\n      if (!Object.prototype.hasOwnProperty.call(this, name)) {\n        continue;\n      }\n      if (name === \"parent\" || name === \"proxyCache\") continue;\n      let value = this[name];\n      if (Array.isArray(value)) {\n        fixed[name] = value.map((i2) => {\n          if (typeof i2 === \"object\" && i2.toJSON) {\n            return i2.toJSON(null, inputs);\n          } else {\n            return i2;\n          }\n        });\n      } else if (typeof value === \"object\" && value.toJSON) {\n        fixed[name] = value.toJSON(null, inputs);\n      } else if (name === \"source\") {\n        let inputId = inputs.get(value.input);\n        if (inputId == null) {\n          inputId = inputsNextIndex;\n          inputs.set(value.input, inputsNextIndex);\n          inputsNextIndex++;\n        }\n        fixed[name] = {\n          end: value.end,\n          inputId,\n          start: value.start\n        };\n      } else {\n        fixed[name] = value;\n      }\n    }\n    if (emitInputs) {\n      fixed.inputs = [...inputs.keys()].map((input2) => input2.toJSON());\n    }\n    return fixed;\n  }\n  toProxy() {\n    if (!this.proxyCache) {\n      this.proxyCache = new Proxy(this, this.getProxyProcessor());\n    }\n    return this.proxyCache;\n  }\n  toString(stringifier2 = stringify$3) {\n    if (stringifier2.stringify) stringifier2 = stringifier2.stringify;\n    let result2 = \"\";\n    stringifier2(this, (i2) => {\n      result2 += i2;\n    });\n    return result2;\n  }\n  warn(result2, text, opts) {\n    let data = { node: this };\n    for (let i2 in opts) data[i2] = opts[i2];\n    return result2.warn(text, data);\n  }\n  get proxyOf() {\n    return this;\n  }\n};\nvar node = Node$4;\nNode$4.default = Node$4;\nlet Node$3 = node;\nlet Declaration$4 = class Declaration2 extends Node$3 {\n  constructor(defaults) {\n    if (defaults && typeof defaults.value !== \"undefined\" && typeof defaults.value !== \"string\") {\n      defaults = { ...defaults, value: String(defaults.value) };\n    }\n    super(defaults);\n    this.type = \"decl\";\n  }\n  get variable() {\n    return this.prop.startsWith(\"--\") || this.prop[0] === \"$\";\n  }\n};\nvar declaration = Declaration$4;\nDeclaration$4.default = Declaration$4;\nlet urlAlphabet = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\nlet customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = \"\";\n    let i2 = size;\n    while (i2--) {\n      id += alphabet[Math.random() * alphabet.length | 0];\n    }\n    return id;\n  };\n};\nlet nanoid$1 = (size = 21) => {\n  let id = \"\";\n  let i2 = size;\n  while (i2--) {\n    id += urlAlphabet[Math.random() * 64 | 0];\n  }\n  return id;\n};\nvar nonSecure = { nanoid: nanoid$1, customAlphabet };\nlet { SourceMapConsumer: SourceMapConsumer$2, SourceMapGenerator: SourceMapGenerator$2 } = require$$2;\nlet { existsSync, readFileSync } = require$$2;\nlet { dirname: dirname$1, join } = require$$2;\nfunction fromBase64(str) {\n  if (Buffer) {\n    return Buffer.from(str, \"base64\").toString();\n  } else {\n    return window.atob(str);\n  }\n}\nlet PreviousMap$2 = class PreviousMap2 {\n  constructor(css, opts) {\n    if (opts.map === false) return;\n    this.loadAnnotation(css);\n    this.inline = this.startWith(this.annotation, \"data:\");\n    let prev = opts.map ? opts.map.prev : void 0;\n    let text = this.loadMap(opts.from, prev);\n    if (!this.mapFile && opts.from) {\n      this.mapFile = opts.from;\n    }\n    if (this.mapFile) this.root = dirname$1(this.mapFile);\n    if (text) this.text = text;\n  }\n  consumer() {\n    if (!this.consumerCache) {\n      this.consumerCache = new SourceMapConsumer$2(this.text);\n    }\n    return this.consumerCache;\n  }\n  decodeInline(text) {\n    let baseCharsetUri = /^data:application\\/json;charset=utf-?8;base64,/;\n    let baseUri = /^data:application\\/json;base64,/;\n    let charsetUri = /^data:application\\/json;charset=utf-?8,/;\n    let uri = /^data:application\\/json,/;\n    if (charsetUri.test(text) || uri.test(text)) {\n      return decodeURIComponent(text.substr(RegExp.lastMatch.length));\n    }\n    if (baseCharsetUri.test(text) || baseUri.test(text)) {\n      return fromBase64(text.substr(RegExp.lastMatch.length));\n    }\n    let encoding = text.match(/data:application\\/json;([^,]+),/)[1];\n    throw new Error(\"Unsupported source map encoding \" + encoding);\n  }\n  getAnnotationURL(sourceMapString) {\n    return sourceMapString.replace(/^\\/\\*\\s*# sourceMappingURL=/, \"\").trim();\n  }\n  isMap(map) {\n    if (typeof map !== \"object\") return false;\n    return typeof map.mappings === \"string\" || typeof map._mappings === \"string\" || Array.isArray(map.sections);\n  }\n  loadAnnotation(css) {\n    let comments = css.match(/\\/\\*\\s*# sourceMappingURL=/gm);\n    if (!comments) return;\n    let start = css.lastIndexOf(comments.pop());\n    let end = css.indexOf(\"*/\", start);\n    if (start > -1 && end > -1) {\n      this.annotation = this.getAnnotationURL(css.substring(start, end));\n    }\n  }\n  loadFile(path) {\n    this.root = dirname$1(path);\n    if (existsSync(path)) {\n      this.mapFile = path;\n      return readFileSync(path, \"utf-8\").toString().trim();\n    }\n  }\n  loadMap(file, prev) {\n    if (prev === false) return false;\n    if (prev) {\n      if (typeof prev === \"string\") {\n        return prev;\n      } else if (typeof prev === \"function\") {\n        let prevPath = prev(file);\n        if (prevPath) {\n          let map = this.loadFile(prevPath);\n          if (!map) {\n            throw new Error(\n              \"Unable to load previous source map: \" + prevPath.toString()\n            );\n          }\n          return map;\n        }\n      } else if (prev instanceof SourceMapConsumer$2) {\n        return SourceMapGenerator$2.fromSourceMap(prev).toString();\n      } else if (prev instanceof SourceMapGenerator$2) {\n        return prev.toString();\n      } else if (this.isMap(prev)) {\n        return JSON.stringify(prev);\n      } else {\n        throw new Error(\n          \"Unsupported previous source map format: \" + prev.toString()\n        );\n      }\n    } else if (this.inline) {\n      return this.decodeInline(this.annotation);\n    } else if (this.annotation) {\n      let map = this.annotation;\n      if (file) map = join(dirname$1(file), map);\n      return this.loadFile(map);\n    }\n  }\n  startWith(string, start) {\n    if (!string) return false;\n    return string.substr(0, start.length) === start;\n  }\n  withContent() {\n    return !!(this.consumer().sourcesContent && this.consumer().sourcesContent.length > 0);\n  }\n};\nvar previousMap = PreviousMap$2;\nPreviousMap$2.default = PreviousMap$2;\nlet { SourceMapConsumer: SourceMapConsumer$1, SourceMapGenerator: SourceMapGenerator$1 } = require$$2;\nlet { fileURLToPath, pathToFileURL: pathToFileURL$1 } = require$$2;\nlet { isAbsolute, resolve: resolve$1 } = require$$2;\nlet { nanoid } = nonSecure;\nlet terminalHighlight = require$$2;\nlet CssSyntaxError$1 = cssSyntaxError;\nlet PreviousMap$1 = previousMap;\nlet fromOffsetCache = Symbol(\"fromOffsetCache\");\nlet sourceMapAvailable$1 = Boolean(SourceMapConsumer$1 && SourceMapGenerator$1);\nlet pathAvailable$1 = Boolean(resolve$1 && isAbsolute);\nlet Input$4 = class Input2 {\n  constructor(css, opts = {}) {\n    if (css === null || typeof css === \"undefined\" || typeof css === \"object\" && !css.toString) {\n      throw new Error(`PostCSS received ${css} instead of CSS string`);\n    }\n    this.css = css.toString();\n    if (this.css[0] === \"\\uFEFF\" || this.css[0] === \"￾\") {\n      this.hasBOM = true;\n      this.css = this.css.slice(1);\n    } else {\n      this.hasBOM = false;\n    }\n    if (opts.from) {\n      if (!pathAvailable$1 || /^\\w+:\\/\\//.test(opts.from) || isAbsolute(opts.from)) {\n        this.file = opts.from;\n      } else {\n        this.file = resolve$1(opts.from);\n      }\n    }\n    if (pathAvailable$1 && sourceMapAvailable$1) {\n      let map = new PreviousMap$1(this.css, opts);\n      if (map.text) {\n        this.map = map;\n        let file = map.consumer().file;\n        if (!this.file && file) this.file = this.mapResolve(file);\n      }\n    }\n    if (!this.file) {\n      this.id = \"<input css \" + nanoid(6) + \">\";\n    }\n    if (this.map) this.map.file = this.from;\n  }\n  error(message, line, column, opts = {}) {\n    let result2, endLine, endColumn;\n    if (line && typeof line === \"object\") {\n      let start = line;\n      let end = column;\n      if (typeof start.offset === \"number\") {\n        let pos = this.fromOffset(start.offset);\n        line = pos.line;\n        column = pos.col;\n      } else {\n        line = start.line;\n        column = start.column;\n      }\n      if (typeof end.offset === \"number\") {\n        let pos = this.fromOffset(end.offset);\n        endLine = pos.line;\n        endColumn = pos.col;\n      } else {\n        endLine = end.line;\n        endColumn = end.column;\n      }\n    } else if (!column) {\n      let pos = this.fromOffset(line);\n      line = pos.line;\n      column = pos.col;\n    }\n    let origin = this.origin(line, column, endLine, endColumn);\n    if (origin) {\n      result2 = new CssSyntaxError$1(\n        message,\n        origin.endLine === void 0 ? origin.line : { column: origin.column, line: origin.line },\n        origin.endLine === void 0 ? origin.column : { column: origin.endColumn, line: origin.endLine },\n        origin.source,\n        origin.file,\n        opts.plugin\n      );\n    } else {\n      result2 = new CssSyntaxError$1(\n        message,\n        endLine === void 0 ? line : { column, line },\n        endLine === void 0 ? column : { column: endColumn, line: endLine },\n        this.css,\n        this.file,\n        opts.plugin\n      );\n    }\n    result2.input = { column, endColumn, endLine, line, source: this.css };\n    if (this.file) {\n      if (pathToFileURL$1) {\n        result2.input.url = pathToFileURL$1(this.file).toString();\n      }\n      result2.input.file = this.file;\n    }\n    return result2;\n  }\n  fromOffset(offset) {\n    let lastLine, lineToIndex;\n    if (!this[fromOffsetCache]) {\n      let lines = this.css.split(\"\\n\");\n      lineToIndex = new Array(lines.length);\n      let prevIndex = 0;\n      for (let i2 = 0, l2 = lines.length; i2 < l2; i2++) {\n        lineToIndex[i2] = prevIndex;\n        prevIndex += lines[i2].length + 1;\n      }\n      this[fromOffsetCache] = lineToIndex;\n    } else {\n      lineToIndex = this[fromOffsetCache];\n    }\n    lastLine = lineToIndex[lineToIndex.length - 1];\n    let min = 0;\n    if (offset >= lastLine) {\n      min = lineToIndex.length - 1;\n    } else {\n      let max = lineToIndex.length - 2;\n      let mid;\n      while (min < max) {\n        mid = min + (max - min >> 1);\n        if (offset < lineToIndex[mid]) {\n          max = mid - 1;\n        } else if (offset >= lineToIndex[mid + 1]) {\n          min = mid + 1;\n        } else {\n          min = mid;\n          break;\n        }\n      }\n    }\n    return {\n      col: offset - lineToIndex[min] + 1,\n      line: min + 1\n    };\n  }\n  mapResolve(file) {\n    if (/^\\w+:\\/\\//.test(file)) {\n      return file;\n    }\n    return resolve$1(this.map.consumer().sourceRoot || this.map.root || \".\", file);\n  }\n  origin(line, column, endLine, endColumn) {\n    if (!this.map) return false;\n    let consumer = this.map.consumer();\n    let from = consumer.originalPositionFor({ column, line });\n    if (!from.source) return false;\n    let to;\n    if (typeof endLine === \"number\") {\n      to = consumer.originalPositionFor({ column: endColumn, line: endLine });\n    }\n    let fromUrl;\n    if (isAbsolute(from.source)) {\n      fromUrl = pathToFileURL$1(from.source);\n    } else {\n      fromUrl = new URL(\n        from.source,\n        this.map.consumer().sourceRoot || pathToFileURL$1(this.map.mapFile)\n      );\n    }\n    let result2 = {\n      column: from.column,\n      endColumn: to && to.column,\n      endLine: to && to.line,\n      line: from.line,\n      url: fromUrl.toString()\n    };\n    if (fromUrl.protocol === \"file:\") {\n      if (fileURLToPath) {\n        result2.file = fileURLToPath(fromUrl);\n      } else {\n        throw new Error(`file: protocol is not available in this PostCSS build`);\n      }\n    }\n    let source = consumer.sourceContentFor(from.source);\n    if (source) result2.source = source;\n    return result2;\n  }\n  toJSON() {\n    let json = {};\n    for (let name of [\"hasBOM\", \"css\", \"file\", \"id\"]) {\n      if (this[name] != null) {\n        json[name] = this[name];\n      }\n    }\n    if (this.map) {\n      json.map = { ...this.map };\n      if (json.map.consumerCache) {\n        json.map.consumerCache = void 0;\n      }\n    }\n    return json;\n  }\n  get from() {\n    return this.file || this.id;\n  }\n};\nvar input = Input$4;\nInput$4.default = Input$4;\nif (terminalHighlight && terminalHighlight.registerInput) {\n  terminalHighlight.registerInput(Input$4);\n}\nlet { SourceMapConsumer, SourceMapGenerator } = require$$2;\nlet { dirname, relative, resolve, sep } = require$$2;\nlet { pathToFileURL } = require$$2;\nlet Input$3 = input;\nlet sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator);\nlet pathAvailable = Boolean(dirname && resolve && relative && sep);\nlet MapGenerator$2 = class MapGenerator2 {\n  constructor(stringify2, root2, opts, cssString) {\n    this.stringify = stringify2;\n    this.mapOpts = opts.map || {};\n    this.root = root2;\n    this.opts = opts;\n    this.css = cssString;\n    this.originalCSS = cssString;\n    this.usesFileUrls = !this.mapOpts.from && this.mapOpts.absolute;\n    this.memoizedFileURLs = /* @__PURE__ */ new Map();\n    this.memoizedPaths = /* @__PURE__ */ new Map();\n    this.memoizedURLs = /* @__PURE__ */ new Map();\n  }\n  addAnnotation() {\n    let content;\n    if (this.isInline()) {\n      content = \"data:application/json;base64,\" + this.toBase64(this.map.toString());\n    } else if (typeof this.mapOpts.annotation === \"string\") {\n      content = this.mapOpts.annotation;\n    } else if (typeof this.mapOpts.annotation === \"function\") {\n      content = this.mapOpts.annotation(this.opts.to, this.root);\n    } else {\n      content = this.outputFile() + \".map\";\n    }\n    let eol = \"\\n\";\n    if (this.css.includes(\"\\r\\n\")) eol = \"\\r\\n\";\n    this.css += eol + \"/*# sourceMappingURL=\" + content + \" */\";\n  }\n  applyPrevMaps() {\n    for (let prev of this.previous()) {\n      let from = this.toUrl(this.path(prev.file));\n      let root2 = prev.root || dirname(prev.file);\n      let map;\n      if (this.mapOpts.sourcesContent === false) {\n        map = new SourceMapConsumer(prev.text);\n        if (map.sourcesContent) {\n          map.sourcesContent = null;\n        }\n      } else {\n        map = prev.consumer();\n      }\n      this.map.applySourceMap(map, from, this.toUrl(this.path(root2)));\n    }\n  }\n  clearAnnotation() {\n    if (this.mapOpts.annotation === false) return;\n    if (this.root) {\n      let node2;\n      for (let i2 = this.root.nodes.length - 1; i2 >= 0; i2--) {\n        node2 = this.root.nodes[i2];\n        if (node2.type !== \"comment\") continue;\n        if (node2.text.indexOf(\"# sourceMappingURL=\") === 0) {\n          this.root.removeChild(i2);\n        }\n      }\n    } else if (this.css) {\n      this.css = this.css.replace(/\\n*?\\/\\*#[\\S\\s]*?\\*\\/$/gm, \"\");\n    }\n  }\n  generate() {\n    this.clearAnnotation();\n    if (pathAvailable && sourceMapAvailable && this.isMap()) {\n      return this.generateMap();\n    } else {\n      let result2 = \"\";\n      this.stringify(this.root, (i2) => {\n        result2 += i2;\n      });\n      return [result2];\n    }\n  }\n  generateMap() {\n    if (this.root) {\n      this.generateString();\n    } else if (this.previous().length === 1) {\n      let prev = this.previous()[0].consumer();\n      prev.file = this.outputFile();\n      this.map = SourceMapGenerator.fromSourceMap(prev, {\n        ignoreInvalidMapping: true\n      });\n    } else {\n      this.map = new SourceMapGenerator({\n        file: this.outputFile(),\n        ignoreInvalidMapping: true\n      });\n      this.map.addMapping({\n        generated: { column: 0, line: 1 },\n        original: { column: 0, line: 1 },\n        source: this.opts.from ? this.toUrl(this.path(this.opts.from)) : \"<no source>\"\n      });\n    }\n    if (this.isSourcesContent()) this.setSourcesContent();\n    if (this.root && this.previous().length > 0) this.applyPrevMaps();\n    if (this.isAnnotation()) this.addAnnotation();\n    if (this.isInline()) {\n      return [this.css];\n    } else {\n      return [this.css, this.map];\n    }\n  }\n  generateString() {\n    this.css = \"\";\n    this.map = new SourceMapGenerator({\n      file: this.outputFile(),\n      ignoreInvalidMapping: true\n    });\n    let line = 1;\n    let column = 1;\n    let noSource = \"<no source>\";\n    let mapping = {\n      generated: { column: 0, line: 0 },\n      original: { column: 0, line: 0 },\n      source: \"\"\n    };\n    let lines, last;\n    this.stringify(this.root, (str, node2, type) => {\n      this.css += str;\n      if (node2 && type !== \"end\") {\n        mapping.generated.line = line;\n        mapping.generated.column = column - 1;\n        if (node2.source && node2.source.start) {\n          mapping.source = this.sourcePath(node2);\n          mapping.original.line = node2.source.start.line;\n          mapping.original.column = node2.source.start.column - 1;\n          this.map.addMapping(mapping);\n        } else {\n          mapping.source = noSource;\n          mapping.original.line = 1;\n          mapping.original.column = 0;\n          this.map.addMapping(mapping);\n        }\n      }\n      lines = str.match(/\\n/g);\n      if (lines) {\n        line += lines.length;\n        last = str.lastIndexOf(\"\\n\");\n        column = str.length - last;\n      } else {\n        column += str.length;\n      }\n      if (node2 && type !== \"start\") {\n        let p = node2.parent || { raws: {} };\n        let childless = node2.type === \"decl\" || node2.type === \"atrule\" && !node2.nodes;\n        if (!childless || node2 !== p.last || p.raws.semicolon) {\n          if (node2.source && node2.source.end) {\n            mapping.source = this.sourcePath(node2);\n            mapping.original.line = node2.source.end.line;\n            mapping.original.column = node2.source.end.column - 1;\n            mapping.generated.line = line;\n            mapping.generated.column = column - 2;\n            this.map.addMapping(mapping);\n          } else {\n            mapping.source = noSource;\n            mapping.original.line = 1;\n            mapping.original.column = 0;\n            mapping.generated.line = line;\n            mapping.generated.column = column - 1;\n            this.map.addMapping(mapping);\n          }\n        }\n      }\n    });\n  }\n  isAnnotation() {\n    if (this.isInline()) {\n      return true;\n    }\n    if (typeof this.mapOpts.annotation !== \"undefined\") {\n      return this.mapOpts.annotation;\n    }\n    if (this.previous().length) {\n      return this.previous().some((i2) => i2.annotation);\n    }\n    return true;\n  }\n  isInline() {\n    if (typeof this.mapOpts.inline !== \"undefined\") {\n      return this.mapOpts.inline;\n    }\n    let annotation = this.mapOpts.annotation;\n    if (typeof annotation !== \"undefined\" && annotation !== true) {\n      return false;\n    }\n    if (this.previous().length) {\n      return this.previous().some((i2) => i2.inline);\n    }\n    return true;\n  }\n  isMap() {\n    if (typeof this.opts.map !== \"undefined\") {\n      return !!this.opts.map;\n    }\n    return this.previous().length > 0;\n  }\n  isSourcesContent() {\n    if (typeof this.mapOpts.sourcesContent !== \"undefined\") {\n      return this.mapOpts.sourcesContent;\n    }\n    if (this.previous().length) {\n      return this.previous().some((i2) => i2.withContent());\n    }\n    return true;\n  }\n  outputFile() {\n    if (this.opts.to) {\n      return this.path(this.opts.to);\n    } else if (this.opts.from) {\n      return this.path(this.opts.from);\n    } else {\n      return \"to.css\";\n    }\n  }\n  path(file) {\n    if (this.mapOpts.absolute) return file;\n    if (file.charCodeAt(0) === 60) return file;\n    if (/^\\w+:\\/\\//.test(file)) return file;\n    let cached = this.memoizedPaths.get(file);\n    if (cached) return cached;\n    let from = this.opts.to ? dirname(this.opts.to) : \".\";\n    if (typeof this.mapOpts.annotation === \"string\") {\n      from = dirname(resolve(from, this.mapOpts.annotation));\n    }\n    let path = relative(from, file);\n    this.memoizedPaths.set(file, path);\n    return path;\n  }\n  previous() {\n    if (!this.previousMaps) {\n      this.previousMaps = [];\n      if (this.root) {\n        this.root.walk((node2) => {\n          if (node2.source && node2.source.input.map) {\n            let map = node2.source.input.map;\n            if (!this.previousMaps.includes(map)) {\n              this.previousMaps.push(map);\n            }\n          }\n        });\n      } else {\n        let input2 = new Input$3(this.originalCSS, this.opts);\n        if (input2.map) this.previousMaps.push(input2.map);\n      }\n    }\n    return this.previousMaps;\n  }\n  setSourcesContent() {\n    let already = {};\n    if (this.root) {\n      this.root.walk((node2) => {\n        if (node2.source) {\n          let from = node2.source.input.from;\n          if (from && !already[from]) {\n            already[from] = true;\n            let fromUrl = this.usesFileUrls ? this.toFileUrl(from) : this.toUrl(this.path(from));\n            this.map.setSourceContent(fromUrl, node2.source.input.css);\n          }\n        }\n      });\n    } else if (this.css) {\n      let from = this.opts.from ? this.toUrl(this.path(this.opts.from)) : \"<no source>\";\n      this.map.setSourceContent(from, this.css);\n    }\n  }\n  sourcePath(node2) {\n    if (this.mapOpts.from) {\n      return this.toUrl(this.mapOpts.from);\n    } else if (this.usesFileUrls) {\n      return this.toFileUrl(node2.source.input.from);\n    } else {\n      return this.toUrl(this.path(node2.source.input.from));\n    }\n  }\n  toBase64(str) {\n    if (Buffer) {\n      return Buffer.from(str).toString(\"base64\");\n    } else {\n      return window.btoa(unescape(encodeURIComponent(str)));\n    }\n  }\n  toFileUrl(path) {\n    let cached = this.memoizedFileURLs.get(path);\n    if (cached) return cached;\n    if (pathToFileURL) {\n      let fileURL = pathToFileURL(path).toString();\n      this.memoizedFileURLs.set(path, fileURL);\n      return fileURL;\n    } else {\n      throw new Error(\n        \"`map.absolute` option is not available in this PostCSS build\"\n      );\n    }\n  }\n  toUrl(path) {\n    let cached = this.memoizedURLs.get(path);\n    if (cached) return cached;\n    if (sep === \"\\\\\") {\n      path = path.replace(/\\\\/g, \"/\");\n    }\n    let url = encodeURI(path).replace(/[#?]/g, encodeURIComponent);\n    this.memoizedURLs.set(path, url);\n    return url;\n  }\n};\nvar mapGenerator = MapGenerator$2;\nlet Node$2 = node;\nlet Comment$4 = class Comment2 extends Node$2 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"comment\";\n  }\n};\nvar comment = Comment$4;\nComment$4.default = Comment$4;\nlet { isClean: isClean$1, my: my$1 } = symbols;\nlet Declaration$3 = declaration;\nlet Comment$3 = comment;\nlet Node$1 = node;\nlet parse$4, Rule$4, AtRule$4, Root$6;\nfunction cleanSource(nodes) {\n  return nodes.map((i2) => {\n    if (i2.nodes) i2.nodes = cleanSource(i2.nodes);\n    delete i2.source;\n    return i2;\n  });\n}\nfunction markDirtyUp(node2) {\n  node2[isClean$1] = false;\n  if (node2.proxyOf.nodes) {\n    for (let i2 of node2.proxyOf.nodes) {\n      markDirtyUp(i2);\n    }\n  }\n}\nlet Container$7 = class Container2 extends Node$1 {\n  append(...children) {\n    for (let child of children) {\n      let nodes = this.normalize(child, this.last);\n      for (let node2 of nodes) this.proxyOf.nodes.push(node2);\n    }\n    this.markDirty();\n    return this;\n  }\n  cleanRaws(keepBetween) {\n    super.cleanRaws(keepBetween);\n    if (this.nodes) {\n      for (let node2 of this.nodes) node2.cleanRaws(keepBetween);\n    }\n  }\n  each(callback) {\n    if (!this.proxyOf.nodes) return void 0;\n    let iterator = this.getIterator();\n    let index2, result2;\n    while (this.indexes[iterator] < this.proxyOf.nodes.length) {\n      index2 = this.indexes[iterator];\n      result2 = callback(this.proxyOf.nodes[index2], index2);\n      if (result2 === false) break;\n      this.indexes[iterator] += 1;\n    }\n    delete this.indexes[iterator];\n    return result2;\n  }\n  every(condition) {\n    return this.nodes.every(condition);\n  }\n  getIterator() {\n    if (!this.lastEach) this.lastEach = 0;\n    if (!this.indexes) this.indexes = {};\n    this.lastEach += 1;\n    let iterator = this.lastEach;\n    this.indexes[iterator] = 0;\n    return iterator;\n  }\n  getProxyProcessor() {\n    return {\n      get(node2, prop) {\n        if (prop === \"proxyOf\") {\n          return node2;\n        } else if (!node2[prop]) {\n          return node2[prop];\n        } else if (prop === \"each\" || typeof prop === \"string\" && prop.startsWith(\"walk\")) {\n          return (...args) => {\n            return node2[prop](\n              ...args.map((i2) => {\n                if (typeof i2 === \"function\") {\n                  return (child, index2) => i2(child.toProxy(), index2);\n                } else {\n                  return i2;\n                }\n              })\n            );\n          };\n        } else if (prop === \"every\" || prop === \"some\") {\n          return (cb) => {\n            return node2[prop](\n              (child, ...other) => cb(child.toProxy(), ...other)\n            );\n          };\n        } else if (prop === \"root\") {\n          return () => node2.root().toProxy();\n        } else if (prop === \"nodes\") {\n          return node2.nodes.map((i2) => i2.toProxy());\n        } else if (prop === \"first\" || prop === \"last\") {\n          return node2[prop].toProxy();\n        } else {\n          return node2[prop];\n        }\n      },\n      set(node2, prop, value) {\n        if (node2[prop] === value) return true;\n        node2[prop] = value;\n        if (prop === \"name\" || prop === \"params\" || prop === \"selector\") {\n          node2.markDirty();\n        }\n        return true;\n      }\n    };\n  }\n  index(child) {\n    if (typeof child === \"number\") return child;\n    if (child.proxyOf) child = child.proxyOf;\n    return this.proxyOf.nodes.indexOf(child);\n  }\n  insertAfter(exist, add) {\n    let existIndex = this.index(exist);\n    let nodes = this.normalize(add, this.proxyOf.nodes[existIndex]).reverse();\n    existIndex = this.index(exist);\n    for (let node2 of nodes) this.proxyOf.nodes.splice(existIndex + 1, 0, node2);\n    let index2;\n    for (let id in this.indexes) {\n      index2 = this.indexes[id];\n      if (existIndex < index2) {\n        this.indexes[id] = index2 + nodes.length;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  insertBefore(exist, add) {\n    let existIndex = this.index(exist);\n    let type = existIndex === 0 ? \"prepend\" : false;\n    let nodes = this.normalize(add, this.proxyOf.nodes[existIndex], type).reverse();\n    existIndex = this.index(exist);\n    for (let node2 of nodes) this.proxyOf.nodes.splice(existIndex, 0, node2);\n    let index2;\n    for (let id in this.indexes) {\n      index2 = this.indexes[id];\n      if (existIndex <= index2) {\n        this.indexes[id] = index2 + nodes.length;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  normalize(nodes, sample) {\n    if (typeof nodes === \"string\") {\n      nodes = cleanSource(parse$4(nodes).nodes);\n    } else if (typeof nodes === \"undefined\") {\n      nodes = [];\n    } else if (Array.isArray(nodes)) {\n      nodes = nodes.slice(0);\n      for (let i2 of nodes) {\n        if (i2.parent) i2.parent.removeChild(i2, \"ignore\");\n      }\n    } else if (nodes.type === \"root\" && this.type !== \"document\") {\n      nodes = nodes.nodes.slice(0);\n      for (let i2 of nodes) {\n        if (i2.parent) i2.parent.removeChild(i2, \"ignore\");\n      }\n    } else if (nodes.type) {\n      nodes = [nodes];\n    } else if (nodes.prop) {\n      if (typeof nodes.value === \"undefined\") {\n        throw new Error(\"Value field is missed in node creation\");\n      } else if (typeof nodes.value !== \"string\") {\n        nodes.value = String(nodes.value);\n      }\n      nodes = [new Declaration$3(nodes)];\n    } else if (nodes.selector) {\n      nodes = [new Rule$4(nodes)];\n    } else if (nodes.name) {\n      nodes = [new AtRule$4(nodes)];\n    } else if (nodes.text) {\n      nodes = [new Comment$3(nodes)];\n    } else {\n      throw new Error(\"Unknown node type in node creation\");\n    }\n    let processed = nodes.map((i2) => {\n      if (!i2[my$1]) Container2.rebuild(i2);\n      i2 = i2.proxyOf;\n      if (i2.parent) i2.parent.removeChild(i2);\n      if (i2[isClean$1]) markDirtyUp(i2);\n      if (typeof i2.raws.before === \"undefined\") {\n        if (sample && typeof sample.raws.before !== \"undefined\") {\n          i2.raws.before = sample.raws.before.replace(/\\S/g, \"\");\n        }\n      }\n      i2.parent = this.proxyOf;\n      return i2;\n    });\n    return processed;\n  }\n  prepend(...children) {\n    children = children.reverse();\n    for (let child of children) {\n      let nodes = this.normalize(child, this.first, \"prepend\").reverse();\n      for (let node2 of nodes) this.proxyOf.nodes.unshift(node2);\n      for (let id in this.indexes) {\n        this.indexes[id] = this.indexes[id] + nodes.length;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  push(child) {\n    child.parent = this;\n    this.proxyOf.nodes.push(child);\n    return this;\n  }\n  removeAll() {\n    for (let node2 of this.proxyOf.nodes) node2.parent = void 0;\n    this.proxyOf.nodes = [];\n    this.markDirty();\n    return this;\n  }\n  removeChild(child) {\n    child = this.index(child);\n    this.proxyOf.nodes[child].parent = void 0;\n    this.proxyOf.nodes.splice(child, 1);\n    let index2;\n    for (let id in this.indexes) {\n      index2 = this.indexes[id];\n      if (index2 >= child) {\n        this.indexes[id] = index2 - 1;\n      }\n    }\n    this.markDirty();\n    return this;\n  }\n  replaceValues(pattern, opts, callback) {\n    if (!callback) {\n      callback = opts;\n      opts = {};\n    }\n    this.walkDecls((decl) => {\n      if (opts.props && !opts.props.includes(decl.prop)) return;\n      if (opts.fast && !decl.value.includes(opts.fast)) return;\n      decl.value = decl.value.replace(pattern, callback);\n    });\n    this.markDirty();\n    return this;\n  }\n  some(condition) {\n    return this.nodes.some(condition);\n  }\n  walk(callback) {\n    return this.each((child, i2) => {\n      let result2;\n      try {\n        result2 = callback(child, i2);\n      } catch (e2) {\n        throw child.addToError(e2);\n      }\n      if (result2 !== false && child.walk) {\n        result2 = child.walk(callback);\n      }\n      return result2;\n    });\n  }\n  walkAtRules(name, callback) {\n    if (!callback) {\n      callback = name;\n      return this.walk((child, i2) => {\n        if (child.type === \"atrule\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    if (name instanceof RegExp) {\n      return this.walk((child, i2) => {\n        if (child.type === \"atrule\" && name.test(child.name)) {\n          return callback(child, i2);\n        }\n      });\n    }\n    return this.walk((child, i2) => {\n      if (child.type === \"atrule\" && child.name === name) {\n        return callback(child, i2);\n      }\n    });\n  }\n  walkComments(callback) {\n    return this.walk((child, i2) => {\n      if (child.type === \"comment\") {\n        return callback(child, i2);\n      }\n    });\n  }\n  walkDecls(prop, callback) {\n    if (!callback) {\n      callback = prop;\n      return this.walk((child, i2) => {\n        if (child.type === \"decl\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    if (prop instanceof RegExp) {\n      return this.walk((child, i2) => {\n        if (child.type === \"decl\" && prop.test(child.prop)) {\n          return callback(child, i2);\n        }\n      });\n    }\n    return this.walk((child, i2) => {\n      if (child.type === \"decl\" && child.prop === prop) {\n        return callback(child, i2);\n      }\n    });\n  }\n  walkRules(selector, callback) {\n    if (!callback) {\n      callback = selector;\n      return this.walk((child, i2) => {\n        if (child.type === \"rule\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    if (selector instanceof RegExp) {\n      return this.walk((child, i2) => {\n        if (child.type === \"rule\" && selector.test(child.selector)) {\n          return callback(child, i2);\n        }\n      });\n    }\n    return this.walk((child, i2) => {\n      if (child.type === \"rule\" && child.selector === selector) {\n        return callback(child, i2);\n      }\n    });\n  }\n  get first() {\n    if (!this.proxyOf.nodes) return void 0;\n    return this.proxyOf.nodes[0];\n  }\n  get last() {\n    if (!this.proxyOf.nodes) return void 0;\n    return this.proxyOf.nodes[this.proxyOf.nodes.length - 1];\n  }\n};\nContainer$7.registerParse = (dependant) => {\n  parse$4 = dependant;\n};\nContainer$7.registerRule = (dependant) => {\n  Rule$4 = dependant;\n};\nContainer$7.registerAtRule = (dependant) => {\n  AtRule$4 = dependant;\n};\nContainer$7.registerRoot = (dependant) => {\n  Root$6 = dependant;\n};\nvar container = Container$7;\nContainer$7.default = Container$7;\nContainer$7.rebuild = (node2) => {\n  if (node2.type === \"atrule\") {\n    Object.setPrototypeOf(node2, AtRule$4.prototype);\n  } else if (node2.type === \"rule\") {\n    Object.setPrototypeOf(node2, Rule$4.prototype);\n  } else if (node2.type === \"decl\") {\n    Object.setPrototypeOf(node2, Declaration$3.prototype);\n  } else if (node2.type === \"comment\") {\n    Object.setPrototypeOf(node2, Comment$3.prototype);\n  } else if (node2.type === \"root\") {\n    Object.setPrototypeOf(node2, Root$6.prototype);\n  }\n  node2[my$1] = true;\n  if (node2.nodes) {\n    node2.nodes.forEach((child) => {\n      Container$7.rebuild(child);\n    });\n  }\n};\nlet Container$6 = container;\nlet LazyResult$4, Processor$3;\nlet Document$3 = class Document23 extends Container$6 {\n  constructor(defaults) {\n    super({ type: \"document\", ...defaults });\n    if (!this.nodes) {\n      this.nodes = [];\n    }\n  }\n  toResult(opts = {}) {\n    let lazy = new LazyResult$4(new Processor$3(), this, opts);\n    return lazy.stringify();\n  }\n};\nDocument$3.registerLazyResult = (dependant) => {\n  LazyResult$4 = dependant;\n};\nDocument$3.registerProcessor = (dependant) => {\n  Processor$3 = dependant;\n};\nvar document$1 = Document$3;\nDocument$3.default = Document$3;\nlet printed = {};\nvar warnOnce$2 = function warnOnce2(message) {\n  if (printed[message]) return;\n  printed[message] = true;\n  if (typeof console !== \"undefined\" && console.warn) {\n    console.warn(message);\n  }\n};\nlet Warning$2 = class Warning2 {\n  constructor(text, opts = {}) {\n    this.type = \"warning\";\n    this.text = text;\n    if (opts.node && opts.node.source) {\n      let range = opts.node.rangeBy(opts);\n      this.line = range.start.line;\n      this.column = range.start.column;\n      this.endLine = range.end.line;\n      this.endColumn = range.end.column;\n    }\n    for (let opt in opts) this[opt] = opts[opt];\n  }\n  toString() {\n    if (this.node) {\n      return this.node.error(this.text, {\n        index: this.index,\n        plugin: this.plugin,\n        word: this.word\n      }).message;\n    }\n    if (this.plugin) {\n      return this.plugin + \": \" + this.text;\n    }\n    return this.text;\n  }\n};\nvar warning = Warning$2;\nWarning$2.default = Warning$2;\nlet Warning$1 = warning;\nlet Result$3 = class Result2 {\n  constructor(processor2, root2, opts) {\n    this.processor = processor2;\n    this.messages = [];\n    this.root = root2;\n    this.opts = opts;\n    this.css = void 0;\n    this.map = void 0;\n  }\n  toString() {\n    return this.css;\n  }\n  warn(text, opts = {}) {\n    if (!opts.plugin) {\n      if (this.lastPlugin && this.lastPlugin.postcssPlugin) {\n        opts.plugin = this.lastPlugin.postcssPlugin;\n      }\n    }\n    let warning2 = new Warning$1(text, opts);\n    this.messages.push(warning2);\n    return warning2;\n  }\n  warnings() {\n    return this.messages.filter((i2) => i2.type === \"warning\");\n  }\n  get content() {\n    return this.css;\n  }\n};\nvar result = Result$3;\nResult$3.default = Result$3;\nconst SINGLE_QUOTE = \"'\".charCodeAt(0);\nconst DOUBLE_QUOTE = '\"'.charCodeAt(0);\nconst BACKSLASH = \"\\\\\".charCodeAt(0);\nconst SLASH = \"/\".charCodeAt(0);\nconst NEWLINE = \"\\n\".charCodeAt(0);\nconst SPACE = \" \".charCodeAt(0);\nconst FEED = \"\\f\".charCodeAt(0);\nconst TAB = \"\t\".charCodeAt(0);\nconst CR = \"\\r\".charCodeAt(0);\nconst OPEN_SQUARE = \"[\".charCodeAt(0);\nconst CLOSE_SQUARE = \"]\".charCodeAt(0);\nconst OPEN_PARENTHESES = \"(\".charCodeAt(0);\nconst CLOSE_PARENTHESES = \")\".charCodeAt(0);\nconst OPEN_CURLY = \"{\".charCodeAt(0);\nconst CLOSE_CURLY = \"}\".charCodeAt(0);\nconst SEMICOLON = \";\".charCodeAt(0);\nconst ASTERISK = \"*\".charCodeAt(0);\nconst COLON = \":\".charCodeAt(0);\nconst AT = \"@\".charCodeAt(0);\nconst RE_AT_END = /[\\t\\n\\f\\r \"#'()/;[\\\\\\]{}]/g;\nconst RE_WORD_END = /[\\t\\n\\f\\r !\"#'():;@[\\\\\\]{}]|\\/(?=\\*)/g;\nconst RE_BAD_BRACKET = /.[\\r\\n\"'(/\\\\]/;\nconst RE_HEX_ESCAPE = /[\\da-f]/i;\nvar tokenize = function tokenizer2(input2, options = {}) {\n  let css = input2.css.valueOf();\n  let ignore = options.ignoreErrors;\n  let code, next, quote, content, escape;\n  let escaped, escapePos, prev, n2, currentToken;\n  let length = css.length;\n  let pos = 0;\n  let buffer = [];\n  let returned = [];\n  function position() {\n    return pos;\n  }\n  function unclosed(what) {\n    throw input2.error(\"Unclosed \" + what, pos);\n  }\n  function endOfFile() {\n    return returned.length === 0 && pos >= length;\n  }\n  function nextToken(opts) {\n    if (returned.length) return returned.pop();\n    if (pos >= length) return;\n    let ignoreUnclosed = opts ? opts.ignoreUnclosed : false;\n    code = css.charCodeAt(pos);\n    switch (code) {\n      case NEWLINE:\n      case SPACE:\n      case TAB:\n      case CR:\n      case FEED: {\n        next = pos;\n        do {\n          next += 1;\n          code = css.charCodeAt(next);\n        } while (code === SPACE || code === NEWLINE || code === TAB || code === CR || code === FEED);\n        currentToken = [\"space\", css.slice(pos, next)];\n        pos = next - 1;\n        break;\n      }\n      case OPEN_SQUARE:\n      case CLOSE_SQUARE:\n      case OPEN_CURLY:\n      case CLOSE_CURLY:\n      case COLON:\n      case SEMICOLON:\n      case CLOSE_PARENTHESES: {\n        let controlChar = String.fromCharCode(code);\n        currentToken = [controlChar, controlChar, pos];\n        break;\n      }\n      case OPEN_PARENTHESES: {\n        prev = buffer.length ? buffer.pop()[1] : \"\";\n        n2 = css.charCodeAt(pos + 1);\n        if (prev === \"url\" && n2 !== SINGLE_QUOTE && n2 !== DOUBLE_QUOTE && n2 !== SPACE && n2 !== NEWLINE && n2 !== TAB && n2 !== FEED && n2 !== CR) {\n          next = pos;\n          do {\n            escaped = false;\n            next = css.indexOf(\")\", next + 1);\n            if (next === -1) {\n              if (ignore || ignoreUnclosed) {\n                next = pos;\n                break;\n              } else {\n                unclosed(\"bracket\");\n              }\n            }\n            escapePos = next;\n            while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n              escapePos -= 1;\n              escaped = !escaped;\n            }\n          } while (escaped);\n          currentToken = [\"brackets\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n        } else {\n          next = css.indexOf(\")\", pos + 1);\n          content = css.slice(pos, next + 1);\n          if (next === -1 || RE_BAD_BRACKET.test(content)) {\n            currentToken = [\"(\", \"(\", pos];\n          } else {\n            currentToken = [\"brackets\", content, pos, next];\n            pos = next;\n          }\n        }\n        break;\n      }\n      case SINGLE_QUOTE:\n      case DOUBLE_QUOTE: {\n        quote = code === SINGLE_QUOTE ? \"'\" : '\"';\n        next = pos;\n        do {\n          escaped = false;\n          next = css.indexOf(quote, next + 1);\n          if (next === -1) {\n            if (ignore || ignoreUnclosed) {\n              next = pos + 1;\n              break;\n            } else {\n              unclosed(\"string\");\n            }\n          }\n          escapePos = next;\n          while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n            escapePos -= 1;\n            escaped = !escaped;\n          }\n        } while (escaped);\n        currentToken = [\"string\", css.slice(pos, next + 1), pos, next];\n        pos = next;\n        break;\n      }\n      case AT: {\n        RE_AT_END.lastIndex = pos + 1;\n        RE_AT_END.test(css);\n        if (RE_AT_END.lastIndex === 0) {\n          next = css.length - 1;\n        } else {\n          next = RE_AT_END.lastIndex - 2;\n        }\n        currentToken = [\"at-word\", css.slice(pos, next + 1), pos, next];\n        pos = next;\n        break;\n      }\n      case BACKSLASH: {\n        next = pos;\n        escape = true;\n        while (css.charCodeAt(next + 1) === BACKSLASH) {\n          next += 1;\n          escape = !escape;\n        }\n        code = css.charCodeAt(next + 1);\n        if (escape && code !== SLASH && code !== SPACE && code !== NEWLINE && code !== TAB && code !== CR && code !== FEED) {\n          next += 1;\n          if (RE_HEX_ESCAPE.test(css.charAt(next))) {\n            while (RE_HEX_ESCAPE.test(css.charAt(next + 1))) {\n              next += 1;\n            }\n            if (css.charCodeAt(next + 1) === SPACE) {\n              next += 1;\n            }\n          }\n        }\n        currentToken = [\"word\", css.slice(pos, next + 1), pos, next];\n        pos = next;\n        break;\n      }\n      default: {\n        if (code === SLASH && css.charCodeAt(pos + 1) === ASTERISK) {\n          next = css.indexOf(\"*/\", pos + 2) + 1;\n          if (next === 0) {\n            if (ignore || ignoreUnclosed) {\n              next = css.length;\n            } else {\n              unclosed(\"comment\");\n            }\n          }\n          currentToken = [\"comment\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n        } else {\n          RE_WORD_END.lastIndex = pos + 1;\n          RE_WORD_END.test(css);\n          if (RE_WORD_END.lastIndex === 0) {\n            next = css.length - 1;\n          } else {\n            next = RE_WORD_END.lastIndex - 2;\n          }\n          currentToken = [\"word\", css.slice(pos, next + 1), pos, next];\n          buffer.push(currentToken);\n          pos = next;\n        }\n        break;\n      }\n    }\n    pos++;\n    return currentToken;\n  }\n  function back(token) {\n    returned.push(token);\n  }\n  return {\n    back,\n    endOfFile,\n    nextToken,\n    position\n  };\n};\nlet Container$5 = container;\nlet AtRule$3 = class AtRule2 extends Container$5 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"atrule\";\n  }\n  append(...children) {\n    if (!this.proxyOf.nodes) this.nodes = [];\n    return super.append(...children);\n  }\n  prepend(...children) {\n    if (!this.proxyOf.nodes) this.nodes = [];\n    return super.prepend(...children);\n  }\n};\nvar atRule = AtRule$3;\nAtRule$3.default = AtRule$3;\nContainer$5.registerAtRule(AtRule$3);\nlet Container$4 = container;\nlet LazyResult$3, Processor$2;\nlet Root$5 = class Root2 extends Container$4 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"root\";\n    if (!this.nodes) this.nodes = [];\n  }\n  normalize(child, sample, type) {\n    let nodes = super.normalize(child);\n    if (sample) {\n      if (type === \"prepend\") {\n        if (this.nodes.length > 1) {\n          sample.raws.before = this.nodes[1].raws.before;\n        } else {\n          delete sample.raws.before;\n        }\n      } else if (this.first !== sample) {\n        for (let node2 of nodes) {\n          node2.raws.before = sample.raws.before;\n        }\n      }\n    }\n    return nodes;\n  }\n  removeChild(child, ignore) {\n    let index2 = this.index(child);\n    if (!ignore && index2 === 0 && this.nodes.length > 1) {\n      this.nodes[1].raws.before = this.nodes[index2].raws.before;\n    }\n    return super.removeChild(child);\n  }\n  toResult(opts = {}) {\n    let lazy = new LazyResult$3(new Processor$2(), this, opts);\n    return lazy.stringify();\n  }\n};\nRoot$5.registerLazyResult = (dependant) => {\n  LazyResult$3 = dependant;\n};\nRoot$5.registerProcessor = (dependant) => {\n  Processor$2 = dependant;\n};\nvar root = Root$5;\nRoot$5.default = Root$5;\nContainer$4.registerRoot(Root$5);\nlet list$2 = {\n  comma(string) {\n    return list$2.split(string, [\",\"], true);\n  },\n  space(string) {\n    let spaces = [\" \", \"\\n\", \"\t\"];\n    return list$2.split(string, spaces);\n  },\n  split(string, separators, last) {\n    let array = [];\n    let current = \"\";\n    let split = false;\n    let func = 0;\n    let inQuote = false;\n    let prevQuote = \"\";\n    let escape = false;\n    for (let letter of string) {\n      if (escape) {\n        escape = false;\n      } else if (letter === \"\\\\\") {\n        escape = true;\n      } else if (inQuote) {\n        if (letter === prevQuote) {\n          inQuote = false;\n        }\n      } else if (letter === '\"' || letter === \"'\") {\n        inQuote = true;\n        prevQuote = letter;\n      } else if (letter === \"(\") {\n        func += 1;\n      } else if (letter === \")\") {\n        if (func > 0) func -= 1;\n      } else if (func === 0) {\n        if (separators.includes(letter)) split = true;\n      }\n      if (split) {\n        if (current !== \"\") array.push(current.trim());\n        current = \"\";\n        split = false;\n      } else {\n        current += letter;\n      }\n    }\n    if (last || current !== \"\") array.push(current.trim());\n    return array;\n  }\n};\nvar list_1 = list$2;\nlist$2.default = list$2;\nlet Container$3 = container;\nlet list$1 = list_1;\nlet Rule$3 = class Rule2 extends Container$3 {\n  constructor(defaults) {\n    super(defaults);\n    this.type = \"rule\";\n    if (!this.nodes) this.nodes = [];\n  }\n  get selectors() {\n    return list$1.comma(this.selector);\n  }\n  set selectors(values) {\n    let match = this.selector ? this.selector.match(/,\\s*/) : null;\n    let sep2 = match ? match[0] : \",\" + this.raw(\"between\", \"beforeOpen\");\n    this.selector = values.join(sep2);\n  }\n};\nvar rule = Rule$3;\nRule$3.default = Rule$3;\nContainer$3.registerRule(Rule$3);\nlet Declaration$2 = declaration;\nlet tokenizer22 = tokenize;\nlet Comment$2 = comment;\nlet AtRule$2 = atRule;\nlet Root$4 = root;\nlet Rule$2 = rule;\nconst SAFE_COMMENT_NEIGHBOR = {\n  empty: true,\n  space: true\n};\nfunction findLastWithPosition(tokens) {\n  for (let i2 = tokens.length - 1; i2 >= 0; i2--) {\n    let token = tokens[i2];\n    let pos = token[3] || token[2];\n    if (pos) return pos;\n  }\n}\nlet Parser$1 = class Parser2 {\n  constructor(input2) {\n    this.input = input2;\n    this.root = new Root$4();\n    this.current = this.root;\n    this.spaces = \"\";\n    this.semicolon = false;\n    this.createTokenizer();\n    this.root.source = { input: input2, start: { column: 1, line: 1, offset: 0 } };\n  }\n  atrule(token) {\n    let node2 = new AtRule$2();\n    node2.name = token[1].slice(1);\n    if (node2.name === \"\") {\n      this.unnamedAtrule(node2, token);\n    }\n    this.init(node2, token[2]);\n    let type;\n    let prev;\n    let shift;\n    let last = false;\n    let open = false;\n    let params = [];\n    let brackets = [];\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken();\n      type = token[0];\n      if (type === \"(\" || type === \"[\") {\n        brackets.push(type === \"(\" ? \")\" : \"]\");\n      } else if (type === \"{\" && brackets.length > 0) {\n        brackets.push(\"}\");\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop();\n      }\n      if (brackets.length === 0) {\n        if (type === \";\") {\n          node2.source.end = this.getPosition(token[2]);\n          node2.source.end.offset++;\n          this.semicolon = true;\n          break;\n        } else if (type === \"{\") {\n          open = true;\n          break;\n        } else if (type === \"}\") {\n          if (params.length > 0) {\n            shift = params.length - 1;\n            prev = params[shift];\n            while (prev && prev[0] === \"space\") {\n              prev = params[--shift];\n            }\n            if (prev) {\n              node2.source.end = this.getPosition(prev[3] || prev[2]);\n              node2.source.end.offset++;\n            }\n          }\n          this.end(token);\n          break;\n        } else {\n          params.push(token);\n        }\n      } else {\n        params.push(token);\n      }\n      if (this.tokenizer.endOfFile()) {\n        last = true;\n        break;\n      }\n    }\n    node2.raws.between = this.spacesAndCommentsFromEnd(params);\n    if (params.length) {\n      node2.raws.afterName = this.spacesAndCommentsFromStart(params);\n      this.raw(node2, \"params\", params);\n      if (last) {\n        token = params[params.length - 1];\n        node2.source.end = this.getPosition(token[3] || token[2]);\n        node2.source.end.offset++;\n        this.spaces = node2.raws.between;\n        node2.raws.between = \"\";\n      }\n    } else {\n      node2.raws.afterName = \"\";\n      node2.params = \"\";\n    }\n    if (open) {\n      node2.nodes = [];\n      this.current = node2;\n    }\n  }\n  checkMissedSemicolon(tokens) {\n    let colon = this.colon(tokens);\n    if (colon === false) return;\n    let founded = 0;\n    let token;\n    for (let j = colon - 1; j >= 0; j--) {\n      token = tokens[j];\n      if (token[0] !== \"space\") {\n        founded += 1;\n        if (founded === 2) break;\n      }\n    }\n    throw this.input.error(\n      \"Missed semicolon\",\n      token[0] === \"word\" ? token[3] + 1 : token[2]\n    );\n  }\n  colon(tokens) {\n    let brackets = 0;\n    let token, type, prev;\n    for (let [i2, element] of tokens.entries()) {\n      token = element;\n      type = token[0];\n      if (type === \"(\") {\n        brackets += 1;\n      }\n      if (type === \")\") {\n        brackets -= 1;\n      }\n      if (brackets === 0 && type === \":\") {\n        if (!prev) {\n          this.doubleColon(token);\n        } else if (prev[0] === \"word\" && prev[1] === \"progid\") {\n          continue;\n        } else {\n          return i2;\n        }\n      }\n      prev = token;\n    }\n    return false;\n  }\n  comment(token) {\n    let node2 = new Comment$2();\n    this.init(node2, token[2]);\n    node2.source.end = this.getPosition(token[3] || token[2]);\n    node2.source.end.offset++;\n    let text = token[1].slice(2, -2);\n    if (/^\\s*$/.test(text)) {\n      node2.text = \"\";\n      node2.raws.left = text;\n      node2.raws.right = \"\";\n    } else {\n      let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/);\n      node2.text = match[2];\n      node2.raws.left = match[1];\n      node2.raws.right = match[3];\n    }\n  }\n  createTokenizer() {\n    this.tokenizer = tokenizer22(this.input);\n  }\n  decl(tokens, customProperty) {\n    let node2 = new Declaration$2();\n    this.init(node2, tokens[0][2]);\n    let last = tokens[tokens.length - 1];\n    if (last[0] === \";\") {\n      this.semicolon = true;\n      tokens.pop();\n    }\n    node2.source.end = this.getPosition(\n      last[3] || last[2] || findLastWithPosition(tokens)\n    );\n    node2.source.end.offset++;\n    while (tokens[0][0] !== \"word\") {\n      if (tokens.length === 1) this.unknownWord(tokens);\n      node2.raws.before += tokens.shift()[1];\n    }\n    node2.source.start = this.getPosition(tokens[0][2]);\n    node2.prop = \"\";\n    while (tokens.length) {\n      let type = tokens[0][0];\n      if (type === \":\" || type === \"space\" || type === \"comment\") {\n        break;\n      }\n      node2.prop += tokens.shift()[1];\n    }\n    node2.raws.between = \"\";\n    let token;\n    while (tokens.length) {\n      token = tokens.shift();\n      if (token[0] === \":\") {\n        node2.raws.between += token[1];\n        break;\n      } else {\n        if (token[0] === \"word\" && /\\w/.test(token[1])) {\n          this.unknownWord([token]);\n        }\n        node2.raws.between += token[1];\n      }\n    }\n    if (node2.prop[0] === \"_\" || node2.prop[0] === \"*\") {\n      node2.raws.before += node2.prop[0];\n      node2.prop = node2.prop.slice(1);\n    }\n    let firstSpaces = [];\n    let next;\n    while (tokens.length) {\n      next = tokens[0][0];\n      if (next !== \"space\" && next !== \"comment\") break;\n      firstSpaces.push(tokens.shift());\n    }\n    this.precheckMissedSemicolon(tokens);\n    for (let i2 = tokens.length - 1; i2 >= 0; i2--) {\n      token = tokens[i2];\n      if (token[1].toLowerCase() === \"!important\") {\n        node2.important = true;\n        let string = this.stringFrom(tokens, i2);\n        string = this.spacesFromEnd(tokens) + string;\n        if (string !== \" !important\") node2.raws.important = string;\n        break;\n      } else if (token[1].toLowerCase() === \"important\") {\n        let cache = tokens.slice(0);\n        let str = \"\";\n        for (let j = i2; j > 0; j--) {\n          let type = cache[j][0];\n          if (str.trim().indexOf(\"!\") === 0 && type !== \"space\") {\n            break;\n          }\n          str = cache.pop()[1] + str;\n        }\n        if (str.trim().indexOf(\"!\") === 0) {\n          node2.important = true;\n          node2.raws.important = str;\n          tokens = cache;\n        }\n      }\n      if (token[0] !== \"space\" && token[0] !== \"comment\") {\n        break;\n      }\n    }\n    let hasWord = tokens.some((i2) => i2[0] !== \"space\" && i2[0] !== \"comment\");\n    if (hasWord) {\n      node2.raws.between += firstSpaces.map((i2) => i2[1]).join(\"\");\n      firstSpaces = [];\n    }\n    this.raw(node2, \"value\", firstSpaces.concat(tokens), customProperty);\n    if (node2.value.includes(\":\") && !customProperty) {\n      this.checkMissedSemicolon(tokens);\n    }\n  }\n  doubleColon(token) {\n    throw this.input.error(\n      \"Double colon\",\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    );\n  }\n  emptyRule(token) {\n    let node2 = new Rule$2();\n    this.init(node2, token[2]);\n    node2.selector = \"\";\n    node2.raws.between = \"\";\n    this.current = node2;\n  }\n  end(token) {\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon;\n    }\n    this.semicolon = false;\n    this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n    this.spaces = \"\";\n    if (this.current.parent) {\n      this.current.source.end = this.getPosition(token[2]);\n      this.current.source.end.offset++;\n      this.current = this.current.parent;\n    } else {\n      this.unexpectedClose(token);\n    }\n  }\n  endFile() {\n    if (this.current.parent) this.unclosedBlock();\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon;\n    }\n    this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n    this.root.source.end = this.getPosition(this.tokenizer.position());\n  }\n  freeSemicolon(token) {\n    this.spaces += token[1];\n    if (this.current.nodes) {\n      let prev = this.current.nodes[this.current.nodes.length - 1];\n      if (prev && prev.type === \"rule\" && !prev.raws.ownSemicolon) {\n        prev.raws.ownSemicolon = this.spaces;\n        this.spaces = \"\";\n      }\n    }\n  }\n  // Helpers\n  getPosition(offset) {\n    let pos = this.input.fromOffset(offset);\n    return {\n      column: pos.col,\n      line: pos.line,\n      offset\n    };\n  }\n  init(node2, offset) {\n    this.current.push(node2);\n    node2.source = {\n      input: this.input,\n      start: this.getPosition(offset)\n    };\n    node2.raws.before = this.spaces;\n    this.spaces = \"\";\n    if (node2.type !== \"comment\") this.semicolon = false;\n  }\n  other(start) {\n    let end = false;\n    let type = null;\n    let colon = false;\n    let bracket = null;\n    let brackets = [];\n    let customProperty = start[1].startsWith(\"--\");\n    let tokens = [];\n    let token = start;\n    while (token) {\n      type = token[0];\n      tokens.push(token);\n      if (type === \"(\" || type === \"[\") {\n        if (!bracket) bracket = token;\n        brackets.push(type === \"(\" ? \")\" : \"]\");\n      } else if (customProperty && colon && type === \"{\") {\n        if (!bracket) bracket = token;\n        brackets.push(\"}\");\n      } else if (brackets.length === 0) {\n        if (type === \";\") {\n          if (colon) {\n            this.decl(tokens, customProperty);\n            return;\n          } else {\n            break;\n          }\n        } else if (type === \"{\") {\n          this.rule(tokens);\n          return;\n        } else if (type === \"}\") {\n          this.tokenizer.back(tokens.pop());\n          end = true;\n          break;\n        } else if (type === \":\") {\n          colon = true;\n        }\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop();\n        if (brackets.length === 0) bracket = null;\n      }\n      token = this.tokenizer.nextToken();\n    }\n    if (this.tokenizer.endOfFile()) end = true;\n    if (brackets.length > 0) this.unclosedBracket(bracket);\n    if (end && colon) {\n      if (!customProperty) {\n        while (tokens.length) {\n          token = tokens[tokens.length - 1][0];\n          if (token !== \"space\" && token !== \"comment\") break;\n          this.tokenizer.back(tokens.pop());\n        }\n      }\n      this.decl(tokens, customProperty);\n    } else {\n      this.unknownWord(tokens);\n    }\n  }\n  parse() {\n    let token;\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken();\n      switch (token[0]) {\n        case \"space\":\n          this.spaces += token[1];\n          break;\n        case \";\":\n          this.freeSemicolon(token);\n          break;\n        case \"}\":\n          this.end(token);\n          break;\n        case \"comment\":\n          this.comment(token);\n          break;\n        case \"at-word\":\n          this.atrule(token);\n          break;\n        case \"{\":\n          this.emptyRule(token);\n          break;\n        default:\n          this.other(token);\n          break;\n      }\n    }\n    this.endFile();\n  }\n  precheckMissedSemicolon() {\n  }\n  raw(node2, prop, tokens, customProperty) {\n    let token, type;\n    let length = tokens.length;\n    let value = \"\";\n    let clean = true;\n    let next, prev;\n    for (let i2 = 0; i2 < length; i2 += 1) {\n      token = tokens[i2];\n      type = token[0];\n      if (type === \"space\" && i2 === length - 1 && !customProperty) {\n        clean = false;\n      } else if (type === \"comment\") {\n        prev = tokens[i2 - 1] ? tokens[i2 - 1][0] : \"empty\";\n        next = tokens[i2 + 1] ? tokens[i2 + 1][0] : \"empty\";\n        if (!SAFE_COMMENT_NEIGHBOR[prev] && !SAFE_COMMENT_NEIGHBOR[next]) {\n          if (value.slice(-1) === \",\") {\n            clean = false;\n          } else {\n            value += token[1];\n          }\n        } else {\n          clean = false;\n        }\n      } else {\n        value += token[1];\n      }\n    }\n    if (!clean) {\n      let raw = tokens.reduce((all, i2) => all + i2[1], \"\");\n      node2.raws[prop] = { raw, value };\n    }\n    node2[prop] = value;\n  }\n  rule(tokens) {\n    tokens.pop();\n    let node2 = new Rule$2();\n    this.init(node2, tokens[0][2]);\n    node2.raws.between = this.spacesAndCommentsFromEnd(tokens);\n    this.raw(node2, \"selector\", tokens);\n    this.current = node2;\n  }\n  spacesAndCommentsFromEnd(tokens) {\n    let lastTokenType;\n    let spaces = \"\";\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0];\n      if (lastTokenType !== \"space\" && lastTokenType !== \"comment\") break;\n      spaces = tokens.pop()[1] + spaces;\n    }\n    return spaces;\n  }\n  // Errors\n  spacesAndCommentsFromStart(tokens) {\n    let next;\n    let spaces = \"\";\n    while (tokens.length) {\n      next = tokens[0][0];\n      if (next !== \"space\" && next !== \"comment\") break;\n      spaces += tokens.shift()[1];\n    }\n    return spaces;\n  }\n  spacesFromEnd(tokens) {\n    let lastTokenType;\n    let spaces = \"\";\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0];\n      if (lastTokenType !== \"space\") break;\n      spaces = tokens.pop()[1] + spaces;\n    }\n    return spaces;\n  }\n  stringFrom(tokens, from) {\n    let result2 = \"\";\n    for (let i2 = from; i2 < tokens.length; i2++) {\n      result2 += tokens[i2][1];\n    }\n    tokens.splice(from, tokens.length - from);\n    return result2;\n  }\n  unclosedBlock() {\n    let pos = this.current.source.start;\n    throw this.input.error(\"Unclosed block\", pos.line, pos.column);\n  }\n  unclosedBracket(bracket) {\n    throw this.input.error(\n      \"Unclosed bracket\",\n      { offset: bracket[2] },\n      { offset: bracket[2] + 1 }\n    );\n  }\n  unexpectedClose(token) {\n    throw this.input.error(\n      \"Unexpected }\",\n      { offset: token[2] },\n      { offset: token[2] + 1 }\n    );\n  }\n  unknownWord(tokens) {\n    throw this.input.error(\n      \"Unknown word\",\n      { offset: tokens[0][2] },\n      { offset: tokens[0][2] + tokens[0][1].length }\n    );\n  }\n  unnamedAtrule(node2, token) {\n    throw this.input.error(\n      \"At-rule without name\",\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    );\n  }\n};\nvar parser = Parser$1;\nlet Container$2 = container;\nlet Parser22 = parser;\nlet Input$2 = input;\nfunction parse$3(css, opts) {\n  let input2 = new Input$2(css, opts);\n  let parser2 = new Parser22(input2);\n  try {\n    parser2.parse();\n  } catch (e2) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (e2.name === \"CssSyntaxError\" && opts && opts.from) {\n        if (/\\.scss$/i.test(opts.from)) {\n          e2.message += \"\\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser\";\n        } else if (/\\.sass/i.test(opts.from)) {\n          e2.message += \"\\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser\";\n        } else if (/\\.less$/i.test(opts.from)) {\n          e2.message += \"\\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser\";\n        }\n      }\n    }\n    throw e2;\n  }\n  return parser2.root;\n}\nvar parse_1 = parse$3;\nparse$3.default = parse$3;\nContainer$2.registerParse(parse$3);\nlet { isClean, my } = symbols;\nlet MapGenerator$1 = mapGenerator;\nlet stringify$2 = stringify_1;\nlet Container$1 = container;\nlet Document$2 = document$1;\nlet warnOnce$1 = warnOnce$2;\nlet Result$2 = result;\nlet parse$2 = parse_1;\nlet Root$3 = root;\nconst TYPE_TO_CLASS_NAME = {\n  atrule: \"AtRule\",\n  comment: \"Comment\",\n  decl: \"Declaration\",\n  document: \"Document\",\n  root: \"Root\",\n  rule: \"Rule\"\n};\nconst PLUGIN_PROPS = {\n  AtRule: true,\n  AtRuleExit: true,\n  Comment: true,\n  CommentExit: true,\n  Declaration: true,\n  DeclarationExit: true,\n  Document: true,\n  DocumentExit: true,\n  Once: true,\n  OnceExit: true,\n  postcssPlugin: true,\n  prepare: true,\n  Root: true,\n  RootExit: true,\n  Rule: true,\n  RuleExit: true\n};\nconst NOT_VISITORS = {\n  Once: true,\n  postcssPlugin: true,\n  prepare: true\n};\nconst CHILDREN = 0;\nfunction isPromise(obj) {\n  return typeof obj === \"object\" && typeof obj.then === \"function\";\n}\nfunction getEvents(node2) {\n  let key = false;\n  let type = TYPE_TO_CLASS_NAME[node2.type];\n  if (node2.type === \"decl\") {\n    key = node2.prop.toLowerCase();\n  } else if (node2.type === \"atrule\") {\n    key = node2.name.toLowerCase();\n  }\n  if (key && node2.append) {\n    return [\n      type,\n      type + \"-\" + key,\n      CHILDREN,\n      type + \"Exit\",\n      type + \"Exit-\" + key\n    ];\n  } else if (key) {\n    return [type, type + \"-\" + key, type + \"Exit\", type + \"Exit-\" + key];\n  } else if (node2.append) {\n    return [type, CHILDREN, type + \"Exit\"];\n  } else {\n    return [type, type + \"Exit\"];\n  }\n}\nfunction toStack(node2) {\n  let events;\n  if (node2.type === \"document\") {\n    events = [\"Document\", CHILDREN, \"DocumentExit\"];\n  } else if (node2.type === \"root\") {\n    events = [\"Root\", CHILDREN, \"RootExit\"];\n  } else {\n    events = getEvents(node2);\n  }\n  return {\n    eventIndex: 0,\n    events,\n    iterator: 0,\n    node: node2,\n    visitorIndex: 0,\n    visitors: []\n  };\n}\nfunction cleanMarks(node2) {\n  node2[isClean] = false;\n  if (node2.nodes) node2.nodes.forEach((i2) => cleanMarks(i2));\n  return node2;\n}\nlet postcss$2 = {};\nlet LazyResult$2 = class LazyResult2 {\n  constructor(processor2, css, opts) {\n    this.stringified = false;\n    this.processed = false;\n    let root2;\n    if (typeof css === \"object\" && css !== null && (css.type === \"root\" || css.type === \"document\")) {\n      root2 = cleanMarks(css);\n    } else if (css instanceof LazyResult2 || css instanceof Result$2) {\n      root2 = cleanMarks(css.root);\n      if (css.map) {\n        if (typeof opts.map === \"undefined\") opts.map = {};\n        if (!opts.map.inline) opts.map.inline = false;\n        opts.map.prev = css.map;\n      }\n    } else {\n      let parser2 = parse$2;\n      if (opts.syntax) parser2 = opts.syntax.parse;\n      if (opts.parser) parser2 = opts.parser;\n      if (parser2.parse) parser2 = parser2.parse;\n      try {\n        root2 = parser2(css, opts);\n      } catch (error) {\n        this.processed = true;\n        this.error = error;\n      }\n      if (root2 && !root2[my]) {\n        Container$1.rebuild(root2);\n      }\n    }\n    this.result = new Result$2(processor2, root2, opts);\n    this.helpers = { ...postcss$2, postcss: postcss$2, result: this.result };\n    this.plugins = this.processor.plugins.map((plugin22) => {\n      if (typeof plugin22 === \"object\" && plugin22.prepare) {\n        return { ...plugin22, ...plugin22.prepare(this.result) };\n      } else {\n        return plugin22;\n      }\n    });\n  }\n  async() {\n    if (this.error) return Promise.reject(this.error);\n    if (this.processed) return Promise.resolve(this.result);\n    if (!this.processing) {\n      this.processing = this.runAsync();\n    }\n    return this.processing;\n  }\n  catch(onRejected) {\n    return this.async().catch(onRejected);\n  }\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally);\n  }\n  getAsyncError() {\n    throw new Error(\"Use process(css).then(cb) to work with async plugins\");\n  }\n  handleError(error, node2) {\n    let plugin22 = this.result.lastPlugin;\n    try {\n      if (node2) node2.addToError(error);\n      this.error = error;\n      if (error.name === \"CssSyntaxError\" && !error.plugin) {\n        error.plugin = plugin22.postcssPlugin;\n        error.setMessage();\n      } else if (plugin22.postcssVersion) {\n        if (process.env.NODE_ENV !== \"production\") {\n          let pluginName = plugin22.postcssPlugin;\n          let pluginVer = plugin22.postcssVersion;\n          let runtimeVer = this.result.processor.version;\n          let a2 = pluginVer.split(\".\");\n          let b = runtimeVer.split(\".\");\n          if (a2[0] !== b[0] || parseInt(a2[1]) > parseInt(b[1])) {\n            console.error(\n              \"Unknown error from PostCSS plugin. Your current PostCSS version is \" + runtimeVer + \", but \" + pluginName + \" uses \" + pluginVer + \". Perhaps this is the source of the error below.\"\n            );\n          }\n        }\n      }\n    } catch (err) {\n      if (console && console.error) console.error(err);\n    }\n    return error;\n  }\n  prepareVisitors() {\n    this.listeners = {};\n    let add = (plugin22, type, cb) => {\n      if (!this.listeners[type]) this.listeners[type] = [];\n      this.listeners[type].push([plugin22, cb]);\n    };\n    for (let plugin22 of this.plugins) {\n      if (typeof plugin22 === \"object\") {\n        for (let event in plugin22) {\n          if (!PLUGIN_PROPS[event] && /^[A-Z]/.test(event)) {\n            throw new Error(\n              `Unknown event ${event} in ${plugin22.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`\n            );\n          }\n          if (!NOT_VISITORS[event]) {\n            if (typeof plugin22[event] === \"object\") {\n              for (let filter in plugin22[event]) {\n                if (filter === \"*\") {\n                  add(plugin22, event, plugin22[event][filter]);\n                } else {\n                  add(\n                    plugin22,\n                    event + \"-\" + filter.toLowerCase(),\n                    plugin22[event][filter]\n                  );\n                }\n              }\n            } else if (typeof plugin22[event] === \"function\") {\n              add(plugin22, event, plugin22[event]);\n            }\n          }\n        }\n      }\n    }\n    this.hasListener = Object.keys(this.listeners).length > 0;\n  }\n  async runAsync() {\n    this.plugin = 0;\n    for (let i2 = 0; i2 < this.plugins.length; i2++) {\n      let plugin22 = this.plugins[i2];\n      let promise = this.runOnRoot(plugin22);\n      if (isPromise(promise)) {\n        try {\n          await promise;\n        } catch (error) {\n          throw this.handleError(error);\n        }\n      }\n    }\n    this.prepareVisitors();\n    if (this.hasListener) {\n      let root2 = this.result.root;\n      while (!root2[isClean]) {\n        root2[isClean] = true;\n        let stack = [toStack(root2)];\n        while (stack.length > 0) {\n          let promise = this.visitTick(stack);\n          if (isPromise(promise)) {\n            try {\n              await promise;\n            } catch (e2) {\n              let node2 = stack[stack.length - 1].node;\n              throw this.handleError(e2, node2);\n            }\n          }\n        }\n      }\n      if (this.listeners.OnceExit) {\n        for (let [plugin22, visitor] of this.listeners.OnceExit) {\n          this.result.lastPlugin = plugin22;\n          try {\n            if (root2.type === \"document\") {\n              let roots = root2.nodes.map(\n                (subRoot) => visitor(subRoot, this.helpers)\n              );\n              await Promise.all(roots);\n            } else {\n              await visitor(root2, this.helpers);\n            }\n          } catch (e2) {\n            throw this.handleError(e2);\n          }\n        }\n      }\n    }\n    this.processed = true;\n    return this.stringify();\n  }\n  runOnRoot(plugin22) {\n    this.result.lastPlugin = plugin22;\n    try {\n      if (typeof plugin22 === \"object\" && plugin22.Once) {\n        if (this.result.root.type === \"document\") {\n          let roots = this.result.root.nodes.map(\n            (root2) => plugin22.Once(root2, this.helpers)\n          );\n          if (isPromise(roots[0])) {\n            return Promise.all(roots);\n          }\n          return roots;\n        }\n        return plugin22.Once(this.result.root, this.helpers);\n      } else if (typeof plugin22 === \"function\") {\n        return plugin22(this.result.root, this.result);\n      }\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n  stringify() {\n    if (this.error) throw this.error;\n    if (this.stringified) return this.result;\n    this.stringified = true;\n    this.sync();\n    let opts = this.result.opts;\n    let str = stringify$2;\n    if (opts.syntax) str = opts.syntax.stringify;\n    if (opts.stringifier) str = opts.stringifier;\n    if (str.stringify) str = str.stringify;\n    let map = new MapGenerator$1(str, this.result.root, this.result.opts);\n    let data = map.generate();\n    this.result.css = data[0];\n    this.result.map = data[1];\n    return this.result;\n  }\n  sync() {\n    if (this.error) throw this.error;\n    if (this.processed) return this.result;\n    this.processed = true;\n    if (this.processing) {\n      throw this.getAsyncError();\n    }\n    for (let plugin22 of this.plugins) {\n      let promise = this.runOnRoot(plugin22);\n      if (isPromise(promise)) {\n        throw this.getAsyncError();\n      }\n    }\n    this.prepareVisitors();\n    if (this.hasListener) {\n      let root2 = this.result.root;\n      while (!root2[isClean]) {\n        root2[isClean] = true;\n        this.walkSync(root2);\n      }\n      if (this.listeners.OnceExit) {\n        if (root2.type === \"document\") {\n          for (let subRoot of root2.nodes) {\n            this.visitSync(this.listeners.OnceExit, subRoot);\n          }\n        } else {\n          this.visitSync(this.listeners.OnceExit, root2);\n        }\n      }\n    }\n    return this.result;\n  }\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!(\"from\" in this.opts)) {\n        warnOnce$1(\n          \"Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.\"\n        );\n      }\n    }\n    return this.async().then(onFulfilled, onRejected);\n  }\n  toString() {\n    return this.css;\n  }\n  visitSync(visitors, node2) {\n    for (let [plugin22, visitor] of visitors) {\n      this.result.lastPlugin = plugin22;\n      let promise;\n      try {\n        promise = visitor(node2, this.helpers);\n      } catch (e2) {\n        throw this.handleError(e2, node2.proxyOf);\n      }\n      if (node2.type !== \"root\" && node2.type !== \"document\" && !node2.parent) {\n        return true;\n      }\n      if (isPromise(promise)) {\n        throw this.getAsyncError();\n      }\n    }\n  }\n  visitTick(stack) {\n    let visit2 = stack[stack.length - 1];\n    let { node: node2, visitors } = visit2;\n    if (node2.type !== \"root\" && node2.type !== \"document\" && !node2.parent) {\n      stack.pop();\n      return;\n    }\n    if (visitors.length > 0 && visit2.visitorIndex < visitors.length) {\n      let [plugin22, visitor] = visitors[visit2.visitorIndex];\n      visit2.visitorIndex += 1;\n      if (visit2.visitorIndex === visitors.length) {\n        visit2.visitors = [];\n        visit2.visitorIndex = 0;\n      }\n      this.result.lastPlugin = plugin22;\n      try {\n        return visitor(node2.toProxy(), this.helpers);\n      } catch (e2) {\n        throw this.handleError(e2, node2);\n      }\n    }\n    if (visit2.iterator !== 0) {\n      let iterator = visit2.iterator;\n      let child;\n      while (child = node2.nodes[node2.indexes[iterator]]) {\n        node2.indexes[iterator] += 1;\n        if (!child[isClean]) {\n          child[isClean] = true;\n          stack.push(toStack(child));\n          return;\n        }\n      }\n      visit2.iterator = 0;\n      delete node2.indexes[iterator];\n    }\n    let events = visit2.events;\n    while (visit2.eventIndex < events.length) {\n      let event = events[visit2.eventIndex];\n      visit2.eventIndex += 1;\n      if (event === CHILDREN) {\n        if (node2.nodes && node2.nodes.length) {\n          node2[isClean] = true;\n          visit2.iterator = node2.getIterator();\n        }\n        return;\n      } else if (this.listeners[event]) {\n        visit2.visitors = this.listeners[event];\n        return;\n      }\n    }\n    stack.pop();\n  }\n  walkSync(node2) {\n    node2[isClean] = true;\n    let events = getEvents(node2);\n    for (let event of events) {\n      if (event === CHILDREN) {\n        if (node2.nodes) {\n          node2.each((child) => {\n            if (!child[isClean]) this.walkSync(child);\n          });\n        }\n      } else {\n        let visitors = this.listeners[event];\n        if (visitors) {\n          if (this.visitSync(visitors, node2.toProxy())) return;\n        }\n      }\n    }\n  }\n  warnings() {\n    return this.sync().warnings();\n  }\n  get content() {\n    return this.stringify().content;\n  }\n  get css() {\n    return this.stringify().css;\n  }\n  get map() {\n    return this.stringify().map;\n  }\n  get messages() {\n    return this.sync().messages;\n  }\n  get opts() {\n    return this.result.opts;\n  }\n  get processor() {\n    return this.result.processor;\n  }\n  get root() {\n    return this.sync().root;\n  }\n  get [Symbol.toStringTag]() {\n    return \"LazyResult\";\n  }\n};\nLazyResult$2.registerPostcss = (dependant) => {\n  postcss$2 = dependant;\n};\nvar lazyResult = LazyResult$2;\nLazyResult$2.default = LazyResult$2;\nRoot$3.registerLazyResult(LazyResult$2);\nDocument$2.registerLazyResult(LazyResult$2);\nlet MapGenerator22 = mapGenerator;\nlet stringify$1 = stringify_1;\nlet warnOnce22 = warnOnce$2;\nlet parse$1 = parse_1;\nconst Result$1 = result;\nlet NoWorkResult$1 = class NoWorkResult2 {\n  constructor(processor2, css, opts) {\n    css = css.toString();\n    this.stringified = false;\n    this._processor = processor2;\n    this._css = css;\n    this._opts = opts;\n    this._map = void 0;\n    let root2;\n    let str = stringify$1;\n    this.result = new Result$1(this._processor, root2, this._opts);\n    this.result.css = css;\n    let self = this;\n    Object.defineProperty(this.result, \"root\", {\n      get() {\n        return self.root;\n      }\n    });\n    let map = new MapGenerator22(str, root2, this._opts, css);\n    if (map.isMap()) {\n      let [generatedCSS, generatedMap] = map.generate();\n      if (generatedCSS) {\n        this.result.css = generatedCSS;\n      }\n      if (generatedMap) {\n        this.result.map = generatedMap;\n      }\n    } else {\n      map.clearAnnotation();\n      this.result.css = map.css;\n    }\n  }\n  async() {\n    if (this.error) return Promise.reject(this.error);\n    return Promise.resolve(this.result);\n  }\n  catch(onRejected) {\n    return this.async().catch(onRejected);\n  }\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally);\n  }\n  sync() {\n    if (this.error) throw this.error;\n    return this.result;\n  }\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!(\"from\" in this._opts)) {\n        warnOnce22(\n          \"Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.\"\n        );\n      }\n    }\n    return this.async().then(onFulfilled, onRejected);\n  }\n  toString() {\n    return this._css;\n  }\n  warnings() {\n    return [];\n  }\n  get content() {\n    return this.result.css;\n  }\n  get css() {\n    return this.result.css;\n  }\n  get map() {\n    return this.result.map;\n  }\n  get messages() {\n    return [];\n  }\n  get opts() {\n    return this.result.opts;\n  }\n  get processor() {\n    return this.result.processor;\n  }\n  get root() {\n    if (this._root) {\n      return this._root;\n    }\n    let root2;\n    let parser2 = parse$1;\n    try {\n      root2 = parser2(this._css, this._opts);\n    } catch (error) {\n      this.error = error;\n    }\n    if (this.error) {\n      throw this.error;\n    } else {\n      this._root = root2;\n      return root2;\n    }\n  }\n  get [Symbol.toStringTag]() {\n    return \"NoWorkResult\";\n  }\n};\nvar noWorkResult = NoWorkResult$1;\nNoWorkResult$1.default = NoWorkResult$1;\nlet NoWorkResult22 = noWorkResult;\nlet LazyResult$1 = lazyResult;\nlet Document$1 = document$1;\nlet Root$2 = root;\nlet Processor$1 = class Processor2 {\n  constructor(plugins = []) {\n    this.version = \"8.4.38\";\n    this.plugins = this.normalize(plugins);\n  }\n  normalize(plugins) {\n    let normalized = [];\n    for (let i2 of plugins) {\n      if (i2.postcss === true) {\n        i2 = i2();\n      } else if (i2.postcss) {\n        i2 = i2.postcss;\n      }\n      if (typeof i2 === \"object\" && Array.isArray(i2.plugins)) {\n        normalized = normalized.concat(i2.plugins);\n      } else if (typeof i2 === \"object\" && i2.postcssPlugin) {\n        normalized.push(i2);\n      } else if (typeof i2 === \"function\") {\n        normalized.push(i2);\n      } else if (typeof i2 === \"object\" && (i2.parse || i2.stringify)) {\n        if (process.env.NODE_ENV !== \"production\") {\n          throw new Error(\n            \"PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.\"\n          );\n        }\n      } else {\n        throw new Error(i2 + \" is not a PostCSS plugin\");\n      }\n    }\n    return normalized;\n  }\n  process(css, opts = {}) {\n    if (!this.plugins.length && !opts.parser && !opts.stringifier && !opts.syntax) {\n      return new NoWorkResult22(this, css, opts);\n    } else {\n      return new LazyResult$1(this, css, opts);\n    }\n  }\n  use(plugin22) {\n    this.plugins = this.plugins.concat(this.normalize([plugin22]));\n    return this;\n  }\n};\nvar processor = Processor$1;\nProcessor$1.default = Processor$1;\nRoot$2.registerProcessor(Processor$1);\nDocument$1.registerProcessor(Processor$1);\nlet Declaration$1 = declaration;\nlet PreviousMap22 = previousMap;\nlet Comment$1 = comment;\nlet AtRule$1 = atRule;\nlet Input$1 = input;\nlet Root$1 = root;\nlet Rule$1 = rule;\nfunction fromJSON$1(json, inputs) {\n  if (Array.isArray(json)) return json.map((n2) => fromJSON$1(n2));\n  let { inputs: ownInputs, ...defaults } = json;\n  if (ownInputs) {\n    inputs = [];\n    for (let input2 of ownInputs) {\n      let inputHydrated = { ...input2, __proto__: Input$1.prototype };\n      if (inputHydrated.map) {\n        inputHydrated.map = {\n          ...inputHydrated.map,\n          __proto__: PreviousMap22.prototype\n        };\n      }\n      inputs.push(inputHydrated);\n    }\n  }\n  if (defaults.nodes) {\n    defaults.nodes = json.nodes.map((n2) => fromJSON$1(n2, inputs));\n  }\n  if (defaults.source) {\n    let { inputId, ...source } = defaults.source;\n    defaults.source = source;\n    if (inputId != null) {\n      defaults.source.input = inputs[inputId];\n    }\n  }\n  if (defaults.type === \"root\") {\n    return new Root$1(defaults);\n  } else if (defaults.type === \"decl\") {\n    return new Declaration$1(defaults);\n  } else if (defaults.type === \"rule\") {\n    return new Rule$1(defaults);\n  } else if (defaults.type === \"comment\") {\n    return new Comment$1(defaults);\n  } else if (defaults.type === \"atrule\") {\n    return new AtRule$1(defaults);\n  } else {\n    throw new Error(\"Unknown node type: \" + json.type);\n  }\n}\nvar fromJSON_1 = fromJSON$1;\nfromJSON$1.default = fromJSON$1;\nlet CssSyntaxError22 = cssSyntaxError;\nlet Declaration22 = declaration;\nlet LazyResult22 = lazyResult;\nlet Container22 = container;\nlet Processor22 = processor;\nlet stringify = stringify_1;\nlet fromJSON = fromJSON_1;\nlet Document222 = document$1;\nlet Warning22 = warning;\nlet Comment22 = comment;\nlet AtRule22 = atRule;\nlet Result22 = result;\nlet Input22 = input;\nlet parse = parse_1;\nlet list = list_1;\nlet Rule22 = rule;\nlet Root22 = root;\nlet Node22 = node;\nfunction postcss(...plugins) {\n  if (plugins.length === 1 && Array.isArray(plugins[0])) {\n    plugins = plugins[0];\n  }\n  return new Processor22(plugins);\n}\npostcss.plugin = function plugin2(name, initializer) {\n  let warningPrinted = false;\n  function creator(...args) {\n    if (console && console.warn && !warningPrinted) {\n      warningPrinted = true;\n      console.warn(\n        name + \": postcss.plugin was deprecated. Migration guide:\\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration\"\n      );\n      if (process.env.LANG && process.env.LANG.startsWith(\"cn\")) {\n        console.warn(\n          name + \": 里面 postcss.plugin 被弃用. 迁移指南:\\nhttps://www.w3ctech.com/topic/2226\"\n        );\n      }\n    }\n    let transformer = initializer(...args);\n    transformer.postcssPlugin = name;\n    transformer.postcssVersion = new Processor22().version;\n    return transformer;\n  }\n  let cache;\n  Object.defineProperty(creator, \"postcss\", {\n    get() {\n      if (!cache) cache = creator();\n      return cache;\n    }\n  });\n  creator.process = function(css, processOpts, pluginOpts) {\n    return postcss([creator(pluginOpts)]).process(css, processOpts);\n  };\n  return creator;\n};\npostcss.stringify = stringify;\npostcss.parse = parse;\npostcss.fromJSON = fromJSON;\npostcss.list = list;\npostcss.comment = (defaults) => new Comment22(defaults);\npostcss.atRule = (defaults) => new AtRule22(defaults);\npostcss.decl = (defaults) => new Declaration22(defaults);\npostcss.rule = (defaults) => new Rule22(defaults);\npostcss.root = (defaults) => new Root22(defaults);\npostcss.document = (defaults) => new Document222(defaults);\npostcss.CssSyntaxError = CssSyntaxError22;\npostcss.Declaration = Declaration22;\npostcss.Container = Container22;\npostcss.Processor = Processor22;\npostcss.Document = Document222;\npostcss.Comment = Comment22;\npostcss.Warning = Warning22;\npostcss.AtRule = AtRule22;\npostcss.Result = Result22;\npostcss.Input = Input22;\npostcss.Rule = Rule22;\npostcss.Root = Root22;\npostcss.Node = Node22;\nLazyResult22.registerPostcss(postcss);\nvar postcss_1 = postcss;\npostcss.default = postcss;\nconst postcss$1 = /* @__PURE__ */ getDefaultExportFromCjs(postcss_1);\npostcss$1.stringify;\npostcss$1.fromJSON;\npostcss$1.plugin;\npostcss$1.parse;\npostcss$1.list;\npostcss$1.document;\npostcss$1.comment;\npostcss$1.atRule;\npostcss$1.rule;\npostcss$1.decl;\npostcss$1.root;\npostcss$1.CssSyntaxError;\npostcss$1.Declaration;\npostcss$1.Container;\npostcss$1.Processor;\npostcss$1.Document;\npostcss$1.Comment;\npostcss$1.Warning;\npostcss$1.AtRule;\npostcss$1.Result;\npostcss$1.Input;\npostcss$1.Rule;\npostcss$1.Root;\npostcss$1.Node;\nclass BaseRRNode {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-explicit-any\n  constructor(..._args) {\n    __publicField2(this, \"parentElement\", null);\n    __publicField2(this, \"parentNode\", null);\n    __publicField2(this, \"ownerDocument\");\n    __publicField2(this, \"firstChild\", null);\n    __publicField2(this, \"lastChild\", null);\n    __publicField2(this, \"previousSibling\", null);\n    __publicField2(this, \"nextSibling\", null);\n    __publicField2(this, \"ELEMENT_NODE\", 1);\n    __publicField2(this, \"TEXT_NODE\", 3);\n    __publicField2(this, \"nodeType\");\n    __publicField2(this, \"nodeName\");\n    __publicField2(this, \"RRNodeType\");\n  }\n  get childNodes() {\n    const childNodes2 = [];\n    let childIterator = this.firstChild;\n    while (childIterator) {\n      childNodes2.push(childIterator);\n      childIterator = childIterator.nextSibling;\n    }\n    return childNodes2;\n  }\n  contains(node2) {\n    if (!(node2 instanceof BaseRRNode)) return false;\n    else if (node2.ownerDocument !== this.ownerDocument) return false;\n    else if (node2 === this) return true;\n    while (node2.parentNode) {\n      if (node2.parentNode === this) return true;\n      node2 = node2.parentNode;\n    }\n    return false;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  appendChild(_newChild) {\n    throw new Error(\n      `RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.`\n    );\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  insertBefore(_newChild, _refChild) {\n    throw new Error(\n      `RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.`\n    );\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  removeChild(_node) {\n    throw new Error(\n      `RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.`\n    );\n  }\n  toString() {\n    return \"RRNode\";\n  }\n}\nconst testableAccessors = {\n  Node: [\"childNodes\", \"parentNode\", \"parentElement\", \"textContent\"],\n  ShadowRoot: [\"host\", \"styleSheets\"],\n  Element: [\"shadowRoot\", \"querySelector\", \"querySelectorAll\"],\n  MutationObserver: []\n};\nconst testableMethods = {\n  Node: [\"contains\", \"getRootNode\"],\n  ShadowRoot: [\"getSelection\"],\n  Element: [],\n  MutationObserver: [\"constructor\"]\n};\nconst untaintedBasePrototype = {};\nfunction angularZoneUnpatchedAlternative(key) {\n  var _a2, _b;\n  const angularUnpatchedVersionSymbol = (_b = (_a2 = globalThis == null ? void 0 : globalThis.Zone) == null ? void 0 : _a2.__symbol__) == null ? void 0 : _b.call(_a2, key);\n  if (angularUnpatchedVersionSymbol && globalThis[angularUnpatchedVersionSymbol]) {\n    return globalThis[angularUnpatchedVersionSymbol];\n  } else {\n    return void 0;\n  }\n}\nfunction getUntaintedPrototype(key) {\n  if (untaintedBasePrototype[key])\n    return untaintedBasePrototype[key];\n  const candidate = angularZoneUnpatchedAlternative(key) || globalThis[key];\n  const defaultPrototype = candidate.prototype;\n  const accessorNames = key in testableAccessors ? testableAccessors[key] : void 0;\n  const isUntaintedAccessors = Boolean(\n    accessorNames && // @ts-expect-error 2345\n    accessorNames.every(\n      (accessor) => {\n        var _a2, _b;\n        return Boolean(\n          (_b = (_a2 = Object.getOwnPropertyDescriptor(defaultPrototype, accessor)) == null ? void 0 : _a2.get) == null ? void 0 : _b.toString().includes(\"[native code]\")\n        );\n      }\n    )\n  );\n  const methodNames = key in testableMethods ? testableMethods[key] : void 0;\n  const isUntaintedMethods = Boolean(\n    methodNames && methodNames.every(\n      // @ts-expect-error 2345\n      (method) => {\n        var _a2;\n        return typeof defaultPrototype[method] === \"function\" && ((_a2 = defaultPrototype[method]) == null ? void 0 : _a2.toString().includes(\"[native code]\"));\n      }\n    )\n  );\n  if (isUntaintedAccessors && isUntaintedMethods) {\n    untaintedBasePrototype[key] = candidate.prototype;\n    return candidate.prototype;\n  }\n  try {\n    const iframeEl = document.createElement(\"iframe\");\n    document.body.appendChild(iframeEl);\n    const win = iframeEl.contentWindow;\n    if (!win) return candidate.prototype;\n    const untaintedObject = win[key].prototype;\n    document.body.removeChild(iframeEl);\n    if (!untaintedObject) return defaultPrototype;\n    return untaintedBasePrototype[key] = untaintedObject;\n  } catch {\n    return defaultPrototype;\n  }\n}\nconst untaintedAccessorCache = {};\nfunction getUntaintedAccessor(key, instance, accessor) {\n  var _a2;\n  const cacheKey = `${key}.${String(accessor)}`;\n  if (untaintedAccessorCache[cacheKey])\n    return untaintedAccessorCache[cacheKey].call(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype(key);\n  const untaintedAccessor = (_a2 = Object.getOwnPropertyDescriptor(\n    untaintedPrototype,\n    accessor\n  )) == null ? void 0 : _a2.get;\n  if (!untaintedAccessor) return instance[accessor];\n  untaintedAccessorCache[cacheKey] = untaintedAccessor;\n  return untaintedAccessor.call(instance);\n}\nconst untaintedMethodCache = {};\nfunction getUntaintedMethod(key, instance, method) {\n  const cacheKey = `${key}.${String(method)}`;\n  if (untaintedMethodCache[cacheKey])\n    return untaintedMethodCache[cacheKey].bind(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype(key);\n  const untaintedMethod = untaintedPrototype[method];\n  if (typeof untaintedMethod !== \"function\") return instance[method];\n  untaintedMethodCache[cacheKey] = untaintedMethod;\n  return untaintedMethod.bind(instance);\n}\nfunction childNodes(n2) {\n  return getUntaintedAccessor(\"Node\", n2, \"childNodes\");\n}\nfunction parentNode(n2) {\n  return getUntaintedAccessor(\"Node\", n2, \"parentNode\");\n}\nfunction parentElement(n2) {\n  return getUntaintedAccessor(\"Node\", n2, \"parentElement\");\n}\nfunction textContent(n2) {\n  return getUntaintedAccessor(\"Node\", n2, \"textContent\");\n}\nfunction contains(n2, other) {\n  return getUntaintedMethod(\"Node\", n2, \"contains\")(other);\n}\nfunction getRootNode(n2) {\n  return getUntaintedMethod(\"Node\", n2, \"getRootNode\")();\n}\nfunction host(n2) {\n  if (!n2 || !(\"host\" in n2)) return null;\n  return getUntaintedAccessor(\"ShadowRoot\", n2, \"host\");\n}\nfunction styleSheets(n2) {\n  return n2.styleSheets;\n}\nfunction shadowRoot(n2) {\n  if (!n2 || !(\"shadowRoot\" in n2)) return null;\n  return getUntaintedAccessor(\"Element\", n2, \"shadowRoot\");\n}\nfunction querySelector(n2, selectors) {\n  return getUntaintedAccessor(\"Element\", n2, \"querySelector\")(selectors);\n}\nfunction querySelectorAll(n2, selectors) {\n  return getUntaintedAccessor(\"Element\", n2, \"querySelectorAll\")(selectors);\n}\nfunction mutationObserverCtor() {\n  return getUntaintedPrototype(\"MutationObserver\").constructor;\n}\nconst index = {\n  childNodes,\n  parentNode,\n  parentElement,\n  textContent,\n  contains,\n  getRootNode,\n  host,\n  styleSheets,\n  shadowRoot,\n  querySelector,\n  querySelectorAll,\n  mutationObserver: mutationObserverCtor\n};\nfunction on(type, fn, target = document) {\n  const options = { capture: true, passive: true };\n  target.addEventListener(type, fn, options);\n  return () => target.removeEventListener(type, fn, options);\n}\nconst DEPARTED_MIRROR_ACCESS_WARNING = \"Please stop import mirror directly. Instead of that,\\r\\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\\r\\nor you can use record.mirror to access the mirror instance during recording.\";\nlet _mirror = {\n  map: {},\n  getId() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n    return -1;\n  },\n  getNode() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n    return null;\n  },\n  removeNodeFromMap() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n  },\n  has() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n    return false;\n  },\n  reset() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n  }\n};\nif (typeof window !== \"undefined\" && window.Proxy && window.Reflect) {\n  _mirror = new Proxy(_mirror, {\n    get(target, prop, receiver) {\n      if (prop === \"map\") {\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n      }\n      return Reflect.get(target, prop, receiver);\n    }\n  });\n}\nfunction throttle(func, wait, options = {}) {\n  let timeout = null;\n  let previous = 0;\n  return function(...args) {\n    const now = Date.now();\n    if (!previous && options.leading === false) {\n      previous = now;\n    }\n    const remaining = wait - (now - previous);\n    const context = this;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      func.apply(context, args);\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(() => {\n        previous = options.leading === false ? 0 : Date.now();\n        timeout = null;\n        func.apply(context, args);\n      }, remaining);\n    }\n  };\n}\nfunction hookSetter(target, key, d, isRevoked, win = window) {\n  const original = win.Object.getOwnPropertyDescriptor(target, key);\n  win.Object.defineProperty(\n    target,\n    key,\n    isRevoked ? d : {\n      set(value) {\n        setTimeout(() => {\n          d.set.call(this, value);\n        }, 0);\n        if (original && original.set) {\n          original.set.call(this, value);\n        }\n      }\n    }\n  );\n  return () => hookSetter(target, key, original || {}, true);\n}\nfunction patch(source, name, replacement) {\n  try {\n    if (!(name in source)) {\n      return () => {\n      };\n    }\n    const original = source[name];\n    const wrapped = replacement(original);\n    if (typeof wrapped === \"function\") {\n      wrapped.prototype = wrapped.prototype || {};\n      Object.defineProperties(wrapped, {\n        __rrweb_original__: {\n          enumerable: false,\n          value: original\n        }\n      });\n    }\n    source[name] = wrapped;\n    return () => {\n      source[name] = original;\n    };\n  } catch {\n    return () => {\n    };\n  }\n}\nlet nowTimestamp = Date.now;\nif (!/* @__PURE__ */ /[1-9][0-9]{12}/.test(Date.now().toString())) {\n  nowTimestamp = () => (/* @__PURE__ */ new Date()).getTime();\n}\nfunction getWindowScroll(win) {\n  var _a2, _b, _c, _d;\n  const doc = win.document;\n  return {\n    left: doc.scrollingElement ? doc.scrollingElement.scrollLeft : win.pageXOffset !== void 0 ? win.pageXOffset : doc.documentElement.scrollLeft || (doc == null ? void 0 : doc.body) && ((_a2 = index.parentElement(doc.body)) == null ? void 0 : _a2.scrollLeft) || ((_b = doc == null ? void 0 : doc.body) == null ? void 0 : _b.scrollLeft) || 0,\n    top: doc.scrollingElement ? doc.scrollingElement.scrollTop : win.pageYOffset !== void 0 ? win.pageYOffset : (doc == null ? void 0 : doc.documentElement.scrollTop) || (doc == null ? void 0 : doc.body) && ((_c = index.parentElement(doc.body)) == null ? void 0 : _c.scrollTop) || ((_d = doc == null ? void 0 : doc.body) == null ? void 0 : _d.scrollTop) || 0\n  };\n}\nfunction getWindowHeight() {\n  return window.innerHeight || document.documentElement && document.documentElement.clientHeight || document.body && document.body.clientHeight;\n}\nfunction getWindowWidth() {\n  return window.innerWidth || document.documentElement && document.documentElement.clientWidth || document.body && document.body.clientWidth;\n}\nfunction closestElementOfNode(node2) {\n  if (!node2) {\n    return null;\n  }\n  const el = node2.nodeType === node2.ELEMENT_NODE ? node2 : index.parentElement(node2);\n  return el;\n}\nfunction isBlocked(node2, blockClass, blockSelector, checkAncestors) {\n  if (!node2) {\n    return false;\n  }\n  const el = closestElementOfNode(node2);\n  if (!el) {\n    return false;\n  }\n  try {\n    if (typeof blockClass === \"string\") {\n      if (el.classList.contains(blockClass)) return true;\n      if (checkAncestors && el.closest(\".\" + blockClass) !== null) return true;\n    } else {\n      if (classMatchesRegex(el, blockClass, checkAncestors)) return true;\n    }\n  } catch (e2) {\n  }\n  if (blockSelector) {\n    if (el.matches(blockSelector)) return true;\n    if (checkAncestors && el.closest(blockSelector) !== null) return true;\n  }\n  return false;\n}\nfunction isSerialized(n2, mirror2) {\n  return mirror2.getId(n2) !== -1;\n}\nfunction isIgnored(n2, mirror2, slimDOMOptions) {\n  if (n2.tagName === \"TITLE\" && slimDOMOptions.headTitleMutations) {\n    return true;\n  }\n  return mirror2.getId(n2) === IGNORED_NODE;\n}\nfunction isAncestorRemoved(target, mirror2) {\n  if (isShadowRoot(target)) {\n    return false;\n  }\n  const id = mirror2.getId(target);\n  if (!mirror2.has(id)) {\n    return true;\n  }\n  const parent = index.parentNode(target);\n  if (parent && parent.nodeType === target.DOCUMENT_NODE) {\n    return false;\n  }\n  if (!parent) {\n    return true;\n  }\n  return isAncestorRemoved(parent, mirror2);\n}\nfunction legacy_isTouchEvent(event) {\n  return Boolean(event.changedTouches);\n}\nfunction polyfill$1(win = window) {\n  if (\"NodeList\" in win && !win.NodeList.prototype.forEach) {\n    win.NodeList.prototype.forEach = Array.prototype.forEach;\n  }\n  if (\"DOMTokenList\" in win && !win.DOMTokenList.prototype.forEach) {\n    win.DOMTokenList.prototype.forEach = Array.prototype.forEach;\n  }\n}\nfunction isSerializedIframe(n2, mirror2) {\n  return Boolean(n2.nodeName === \"IFRAME\" && mirror2.getMeta(n2));\n}\nfunction isSerializedStylesheet(n2, mirror2) {\n  return Boolean(\n    n2.nodeName === \"LINK\" && n2.nodeType === n2.ELEMENT_NODE && n2.getAttribute && n2.getAttribute(\"rel\") === \"stylesheet\" && mirror2.getMeta(n2)\n  );\n}\nfunction hasShadowRoot(n2) {\n  if (!n2) return false;\n  if (n2 instanceof BaseRRNode && \"shadowRoot\" in n2) {\n    return Boolean(n2.shadowRoot);\n  }\n  return Boolean(index.shadowRoot(n2));\n}\nclass StyleSheetMirror {\n  constructor() {\n    __publicField(this, \"id\", 1);\n    __publicField(this, \"styleIDMap\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"idStyleMap\", /* @__PURE__ */ new Map());\n  }\n  getId(stylesheet) {\n    return this.styleIDMap.get(stylesheet) ?? -1;\n  }\n  has(stylesheet) {\n    return this.styleIDMap.has(stylesheet);\n  }\n  /**\n   * @returns If the stylesheet is in the mirror, returns the id of the stylesheet. If not, return the new assigned id.\n   */\n  add(stylesheet, id) {\n    if (this.has(stylesheet)) return this.getId(stylesheet);\n    let newId;\n    if (id === void 0) {\n      newId = this.id++;\n    } else newId = id;\n    this.styleIDMap.set(stylesheet, newId);\n    this.idStyleMap.set(newId, stylesheet);\n    return newId;\n  }\n  getStyle(id) {\n    return this.idStyleMap.get(id) || null;\n  }\n  reset() {\n    this.styleIDMap = /* @__PURE__ */ new WeakMap();\n    this.idStyleMap = /* @__PURE__ */ new Map();\n    this.id = 1;\n  }\n  generateId() {\n    return this.id++;\n  }\n}\nfunction getShadowHost(n2) {\n  var _a2;\n  let shadowHost = null;\n  if (\"getRootNode\" in n2 && ((_a2 = index.getRootNode(n2)) == null ? void 0 : _a2.nodeType) === Node.DOCUMENT_FRAGMENT_NODE && index.host(index.getRootNode(n2)))\n    shadowHost = index.host(index.getRootNode(n2));\n  return shadowHost;\n}\nfunction getRootShadowHost(n2) {\n  let rootShadowHost = n2;\n  let shadowHost;\n  while (shadowHost = getShadowHost(rootShadowHost))\n    rootShadowHost = shadowHost;\n  return rootShadowHost;\n}\nfunction shadowHostInDom(n2) {\n  const doc = n2.ownerDocument;\n  if (!doc) return false;\n  const shadowHost = getRootShadowHost(n2);\n  return index.contains(doc, shadowHost);\n}\nfunction inDom(n2) {\n  const doc = n2.ownerDocument;\n  if (!doc) return false;\n  return index.contains(doc, n2) || shadowHostInDom(n2);\n}\nvar EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[EventType2[\"DomContentLoaded\"] = 0] = \"DomContentLoaded\";\n  EventType2[EventType2[\"Load\"] = 1] = \"Load\";\n  EventType2[EventType2[\"FullSnapshot\"] = 2] = \"FullSnapshot\";\n  EventType2[EventType2[\"IncrementalSnapshot\"] = 3] = \"IncrementalSnapshot\";\n  EventType2[EventType2[\"Meta\"] = 4] = \"Meta\";\n  EventType2[EventType2[\"Custom\"] = 5] = \"Custom\";\n  EventType2[EventType2[\"Plugin\"] = 6] = \"Plugin\";\n  return EventType2;\n})(EventType || {});\nvar IncrementalSource = /* @__PURE__ */ ((IncrementalSource2) => {\n  IncrementalSource2[IncrementalSource2[\"Mutation\"] = 0] = \"Mutation\";\n  IncrementalSource2[IncrementalSource2[\"MouseMove\"] = 1] = \"MouseMove\";\n  IncrementalSource2[IncrementalSource2[\"MouseInteraction\"] = 2] = \"MouseInteraction\";\n  IncrementalSource2[IncrementalSource2[\"Scroll\"] = 3] = \"Scroll\";\n  IncrementalSource2[IncrementalSource2[\"ViewportResize\"] = 4] = \"ViewportResize\";\n  IncrementalSource2[IncrementalSource2[\"Input\"] = 5] = \"Input\";\n  IncrementalSource2[IncrementalSource2[\"TouchMove\"] = 6] = \"TouchMove\";\n  IncrementalSource2[IncrementalSource2[\"MediaInteraction\"] = 7] = \"MediaInteraction\";\n  IncrementalSource2[IncrementalSource2[\"StyleSheetRule\"] = 8] = \"StyleSheetRule\";\n  IncrementalSource2[IncrementalSource2[\"CanvasMutation\"] = 9] = \"CanvasMutation\";\n  IncrementalSource2[IncrementalSource2[\"Font\"] = 10] = \"Font\";\n  IncrementalSource2[IncrementalSource2[\"Log\"] = 11] = \"Log\";\n  IncrementalSource2[IncrementalSource2[\"Drag\"] = 12] = \"Drag\";\n  IncrementalSource2[IncrementalSource2[\"StyleDeclaration\"] = 13] = \"StyleDeclaration\";\n  IncrementalSource2[IncrementalSource2[\"Selection\"] = 14] = \"Selection\";\n  IncrementalSource2[IncrementalSource2[\"AdoptedStyleSheet\"] = 15] = \"AdoptedStyleSheet\";\n  IncrementalSource2[IncrementalSource2[\"CustomElement\"] = 16] = \"CustomElement\";\n  return IncrementalSource2;\n})(IncrementalSource || {});\nvar MouseInteractions = /* @__PURE__ */ ((MouseInteractions2) => {\n  MouseInteractions2[MouseInteractions2[\"MouseUp\"] = 0] = \"MouseUp\";\n  MouseInteractions2[MouseInteractions2[\"MouseDown\"] = 1] = \"MouseDown\";\n  MouseInteractions2[MouseInteractions2[\"Click\"] = 2] = \"Click\";\n  MouseInteractions2[MouseInteractions2[\"ContextMenu\"] = 3] = \"ContextMenu\";\n  MouseInteractions2[MouseInteractions2[\"DblClick\"] = 4] = \"DblClick\";\n  MouseInteractions2[MouseInteractions2[\"Focus\"] = 5] = \"Focus\";\n  MouseInteractions2[MouseInteractions2[\"Blur\"] = 6] = \"Blur\";\n  MouseInteractions2[MouseInteractions2[\"TouchStart\"] = 7] = \"TouchStart\";\n  MouseInteractions2[MouseInteractions2[\"TouchMove_Departed\"] = 8] = \"TouchMove_Departed\";\n  MouseInteractions2[MouseInteractions2[\"TouchEnd\"] = 9] = \"TouchEnd\";\n  MouseInteractions2[MouseInteractions2[\"TouchCancel\"] = 10] = \"TouchCancel\";\n  return MouseInteractions2;\n})(MouseInteractions || {});\nvar PointerTypes = /* @__PURE__ */ ((PointerTypes2) => {\n  PointerTypes2[PointerTypes2[\"Mouse\"] = 0] = \"Mouse\";\n  PointerTypes2[PointerTypes2[\"Pen\"] = 1] = \"Pen\";\n  PointerTypes2[PointerTypes2[\"Touch\"] = 2] = \"Touch\";\n  return PointerTypes2;\n})(PointerTypes || {});\nvar CanvasContext = /* @__PURE__ */ ((CanvasContext2) => {\n  CanvasContext2[CanvasContext2[\"2D\"] = 0] = \"2D\";\n  CanvasContext2[CanvasContext2[\"WebGL\"] = 1] = \"WebGL\";\n  CanvasContext2[CanvasContext2[\"WebGL2\"] = 2] = \"WebGL2\";\n  return CanvasContext2;\n})(CanvasContext || {});\nvar MediaInteractions = /* @__PURE__ */ ((MediaInteractions2) => {\n  MediaInteractions2[MediaInteractions2[\"Play\"] = 0] = \"Play\";\n  MediaInteractions2[MediaInteractions2[\"Pause\"] = 1] = \"Pause\";\n  MediaInteractions2[MediaInteractions2[\"Seeked\"] = 2] = \"Seeked\";\n  MediaInteractions2[MediaInteractions2[\"VolumeChange\"] = 3] = \"VolumeChange\";\n  MediaInteractions2[MediaInteractions2[\"RateChange\"] = 4] = \"RateChange\";\n  return MediaInteractions2;\n})(MediaInteractions || {});\nvar NodeType = /* @__PURE__ */ ((NodeType2) => {\n  NodeType2[NodeType2[\"Document\"] = 0] = \"Document\";\n  NodeType2[NodeType2[\"DocumentType\"] = 1] = \"DocumentType\";\n  NodeType2[NodeType2[\"Element\"] = 2] = \"Element\";\n  NodeType2[NodeType2[\"Text\"] = 3] = \"Text\";\n  NodeType2[NodeType2[\"CDATA\"] = 4] = \"CDATA\";\n  NodeType2[NodeType2[\"Comment\"] = 5] = \"Comment\";\n  return NodeType2;\n})(NodeType || {});\nfunction isNodeInLinkedList(n2) {\n  return \"__ln\" in n2;\n}\nclass DoubleLinkedList {\n  constructor() {\n    __publicField(this, \"length\", 0);\n    __publicField(this, \"head\", null);\n    __publicField(this, \"tail\", null);\n  }\n  get(position) {\n    if (position >= this.length) {\n      throw new Error(\"Position outside of list range\");\n    }\n    let current = this.head;\n    for (let index2 = 0; index2 < position; index2++) {\n      current = (current == null ? void 0 : current.next) || null;\n    }\n    return current;\n  }\n  addNode(n2) {\n    const node2 = {\n      value: n2,\n      previous: null,\n      next: null\n    };\n    n2.__ln = node2;\n    if (n2.previousSibling && isNodeInLinkedList(n2.previousSibling)) {\n      const current = n2.previousSibling.__ln.next;\n      node2.next = current;\n      node2.previous = n2.previousSibling.__ln;\n      n2.previousSibling.__ln.next = node2;\n      if (current) {\n        current.previous = node2;\n      }\n    } else if (n2.nextSibling && isNodeInLinkedList(n2.nextSibling) && n2.nextSibling.__ln.previous) {\n      const current = n2.nextSibling.__ln.previous;\n      node2.previous = current;\n      node2.next = n2.nextSibling.__ln;\n      n2.nextSibling.__ln.previous = node2;\n      if (current) {\n        current.next = node2;\n      }\n    } else {\n      if (this.head) {\n        this.head.previous = node2;\n      }\n      node2.next = this.head;\n      this.head = node2;\n    }\n    if (node2.next === null) {\n      this.tail = node2;\n    }\n    this.length++;\n  }\n  removeNode(n2) {\n    const current = n2.__ln;\n    if (!this.head) {\n      return;\n    }\n    if (!current.previous) {\n      this.head = current.next;\n      if (this.head) {\n        this.head.previous = null;\n      } else {\n        this.tail = null;\n      }\n    } else {\n      current.previous.next = current.next;\n      if (current.next) {\n        current.next.previous = current.previous;\n      } else {\n        this.tail = current.previous;\n      }\n    }\n    if (n2.__ln) {\n      delete n2.__ln;\n    }\n    this.length--;\n  }\n}\nconst moveKey = (id, parentId) => `${id}@${parentId}`;\nclass MutationBuffer {\n  constructor() {\n    __publicField(this, \"frozen\", false);\n    __publicField(this, \"locked\", false);\n    __publicField(this, \"texts\", []);\n    __publicField(this, \"attributes\", []);\n    __publicField(this, \"attributeMap\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"removes\", []);\n    __publicField(this, \"mapRemoves\", []);\n    __publicField(this, \"movedMap\", {});\n    __publicField(this, \"addedSet\", /* @__PURE__ */ new Set());\n    __publicField(this, \"movedSet\", /* @__PURE__ */ new Set());\n    __publicField(this, \"droppedSet\", /* @__PURE__ */ new Set());\n    __publicField(this, \"removesSubTreeCache\", /* @__PURE__ */ new Set());\n    __publicField(this, \"mutationCb\");\n    __publicField(this, \"blockClass\");\n    __publicField(this, \"blockSelector\");\n    __publicField(this, \"maskTextClass\");\n    __publicField(this, \"maskTextSelector\");\n    __publicField(this, \"inlineStylesheet\");\n    __publicField(this, \"maskInputOptions\");\n    __publicField(this, \"maskTextFn\");\n    __publicField(this, \"maskInputFn\");\n    __publicField(this, \"keepIframeSrcFn\");\n    __publicField(this, \"recordCanvas\");\n    __publicField(this, \"inlineImages\");\n    __publicField(this, \"slimDOMOptions\");\n    __publicField(this, \"dataURLOptions\");\n    __publicField(this, \"doc\");\n    __publicField(this, \"mirror\");\n    __publicField(this, \"iframeManager\");\n    __publicField(this, \"stylesheetManager\");\n    __publicField(this, \"shadowDomManager\");\n    __publicField(this, \"canvasManager\");\n    __publicField(this, \"processedNodeManager\");\n    __publicField(this, \"unattachedDoc\");\n    __publicField(this, \"processMutations\", (mutations) => {\n      mutations.forEach(this.processMutation);\n      this.emit();\n    });\n    __publicField(this, \"emit\", () => {\n      if (this.frozen || this.locked) {\n        return;\n      }\n      const adds = [];\n      const addedIds = /* @__PURE__ */ new Set();\n      const addList = new DoubleLinkedList();\n      const getNextId = (n2) => {\n        let ns = n2;\n        let nextId = IGNORED_NODE;\n        while (nextId === IGNORED_NODE) {\n          ns = ns && ns.nextSibling;\n          nextId = ns && this.mirror.getId(ns);\n        }\n        return nextId;\n      };\n      const pushAdd = (n2) => {\n        const parent = index.parentNode(n2);\n        if (!parent || !inDom(n2)) {\n          return;\n        }\n        let cssCaptured = false;\n        if (n2.nodeType === Node.TEXT_NODE) {\n          const parentTag = parent.tagName;\n          if (parentTag === \"TEXTAREA\") {\n            return;\n          } else if (parentTag === \"STYLE\" && this.addedSet.has(parent)) {\n            cssCaptured = true;\n          }\n        }\n        const parentId = isShadowRoot(parent) ? this.mirror.getId(getShadowHost(n2)) : this.mirror.getId(parent);\n        const nextId = getNextId(n2);\n        if (parentId === -1 || nextId === -1) {\n          return addList.addNode(n2);\n        }\n        const sn = serializeNodeWithId(n2, {\n          doc: this.doc,\n          mirror: this.mirror,\n          blockClass: this.blockClass,\n          blockSelector: this.blockSelector,\n          maskTextClass: this.maskTextClass,\n          maskTextSelector: this.maskTextSelector,\n          skipChild: true,\n          newlyAddedElement: true,\n          inlineStylesheet: this.inlineStylesheet,\n          maskInputOptions: this.maskInputOptions,\n          maskTextFn: this.maskTextFn,\n          maskInputFn: this.maskInputFn,\n          slimDOMOptions: this.slimDOMOptions,\n          dataURLOptions: this.dataURLOptions,\n          recordCanvas: this.recordCanvas,\n          inlineImages: this.inlineImages,\n          onSerialize: (currentN) => {\n            if (isSerializedIframe(currentN, this.mirror)) {\n              this.iframeManager.addIframe(currentN);\n            }\n            if (isSerializedStylesheet(currentN, this.mirror)) {\n              this.stylesheetManager.trackLinkElement(\n                currentN\n              );\n            }\n            if (hasShadowRoot(n2)) {\n              this.shadowDomManager.addShadowRoot(index.shadowRoot(n2), this.doc);\n            }\n          },\n          onIframeLoad: (iframe, childSn) => {\n            this.iframeManager.attachIframe(iframe, childSn);\n            this.shadowDomManager.observeAttachShadow(iframe);\n          },\n          onStylesheetLoad: (link, childSn) => {\n            this.stylesheetManager.attachLinkElement(link, childSn);\n          },\n          cssCaptured\n        });\n        if (sn) {\n          adds.push({\n            parentId,\n            nextId,\n            node: sn\n          });\n          addedIds.add(sn.id);\n        }\n      };\n      while (this.mapRemoves.length) {\n        this.mirror.removeNodeFromMap(this.mapRemoves.shift());\n      }\n      for (const n2 of this.movedSet) {\n        if (isParentRemoved(this.removesSubTreeCache, n2, this.mirror) && !this.movedSet.has(index.parentNode(n2))) {\n          continue;\n        }\n        pushAdd(n2);\n      }\n      for (const n2 of this.addedSet) {\n        if (!isAncestorInSet(this.droppedSet, n2) && !isParentRemoved(this.removesSubTreeCache, n2, this.mirror)) {\n          pushAdd(n2);\n        } else if (isAncestorInSet(this.movedSet, n2)) {\n          pushAdd(n2);\n        } else {\n          this.droppedSet.add(n2);\n        }\n      }\n      let candidate = null;\n      while (addList.length) {\n        let node2 = null;\n        if (candidate) {\n          const parentId = this.mirror.getId(index.parentNode(candidate.value));\n          const nextId = getNextId(candidate.value);\n          if (parentId !== -1 && nextId !== -1) {\n            node2 = candidate;\n          }\n        }\n        if (!node2) {\n          let tailNode = addList.tail;\n          while (tailNode) {\n            const _node = tailNode;\n            tailNode = tailNode.previous;\n            if (_node) {\n              const parentId = this.mirror.getId(index.parentNode(_node.value));\n              const nextId = getNextId(_node.value);\n              if (nextId === -1) continue;\n              else if (parentId !== -1) {\n                node2 = _node;\n                break;\n              } else {\n                const unhandledNode = _node.value;\n                const parent = index.parentNode(unhandledNode);\n                if (parent && parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n                  const shadowHost = index.host(parent);\n                  const parentId2 = this.mirror.getId(shadowHost);\n                  if (parentId2 !== -1) {\n                    node2 = _node;\n                    break;\n                  }\n                }\n              }\n            }\n          }\n        }\n        if (!node2) {\n          while (addList.head) {\n            addList.removeNode(addList.head.value);\n          }\n          break;\n        }\n        candidate = node2.previous;\n        addList.removeNode(node2.value);\n        pushAdd(node2.value);\n      }\n      const payload = {\n        texts: this.texts.map((text) => {\n          const n2 = text.node;\n          const parent = index.parentNode(n2);\n          if (parent && parent.tagName === \"TEXTAREA\") {\n            this.genTextAreaValueMutation(parent);\n          }\n          return {\n            id: this.mirror.getId(n2),\n            value: text.value\n          };\n        }).filter((text) => !addedIds.has(text.id)).filter((text) => this.mirror.has(text.id)),\n        attributes: this.attributes.map((attribute) => {\n          const { attributes } = attribute;\n          if (typeof attributes.style === \"string\") {\n            const diffAsStr = JSON.stringify(attribute.styleDiff);\n            const unchangedAsStr = JSON.stringify(attribute._unchangedStyles);\n            if (diffAsStr.length < attributes.style.length) {\n              if ((diffAsStr + unchangedAsStr).split(\"var(\").length === attributes.style.split(\"var(\").length) {\n                attributes.style = attribute.styleDiff;\n              }\n            }\n          }\n          return {\n            id: this.mirror.getId(attribute.node),\n            attributes\n          };\n        }).filter((attribute) => !addedIds.has(attribute.id)).filter((attribute) => this.mirror.has(attribute.id)),\n        removes: this.removes,\n        adds\n      };\n      if (!payload.texts.length && !payload.attributes.length && !payload.removes.length && !payload.adds.length) {\n        return;\n      }\n      this.texts = [];\n      this.attributes = [];\n      this.attributeMap = /* @__PURE__ */ new WeakMap();\n      this.removes = [];\n      this.addedSet = /* @__PURE__ */ new Set();\n      this.movedSet = /* @__PURE__ */ new Set();\n      this.droppedSet = /* @__PURE__ */ new Set();\n      this.removesSubTreeCache = /* @__PURE__ */ new Set();\n      this.movedMap = {};\n      this.mutationCb(payload);\n    });\n    __publicField(this, \"genTextAreaValueMutation\", (textarea) => {\n      let item = this.attributeMap.get(textarea);\n      if (!item) {\n        item = {\n          node: textarea,\n          attributes: {},\n          styleDiff: {},\n          _unchangedStyles: {}\n        };\n        this.attributes.push(item);\n        this.attributeMap.set(textarea, item);\n      }\n      const value = Array.from(\n        index.childNodes(textarea),\n        (cn) => index.textContent(cn) || \"\"\n      ).join(\"\");\n      item.attributes.value = maskInputValue({\n        element: textarea,\n        maskInputOptions: this.maskInputOptions,\n        tagName: textarea.tagName,\n        type: getInputType(textarea),\n        value,\n        maskInputFn: this.maskInputFn\n      });\n    });\n    __publicField(this, \"processMutation\", (m) => {\n      if (isIgnored(m.target, this.mirror, this.slimDOMOptions)) {\n        return;\n      }\n      switch (m.type) {\n        case \"characterData\": {\n          const value = index.textContent(m.target);\n          if (!isBlocked(m.target, this.blockClass, this.blockSelector, false) && value !== m.oldValue) {\n            this.texts.push({\n              value: needMaskingText(\n                m.target,\n                this.maskTextClass,\n                this.maskTextSelector,\n                true\n                // checkAncestors\n              ) && value ? this.maskTextFn ? this.maskTextFn(value, closestElementOfNode(m.target)) : value.replace(/[\\S]/g, \"*\") : value,\n              node: m.target\n            });\n          }\n          break;\n        }\n        case \"attributes\": {\n          const target = m.target;\n          let attributeName = m.attributeName;\n          let value = m.target.getAttribute(attributeName);\n          if (attributeName === \"value\") {\n            const type = getInputType(target);\n            value = maskInputValue({\n              element: target,\n              maskInputOptions: this.maskInputOptions,\n              tagName: target.tagName,\n              type,\n              value,\n              maskInputFn: this.maskInputFn\n            });\n          }\n          if (isBlocked(m.target, this.blockClass, this.blockSelector, false) || value === m.oldValue) {\n            return;\n          }\n          let item = this.attributeMap.get(m.target);\n          if (target.tagName === \"IFRAME\" && attributeName === \"src\" && !this.keepIframeSrcFn(value)) {\n            if (!target.contentDocument) {\n              attributeName = \"rr_src\";\n            } else {\n              return;\n            }\n          }\n          if (!item) {\n            item = {\n              node: m.target,\n              attributes: {},\n              styleDiff: {},\n              _unchangedStyles: {}\n            };\n            this.attributes.push(item);\n            this.attributeMap.set(m.target, item);\n          }\n          if (attributeName === \"type\" && target.tagName === \"INPUT\" && (m.oldValue || \"\").toLowerCase() === \"password\") {\n            target.setAttribute(\"data-rr-is-password\", \"true\");\n          }\n          if (!ignoreAttribute(target.tagName, attributeName)) {\n            item.attributes[attributeName] = transformAttribute(\n              this.doc,\n              toLowerCase(target.tagName),\n              toLowerCase(attributeName),\n              value\n            );\n            if (attributeName === \"style\") {\n              if (!this.unattachedDoc) {\n                try {\n                  this.unattachedDoc = document.implementation.createHTMLDocument();\n                } catch (e2) {\n                  this.unattachedDoc = this.doc;\n                }\n              }\n              const old = this.unattachedDoc.createElement(\"span\");\n              if (m.oldValue) {\n                old.setAttribute(\"style\", m.oldValue);\n              }\n              for (const pname of Array.from(target.style)) {\n                const newValue = target.style.getPropertyValue(pname);\n                const newPriority = target.style.getPropertyPriority(pname);\n                if (newValue !== old.style.getPropertyValue(pname) || newPriority !== old.style.getPropertyPriority(pname)) {\n                  if (newPriority === \"\") {\n                    item.styleDiff[pname] = newValue;\n                  } else {\n                    item.styleDiff[pname] = [newValue, newPriority];\n                  }\n                } else {\n                  item._unchangedStyles[pname] = [newValue, newPriority];\n                }\n              }\n              for (const pname of Array.from(old.style)) {\n                if (target.style.getPropertyValue(pname) === \"\") {\n                  item.styleDiff[pname] = false;\n                }\n              }\n            } else if (attributeName === \"open\" && target.tagName === \"DIALOG\") {\n              if (target.matches(\"dialog:modal\")) {\n                item.attributes[\"rr_open_mode\"] = \"modal\";\n              } else {\n                item.attributes[\"rr_open_mode\"] = \"non-modal\";\n              }\n            }\n          }\n          break;\n        }\n        case \"childList\": {\n          if (isBlocked(m.target, this.blockClass, this.blockSelector, true))\n            return;\n          if (m.target.tagName === \"TEXTAREA\") {\n            this.genTextAreaValueMutation(m.target);\n            return;\n          }\n          m.addedNodes.forEach((n2) => this.genAdds(n2, m.target));\n          m.removedNodes.forEach((n2) => {\n            const nodeId = this.mirror.getId(n2);\n            const parentId = isShadowRoot(m.target) ? this.mirror.getId(index.host(m.target)) : this.mirror.getId(m.target);\n            if (isBlocked(m.target, this.blockClass, this.blockSelector, false) || isIgnored(n2, this.mirror, this.slimDOMOptions) || !isSerialized(n2, this.mirror)) {\n              return;\n            }\n            if (this.addedSet.has(n2)) {\n              deepDelete(this.addedSet, n2);\n              this.droppedSet.add(n2);\n            } else if (this.addedSet.has(m.target) && nodeId === -1) ;\n            else if (isAncestorRemoved(m.target, this.mirror)) ;\n            else if (this.movedSet.has(n2) && this.movedMap[moveKey(nodeId, parentId)]) {\n              deepDelete(this.movedSet, n2);\n            } else {\n              this.removes.push({\n                parentId,\n                id: nodeId,\n                isShadow: isShadowRoot(m.target) && isNativeShadowDom(m.target) ? true : void 0\n              });\n              processRemoves(n2, this.removesSubTreeCache);\n            }\n            this.mapRemoves.push(n2);\n          });\n          break;\n        }\n      }\n    });\n    __publicField(this, \"genAdds\", (n2, target) => {\n      if (this.processedNodeManager.inOtherBuffer(n2, this)) return;\n      if (this.addedSet.has(n2) || this.movedSet.has(n2)) return;\n      if (this.mirror.hasNode(n2)) {\n        if (isIgnored(n2, this.mirror, this.slimDOMOptions)) {\n          return;\n        }\n        this.movedSet.add(n2);\n        let targetId = null;\n        if (target && this.mirror.hasNode(target)) {\n          targetId = this.mirror.getId(target);\n        }\n        if (targetId && targetId !== -1) {\n          this.movedMap[moveKey(this.mirror.getId(n2), targetId)] = true;\n        }\n      } else {\n        this.addedSet.add(n2);\n        this.droppedSet.delete(n2);\n      }\n      if (!isBlocked(n2, this.blockClass, this.blockSelector, false)) {\n        index.childNodes(n2).forEach((childN) => this.genAdds(childN));\n        if (hasShadowRoot(n2)) {\n          index.childNodes(index.shadowRoot(n2)).forEach((childN) => {\n            this.processedNodeManager.add(childN, this);\n            this.genAdds(childN, n2);\n          });\n        }\n      }\n    });\n  }\n  init(options) {\n    [\n      \"mutationCb\",\n      \"blockClass\",\n      \"blockSelector\",\n      \"maskTextClass\",\n      \"maskTextSelector\",\n      \"inlineStylesheet\",\n      \"maskInputOptions\",\n      \"maskTextFn\",\n      \"maskInputFn\",\n      \"keepIframeSrcFn\",\n      \"recordCanvas\",\n      \"inlineImages\",\n      \"slimDOMOptions\",\n      \"dataURLOptions\",\n      \"doc\",\n      \"mirror\",\n      \"iframeManager\",\n      \"stylesheetManager\",\n      \"shadowDomManager\",\n      \"canvasManager\",\n      \"processedNodeManager\"\n    ].forEach((key) => {\n      this[key] = options[key];\n    });\n  }\n  freeze() {\n    this.frozen = true;\n    this.canvasManager.freeze();\n  }\n  unfreeze() {\n    this.frozen = false;\n    this.canvasManager.unfreeze();\n    this.emit();\n  }\n  isFrozen() {\n    return this.frozen;\n  }\n  lock() {\n    this.locked = true;\n    this.canvasManager.lock();\n  }\n  unlock() {\n    this.locked = false;\n    this.canvasManager.unlock();\n    this.emit();\n  }\n  reset() {\n    this.shadowDomManager.reset();\n    this.canvasManager.reset();\n  }\n}\nfunction deepDelete(addsSet, n2) {\n  addsSet.delete(n2);\n  index.childNodes(n2).forEach((childN) => deepDelete(addsSet, childN));\n}\nfunction processRemoves(n2, cache) {\n  const queue = [n2];\n  while (queue.length) {\n    const next = queue.pop();\n    if (cache.has(next)) continue;\n    cache.add(next);\n    index.childNodes(next).forEach((n22) => queue.push(n22));\n  }\n  return;\n}\nfunction isParentRemoved(removes, n2, mirror2) {\n  if (removes.size === 0) return false;\n  return _isParentRemoved(removes, n2);\n}\nfunction _isParentRemoved(removes, n2, _mirror2) {\n  const node2 = index.parentNode(n2);\n  if (!node2) return false;\n  return removes.has(node2);\n}\nfunction isAncestorInSet(set, n2) {\n  if (set.size === 0) return false;\n  return _isAncestorInSet(set, n2);\n}\nfunction _isAncestorInSet(set, n2) {\n  const parent = index.parentNode(n2);\n  if (!parent) {\n    return false;\n  }\n  if (set.has(parent)) {\n    return true;\n  }\n  return _isAncestorInSet(set, parent);\n}\nlet errorHandler;\nfunction registerErrorHandler(handler) {\n  errorHandler = handler;\n}\nfunction unregisterErrorHandler() {\n  errorHandler = void 0;\n}\nconst callbackWrapper = (cb) => {\n  if (!errorHandler) {\n    return cb;\n  }\n  const rrwebWrapped = (...rest) => {\n    try {\n      return cb(...rest);\n    } catch (error) {\n      if (errorHandler && errorHandler(error) === true) {\n        return;\n      }\n      throw error;\n    }\n  };\n  return rrwebWrapped;\n};\nfunction externalFunctionWrapper(func) {\n  return (...args) => {\n    try {\n      return func(...args);\n    } catch (error) {\n      try {\n        error._external_ = true;\n      } catch {\n      }\n      throw error;\n    }\n  };\n}\nconst mutationBuffers = [];\nfunction getEventTarget(event) {\n  try {\n    if (\"composedPath\" in event) {\n      const path = event.composedPath();\n      if (path.length) {\n        return path[0];\n      }\n    } else if (\"path\" in event && event.path.length) {\n      return event.path[0];\n    }\n  } catch {\n  }\n  return event && event.target;\n}\nfunction initMutationObserver(options, rootEl) {\n  const mutationBuffer = new MutationBuffer();\n  mutationBuffers.push(mutationBuffer);\n  mutationBuffer.init(options);\n  const observer = new (mutationObserverCtor())(\n    callbackWrapper(mutationBuffer.processMutations.bind(mutationBuffer))\n  );\n  observer.observe(rootEl, {\n    attributes: true,\n    attributeOldValue: true,\n    characterData: true,\n    characterDataOldValue: true,\n    childList: true,\n    subtree: true\n  });\n  return observer;\n}\nfunction initMoveObserver({\n  mousemoveCb,\n  sampling,\n  doc,\n  mirror: mirror2\n}) {\n  if (sampling.mousemove === false) {\n    return () => {\n    };\n  }\n  const threshold = typeof sampling.mousemove === \"number\" ? sampling.mousemove : 50;\n  const callbackThreshold = typeof sampling.mousemoveCallback === \"number\" ? sampling.mousemoveCallback : 500;\n  let positions = [];\n  let timeBaseline;\n  const wrappedCb = throttle(\n    callbackWrapper(\n      (source) => {\n        const totalOffset = Date.now() - timeBaseline;\n        mousemoveCb(\n          positions.map((p) => {\n            p.timeOffset -= totalOffset;\n            return p;\n          }),\n          source\n        );\n        positions = [];\n        timeBaseline = null;\n      }\n    ),\n    callbackThreshold\n  );\n  const updatePosition = callbackWrapper(\n    throttle(\n      callbackWrapper((evt) => {\n        const target = getEventTarget(evt);\n        const { clientX, clientY } = legacy_isTouchEvent(evt) ? evt.changedTouches[0] : evt;\n        if (!timeBaseline) {\n          timeBaseline = nowTimestamp();\n        }\n        positions.push({\n          x: clientX,\n          y: clientY,\n          id: mirror2.getId(target),\n          timeOffset: nowTimestamp() - timeBaseline\n        });\n        wrappedCb(\n          typeof DragEvent !== \"undefined\" && evt instanceof DragEvent ? IncrementalSource.Drag : evt instanceof MouseEvent ? IncrementalSource.MouseMove : IncrementalSource.TouchMove\n        );\n      }),\n      threshold,\n      {\n        trailing: false\n      }\n    )\n  );\n  const handlers = [\n    on(\"mousemove\", updatePosition, doc),\n    on(\"touchmove\", updatePosition, doc),\n    on(\"drag\", updatePosition, doc)\n  ];\n  return callbackWrapper(() => {\n    handlers.forEach((h) => h());\n  });\n}\nfunction initMouseInteractionObserver({\n  mouseInteractionCb,\n  doc,\n  mirror: mirror2,\n  blockClass,\n  blockSelector,\n  sampling\n}) {\n  if (sampling.mouseInteraction === false) {\n    return () => {\n    };\n  }\n  const disableMap = sampling.mouseInteraction === true || sampling.mouseInteraction === void 0 ? {} : sampling.mouseInteraction;\n  const handlers = [];\n  let currentPointerType = null;\n  const getHandler = (eventKey) => {\n    return (event) => {\n      const target = getEventTarget(event);\n      if (isBlocked(target, blockClass, blockSelector, true)) {\n        return;\n      }\n      let pointerType = null;\n      let thisEventKey = eventKey;\n      if (\"pointerType\" in event) {\n        switch (event.pointerType) {\n          case \"mouse\":\n            pointerType = PointerTypes.Mouse;\n            break;\n          case \"touch\":\n            pointerType = PointerTypes.Touch;\n            break;\n          case \"pen\":\n            pointerType = PointerTypes.Pen;\n            break;\n        }\n        if (pointerType === PointerTypes.Touch) {\n          if (MouseInteractions[eventKey] === MouseInteractions.MouseDown) {\n            thisEventKey = \"TouchStart\";\n          } else if (MouseInteractions[eventKey] === MouseInteractions.MouseUp) {\n            thisEventKey = \"TouchEnd\";\n          }\n        } else if (pointerType === PointerTypes.Pen) ;\n      } else if (legacy_isTouchEvent(event)) {\n        pointerType = PointerTypes.Touch;\n      }\n      if (pointerType !== null) {\n        currentPointerType = pointerType;\n        if (thisEventKey.startsWith(\"Touch\") && pointerType === PointerTypes.Touch || thisEventKey.startsWith(\"Mouse\") && pointerType === PointerTypes.Mouse) {\n          pointerType = null;\n        }\n      } else if (MouseInteractions[eventKey] === MouseInteractions.Click) {\n        pointerType = currentPointerType;\n        currentPointerType = null;\n      }\n      const e2 = legacy_isTouchEvent(event) ? event.changedTouches[0] : event;\n      if (!e2) {\n        return;\n      }\n      const id = mirror2.getId(target);\n      const { clientX, clientY } = e2;\n      callbackWrapper(mouseInteractionCb)({\n        type: MouseInteractions[thisEventKey],\n        id,\n        x: clientX,\n        y: clientY,\n        ...pointerType !== null && { pointerType }\n      });\n    };\n  };\n  Object.keys(MouseInteractions).filter(\n    (key) => Number.isNaN(Number(key)) && !key.endsWith(\"_Departed\") && disableMap[key] !== false\n  ).forEach((eventKey) => {\n    let eventName = toLowerCase(eventKey);\n    const handler = getHandler(eventKey);\n    if (window.PointerEvent) {\n      switch (MouseInteractions[eventKey]) {\n        case MouseInteractions.MouseDown:\n        case MouseInteractions.MouseUp:\n          eventName = eventName.replace(\n            \"mouse\",\n            \"pointer\"\n          );\n          break;\n        case MouseInteractions.TouchStart:\n        case MouseInteractions.TouchEnd:\n          return;\n      }\n    }\n    handlers.push(on(eventName, handler, doc));\n  });\n  return callbackWrapper(() => {\n    handlers.forEach((h) => h());\n  });\n}\nfunction initScrollObserver({\n  scrollCb,\n  doc,\n  mirror: mirror2,\n  blockClass,\n  blockSelector,\n  sampling\n}) {\n  const updatePosition = callbackWrapper(\n    throttle(\n      callbackWrapper((evt) => {\n        const target = getEventTarget(evt);\n        if (!target || isBlocked(target, blockClass, blockSelector, true)) {\n          return;\n        }\n        const id = mirror2.getId(target);\n        if (target === doc && doc.defaultView) {\n          const scrollLeftTop = getWindowScroll(doc.defaultView);\n          scrollCb({\n            id,\n            x: scrollLeftTop.left,\n            y: scrollLeftTop.top\n          });\n        } else {\n          scrollCb({\n            id,\n            x: target.scrollLeft,\n            y: target.scrollTop\n          });\n        }\n      }),\n      sampling.scroll || 100\n    )\n  );\n  return on(\"scroll\", updatePosition, doc);\n}\nfunction initViewportResizeObserver({ viewportResizeCb }, { win }) {\n  let lastH = -1;\n  let lastW = -1;\n  const updateDimension = callbackWrapper(\n    throttle(\n      callbackWrapper(() => {\n        const height = getWindowHeight();\n        const width = getWindowWidth();\n        if (lastH !== height || lastW !== width) {\n          viewportResizeCb({\n            width: Number(width),\n            height: Number(height)\n          });\n          lastH = height;\n          lastW = width;\n        }\n      }),\n      200\n    )\n  );\n  return on(\"resize\", updateDimension, win);\n}\nconst INPUT_TAGS = [\"INPUT\", \"TEXTAREA\", \"SELECT\"];\nconst lastInputValueMap = /* @__PURE__ */ new WeakMap();\nfunction initInputObserver({\n  inputCb,\n  doc,\n  mirror: mirror2,\n  blockClass,\n  blockSelector,\n  ignoreClass,\n  ignoreSelector,\n  maskInputOptions,\n  maskInputFn,\n  sampling,\n  userTriggeredOnInput\n}) {\n  function eventHandler(event) {\n    let target = getEventTarget(event);\n    const userTriggered = event.isTrusted;\n    const tagName = target && target.tagName;\n    if (target && tagName === \"OPTION\") {\n      target = index.parentElement(target);\n    }\n    if (!target || !tagName || INPUT_TAGS.indexOf(tagName) < 0 || isBlocked(target, blockClass, blockSelector, true)) {\n      return;\n    }\n    if (target.classList.contains(ignoreClass) || ignoreSelector && target.matches(ignoreSelector)) {\n      return;\n    }\n    let text = target.value;\n    let isChecked = false;\n    const type = getInputType(target) || \"\";\n    if (type === \"radio\" || type === \"checkbox\") {\n      isChecked = target.checked;\n    } else if (maskInputOptions[tagName.toLowerCase()] || maskInputOptions[type]) {\n      text = maskInputValue({\n        element: target,\n        maskInputOptions,\n        tagName,\n        type,\n        value: text,\n        maskInputFn\n      });\n    }\n    cbWithDedup(\n      target,\n      userTriggeredOnInput ? { text, isChecked, userTriggered } : { text, isChecked }\n    );\n    const name = target.name;\n    if (type === \"radio\" && name && isChecked) {\n      doc.querySelectorAll(`input[type=\"radio\"][name=\"${name}\"]`).forEach((el) => {\n        if (el !== target) {\n          const text2 = el.value;\n          cbWithDedup(\n            el,\n            userTriggeredOnInput ? { text: text2, isChecked: !isChecked, userTriggered: false } : { text: text2, isChecked: !isChecked }\n          );\n        }\n      });\n    }\n  }\n  function cbWithDedup(target, v2) {\n    const lastInputValue = lastInputValueMap.get(target);\n    if (!lastInputValue || lastInputValue.text !== v2.text || lastInputValue.isChecked !== v2.isChecked) {\n      lastInputValueMap.set(target, v2);\n      const id = mirror2.getId(target);\n      callbackWrapper(inputCb)({\n        ...v2,\n        id\n      });\n    }\n  }\n  const events = sampling.input === \"last\" ? [\"change\"] : [\"input\", \"change\"];\n  const handlers = events.map(\n    (eventName) => on(eventName, callbackWrapper(eventHandler), doc)\n  );\n  const currentWindow = doc.defaultView;\n  if (!currentWindow) {\n    return () => {\n      handlers.forEach((h) => h());\n    };\n  }\n  const propertyDescriptor = currentWindow.Object.getOwnPropertyDescriptor(\n    currentWindow.HTMLInputElement.prototype,\n    \"value\"\n  );\n  const hookProperties = [\n    [currentWindow.HTMLInputElement.prototype, \"value\"],\n    [currentWindow.HTMLInputElement.prototype, \"checked\"],\n    [currentWindow.HTMLSelectElement.prototype, \"value\"],\n    [currentWindow.HTMLTextAreaElement.prototype, \"value\"],\n    // Some UI library use selectedIndex to set select value\n    [currentWindow.HTMLSelectElement.prototype, \"selectedIndex\"],\n    [currentWindow.HTMLOptionElement.prototype, \"selected\"]\n  ];\n  if (propertyDescriptor && propertyDescriptor.set) {\n    handlers.push(\n      ...hookProperties.map(\n        (p) => hookSetter(\n          p[0],\n          p[1],\n          {\n            set() {\n              callbackWrapper(eventHandler)({\n                target: this,\n                isTrusted: false\n                // userTriggered to false as this could well be programmatic\n              });\n            }\n          },\n          false,\n          currentWindow\n        )\n      )\n    );\n  }\n  return callbackWrapper(() => {\n    handlers.forEach((h) => h());\n  });\n}\nfunction getNestedCSSRulePositions(rule2) {\n  const positions = [];\n  function recurse(childRule, pos) {\n    if (hasNestedCSSRule(\"CSSGroupingRule\") && childRule.parentRule instanceof CSSGroupingRule || hasNestedCSSRule(\"CSSMediaRule\") && childRule.parentRule instanceof CSSMediaRule || hasNestedCSSRule(\"CSSSupportsRule\") && childRule.parentRule instanceof CSSSupportsRule || hasNestedCSSRule(\"CSSConditionRule\") && childRule.parentRule instanceof CSSConditionRule) {\n      const rules2 = Array.from(\n        childRule.parentRule.cssRules\n      );\n      const index2 = rules2.indexOf(childRule);\n      pos.unshift(index2);\n    } else if (childRule.parentStyleSheet) {\n      const rules2 = Array.from(childRule.parentStyleSheet.cssRules);\n      const index2 = rules2.indexOf(childRule);\n      pos.unshift(index2);\n    }\n    return pos;\n  }\n  return recurse(rule2, positions);\n}\nfunction getIdAndStyleId(sheet, mirror2, styleMirror) {\n  let id, styleId;\n  if (!sheet) return {};\n  if (sheet.ownerNode) id = mirror2.getId(sheet.ownerNode);\n  else styleId = styleMirror.getId(sheet);\n  return {\n    styleId,\n    id\n  };\n}\nfunction initStyleSheetObserver({ styleSheetRuleCb, mirror: mirror2, stylesheetManager }, { win }) {\n  if (!win.CSSStyleSheet || !win.CSSStyleSheet.prototype) {\n    return () => {\n    };\n  }\n  const insertRule = win.CSSStyleSheet.prototype.insertRule;\n  win.CSSStyleSheet.prototype.insertRule = new Proxy(insertRule, {\n    apply: callbackWrapper(\n      (target, thisArg, argumentsList) => {\n        const [rule2, index2] = argumentsList;\n        const { id, styleId } = getIdAndStyleId(\n          thisArg,\n          mirror2,\n          stylesheetManager.styleMirror\n        );\n        if (id && id !== -1 || styleId && styleId !== -1) {\n          styleSheetRuleCb({\n            id,\n            styleId,\n            adds: [{ rule: rule2, index: index2 }]\n          });\n        }\n        return externalFunctionWrapper(\n          () => target.apply(thisArg, argumentsList)\n        )();\n      }\n    )\n  });\n  win.CSSStyleSheet.prototype.addRule = function(selector, styleBlock, index2 = this.cssRules.length) {\n    const rule2 = `${selector} { ${styleBlock} }`;\n    return win.CSSStyleSheet.prototype.insertRule.apply(this, [rule2, index2]);\n  };\n  const deleteRule = win.CSSStyleSheet.prototype.deleteRule;\n  win.CSSStyleSheet.prototype.deleteRule = new Proxy(deleteRule, {\n    apply: callbackWrapper(\n      (target, thisArg, argumentsList) => {\n        const [index2] = argumentsList;\n        const { id, styleId } = getIdAndStyleId(\n          thisArg,\n          mirror2,\n          stylesheetManager.styleMirror\n        );\n        if (id && id !== -1 || styleId && styleId !== -1) {\n          styleSheetRuleCb({\n            id,\n            styleId,\n            removes: [{ index: index2 }]\n          });\n        }\n        return externalFunctionWrapper(\n          () => target.apply(thisArg, argumentsList)\n        )();\n      }\n    )\n  });\n  win.CSSStyleSheet.prototype.removeRule = function(index2) {\n    return win.CSSStyleSheet.prototype.deleteRule.apply(this, [index2]);\n  };\n  let replace;\n  if (win.CSSStyleSheet.prototype.replace) {\n    replace = win.CSSStyleSheet.prototype.replace;\n    win.CSSStyleSheet.prototype.replace = new Proxy(replace, {\n      apply: callbackWrapper(\n        (target, thisArg, argumentsList) => {\n          const [text] = argumentsList;\n          const { id, styleId } = getIdAndStyleId(\n            thisArg,\n            mirror2,\n            stylesheetManager.styleMirror\n          );\n          if (id && id !== -1 || styleId && styleId !== -1) {\n            styleSheetRuleCb({\n              id,\n              styleId,\n              replace: text\n            });\n          }\n          return target.apply(thisArg, argumentsList);\n        }\n      )\n    });\n  }\n  let replaceSync;\n  if (win.CSSStyleSheet.prototype.replaceSync) {\n    replaceSync = win.CSSStyleSheet.prototype.replaceSync;\n    win.CSSStyleSheet.prototype.replaceSync = new Proxy(replaceSync, {\n      apply: callbackWrapper(\n        (target, thisArg, argumentsList) => {\n          const [text] = argumentsList;\n          const { id, styleId } = getIdAndStyleId(\n            thisArg,\n            mirror2,\n            stylesheetManager.styleMirror\n          );\n          if (id && id !== -1 || styleId && styleId !== -1) {\n            styleSheetRuleCb({\n              id,\n              styleId,\n              replaceSync: text\n            });\n          }\n          return target.apply(thisArg, argumentsList);\n        }\n      )\n    });\n  }\n  const supportedNestedCSSRuleTypes = {};\n  if (canMonkeyPatchNestedCSSRule(\"CSSGroupingRule\")) {\n    supportedNestedCSSRuleTypes.CSSGroupingRule = win.CSSGroupingRule;\n  } else {\n    if (canMonkeyPatchNestedCSSRule(\"CSSMediaRule\")) {\n      supportedNestedCSSRuleTypes.CSSMediaRule = win.CSSMediaRule;\n    }\n    if (canMonkeyPatchNestedCSSRule(\"CSSConditionRule\")) {\n      supportedNestedCSSRuleTypes.CSSConditionRule = win.CSSConditionRule;\n    }\n    if (canMonkeyPatchNestedCSSRule(\"CSSSupportsRule\")) {\n      supportedNestedCSSRuleTypes.CSSSupportsRule = win.CSSSupportsRule;\n    }\n  }\n  const unmodifiedFunctions = {};\n  Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\n    unmodifiedFunctions[typeKey] = {\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      insertRule: type.prototype.insertRule,\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      deleteRule: type.prototype.deleteRule\n    };\n    type.prototype.insertRule = new Proxy(\n      unmodifiedFunctions[typeKey].insertRule,\n      {\n        apply: callbackWrapper(\n          (target, thisArg, argumentsList) => {\n            const [rule2, index2] = argumentsList;\n            const { id, styleId } = getIdAndStyleId(\n              thisArg.parentStyleSheet,\n              mirror2,\n              stylesheetManager.styleMirror\n            );\n            if (id && id !== -1 || styleId && styleId !== -1) {\n              styleSheetRuleCb({\n                id,\n                styleId,\n                adds: [\n                  {\n                    rule: rule2,\n                    index: [\n                      ...getNestedCSSRulePositions(thisArg),\n                      index2 || 0\n                      // defaults to 0\n                    ]\n                  }\n                ]\n              });\n            }\n            return target.apply(thisArg, argumentsList);\n          }\n        )\n      }\n    );\n    type.prototype.deleteRule = new Proxy(\n      unmodifiedFunctions[typeKey].deleteRule,\n      {\n        apply: callbackWrapper(\n          (target, thisArg, argumentsList) => {\n            const [index2] = argumentsList;\n            const { id, styleId } = getIdAndStyleId(\n              thisArg.parentStyleSheet,\n              mirror2,\n              stylesheetManager.styleMirror\n            );\n            if (id && id !== -1 || styleId && styleId !== -1) {\n              styleSheetRuleCb({\n                id,\n                styleId,\n                removes: [\n                  { index: [...getNestedCSSRulePositions(thisArg), index2] }\n                ]\n              });\n            }\n            return target.apply(thisArg, argumentsList);\n          }\n        )\n      }\n    );\n  });\n  return callbackWrapper(() => {\n    win.CSSStyleSheet.prototype.insertRule = insertRule;\n    win.CSSStyleSheet.prototype.deleteRule = deleteRule;\n    replace && (win.CSSStyleSheet.prototype.replace = replace);\n    replaceSync && (win.CSSStyleSheet.prototype.replaceSync = replaceSync);\n    Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\n      type.prototype.insertRule = unmodifiedFunctions[typeKey].insertRule;\n      type.prototype.deleteRule = unmodifiedFunctions[typeKey].deleteRule;\n    });\n  });\n}\nfunction initAdoptedStyleSheetObserver({\n  mirror: mirror2,\n  stylesheetManager\n}, host2) {\n  var _a2, _b, _c;\n  let hostId = null;\n  if (host2.nodeName === \"#document\") hostId = mirror2.getId(host2);\n  else hostId = mirror2.getId(index.host(host2));\n  const patchTarget = host2.nodeName === \"#document\" ? (_a2 = host2.defaultView) == null ? void 0 : _a2.Document : (_c = (_b = host2.ownerDocument) == null ? void 0 : _b.defaultView) == null ? void 0 : _c.ShadowRoot;\n  const originalPropertyDescriptor = (patchTarget == null ? void 0 : patchTarget.prototype) ? Object.getOwnPropertyDescriptor(\n    patchTarget == null ? void 0 : patchTarget.prototype,\n    \"adoptedStyleSheets\"\n  ) : void 0;\n  if (hostId === null || hostId === -1 || !patchTarget || !originalPropertyDescriptor)\n    return () => {\n    };\n  Object.defineProperty(host2, \"adoptedStyleSheets\", {\n    configurable: originalPropertyDescriptor.configurable,\n    enumerable: originalPropertyDescriptor.enumerable,\n    get() {\n      var _a3;\n      return (_a3 = originalPropertyDescriptor.get) == null ? void 0 : _a3.call(this);\n    },\n    set(sheets) {\n      var _a3;\n      const result2 = (_a3 = originalPropertyDescriptor.set) == null ? void 0 : _a3.call(this, sheets);\n      if (hostId !== null && hostId !== -1) {\n        try {\n          stylesheetManager.adoptStyleSheets(sheets, hostId);\n        } catch (e2) {\n        }\n      }\n      return result2;\n    }\n  });\n  return callbackWrapper(() => {\n    Object.defineProperty(host2, \"adoptedStyleSheets\", {\n      configurable: originalPropertyDescriptor.configurable,\n      enumerable: originalPropertyDescriptor.enumerable,\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      get: originalPropertyDescriptor.get,\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      set: originalPropertyDescriptor.set\n    });\n  });\n}\nfunction initStyleDeclarationObserver({\n  styleDeclarationCb,\n  mirror: mirror2,\n  ignoreCSSAttributes,\n  stylesheetManager\n}, { win }) {\n  const setProperty = win.CSSStyleDeclaration.prototype.setProperty;\n  win.CSSStyleDeclaration.prototype.setProperty = new Proxy(setProperty, {\n    apply: callbackWrapper(\n      (target, thisArg, argumentsList) => {\n        var _a2;\n        const [property, value, priority] = argumentsList;\n        if (ignoreCSSAttributes.has(property)) {\n          return setProperty.apply(thisArg, [property, value, priority]);\n        }\n        const { id, styleId } = getIdAndStyleId(\n          (_a2 = thisArg.parentRule) == null ? void 0 : _a2.parentStyleSheet,\n          mirror2,\n          stylesheetManager.styleMirror\n        );\n        if (id && id !== -1 || styleId && styleId !== -1) {\n          styleDeclarationCb({\n            id,\n            styleId,\n            set: {\n              property,\n              value,\n              priority\n            },\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            index: getNestedCSSRulePositions(thisArg.parentRule)\n          });\n        }\n        return target.apply(thisArg, argumentsList);\n      }\n    )\n  });\n  const removeProperty = win.CSSStyleDeclaration.prototype.removeProperty;\n  win.CSSStyleDeclaration.prototype.removeProperty = new Proxy(removeProperty, {\n    apply: callbackWrapper(\n      (target, thisArg, argumentsList) => {\n        var _a2;\n        const [property] = argumentsList;\n        if (ignoreCSSAttributes.has(property)) {\n          return removeProperty.apply(thisArg, [property]);\n        }\n        const { id, styleId } = getIdAndStyleId(\n          (_a2 = thisArg.parentRule) == null ? void 0 : _a2.parentStyleSheet,\n          mirror2,\n          stylesheetManager.styleMirror\n        );\n        if (id && id !== -1 || styleId && styleId !== -1) {\n          styleDeclarationCb({\n            id,\n            styleId,\n            remove: {\n              property\n            },\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            index: getNestedCSSRulePositions(thisArg.parentRule)\n          });\n        }\n        return target.apply(thisArg, argumentsList);\n      }\n    )\n  });\n  return callbackWrapper(() => {\n    win.CSSStyleDeclaration.prototype.setProperty = setProperty;\n    win.CSSStyleDeclaration.prototype.removeProperty = removeProperty;\n  });\n}\nfunction initMediaInteractionObserver({\n  mediaInteractionCb,\n  blockClass,\n  blockSelector,\n  mirror: mirror2,\n  sampling,\n  doc\n}) {\n  const handler = callbackWrapper(\n    (type) => throttle(\n      callbackWrapper((event) => {\n        const target = getEventTarget(event);\n        if (!target || isBlocked(target, blockClass, blockSelector, true)) {\n          return;\n        }\n        const { currentTime, volume, muted, playbackRate, loop } = target;\n        mediaInteractionCb({\n          type,\n          id: mirror2.getId(target),\n          currentTime,\n          volume,\n          muted,\n          playbackRate,\n          loop\n        });\n      }),\n      sampling.media || 500\n    )\n  );\n  const handlers = [\n    on(\"play\", handler(MediaInteractions.Play), doc),\n    on(\"pause\", handler(MediaInteractions.Pause), doc),\n    on(\"seeked\", handler(MediaInteractions.Seeked), doc),\n    on(\"volumechange\", handler(MediaInteractions.VolumeChange), doc),\n    on(\"ratechange\", handler(MediaInteractions.RateChange), doc)\n  ];\n  return callbackWrapper(() => {\n    handlers.forEach((h) => h());\n  });\n}\nfunction initFontObserver({ fontCb, doc }) {\n  const win = doc.defaultView;\n  if (!win) {\n    return () => {\n    };\n  }\n  const handlers = [];\n  const fontMap = /* @__PURE__ */ new WeakMap();\n  const originalFontFace = win.FontFace;\n  win.FontFace = function FontFace2(family, source, descriptors) {\n    const fontFace = new originalFontFace(family, source, descriptors);\n    fontMap.set(fontFace, {\n      family,\n      buffer: typeof source !== \"string\",\n      descriptors,\n      fontSource: typeof source === \"string\" ? source : JSON.stringify(Array.from(new Uint8Array(source)))\n    });\n    return fontFace;\n  };\n  const restoreHandler = patch(\n    doc.fonts,\n    \"add\",\n    function(original) {\n      return function(fontFace) {\n        setTimeout(\n          callbackWrapper(() => {\n            const p = fontMap.get(fontFace);\n            if (p) {\n              fontCb(p);\n              fontMap.delete(fontFace);\n            }\n          }),\n          0\n        );\n        return original.apply(this, [fontFace]);\n      };\n    }\n  );\n  handlers.push(() => {\n    win.FontFace = originalFontFace;\n  });\n  handlers.push(restoreHandler);\n  return callbackWrapper(() => {\n    handlers.forEach((h) => h());\n  });\n}\nfunction initSelectionObserver(param) {\n  const { doc, mirror: mirror2, blockClass, blockSelector, selectionCb } = param;\n  let collapsed = true;\n  const updateSelection = callbackWrapper(() => {\n    const selection = doc.getSelection();\n    if (!selection || collapsed && (selection == null ? void 0 : selection.isCollapsed)) return;\n    collapsed = selection.isCollapsed || false;\n    const ranges = [];\n    const count = selection.rangeCount || 0;\n    for (let i2 = 0; i2 < count; i2++) {\n      const range = selection.getRangeAt(i2);\n      const { startContainer, startOffset, endContainer, endOffset } = range;\n      const blocked = isBlocked(startContainer, blockClass, blockSelector, true) || isBlocked(endContainer, blockClass, blockSelector, true);\n      if (blocked) continue;\n      ranges.push({\n        start: mirror2.getId(startContainer),\n        startOffset,\n        end: mirror2.getId(endContainer),\n        endOffset\n      });\n    }\n    selectionCb({ ranges });\n  });\n  updateSelection();\n  return on(\"selectionchange\", updateSelection);\n}\nfunction initCustomElementObserver({\n  doc,\n  customElementCb\n}) {\n  const win = doc.defaultView;\n  if (!win || !win.customElements) return () => {\n  };\n  const restoreHandler = patch(\n    win.customElements,\n    \"define\",\n    function(original) {\n      return function(name, constructor, options) {\n        try {\n          customElementCb({\n            define: {\n              name\n            }\n          });\n        } catch (e2) {\n          console.warn(`Custom element callback failed for ${name}`);\n        }\n        return original.apply(this, [name, constructor, options]);\n      };\n    }\n  );\n  return restoreHandler;\n}\nfunction mergeHooks(o2, hooks) {\n  const {\n    mutationCb,\n    mousemoveCb,\n    mouseInteractionCb,\n    scrollCb,\n    viewportResizeCb,\n    inputCb,\n    mediaInteractionCb,\n    styleSheetRuleCb,\n    styleDeclarationCb,\n    canvasMutationCb,\n    fontCb,\n    selectionCb,\n    customElementCb\n  } = o2;\n  o2.mutationCb = (...p) => {\n    if (hooks.mutation) {\n      hooks.mutation(...p);\n    }\n    mutationCb(...p);\n  };\n  o2.mousemoveCb = (...p) => {\n    if (hooks.mousemove) {\n      hooks.mousemove(...p);\n    }\n    mousemoveCb(...p);\n  };\n  o2.mouseInteractionCb = (...p) => {\n    if (hooks.mouseInteraction) {\n      hooks.mouseInteraction(...p);\n    }\n    mouseInteractionCb(...p);\n  };\n  o2.scrollCb = (...p) => {\n    if (hooks.scroll) {\n      hooks.scroll(...p);\n    }\n    scrollCb(...p);\n  };\n  o2.viewportResizeCb = (...p) => {\n    if (hooks.viewportResize) {\n      hooks.viewportResize(...p);\n    }\n    viewportResizeCb(...p);\n  };\n  o2.inputCb = (...p) => {\n    if (hooks.input) {\n      hooks.input(...p);\n    }\n    inputCb(...p);\n  };\n  o2.mediaInteractionCb = (...p) => {\n    if (hooks.mediaInteaction) {\n      hooks.mediaInteaction(...p);\n    }\n    mediaInteractionCb(...p);\n  };\n  o2.styleSheetRuleCb = (...p) => {\n    if (hooks.styleSheetRule) {\n      hooks.styleSheetRule(...p);\n    }\n    styleSheetRuleCb(...p);\n  };\n  o2.styleDeclarationCb = (...p) => {\n    if (hooks.styleDeclaration) {\n      hooks.styleDeclaration(...p);\n    }\n    styleDeclarationCb(...p);\n  };\n  o2.canvasMutationCb = (...p) => {\n    if (hooks.canvasMutation) {\n      hooks.canvasMutation(...p);\n    }\n    canvasMutationCb(...p);\n  };\n  o2.fontCb = (...p) => {\n    if (hooks.font) {\n      hooks.font(...p);\n    }\n    fontCb(...p);\n  };\n  o2.selectionCb = (...p) => {\n    if (hooks.selection) {\n      hooks.selection(...p);\n    }\n    selectionCb(...p);\n  };\n  o2.customElementCb = (...c2) => {\n    if (hooks.customElement) {\n      hooks.customElement(...c2);\n    }\n    customElementCb(...c2);\n  };\n}\nfunction initObservers(o2, hooks = {}) {\n  const currentWindow = o2.doc.defaultView;\n  if (!currentWindow) {\n    return () => {\n    };\n  }\n  mergeHooks(o2, hooks);\n  let mutationObserver;\n  if (o2.recordDOM) {\n    mutationObserver = initMutationObserver(o2, o2.doc);\n  }\n  const mousemoveHandler = initMoveObserver(o2);\n  const mouseInteractionHandler = initMouseInteractionObserver(o2);\n  const scrollHandler = initScrollObserver(o2);\n  const viewportResizeHandler = initViewportResizeObserver(o2, {\n    win: currentWindow\n  });\n  const inputHandler = initInputObserver(o2);\n  const mediaInteractionHandler = initMediaInteractionObserver(o2);\n  let styleSheetObserver = () => {\n  };\n  let adoptedStyleSheetObserver = () => {\n  };\n  let styleDeclarationObserver = () => {\n  };\n  let fontObserver = () => {\n  };\n  if (o2.recordDOM) {\n    styleSheetObserver = initStyleSheetObserver(o2, { win: currentWindow });\n    adoptedStyleSheetObserver = initAdoptedStyleSheetObserver(o2, o2.doc);\n    styleDeclarationObserver = initStyleDeclarationObserver(o2, {\n      win: currentWindow\n    });\n    if (o2.collectFonts) {\n      fontObserver = initFontObserver(o2);\n    }\n  }\n  const selectionObserver = initSelectionObserver(o2);\n  const customElementObserver = initCustomElementObserver(o2);\n  const pluginHandlers = [];\n  for (const plugin3 of o2.plugins) {\n    pluginHandlers.push(\n      plugin3.observer(plugin3.callback, currentWindow, plugin3.options)\n    );\n  }\n  return callbackWrapper(() => {\n    mutationBuffers.forEach((b) => b.reset());\n    mutationObserver == null ? void 0 : mutationObserver.disconnect();\n    mousemoveHandler();\n    mouseInteractionHandler();\n    scrollHandler();\n    viewportResizeHandler();\n    inputHandler();\n    mediaInteractionHandler();\n    styleSheetObserver();\n    adoptedStyleSheetObserver();\n    styleDeclarationObserver();\n    fontObserver();\n    selectionObserver();\n    customElementObserver();\n    pluginHandlers.forEach((h) => h());\n  });\n}\nfunction hasNestedCSSRule(prop) {\n  return typeof window[prop] !== \"undefined\";\n}\nfunction canMonkeyPatchNestedCSSRule(prop) {\n  return Boolean(\n    typeof window[prop] !== \"undefined\" && // Note: Generally, this check _shouldn't_ be necessary\n    // However, in some scenarios (e.g. jsdom) this can sometimes fail, so we check for it here\n    window[prop].prototype && \"insertRule\" in window[prop].prototype && \"deleteRule\" in window[prop].prototype\n  );\n}\nclass CrossOriginIframeMirror {\n  constructor(generateIdFn) {\n    __publicField(this, \"iframeIdToRemoteIdMap\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"iframeRemoteIdToIdMap\", /* @__PURE__ */ new WeakMap());\n    this.generateIdFn = generateIdFn;\n  }\n  getId(iframe, remoteId, idToRemoteMap, remoteToIdMap) {\n    const idToRemoteIdMap = idToRemoteMap || this.getIdToRemoteIdMap(iframe);\n    const remoteIdToIdMap = remoteToIdMap || this.getRemoteIdToIdMap(iframe);\n    let id = idToRemoteIdMap.get(remoteId);\n    if (!id) {\n      id = this.generateIdFn();\n      idToRemoteIdMap.set(remoteId, id);\n      remoteIdToIdMap.set(id, remoteId);\n    }\n    return id;\n  }\n  getIds(iframe, remoteId) {\n    const idToRemoteIdMap = this.getIdToRemoteIdMap(iframe);\n    const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\n    return remoteId.map(\n      (id) => this.getId(iframe, id, idToRemoteIdMap, remoteIdToIdMap)\n    );\n  }\n  getRemoteId(iframe, id, map) {\n    const remoteIdToIdMap = map || this.getRemoteIdToIdMap(iframe);\n    if (typeof id !== \"number\") return id;\n    const remoteId = remoteIdToIdMap.get(id);\n    if (!remoteId) return -1;\n    return remoteId;\n  }\n  getRemoteIds(iframe, ids) {\n    const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\n    return ids.map((id) => this.getRemoteId(iframe, id, remoteIdToIdMap));\n  }\n  reset(iframe) {\n    if (!iframe) {\n      this.iframeIdToRemoteIdMap = /* @__PURE__ */ new WeakMap();\n      this.iframeRemoteIdToIdMap = /* @__PURE__ */ new WeakMap();\n      return;\n    }\n    this.iframeIdToRemoteIdMap.delete(iframe);\n    this.iframeRemoteIdToIdMap.delete(iframe);\n  }\n  getIdToRemoteIdMap(iframe) {\n    let idToRemoteIdMap = this.iframeIdToRemoteIdMap.get(iframe);\n    if (!idToRemoteIdMap) {\n      idToRemoteIdMap = /* @__PURE__ */ new Map();\n      this.iframeIdToRemoteIdMap.set(iframe, idToRemoteIdMap);\n    }\n    return idToRemoteIdMap;\n  }\n  getRemoteIdToIdMap(iframe) {\n    let remoteIdToIdMap = this.iframeRemoteIdToIdMap.get(iframe);\n    if (!remoteIdToIdMap) {\n      remoteIdToIdMap = /* @__PURE__ */ new Map();\n      this.iframeRemoteIdToIdMap.set(iframe, remoteIdToIdMap);\n    }\n    return remoteIdToIdMap;\n  }\n}\nclass IframeManager {\n  constructor(options) {\n    __publicField(this, \"iframes\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"crossOriginIframeMap\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"crossOriginIframeMirror\", new CrossOriginIframeMirror(genId));\n    __publicField(this, \"crossOriginIframeStyleMirror\");\n    __publicField(this, \"crossOriginIframeRootIdMap\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"mirror\");\n    __publicField(this, \"mutationCb\");\n    __publicField(this, \"wrappedEmit\");\n    __publicField(this, \"loadListener\");\n    __publicField(this, \"stylesheetManager\");\n    __publicField(this, \"recordCrossOriginIframes\");\n    this.mutationCb = options.mutationCb;\n    this.wrappedEmit = options.wrappedEmit;\n    this.stylesheetManager = options.stylesheetManager;\n    this.recordCrossOriginIframes = options.recordCrossOriginIframes;\n    this.crossOriginIframeStyleMirror = new CrossOriginIframeMirror(\n      this.stylesheetManager.styleMirror.generateId.bind(\n        this.stylesheetManager.styleMirror\n      )\n    );\n    this.mirror = options.mirror;\n    if (this.recordCrossOriginIframes) {\n      window.addEventListener(\"message\", this.handleMessage.bind(this));\n    }\n  }\n  addIframe(iframeEl) {\n    this.iframes.set(iframeEl, true);\n    if (iframeEl.contentWindow)\n      this.crossOriginIframeMap.set(iframeEl.contentWindow, iframeEl);\n  }\n  addLoadListener(cb) {\n    this.loadListener = cb;\n  }\n  attachIframe(iframeEl, childSn) {\n    var _a2, _b;\n    this.mutationCb({\n      adds: [\n        {\n          parentId: this.mirror.getId(iframeEl),\n          nextId: null,\n          node: childSn\n        }\n      ],\n      removes: [],\n      texts: [],\n      attributes: [],\n      isAttachIframe: true\n    });\n    if (this.recordCrossOriginIframes)\n      (_a2 = iframeEl.contentWindow) == null ? void 0 : _a2.addEventListener(\n        \"message\",\n        this.handleMessage.bind(this)\n      );\n    (_b = this.loadListener) == null ? void 0 : _b.call(this, iframeEl);\n    if (iframeEl.contentDocument && iframeEl.contentDocument.adoptedStyleSheets && iframeEl.contentDocument.adoptedStyleSheets.length > 0)\n      this.stylesheetManager.adoptStyleSheets(\n        iframeEl.contentDocument.adoptedStyleSheets,\n        this.mirror.getId(iframeEl.contentDocument)\n      );\n  }\n  handleMessage(message) {\n    const crossOriginMessageEvent = message;\n    if (crossOriginMessageEvent.data.type !== \"rrweb\" || // To filter out the rrweb messages which are forwarded by some sites.\n    crossOriginMessageEvent.origin !== crossOriginMessageEvent.data.origin)\n      return;\n    const iframeSourceWindow = message.source;\n    if (!iframeSourceWindow) return;\n    const iframeEl = this.crossOriginIframeMap.get(message.source);\n    if (!iframeEl) return;\n    const transformedEvent = this.transformCrossOriginEvent(\n      iframeEl,\n      crossOriginMessageEvent.data.event\n    );\n    if (transformedEvent)\n      this.wrappedEmit(\n        transformedEvent,\n        crossOriginMessageEvent.data.isCheckout\n      );\n  }\n  transformCrossOriginEvent(iframeEl, e2) {\n    var _a2;\n    switch (e2.type) {\n      case EventType.FullSnapshot: {\n        this.crossOriginIframeMirror.reset(iframeEl);\n        this.crossOriginIframeStyleMirror.reset(iframeEl);\n        this.replaceIdOnNode(e2.data.node, iframeEl);\n        const rootId = e2.data.node.id;\n        this.crossOriginIframeRootIdMap.set(iframeEl, rootId);\n        this.patchRootIdOnNode(e2.data.node, rootId);\n        return {\n          timestamp: e2.timestamp,\n          type: EventType.IncrementalSnapshot,\n          data: {\n            source: IncrementalSource.Mutation,\n            adds: [\n              {\n                parentId: this.mirror.getId(iframeEl),\n                nextId: null,\n                node: e2.data.node\n              }\n            ],\n            removes: [],\n            texts: [],\n            attributes: [],\n            isAttachIframe: true\n          }\n        };\n      }\n      case EventType.Meta:\n      case EventType.Load:\n      case EventType.DomContentLoaded: {\n        return false;\n      }\n      case EventType.Plugin: {\n        return e2;\n      }\n      case EventType.Custom: {\n        this.replaceIds(\n          e2.data.payload,\n          iframeEl,\n          [\"id\", \"parentId\", \"previousId\", \"nextId\"]\n        );\n        return e2;\n      }\n      case EventType.IncrementalSnapshot: {\n        switch (e2.data.source) {\n          case IncrementalSource.Mutation: {\n            e2.data.adds.forEach((n2) => {\n              this.replaceIds(n2, iframeEl, [\n                \"parentId\",\n                \"nextId\",\n                \"previousId\"\n              ]);\n              this.replaceIdOnNode(n2.node, iframeEl);\n              const rootId = this.crossOriginIframeRootIdMap.get(iframeEl);\n              rootId && this.patchRootIdOnNode(n2.node, rootId);\n            });\n            e2.data.removes.forEach((n2) => {\n              this.replaceIds(n2, iframeEl, [\"parentId\", \"id\"]);\n            });\n            e2.data.attributes.forEach((n2) => {\n              this.replaceIds(n2, iframeEl, [\"id\"]);\n            });\n            e2.data.texts.forEach((n2) => {\n              this.replaceIds(n2, iframeEl, [\"id\"]);\n            });\n            return e2;\n          }\n          case IncrementalSource.Drag:\n          case IncrementalSource.TouchMove:\n          case IncrementalSource.MouseMove: {\n            e2.data.positions.forEach((p) => {\n              this.replaceIds(p, iframeEl, [\"id\"]);\n            });\n            return e2;\n          }\n          case IncrementalSource.ViewportResize: {\n            return false;\n          }\n          case IncrementalSource.MediaInteraction:\n          case IncrementalSource.MouseInteraction:\n          case IncrementalSource.Scroll:\n          case IncrementalSource.CanvasMutation:\n          case IncrementalSource.Input: {\n            this.replaceIds(e2.data, iframeEl, [\"id\"]);\n            return e2;\n          }\n          case IncrementalSource.StyleSheetRule:\n          case IncrementalSource.StyleDeclaration: {\n            this.replaceIds(e2.data, iframeEl, [\"id\"]);\n            this.replaceStyleIds(e2.data, iframeEl, [\"styleId\"]);\n            return e2;\n          }\n          case IncrementalSource.Font: {\n            return e2;\n          }\n          case IncrementalSource.Selection: {\n            e2.data.ranges.forEach((range) => {\n              this.replaceIds(range, iframeEl, [\"start\", \"end\"]);\n            });\n            return e2;\n          }\n          case IncrementalSource.AdoptedStyleSheet: {\n            this.replaceIds(e2.data, iframeEl, [\"id\"]);\n            this.replaceStyleIds(e2.data, iframeEl, [\"styleIds\"]);\n            (_a2 = e2.data.styles) == null ? void 0 : _a2.forEach((style) => {\n              this.replaceStyleIds(style, iframeEl, [\"styleId\"]);\n            });\n            return e2;\n          }\n        }\n      }\n    }\n    return false;\n  }\n  replace(iframeMirror, obj, iframeEl, keys) {\n    for (const key of keys) {\n      if (!Array.isArray(obj[key]) && typeof obj[key] !== \"number\") continue;\n      if (Array.isArray(obj[key])) {\n        obj[key] = iframeMirror.getIds(\n          iframeEl,\n          obj[key]\n        );\n      } else {\n        obj[key] = iframeMirror.getId(iframeEl, obj[key]);\n      }\n    }\n    return obj;\n  }\n  replaceIds(obj, iframeEl, keys) {\n    return this.replace(this.crossOriginIframeMirror, obj, iframeEl, keys);\n  }\n  replaceStyleIds(obj, iframeEl, keys) {\n    return this.replace(this.crossOriginIframeStyleMirror, obj, iframeEl, keys);\n  }\n  replaceIdOnNode(node2, iframeEl) {\n    this.replaceIds(node2, iframeEl, [\"id\", \"rootId\"]);\n    if (\"childNodes\" in node2) {\n      node2.childNodes.forEach((child) => {\n        this.replaceIdOnNode(child, iframeEl);\n      });\n    }\n  }\n  patchRootIdOnNode(node2, rootId) {\n    if (node2.type !== NodeType.Document && !node2.rootId) node2.rootId = rootId;\n    if (\"childNodes\" in node2) {\n      node2.childNodes.forEach((child) => {\n        this.patchRootIdOnNode(child, rootId);\n      });\n    }\n  }\n}\nclass ShadowDomManager {\n  constructor(options) {\n    __publicField(this, \"shadowDoms\", /* @__PURE__ */ new WeakSet());\n    __publicField(this, \"mutationCb\");\n    __publicField(this, \"scrollCb\");\n    __publicField(this, \"bypassOptions\");\n    __publicField(this, \"mirror\");\n    __publicField(this, \"restoreHandlers\", []);\n    this.mutationCb = options.mutationCb;\n    this.scrollCb = options.scrollCb;\n    this.bypassOptions = options.bypassOptions;\n    this.mirror = options.mirror;\n    this.init();\n  }\n  init() {\n    this.reset();\n    this.patchAttachShadow(Element, document);\n  }\n  addShadowRoot(shadowRoot2, doc) {\n    if (!isNativeShadowDom(shadowRoot2)) return;\n    if (this.shadowDoms.has(shadowRoot2)) return;\n    this.shadowDoms.add(shadowRoot2);\n    const observer = initMutationObserver(\n      {\n        ...this.bypassOptions,\n        doc,\n        mutationCb: this.mutationCb,\n        mirror: this.mirror,\n        shadowDomManager: this\n      },\n      shadowRoot2\n    );\n    this.restoreHandlers.push(() => observer.disconnect());\n    this.restoreHandlers.push(\n      initScrollObserver({\n        ...this.bypassOptions,\n        scrollCb: this.scrollCb,\n        // https://gist.github.com/praveenpuglia/0832da687ed5a5d7a0907046c9ef1813\n        // scroll is not allowed to pass the boundary, so we need to listen the shadow document\n        doc: shadowRoot2,\n        mirror: this.mirror\n      })\n    );\n    setTimeout(() => {\n      if (shadowRoot2.adoptedStyleSheets && shadowRoot2.adoptedStyleSheets.length > 0)\n        this.bypassOptions.stylesheetManager.adoptStyleSheets(\n          shadowRoot2.adoptedStyleSheets,\n          this.mirror.getId(index.host(shadowRoot2))\n        );\n      this.restoreHandlers.push(\n        initAdoptedStyleSheetObserver(\n          {\n            mirror: this.mirror,\n            stylesheetManager: this.bypassOptions.stylesheetManager\n          },\n          shadowRoot2\n        )\n      );\n    }, 0);\n  }\n  /**\n   * Monkey patch 'attachShadow' of an IFrameElement to observe newly added shadow doms.\n   */\n  observeAttachShadow(iframeElement) {\n    if (!iframeElement.contentWindow || !iframeElement.contentDocument) return;\n    this.patchAttachShadow(\n      iframeElement.contentWindow.Element,\n      iframeElement.contentDocument\n    );\n  }\n  /**\n   * Patch 'attachShadow' to observe newly added shadow doms.\n   */\n  patchAttachShadow(element, doc) {\n    const manager = this;\n    this.restoreHandlers.push(\n      patch(\n        element.prototype,\n        \"attachShadow\",\n        function(original) {\n          return function(option) {\n            const sRoot = original.call(this, option);\n            const shadowRootEl = index.shadowRoot(this);\n            if (shadowRootEl && inDom(this))\n              manager.addShadowRoot(shadowRootEl, doc);\n            return sRoot;\n          };\n        }\n      )\n    );\n  }\n  reset() {\n    this.restoreHandlers.forEach((handler) => {\n      try {\n        handler();\n      } catch (e2) {\n      }\n    });\n    this.restoreHandlers = [];\n    this.shadowDoms = /* @__PURE__ */ new WeakSet();\n  }\n}\nvar chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\nvar lookup = typeof Uint8Array === \"undefined\" ? [] : new Uint8Array(256);\nfor (var i$1 = 0; i$1 < chars.length; i$1++) {\n  lookup[chars.charCodeAt(i$1)] = i$1;\n}\nvar encode = function(arraybuffer) {\n  var bytes = new Uint8Array(arraybuffer), i2, len = bytes.length, base64 = \"\";\n  for (i2 = 0; i2 < len; i2 += 3) {\n    base64 += chars[bytes[i2] >> 2];\n    base64 += chars[(bytes[i2] & 3) << 4 | bytes[i2 + 1] >> 4];\n    base64 += chars[(bytes[i2 + 1] & 15) << 2 | bytes[i2 + 2] >> 6];\n    base64 += chars[bytes[i2 + 2] & 63];\n  }\n  if (len % 3 === 2) {\n    base64 = base64.substring(0, base64.length - 1) + \"=\";\n  } else if (len % 3 === 1) {\n    base64 = base64.substring(0, base64.length - 2) + \"==\";\n  }\n  return base64;\n};\nconst canvasVarMap = /* @__PURE__ */ new Map();\nfunction variableListFor$1(ctx, ctor) {\n  let contextMap = canvasVarMap.get(ctx);\n  if (!contextMap) {\n    contextMap = /* @__PURE__ */ new Map();\n    canvasVarMap.set(ctx, contextMap);\n  }\n  if (!contextMap.has(ctor)) {\n    contextMap.set(ctor, []);\n  }\n  return contextMap.get(ctor);\n}\nconst saveWebGLVar = (value, win, ctx) => {\n  if (!value || !(isInstanceOfWebGLObject(value, win) || typeof value === \"object\"))\n    return;\n  const name = value.constructor.name;\n  const list2 = variableListFor$1(ctx, name);\n  let index2 = list2.indexOf(value);\n  if (index2 === -1) {\n    index2 = list2.length;\n    list2.push(value);\n  }\n  return index2;\n};\nfunction serializeArg(value, win, ctx) {\n  if (value instanceof Array) {\n    return value.map((arg) => serializeArg(arg, win, ctx));\n  } else if (value === null) {\n    return value;\n  } else if (value instanceof Float32Array || value instanceof Float64Array || value instanceof Int32Array || value instanceof Uint32Array || value instanceof Uint8Array || value instanceof Uint16Array || value instanceof Int16Array || value instanceof Int8Array || value instanceof Uint8ClampedArray) {\n    const name = value.constructor.name;\n    return {\n      rr_type: name,\n      args: [Object.values(value)]\n    };\n  } else if (\n    // SharedArrayBuffer disabled on most browsers due to spectre.\n    // More info: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer/SharedArrayBuffer\n    // value instanceof SharedArrayBuffer ||\n    value instanceof ArrayBuffer\n  ) {\n    const name = value.constructor.name;\n    const base64 = encode(value);\n    return {\n      rr_type: name,\n      base64\n    };\n  } else if (value instanceof DataView) {\n    const name = value.constructor.name;\n    return {\n      rr_type: name,\n      args: [\n        serializeArg(value.buffer, win, ctx),\n        value.byteOffset,\n        value.byteLength\n      ]\n    };\n  } else if (value instanceof HTMLImageElement) {\n    const name = value.constructor.name;\n    const { src } = value;\n    return {\n      rr_type: name,\n      src\n    };\n  } else if (value instanceof HTMLCanvasElement) {\n    const name = \"HTMLImageElement\";\n    const src = value.toDataURL();\n    return {\n      rr_type: name,\n      src\n    };\n  } else if (value instanceof ImageData) {\n    const name = value.constructor.name;\n    return {\n      rr_type: name,\n      args: [serializeArg(value.data, win, ctx), value.width, value.height]\n    };\n  } else if (isInstanceOfWebGLObject(value, win) || typeof value === \"object\") {\n    const name = value.constructor.name;\n    const index2 = saveWebGLVar(value, win, ctx);\n    return {\n      rr_type: name,\n      index: index2\n    };\n  }\n  return value;\n}\nconst serializeArgs = (args, win, ctx) => {\n  return args.map((arg) => serializeArg(arg, win, ctx));\n};\nconst isInstanceOfWebGLObject = (value, win) => {\n  const webGLConstructorNames = [\n    \"WebGLActiveInfo\",\n    \"WebGLBuffer\",\n    \"WebGLFramebuffer\",\n    \"WebGLProgram\",\n    \"WebGLRenderbuffer\",\n    \"WebGLShader\",\n    \"WebGLShaderPrecisionFormat\",\n    \"WebGLTexture\",\n    \"WebGLUniformLocation\",\n    \"WebGLVertexArrayObject\",\n    // In old Chrome versions, value won't be an instanceof WebGLVertexArrayObject.\n    \"WebGLVertexArrayObjectOES\"\n  ];\n  const supportedWebGLConstructorNames = webGLConstructorNames.filter(\n    (name) => typeof win[name] === \"function\"\n  );\n  return Boolean(\n    supportedWebGLConstructorNames.find(\n      (name) => value instanceof win[name]\n    )\n  );\n};\nfunction initCanvas2DMutationObserver(cb, win, blockClass, blockSelector) {\n  const handlers = [];\n  const props2D = Object.getOwnPropertyNames(\n    win.CanvasRenderingContext2D.prototype\n  );\n  for (const prop of props2D) {\n    try {\n      if (typeof win.CanvasRenderingContext2D.prototype[prop] !== \"function\") {\n        continue;\n      }\n      const restoreHandler = patch(\n        win.CanvasRenderingContext2D.prototype,\n        prop,\n        function(original) {\n          return function(...args) {\n            if (!isBlocked(this.canvas, blockClass, blockSelector, true)) {\n              setTimeout(() => {\n                const recordArgs = serializeArgs(args, win, this);\n                cb(this.canvas, {\n                  type: CanvasContext[\"2D\"],\n                  property: prop,\n                  args: recordArgs\n                });\n              }, 0);\n            }\n            return original.apply(this, args);\n          };\n        }\n      );\n      handlers.push(restoreHandler);\n    } catch {\n      const hookHandler = hookSetter(\n        win.CanvasRenderingContext2D.prototype,\n        prop,\n        {\n          set(v2) {\n            cb(this.canvas, {\n              type: CanvasContext[\"2D\"],\n              property: prop,\n              args: [v2],\n              setter: true\n            });\n          }\n        }\n      );\n      handlers.push(hookHandler);\n    }\n  }\n  return () => {\n    handlers.forEach((h) => h());\n  };\n}\nfunction getNormalizedContextName(contextType) {\n  return contextType === \"experimental-webgl\" ? \"webgl\" : contextType;\n}\nfunction initCanvasContextObserver(win, blockClass, blockSelector, setPreserveDrawingBufferToTrue) {\n  const handlers = [];\n  try {\n    const restoreHandler = patch(\n      win.HTMLCanvasElement.prototype,\n      \"getContext\",\n      function(original) {\n        return function(contextType, ...args) {\n          if (!isBlocked(this, blockClass, blockSelector, true)) {\n            const ctxName = getNormalizedContextName(contextType);\n            if (!(\"__context\" in this)) this.__context = ctxName;\n            if (setPreserveDrawingBufferToTrue && [\"webgl\", \"webgl2\"].includes(ctxName)) {\n              if (args[0] && typeof args[0] === \"object\") {\n                const contextAttributes = args[0];\n                if (!contextAttributes.preserveDrawingBuffer) {\n                  contextAttributes.preserveDrawingBuffer = true;\n                }\n              } else {\n                args.splice(0, 1, {\n                  preserveDrawingBuffer: true\n                });\n              }\n            }\n          }\n          return original.apply(this, [contextType, ...args]);\n        };\n      }\n    );\n    handlers.push(restoreHandler);\n  } catch {\n    console.error(\"failed to patch HTMLCanvasElement.prototype.getContext\");\n  }\n  return () => {\n    handlers.forEach((h) => h());\n  };\n}\nfunction patchGLPrototype(prototype, type, cb, blockClass, blockSelector, win) {\n  const handlers = [];\n  const props = Object.getOwnPropertyNames(prototype);\n  for (const prop of props) {\n    if (\n      //prop.startsWith('get') ||  // e.g. getProgramParameter, but too risky\n      [\n        \"isContextLost\",\n        \"canvas\",\n        \"drawingBufferWidth\",\n        \"drawingBufferHeight\"\n      ].includes(prop)\n    ) {\n      continue;\n    }\n    try {\n      if (typeof prototype[prop] !== \"function\") {\n        continue;\n      }\n      const restoreHandler = patch(\n        prototype,\n        prop,\n        function(original) {\n          return function(...args) {\n            const result2 = original.apply(this, args);\n            saveWebGLVar(result2, win, this);\n            if (\"tagName\" in this.canvas && !isBlocked(this.canvas, blockClass, blockSelector, true)) {\n              const recordArgs = serializeArgs(args, win, this);\n              const mutation = {\n                type,\n                property: prop,\n                args: recordArgs\n              };\n              cb(this.canvas, mutation);\n            }\n            return result2;\n          };\n        }\n      );\n      handlers.push(restoreHandler);\n    } catch {\n      const hookHandler = hookSetter(prototype, prop, {\n        set(v2) {\n          cb(this.canvas, {\n            type,\n            property: prop,\n            args: [v2],\n            setter: true\n          });\n        }\n      });\n      handlers.push(hookHandler);\n    }\n  }\n  return handlers;\n}\nfunction initCanvasWebGLMutationObserver(cb, win, blockClass, blockSelector) {\n  const handlers = [];\n  handlers.push(\n    ...patchGLPrototype(\n      win.WebGLRenderingContext.prototype,\n      CanvasContext.WebGL,\n      cb,\n      blockClass,\n      blockSelector,\n      win\n    )\n  );\n  if (typeof win.WebGL2RenderingContext !== \"undefined\") {\n    handlers.push(\n      ...patchGLPrototype(\n        win.WebGL2RenderingContext.prototype,\n        CanvasContext.WebGL2,\n        cb,\n        blockClass,\n        blockSelector,\n        win\n      )\n    );\n  }\n  return () => {\n    handlers.forEach((h) => h());\n  };\n}\nconst encodedJs = \"KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=\";\nconst decodeBase64 = (base64) => Uint8Array.from(atob(base64), (c2) => c2.charCodeAt(0));\nconst blob = typeof window !== \"undefined\" && window.Blob && new Blob([decodeBase64(encodedJs)], { type: \"text/javascript;charset=utf-8\" });\nfunction WorkerWrapper(options) {\n  let objURL;\n  try {\n    objURL = blob && (window.URL || window.webkitURL).createObjectURL(blob);\n    if (!objURL) throw \"\";\n    const worker = new Worker(objURL, {\n      name: options == null ? void 0 : options.name\n    });\n    worker.addEventListener(\"error\", () => {\n      (window.URL || window.webkitURL).revokeObjectURL(objURL);\n    });\n    return worker;\n  } catch (e2) {\n    return new Worker(\n      \"data:text/javascript;base64,\" + encodedJs,\n      {\n        name: options == null ? void 0 : options.name\n      }\n    );\n  } finally {\n    objURL && (window.URL || window.webkitURL).revokeObjectURL(objURL);\n  }\n}\nclass CanvasManager {\n  constructor(options) {\n    __publicField(this, \"pendingCanvasMutations\", /* @__PURE__ */ new Map());\n    __publicField(this, \"rafStamps\", { latestId: 0, invokeId: null });\n    __publicField(this, \"mirror\");\n    __publicField(this, \"mutationCb\");\n    __publicField(this, \"resetObservers\");\n    __publicField(this, \"frozen\", false);\n    __publicField(this, \"locked\", false);\n    __publicField(this, \"processMutation\", (target, mutation) => {\n      const newFrame = this.rafStamps.invokeId && this.rafStamps.latestId !== this.rafStamps.invokeId;\n      if (newFrame || !this.rafStamps.invokeId)\n        this.rafStamps.invokeId = this.rafStamps.latestId;\n      if (!this.pendingCanvasMutations.has(target)) {\n        this.pendingCanvasMutations.set(target, []);\n      }\n      this.pendingCanvasMutations.get(target).push(mutation);\n    });\n    const {\n      sampling = \"all\",\n      win,\n      blockClass,\n      blockSelector,\n      recordCanvas,\n      dataURLOptions\n    } = options;\n    this.mutationCb = options.mutationCb;\n    this.mirror = options.mirror;\n    if (recordCanvas && sampling === \"all\")\n      this.initCanvasMutationObserver(win, blockClass, blockSelector);\n    if (recordCanvas && typeof sampling === \"number\")\n      this.initCanvasFPSObserver(sampling, win, blockClass, blockSelector, {\n        dataURLOptions\n      });\n  }\n  reset() {\n    this.pendingCanvasMutations.clear();\n    this.resetObservers && this.resetObservers();\n  }\n  freeze() {\n    this.frozen = true;\n  }\n  unfreeze() {\n    this.frozen = false;\n  }\n  lock() {\n    this.locked = true;\n  }\n  unlock() {\n    this.locked = false;\n  }\n  initCanvasFPSObserver(fps, win, blockClass, blockSelector, options) {\n    const canvasContextReset = initCanvasContextObserver(\n      win,\n      blockClass,\n      blockSelector,\n      true\n    );\n    const snapshotInProgressMap = /* @__PURE__ */ new Map();\n    const worker = new WorkerWrapper();\n    worker.onmessage = (e2) => {\n      const { id } = e2.data;\n      snapshotInProgressMap.set(id, false);\n      if (!(\"base64\" in e2.data)) return;\n      const { base64, type, width, height } = e2.data;\n      this.mutationCb({\n        id,\n        type: CanvasContext[\"2D\"],\n        commands: [\n          {\n            property: \"clearRect\",\n            // wipe canvas\n            args: [0, 0, width, height]\n          },\n          {\n            property: \"drawImage\",\n            // draws (semi-transparent) image\n            args: [\n              {\n                rr_type: \"ImageBitmap\",\n                args: [\n                  {\n                    rr_type: \"Blob\",\n                    data: [{ rr_type: \"ArrayBuffer\", base64 }],\n                    type\n                  }\n                ]\n              },\n              0,\n              0\n            ]\n          }\n        ]\n      });\n    };\n    const timeBetweenSnapshots = 1e3 / fps;\n    let lastSnapshotTime = 0;\n    let rafId;\n    const getCanvas = () => {\n      const matchedCanvas = [];\n      win.document.querySelectorAll(\"canvas\").forEach((canvas) => {\n        if (!isBlocked(canvas, blockClass, blockSelector, true)) {\n          matchedCanvas.push(canvas);\n        }\n      });\n      return matchedCanvas;\n    };\n    const takeCanvasSnapshots = (timestamp) => {\n      if (lastSnapshotTime && timestamp - lastSnapshotTime < timeBetweenSnapshots) {\n        rafId = requestAnimationFrame(takeCanvasSnapshots);\n        return;\n      }\n      lastSnapshotTime = timestamp;\n      getCanvas().forEach(async (canvas) => {\n        var _a2;\n        const id = this.mirror.getId(canvas);\n        if (snapshotInProgressMap.get(id)) return;\n        if (canvas.width === 0 || canvas.height === 0) return;\n        snapshotInProgressMap.set(id, true);\n        if ([\"webgl\", \"webgl2\"].includes(canvas.__context)) {\n          const context = canvas.getContext(canvas.__context);\n          if (((_a2 = context == null ? void 0 : context.getContextAttributes()) == null ? void 0 : _a2.preserveDrawingBuffer) === false) {\n            context.clear(context.COLOR_BUFFER_BIT);\n          }\n        }\n        const bitmap = await createImageBitmap(canvas);\n        worker.postMessage(\n          {\n            id,\n            bitmap,\n            width: canvas.width,\n            height: canvas.height,\n            dataURLOptions: options.dataURLOptions\n          },\n          [bitmap]\n        );\n      });\n      rafId = requestAnimationFrame(takeCanvasSnapshots);\n    };\n    rafId = requestAnimationFrame(takeCanvasSnapshots);\n    this.resetObservers = () => {\n      canvasContextReset();\n      cancelAnimationFrame(rafId);\n    };\n  }\n  initCanvasMutationObserver(win, blockClass, blockSelector) {\n    this.startRAFTimestamping();\n    this.startPendingCanvasMutationFlusher();\n    const canvasContextReset = initCanvasContextObserver(\n      win,\n      blockClass,\n      blockSelector,\n      false\n    );\n    const canvas2DReset = initCanvas2DMutationObserver(\n      this.processMutation.bind(this),\n      win,\n      blockClass,\n      blockSelector\n    );\n    const canvasWebGL1and2Reset = initCanvasWebGLMutationObserver(\n      this.processMutation.bind(this),\n      win,\n      blockClass,\n      blockSelector\n    );\n    this.resetObservers = () => {\n      canvasContextReset();\n      canvas2DReset();\n      canvasWebGL1and2Reset();\n    };\n  }\n  startPendingCanvasMutationFlusher() {\n    requestAnimationFrame(() => this.flushPendingCanvasMutations());\n  }\n  startRAFTimestamping() {\n    const setLatestRAFTimestamp = (timestamp) => {\n      this.rafStamps.latestId = timestamp;\n      requestAnimationFrame(setLatestRAFTimestamp);\n    };\n    requestAnimationFrame(setLatestRAFTimestamp);\n  }\n  flushPendingCanvasMutations() {\n    this.pendingCanvasMutations.forEach(\n      (_values, canvas) => {\n        const id = this.mirror.getId(canvas);\n        this.flushPendingCanvasMutationFor(canvas, id);\n      }\n    );\n    requestAnimationFrame(() => this.flushPendingCanvasMutations());\n  }\n  flushPendingCanvasMutationFor(canvas, id) {\n    if (this.frozen || this.locked) {\n      return;\n    }\n    const valuesWithType = this.pendingCanvasMutations.get(canvas);\n    if (!valuesWithType || id === -1) return;\n    const values = valuesWithType.map((value) => {\n      const { type: type2, ...rest } = value;\n      return rest;\n    });\n    const { type } = valuesWithType[0];\n    this.mutationCb({ id, type, commands: values });\n    this.pendingCanvasMutations.delete(canvas);\n  }\n}\nclass StylesheetManager {\n  constructor(options) {\n    __publicField(this, \"trackedLinkElements\", /* @__PURE__ */ new WeakSet());\n    __publicField(this, \"mutationCb\");\n    __publicField(this, \"adoptedStyleSheetCb\");\n    __publicField(this, \"styleMirror\", new StyleSheetMirror());\n    this.mutationCb = options.mutationCb;\n    this.adoptedStyleSheetCb = options.adoptedStyleSheetCb;\n  }\n  attachLinkElement(linkEl, childSn) {\n    if (\"_cssText\" in childSn.attributes)\n      this.mutationCb({\n        adds: [],\n        removes: [],\n        texts: [],\n        attributes: [\n          {\n            id: childSn.id,\n            attributes: childSn.attributes\n          }\n        ]\n      });\n    this.trackLinkElement(linkEl);\n  }\n  trackLinkElement(linkEl) {\n    if (this.trackedLinkElements.has(linkEl)) return;\n    this.trackedLinkElements.add(linkEl);\n    this.trackStylesheetInLinkElement(linkEl);\n  }\n  adoptStyleSheets(sheets, hostId) {\n    if (sheets.length === 0) return;\n    const adoptedStyleSheetData = {\n      id: hostId,\n      styleIds: []\n    };\n    const styles = [];\n    for (const sheet of sheets) {\n      let styleId;\n      if (!this.styleMirror.has(sheet)) {\n        styleId = this.styleMirror.add(sheet);\n        styles.push({\n          styleId,\n          rules: Array.from(sheet.rules || CSSRule, (r2, index2) => ({\n            rule: stringifyRule(r2, sheet.href),\n            index: index2\n          }))\n        });\n      } else styleId = this.styleMirror.getId(sheet);\n      adoptedStyleSheetData.styleIds.push(styleId);\n    }\n    if (styles.length > 0) adoptedStyleSheetData.styles = styles;\n    this.adoptedStyleSheetCb(adoptedStyleSheetData);\n  }\n  reset() {\n    this.styleMirror.reset();\n    this.trackedLinkElements = /* @__PURE__ */ new WeakSet();\n  }\n  // TODO: take snapshot on stylesheet reload by applying event listener\n  trackStylesheetInLinkElement(_linkEl) {\n  }\n}\nclass ProcessedNodeManager {\n  constructor() {\n    __publicField(this, \"nodeMap\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"active\", false);\n  }\n  inOtherBuffer(node2, thisBuffer) {\n    const buffers = this.nodeMap.get(node2);\n    return buffers && Array.from(buffers).some((buffer) => buffer !== thisBuffer);\n  }\n  add(node2, buffer) {\n    if (!this.active) {\n      this.active = true;\n      requestAnimationFrame(() => {\n        this.nodeMap = /* @__PURE__ */ new WeakMap();\n        this.active = false;\n      });\n    }\n    this.nodeMap.set(node2, (this.nodeMap.get(node2) || /* @__PURE__ */ new Set()).add(buffer));\n  }\n  destroy() {\n  }\n}\nlet wrappedEmit;\nlet takeFullSnapshot$1;\nlet canvasManager;\nlet recording = false;\ntry {\n  if (Array.from([1], (x2) => x2 * 2)[0] !== 2) {\n    const cleanFrame = document.createElement(\"iframe\");\n    document.body.appendChild(cleanFrame);\n    Array.from = ((_a = cleanFrame.contentWindow) == null ? void 0 : _a.Array.from) || Array.from;\n    document.body.removeChild(cleanFrame);\n  }\n} catch (err) {\n  console.debug(\"Unable to override Array.from\", err);\n}\nconst mirror = createMirror$2();\nfunction record(options = {}) {\n  const {\n    emit,\n    checkoutEveryNms,\n    checkoutEveryNth,\n    blockClass = \"rr-block\",\n    blockSelector = null,\n    ignoreClass = \"rr-ignore\",\n    ignoreSelector = null,\n    maskTextClass = \"rr-mask\",\n    maskTextSelector = null,\n    inlineStylesheet = true,\n    maskAllInputs,\n    maskInputOptions: _maskInputOptions,\n    slimDOMOptions: _slimDOMOptions,\n    maskInputFn,\n    maskTextFn,\n    hooks,\n    packFn,\n    sampling = {},\n    dataURLOptions = {},\n    mousemoveWait,\n    recordDOM = true,\n    recordCanvas = false,\n    recordCrossOriginIframes = false,\n    recordAfter = options.recordAfter === \"DOMContentLoaded\" ? options.recordAfter : \"load\",\n    userTriggeredOnInput = false,\n    collectFonts = false,\n    inlineImages = false,\n    plugins,\n    keepIframeSrcFn = () => false,\n    ignoreCSSAttributes = /* @__PURE__ */ new Set([]),\n    errorHandler: errorHandler2,\n    applyBackgroundColorToBlockedElements = false\n  } = options;\n  registerErrorHandler(errorHandler2);\n  const inEmittingFrame = recordCrossOriginIframes ? window.parent === window : true;\n  let passEmitsToParent = false;\n  if (!inEmittingFrame) {\n    try {\n      if (window.parent.document) {\n        passEmitsToParent = false;\n      }\n    } catch (e2) {\n      passEmitsToParent = true;\n    }\n  }\n  if (inEmittingFrame && !emit) {\n    throw new Error(\"emit function is required\");\n  }\n  if (!inEmittingFrame && !passEmitsToParent) {\n    return () => {\n    };\n  }\n  if (mousemoveWait !== void 0 && sampling.mousemove === void 0) {\n    sampling.mousemove = mousemoveWait;\n  }\n  mirror.reset();\n  const maskInputOptions = maskAllInputs === true ? {\n    color: true,\n    date: true,\n    \"datetime-local\": true,\n    email: true,\n    month: true,\n    number: true,\n    range: true,\n    search: true,\n    tel: true,\n    text: true,\n    time: true,\n    url: true,\n    week: true,\n    textarea: true,\n    select: true,\n    password: true\n  } : _maskInputOptions !== void 0 ? _maskInputOptions : { password: true };\n  const slimDOMOptions = _slimDOMOptions === true || _slimDOMOptions === \"all\" ? {\n    script: true,\n    comment: true,\n    headFavicon: true,\n    headWhitespace: true,\n    headMetaSocial: true,\n    headMetaRobots: true,\n    headMetaHttpEquiv: true,\n    headMetaVerification: true,\n    // the following are off for slimDOMOptions === true,\n    // as they destroy some (hidden) info:\n    headMetaAuthorship: _slimDOMOptions === \"all\",\n    headMetaDescKeywords: _slimDOMOptions === \"all\",\n    headTitleMutations: _slimDOMOptions === \"all\"\n  } : _slimDOMOptions ? _slimDOMOptions : {};\n  polyfill$1();\n  let lastFullSnapshotEvent;\n  let incrementalSnapshotCount = 0;\n  const eventProcessor = (e2) => {\n    for (const plugin3 of plugins || []) {\n      if (plugin3.eventProcessor) {\n        e2 = plugin3.eventProcessor(e2);\n      }\n    }\n    if (packFn && // Disable packing events which will be emitted to parent frames.\n    !passEmitsToParent) {\n      e2 = packFn(e2);\n    }\n    return e2;\n  };\n  wrappedEmit = (r2, isCheckout) => {\n    var _a2;\n    const e2 = r2;\n    e2.timestamp = nowTimestamp();\n    if (((_a2 = mutationBuffers[0]) == null ? void 0 : _a2.isFrozen()) && e2.type !== EventType.FullSnapshot && !(e2.type === EventType.IncrementalSnapshot && e2.data.source === IncrementalSource.Mutation)) {\n      mutationBuffers.forEach((buf) => buf.unfreeze());\n    }\n    if (inEmittingFrame) {\n      emit == null ? void 0 : emit(eventProcessor(e2), isCheckout);\n    } else if (passEmitsToParent) {\n      const message = {\n        type: \"rrweb\",\n        event: eventProcessor(e2),\n        origin: window.location.origin,\n        isCheckout\n      };\n      window.parent.postMessage(message, \"*\");\n    }\n    if (e2.type === EventType.FullSnapshot) {\n      lastFullSnapshotEvent = e2;\n      incrementalSnapshotCount = 0;\n    } else if (e2.type === EventType.IncrementalSnapshot) {\n      if (e2.data.source === IncrementalSource.Mutation && e2.data.isAttachIframe) {\n        return;\n      }\n      incrementalSnapshotCount++;\n      const exceedCount = checkoutEveryNth && incrementalSnapshotCount >= checkoutEveryNth;\n      const exceedTime = checkoutEveryNms && e2.timestamp - lastFullSnapshotEvent.timestamp > checkoutEveryNms;\n      if (exceedCount || exceedTime) {\n        takeFullSnapshot$1(true);\n      }\n    }\n  };\n  const wrappedMutationEmit = (m) => {\n    wrappedEmit({\n      type: EventType.IncrementalSnapshot,\n      data: {\n        source: IncrementalSource.Mutation,\n        ...m\n      }\n    });\n  };\n  const wrappedScrollEmit = (p) => wrappedEmit({\n    type: EventType.IncrementalSnapshot,\n    data: {\n      source: IncrementalSource.Scroll,\n      ...p\n    }\n  });\n  const wrappedCanvasMutationEmit = (p) => wrappedEmit({\n    type: EventType.IncrementalSnapshot,\n    data: {\n      source: IncrementalSource.CanvasMutation,\n      ...p\n    }\n  });\n  const wrappedAdoptedStyleSheetEmit = (a2) => wrappedEmit({\n    type: EventType.IncrementalSnapshot,\n    data: {\n      source: IncrementalSource.AdoptedStyleSheet,\n      ...a2\n    }\n  });\n  const stylesheetManager = new StylesheetManager({\n    mutationCb: wrappedMutationEmit,\n    adoptedStyleSheetCb: wrappedAdoptedStyleSheetEmit\n  });\n  const iframeManager = new IframeManager({\n    mirror,\n    mutationCb: wrappedMutationEmit,\n    stylesheetManager,\n    recordCrossOriginIframes,\n    wrappedEmit\n  });\n  for (const plugin3 of plugins || []) {\n    if (plugin3.getMirror)\n      plugin3.getMirror({\n        nodeMirror: mirror,\n        crossOriginIframeMirror: iframeManager.crossOriginIframeMirror,\n        crossOriginIframeStyleMirror: iframeManager.crossOriginIframeStyleMirror\n      });\n  }\n  const processedNodeManager = new ProcessedNodeManager();\n  canvasManager = new CanvasManager({\n    recordCanvas,\n    mutationCb: wrappedCanvasMutationEmit,\n    win: window,\n    blockClass,\n    blockSelector,\n    mirror,\n    sampling: sampling.canvas,\n    dataURLOptions\n  });\n  const shadowDomManager = new ShadowDomManager({\n    mutationCb: wrappedMutationEmit,\n    scrollCb: wrappedScrollEmit,\n    bypassOptions: {\n      blockClass,\n      blockSelector,\n      maskTextClass,\n      maskTextSelector,\n      inlineStylesheet,\n      maskInputOptions,\n      dataURLOptions,\n      maskTextFn,\n      maskInputFn,\n      recordCanvas,\n      inlineImages,\n      sampling,\n      slimDOMOptions,\n      iframeManager,\n      stylesheetManager,\n      canvasManager,\n      keepIframeSrcFn,\n      processedNodeManager\n    },\n    mirror\n  });\n  takeFullSnapshot$1 = (isCheckout = false) => {\n    if (!recordDOM) {\n      return;\n    }\n    wrappedEmit(\n      {\n        type: EventType.Meta,\n        data: {\n          href: window.location.href,\n          width: getWindowWidth(),\n          height: getWindowHeight()\n        }\n      },\n      isCheckout\n    );\n    stylesheetManager.reset();\n    shadowDomManager.init();\n    mutationBuffers.forEach((buf) => buf.lock());\n    const node2 = snapshot(document, {\n      mirror,\n      blockClass,\n      blockSelector,\n      maskTextClass,\n      maskTextSelector,\n      inlineStylesheet,\n      maskAllInputs: maskInputOptions,\n      maskTextFn,\n      maskInputFn,\n      slimDOM: slimDOMOptions,\n      dataURLOptions,\n      recordCanvas,\n      inlineImages,\n      applyBackgroundColorToBlockedElements,\n      onSerialize: (n2) => {\n        if (isSerializedIframe(n2, mirror)) {\n          iframeManager.addIframe(n2);\n        }\n        if (isSerializedStylesheet(n2, mirror)) {\n          stylesheetManager.trackLinkElement(n2);\n        }\n        if (hasShadowRoot(n2)) {\n          shadowDomManager.addShadowRoot(index.shadowRoot(n2), document);\n        }\n      },\n      onIframeLoad: (iframe, childSn) => {\n        iframeManager.attachIframe(iframe, childSn);\n        shadowDomManager.observeAttachShadow(iframe);\n      },\n      onStylesheetLoad: (linkEl, childSn) => {\n        stylesheetManager.attachLinkElement(linkEl, childSn);\n      },\n      keepIframeSrcFn\n    });\n    if (!node2) {\n      return console.warn(\"Failed to snapshot the document\");\n    }\n    wrappedEmit(\n      {\n        type: EventType.FullSnapshot,\n        data: {\n          node: node2,\n          initialOffset: getWindowScroll(window)\n        }\n      },\n      isCheckout\n    );\n    mutationBuffers.forEach((buf) => buf.unlock());\n    if (document.adoptedStyleSheets && document.adoptedStyleSheets.length > 0)\n      stylesheetManager.adoptStyleSheets(\n        document.adoptedStyleSheets,\n        mirror.getId(document)\n      );\n  };\n  try {\n    const handlers = [];\n    const observe = (doc) => {\n      var _a2;\n      return callbackWrapper(initObservers)(\n        {\n          mutationCb: wrappedMutationEmit,\n          mousemoveCb: (positions, source) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source,\n              positions\n            }\n          }),\n          mouseInteractionCb: (d) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.MouseInteraction,\n              ...d\n            }\n          }),\n          scrollCb: wrappedScrollEmit,\n          viewportResizeCb: (d) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.ViewportResize,\n              ...d\n            }\n          }),\n          inputCb: (v2) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.Input,\n              ...v2\n            }\n          }),\n          mediaInteractionCb: (p) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.MediaInteraction,\n              ...p\n            }\n          }),\n          styleSheetRuleCb: (r2) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.StyleSheetRule,\n              ...r2\n            }\n          }),\n          styleDeclarationCb: (r2) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.StyleDeclaration,\n              ...r2\n            }\n          }),\n          canvasMutationCb: wrappedCanvasMutationEmit,\n          fontCb: (p) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.Font,\n              ...p\n            }\n          }),\n          selectionCb: (p) => {\n            wrappedEmit({\n              type: EventType.IncrementalSnapshot,\n              data: {\n                source: IncrementalSource.Selection,\n                ...p\n              }\n            });\n          },\n          customElementCb: (c2) => {\n            wrappedEmit({\n              type: EventType.IncrementalSnapshot,\n              data: {\n                source: IncrementalSource.CustomElement,\n                ...c2\n              }\n            });\n          },\n          blockClass,\n          ignoreClass,\n          ignoreSelector,\n          maskTextClass,\n          maskTextSelector,\n          maskInputOptions,\n          inlineStylesheet,\n          sampling,\n          recordDOM,\n          recordCanvas,\n          inlineImages,\n          userTriggeredOnInput,\n          collectFonts,\n          doc,\n          maskInputFn,\n          maskTextFn,\n          keepIframeSrcFn,\n          blockSelector,\n          slimDOMOptions,\n          dataURLOptions,\n          mirror,\n          iframeManager,\n          stylesheetManager,\n          shadowDomManager,\n          processedNodeManager,\n          canvasManager,\n          ignoreCSSAttributes,\n          plugins: ((_a2 = plugins == null ? void 0 : plugins.filter((p) => p.observer)) == null ? void 0 : _a2.map((p) => ({\n            observer: p.observer,\n            options: p.options,\n            callback: (payload) => wrappedEmit({\n              type: EventType.Plugin,\n              data: {\n                plugin: p.name,\n                payload\n              }\n            })\n          }))) || []\n        },\n        hooks\n      );\n    };\n    iframeManager.addLoadListener((iframeEl) => {\n      try {\n        handlers.push(observe(iframeEl.contentDocument));\n      } catch (error) {\n        console.warn(error);\n      }\n    });\n    const init = () => {\n      takeFullSnapshot$1();\n      handlers.push(observe(document));\n      recording = true;\n    };\n    if (document.readyState === \"interactive\" || document.readyState === \"complete\") {\n      init();\n    } else {\n      handlers.push(\n        on(\"DOMContentLoaded\", () => {\n          wrappedEmit({\n            type: EventType.DomContentLoaded,\n            data: {}\n          });\n          if (recordAfter === \"DOMContentLoaded\") init();\n        })\n      );\n      handlers.push(\n        on(\n          \"load\",\n          () => {\n            wrappedEmit({\n              type: EventType.Load,\n              data: {}\n            });\n            if (recordAfter === \"load\") init();\n          },\n          window\n        )\n      );\n    }\n    return () => {\n      handlers.forEach((h) => h());\n      processedNodeManager.destroy();\n      recording = false;\n      unregisterErrorHandler();\n    };\n  } catch (error) {\n    console.warn(error);\n  }\n}\nrecord.addCustomEvent = (tag, payload) => {\n  if (!recording) {\n    throw new Error(\"please add custom event after start recording\");\n  }\n  wrappedEmit({\n    type: EventType.Custom,\n    data: {\n      tag,\n      payload\n    }\n  });\n};\nrecord.freezePage = () => {\n  mutationBuffers.forEach((buf) => buf.freeze());\n};\nrecord.takeFullSnapshot = (isCheckout) => {\n  if (!recording) {\n    throw new Error(\"please take full snapshot after start recording\");\n  }\n  takeFullSnapshot$1(isCheckout);\n};\nrecord.mirror = mirror;\nvar n;\n!function(t2) {\n  t2[t2.NotStarted = 0] = \"NotStarted\", t2[t2.Running = 1] = \"Running\", t2[t2.Stopped = 2] = \"Stopped\";\n}(n || (n = {}));\nexport {\n  record\n};\n//# sourceMappingURL=rrweb-record.js.map\n","import { __awaiter, __generator } from \"tslib\";\nimport { getGlobalScope } from '@amplitude/analytics-core';\nvar NetworkObservers = /** @class */ (function () {\n    function NetworkObservers() {\n        this.fetchObserver = null;\n    }\n    NetworkObservers.prototype.start = function (eventCallback) {\n        this.eventCallback = eventCallback;\n        this.observeFetch();\n    };\n    NetworkObservers.prototype.stop = function () {\n        var _a;\n        (_a = this.fetchObserver) === null || _a === void 0 ? void 0 : _a.call(this);\n        this.fetchObserver = null;\n        this.eventCallback = undefined;\n    };\n    NetworkObservers.prototype.notifyEvent = function (event) {\n        var _a;\n        (_a = this.eventCallback) === null || _a === void 0 ? void 0 : _a.call(this, event);\n    };\n    NetworkObservers.prototype.observeFetch = function () {\n        var _this = this;\n        var globalScope = getGlobalScope();\n        if (!globalScope)\n            return;\n        var originalFetch = globalScope.fetch;\n        if (!originalFetch)\n            return;\n        globalScope.fetch = function (input, init) { return __awaiter(_this, void 0, void 0, function () {\n            var startTime, requestEvent, response, endTime, headers_1, error_1, endTime, typedError;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        startTime = Date.now();\n                        requestEvent = {\n                            timestamp: startTime,\n                            type: 'fetch',\n                            method: (init === null || init === void 0 ? void 0 : init.method) || 'GET',\n                            url: input.toString(),\n                            requestHeaders: init === null || init === void 0 ? void 0 : init.headers,\n                        };\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, originalFetch(input, init)];\n                    case 2:\n                        response = _a.sent();\n                        endTime = Date.now();\n                        requestEvent.status = response.status;\n                        requestEvent.duration = endTime - startTime;\n                        headers_1 = {};\n                        response.headers.forEach(function (value, key) {\n                            headers_1[key] = value;\n                        });\n                        requestEvent.responseHeaders = headers_1;\n                        this.notifyEvent(requestEvent);\n                        return [2 /*return*/, response];\n                    case 3:\n                        error_1 = _a.sent();\n                        endTime = Date.now();\n                        requestEvent.duration = endTime - startTime;\n                        typedError = error_1;\n                        requestEvent.error = {\n                            name: typedError.name || 'UnknownError',\n                            message: typedError.message || 'An unknown error occurred',\n                        };\n                        this.notifyEvent(requestEvent);\n                        throw error_1;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        }); };\n        this.fetchObserver = function () {\n            globalScope.fetch = originalFetch;\n        };\n    };\n    return NetworkObservers;\n}());\nexport { NetworkObservers };\n//# sourceMappingURL=observers.js.map"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","IdentifyOperation","SpecialEventType","__assign","assign","t","s","i","n","arguments","length","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","_","label","sent","trys","ops","g","Iterator","verb","Symbol","iterator","v","op","pop","push","__values","o","m","__read","r","ar","error","__spreadArray","to","from","pack","l","slice","concat","SuppressedError","Status","STORAGE_PREFIX","DEFAULT_INSTANCE_NAME","AMPLITUDE_SERVER_URL","LogLevel","getGlobalScope","ampIntegrationContextName","globalThis","window","self","global","returnWrapper","awaitable","promise","PREFIX","Logger","logLevel","None","disable","enable","Warn","log","args","_i","Verbose","console","join","warn","Error","debug","Debug","getDefaultConfig","flushMaxRetries","flushQueueSize","flushIntervalMillis","instanceName","loggerProvider","offline","optOut","serverUrl","serverZone","useBatch","Config","options","_a","_b","_c","_d","_optOut","defaultConfig","apiKey","minIdLength","plan","ingestionMetadata","undefined","storageProvider","transportProvider","serverConfig","createServerConfig","defineProperty","get","set","enumerable","configurable","getServerUrl","_serverZone","includes","ApplicationContextProviderImpl","getApplicationContext","versionName","language","getLanguage","platform","os","deviceModel","navigator","languages","EventBridgeImpl","queue","logEvent","event","receiver","setEventReceiver","forEach","isEqual","obj1","obj2","e_1","typeA","primitive_1","primitive_1_1","e_1_1","return","isArrayA","isArray","isArrayB","sorted1","keys","sort","sorted2","result_1","key","entries","obj","ownProps","resArray","ServerZone","IdentityStoreImpl","identity","userProperties","listeners","Set","editIdentity","actingUserProperties","actingIdentity","setUserId","userId","setDeviceId","deviceId","setUserProperties","setOptOut","updateUserProperties","actions","e_2","e_3","actingProperties","_e","_f","action","properties","_g","_h","_j","e_2_1","_k","_l","e_3_1","commit","setIdentity","getIdentity","originalIdentity","listener","addIdentityListener","add","removeIdentityListener","delete","safeGlobal","AnalyticsConnector","identityStore","eventBridge","applicationContextProvider","getInstance","debugWrapper","fn","fnName","getLogConfig","getStates","fnContext","logger","ignoreDepth","debugContext","type","name","stacktrace","stack","split","map","text","trim","time","start","Date","toISOString","states","before","after","end","JSON","stringify","BaseTransport","send","_serverUrl","_payload","buildResponse","responseJSON","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","statusCode","code","status","buildStatus","Success","eventsIngested","events_ingested","payloadSizeBytes","payload_size_bytes","serverUploadTime","server_upload_time","Invalid","missingField","missing_field","eventsWithInvalidFields","events_with_invalid_fields","eventsWithMissingFields","events_with_missing_fields","eventsWithInvalidIdLengths","events_with_invalid_id_lengths","epsThreshold","eps_threshold","exceededDailyQuotaDevices","exceeded_daily_quota_devices","silencedDevices","silenced_devices","silencedEvents","silenced_events","throttledDevices","throttled_devices","throttledEvents","throttled_events","PayloadTooLarge","RateLimit","throttledUsers","throttled_users","exceededDailyQuotaUsers","exceeded_daily_quota_users","Timeout","Failed","Unknown","FetchTransport","_super","payload","response","responseText","fetch","headers","Accept","method","parse","CustomRRwebEvent","DEFAULT_EVENT_PROPERTY_PREFIX","DEFAULT_SESSION_REPLAY_PROPERTY","DEFAULT_SERVER_ZONE","US","DEFAULT_PERFORMANCE_CONFIG","enabled","SESSION_REPLAY_DEBUG_PROPERTY","MASK_TEXT_CLASS","SafeLoggerProvider","getSafeMethod","__rrweb_original__","bind","DEFAULT_MASK_LEVEL","isMaskedForLevel","elementType","level","element","inputType","hasAttribute","toLowerCase","getInputType","autocomplete","startsWith","maskFn","config","defaultMaskLevel","closest","shouldMask","maskSelector","some","selector","shouldUnmask","unmaskSelector","isMasked","replace","generateHashCode","str","hash","charCodeAt","trackServerUrl","STAGING","EU","getPageUrl","pageUrl","ugcFilterRules","glob","escaped","ugcFilterRules_1","ugcFilterRules_1_1","rule","regex","RegExp","test","replacement","getStorageSize","globalScope","usage","quota","usageDetails","totalStorageSize","percentOfQuota","storage","estimate","Math","round","Number","EPSILON","getDebugConfig","debugConfig","substring","SessionReplayLocalConfig","_this","sampleRate","configServerUrl","shouldInlineStylesheet","version","performanceConfig","storeType","applyBackgroundColorToBlockedElements","enableUrlChangePolling","urlChangePollingInterval","captureDocumentTitle","privacyConfig","interactionConfig","every","globUrl","validateUGCFilterRules","debugMode","experimental","omitElementTags","EventType","EventType2","MouseInteractions","MouseInteractions2","TIMEOUT_MESSAGE","UNEXPECTED_ERROR_MESSAGE","RemoteConfigFetch","localConfig","configKeys","retryTimeout","attempts","sessionTargetingMatch","metrics","getRemoteNamespaceConfig","configNamespace","sessionId","fetchStartTime","configAPIResponse","remoteConfig","now","fetchWithTimeout","configs","fetchTimeAPISuccess","fetchTimeAPIFail","getRemoteConfig","namespaceConfig","controller","timeoutId","AbortController","setTimeout","abort","fetchRemoteConfig","signal","clearTimeout","urlParams","configKey","res","knownError","lastFetchedSessionId","completeRequest","err","aborted","URLSearchParams","api_key","append","toString","parseAndStoreConfig","retryFetch","message","json","success","createRemoteConfigFetch","SessionReplayJoinedConfigGenerator","remoteConfigFetch","generateJoinedConfig","samplingConfig_1","targetingConfig_1","err_1","samplingConfig","remotePrivacyConfig","targetingConfig","localPrivacyConfig","joinedPrivacyConfig","privacyConfigSelectorMap","selectorMap","selectorType","captureEnabled","sr_sampling_config","sr_privacy_config","sr_targeting_config","sr_interaction_config","loggingConfig","sr_logging_config","joinedConfig","capture_enabled","sample_rate","blockSelector","e_4","e_4_1","fragment","document","createDocumentFragment","dropInvalidSelectors","selectors","filter","querySelector","removeInvalidSelectorsFromPrivacyConfig","createSessionReplayJoinedConfigGenerator","u8","Uint8Array","u16","Uint16Array","u32","Uint32Array","fleb","fdeb","clim","freb","eb","j","fl","revfl","revfd","rev","x","hMap","cd","mb","co","le","rvb","sv","r_1","flt","fdt","flm","fdm","shft","slc","subarray","wbits","wbits16","hTree","t2","a","i0","i1","i2","maxSym","tr","mbt","ln","dt","lft","cst","i2_1","i2_2","i2_3","max","lc","c","cl","cli","cln","cls","w","clen","cf","wfblk","out","pos","dat","wblk","final","syms","lf","df","li","bs","bl","_a2","dlt","mlb","_b2","ddt","mdb","lclt","nlc","lcdt","ndc","lcfreq","lct","mlcb","nlcc","lm","ll","dm","dl","flen","ftlen","dtlen","llm","lcts","it","clct","len","dst","deo","dopt","opt","pre","post","st","lvl","plvl","lst","floor","msk_1","prev","head","bs1_1","ceil","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","min","maxd","ml","nl","mmd","md","ti","lin","din","dflt","mem","zlibSync","data","opts","adler","lv","fl2","wbytes","latin1","TextDecoder","decode","fromCharCode","strFromU8","TextEncoder","encode","ai","strToU8","EventCompressor","eventsManager","workerScriptInternal","taskQueue","isProcessing","compressEvent","packedEvent","addCompressedEventToManager","compressedEvent","addEvent","addCompressedEvent","worker","postMessage","terminate","canUseIdleCallback","timeout","workerScript","useWebWorker","Worker","URL","createObjectURL","Blob","onerror","onmessage","scheduleIdleProcessing","requestIdleCallback","idleDeadline","processQueue","enqueueEvent","timeRemaining","didTimeout","task","shift","event_1","STORAGE_FAILURE","VERSION","SessionReplayTrackDestination","payloadBatcher","storageKey","scheduled","sendEventsList","destinationData","addToQueue","list","context","schedule","flush","useRetry","later","all","url","sessionReplayLibrary","responseBody","location","href","device_id","session_id","events","Authorization","handleReponse","handleSuccessResponse","handleOtherResponse","sizeOfEventsList","size","onComplete","instanceOfAny","object","constructors","idbProxyableTypes","cursorAdvanceMethods","transactionDoneMap","WeakMap","transformCache","reverseTransformCache","idbProxyTraps","target","prop","IDBTransaction","objectStoreNames","objectStore","wrap","has","replaceTraps","callback","wrapFunction","func","IDBCursor","advance","continue","continuePrimaryKey","unwrap","request","transformCachableValue","tx","unlisten","removeEventListener","complete","DOMException","addEventListener","cacheDonePromiseForTransaction","IDBDatabase","IDBObjectStore","IDBIndex","Proxy","IDBRequest","promisifyRequest","newValue","openDB","blocked","upgrade","blocking","terminated","indexedDB","open","openPromise","oldVersion","newVersion","transaction","db","catch","readMethods","writeMethods","cachedMethods","Map","getMethod","targetFuncName","useIndex","isWrite","async","storeName","store","index","oldTraps","advanceMethodProps","methodMap","advanceResults","ittrProxiedCursorToOriginalProxy","cursorIteratorTraps","cachedFunc","iterate","cursor","openCursor","proxiedCursor","isIteratorProp","asyncIterator","RecordingStatus","BaseEventsStore","minInterval","maxInterval","maxPersistedEventsSize","interval","_timeAtLastSplit","shouldSplitEventsList","nextEventString","sizeOfNextEvent","getStringSize","getEventsArraySize","timeAtLastSplit","totalSize","events_1","events_1_1","currentSequenceKey","sequencesToSendKey","keyValDatabaseExists","request_1","onupgradeneeded","close","deleteDatabase","onsuccess","batchPromiseAll","promiseBatch","batch","splice","defineObjectStores","sequencesStore","currentSequenceStore","contains","createObjectStore","keyPath","autoIncrement","createIndex","createStore","dbName","SessionReplayEventsIDBStore","getSequencesToSend","sequences","sequenceId","storeCurrentSequence","currentSequenceData","put","addEventToCurrentSequence","sequenceEvents","eventsToSend","updatedEvents","storeSendingEvents","cleanUpSessionEventsStore","_sessionId","e_5","transitionFromKeyValStore","keyValDb","transitionCurrentSessionSequences_1","getAllRequest_1","transitionPromise","e_6","e_7","numericSessionId","sessionStore","currentSessionSequences","promisesToBatch","sessionSequences","numericSequenceId","parseInt","sequence","currentSequenceId","eventAddPromises","SENT","getAll","storedReplaySessionContextList","storedReplaySessionContexts","promisesToBatch_1","storedSessionId","oldSessionStore","oldSessionSequences_1","new","dbSuffix","eventsIDBStore","e_8","getCurrentSequenceEvents","allEvents","e_9_1","e_9","InMemoryEventsStore","finalizedSequences","resetCurrentSequence","addSequence","sequenceReturn","createEventsManager","trackDestination","getMemoryStore","getIdbStoreOrFallback","sendCurrentSequenceEvents","sendStoredEvents","currentSequence","sequencesToSend","sequenceToSend","MultiEventManager","managers","managersMap","manager","promises","testableAccessors","Node","ShadowRoot","Element","MutationObserver","testableMethods","untaintedBasePrototype","getUntaintedPrototype","candidate","angularUnpatchedVersionSymbol","Zone","__symbol__","angularZoneUnpatchedAlternative","defaultPrototype","accessorNames","isUntaintedAccessors","Boolean","accessor","getOwnPropertyDescriptor","methodNames","isUntaintedMethods","iframeEl","createElement","appendChild","win","contentWindow","untaintedObject","removeChild","untaintedAccessorCache","getUntaintedAccessor","instance","cacheKey","untaintedPrototype","untaintedAccessor","untaintedMethodCache","getUntaintedMethod","untaintedMethod","childNodes","parentNode","parentElement","textContent","other","getRootNode","host","styleSheets","shadowRoot","querySelectorAll","mutationObserver","getWindowHeight","innerHeight","documentElement","clientHeight","getWindowWidth","innerWidth","clientWidth","rootDocument","finder","input","nodeType","ELEMENT_NODE","tagName","defaults","root","idName","_name","className","attr","_value","seedMinLength","optimizedMinLength","threshold","maxNumberOfTries","timeoutMs","rootNode","DOCUMENT_NODE","ownerDocument","findRootDocument","path","bottomUpSearch","optimized","optimize","limit","fallback","current","_loop_1","elapsedTime","getTime","maybe","elementId","getAttribute","CSS","escape","penalty","id","attrs","attributes","names","classList","classNames","nth","parent","child","firstChild","nextSibling","dispensableNth","node","nthChild","level_1","level_1_1","findUniquePath","paths","combinations","paths_1","paths_1_1","unique","query","reduce","acc","css","notEmpty","scope","newPath","newPathKey","counter","visited","same","clickNonBatcher","clickEvents","evt","record","count","clickBatcher","reduced","curr","timestamp","hour","k","values","clickHook","deviceIdFn","mirror","Click","getNode","doc","left","scrollingElement","scrollLeft","pageXOffset","dom","top","scrollTop","pageYOffset","getWindowScroll","viewportHeight","viewportWidth","BeaconTransport","sendBeacon","sendXhr","xhr","XMLHttpRequest","setRequestHeader","basePageUrl","ScrollWatcher","transport","hook","update","maxScrollX","_maxScrollX","maxScrollY","_maxScrollY","maxScrollWidth","_maxScrollWidth","maxScrollHeight","_maxScrollHeight","default","width","height","SessionIdentifiers","sessionReplayId","generateSessionReplayId","TargetingIDBStore","dbs","openOrCreateDB","getTargetingMatchForSession","sessionIdStr","targetingMatchForSession","targetingMatch","storeTargetingMatchForSession","lastUpdated","clearStoreOfOldSessions","currentSessionId","currentSessionIdStr","allTargetingMatchObjs","targetingMatchObj","amountOfTimeSinceSession","targetingIDBStore","evaluateTargetingAndStore","targetingParams","targetingResult","index$3","evaluateTargetingPackage","evaluateTargeting","flag","createUrlTrackingPlugin","observer","cb","pluginOptions","enablePolling","pollingInterval","lastTrackedUrl","getCurrentUrl","emitUrlChange","currentUrl","currentTitle","title","createUrlChangeEvent","createHistoryMethodPatch","originalMethod","hashChangeHandler","urlChangeInterval_1","setInterval","clearInterval","history","originalPushState_1","pushState","originalReplaceState_1","replaceState","RevenueProperty","SessionReplay","recordCancelCallback","eventCount","pageLeaveFns","recordFunction","teardownEventListeners","teardown","blurListener","focusListener","pageLeaveListener","sendEvents","recordEvents","evaluateTargetingAndCapture","isInit","eventForTargeting","identifiers","lastTargetingParams","event_type","initialize","addCustomRRWebEvent","eventName","eventData","addStorageInfo","debugInfo","storageSizeData","METADATA","addCustomEvent","stopRecordingEvents","networkObservers","stop","typedError","init","_init","scrollWatcher","rrwebEventManager","error_1","interactionEventManager","error_2","joinedConfigGenerator","setMetadata","getDeviceId","scrollHook","trackEveryNms","eventCompressor","initializeNetworkObservers","setSessionId","asyncSetSessionId","previousSessionId","deviceIdForReplayId","lastShouldRecordDecision","getSessionReplayProperties","shouldRecord","getShouldRecord","eventProperties","appHash","GET_SR_PROPS","sessionIdToSend","shouldSendStoredEvents","shouldOptOut","identityStoreOptOut","hashNumber","matched","abs","TARGETING_DECISION","getBlockSelectors","getMaskTextSelectors","getRecordingPlugins","plugins","urlTrackingPlugin","getRecordConsolePlugin","error_3","rrwebPluginConsoleRecord","levels","getRecordFunction","error_4","rrwebRecord","shouldLogMetadata","hooks","error_5","FETCH_REQUEST","mouseInteraction","scroll","emit","RRWebEventType","Meta","inlineStylesheet","maskAllInputs","maskTextClass","blockClass","maskInputFn","maskTextFn","maskTextSelector","recordCanvas","slimDOMOptions","script","comment","errorHandler","_external_","DEBUG_INFO","metadata","getSessionId","shutdown","mapSDKType","sdkType","replaySDKVersion","standaloneSDKVersion","hashValue","replaySDKType","standaloneSDKType","NetworkObserversClass","error_6","network","observers","NetworkObservers","sessionReplay","createInstance","PROPERTY_ADD_OPERATIONS","SET","SET_ONCE","ADD","APPEND","PREPEND","POSTINSERT","SessionReplayPlugin","pluginName","forceSessionTracking","srInitOptions","setup","_client","defaultTracking","pageViews","formInteractions","fileDownloads","sessions","customSessionId","onSessionIdChanged","onOptOutChanged","execute","sessionRecordingProperties","event_properties","IDENTIFY","user_properties","userPropertiesObj","identifyKey","typedUserPropertiesOperation","parseUserProperties","sessionReplayPlugin","EvaluationOperator","C1_32","C2_32","hash32x86","seed","stringToUtf8ByteArray","nBlocks","readIntLe","mix32","k1","imul","rotateLeft","fmix32","kResult","hashResult","reverseBytes","select","selectable","selector_1","selector_1_1","selectorElement","VERSION_PATTERN","SemanticVersion","major","minor","patch","preRelease","matchGroup","exec","isNaN","compareTo","EvaluationEngine","evaluate","flags","results","flags_1","flags_1_1","variant","evaluateFlag","segments","segment","evaluateSegment","conditions","variantKey","bucket","variants","match","conditions_1","conditions_1_1","condition","matchCondition","propValue","isSetOperator","propValueStringList","coerceStringArray","matchSet","propValueString","coerceString","matchString","matchNull","getHash","bucketingValue","keyToHash","salt","allocationValue","distributionValue","allocations","allocation","allocationStart","range","allocationEnd","distributions","distribution","distributionStart","distributionEnd","e_6_1","e_5_1","filterValues","containsNone","propValues","setEquals","matchesSetContainsAll","matchesSetContainsAny","matchesIs","matchesContains","matchesComparable","parseNumber","comparator","versionComparator","matchesRegex","containsBooleans","lower_1","filterValues_1","filterValues_1_1","filterValue","e_7_1","typeTransformer","typeComparator","propValueTransformed","filterValuesTransformed","filterValueTransformed","stringValue","parsedValue","xa","ya","xs","ys","filterValues_2","filterValues_2_1","e_8_1","filterValues_3","filterValues_3_1","tab","FetchError","updateEventListForSession","eventType","eventTime","sessionData","eventTypes","eventTypeStore","updatedEventTypes","updatedSessionData","deleteOldSessionEventTypes","allSessions","session","storeEventTypeForSession","Targeting","eventStrings","event_types","user","evaluationEngine","targeting","__defProp","__publicField","writable","__defNormalProp","__defProp2","__publicField2","__defNormalProp2","__defProp$1","__publicField$1","__defNormalProp$1","testableAccessors$1","testableMethods$1","untaintedBasePrototype$1","getUntaintedPrototype$1","angularZoneUnpatchedAlternative$1","untaintedAccessorCache$1","getUntaintedAccessor$1","untaintedMethodCache$1","getUntaintedMethod$1","index$1","n2","Mirror","getId","getMeta","idNodeMap","getIds","nodeMetaMap","removeNodeFromMap","childNode","hasNode","node2","meta","oldNode","reset","classMatchesRegex","checkAncestors","eIndex","getDefaultExportFromCjs$1","x2","__esModule","getAugmentedNamespace$1","f2","a2","a22","Reflect","construct","picocolors_browser$1","exports","x$1","create$1","isColorSupported","bold","dim","italic","underline","inverse","hidden","strikethrough","black","red","green","yellow","blue","magenta","cyan","white","gray","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","createColors","picocolors_browserExports$1","require$$2$1","freeze","toStringTag","pico$1","terminalHighlight$1$1","CssSyntaxError$3$1","CssSyntaxError","line","column","source","file","plugin22","super","reason","plugin","endLine","endColumn","setMessage","captureStackTrace","showSourceCode","color","mark","aside","lines","maxWidth","index2","number","gutter","spacing","cssSyntaxError$1","symbols$1","isClean","my","DEFAULT_RAW$1","beforeClose","beforeComment","beforeDecl","beforeOpen","beforeRule","colon","commentLeft","commentRight","emptyBody","indent","semicolon","Stringifier$2$1","builder","atrule","params","rawValue","raws","afterName","nodes","block","between","beforeAfter","detect","raw","buf","depth","last","right","decl","string","important","own","first","root2","rawCache","toUpperCase","walk","rawBeforeClose","rawBeforeComment","walkComments","rawBeforeDecl","walkDecls","rawBeforeOpen","rawBeforeRule","rawColon","rawEmptyBody","rawIndent","parts","rawSemicolon","ownSemicolon","stringifier$1","Stringifier$1$1","stringify$4$1","stringify_1$1","isClean$2$1","my$2$1","CssSyntaxError$2$1","Stringifier2$1","stringify$3$1","cloneNode$1","cloned","Node$4$1","clone","addToError","postcssNode","s2","insertAfter","overrides","insertBefore","cleanRaws","keepBetween","cloneAfter","cloneBefore","rangeBy","getProxyProcessor","toProxy","markDirty","positionBy","stringRepresentation","positionInside","word","indexOf","endIndex","defaultType","remove","replaceWith","bookmark","foundSelf","result2","toJSON","inputs","fixed","emitInputs","inputsNextIndex","inputId","input2","proxyCache","stringifier2","proxyOf","node$1","Node$3$1","Declaration$4$1","variable","declaration$1","nonSecure$1","nanoid","random","customAlphabet","alphabet","defaultSize","SourceMapConsumer","SourceMapConsumer$2$1","SourceMapGenerator","SourceMapGenerator$2$1","existsSync","existsSync$1","readFileSync","readFileSync$1","dirname","dirname$1$1","join$1","PreviousMap$2$1","loadAnnotation","inline","startWith","annotation","loadMap","mapFile","consumer","consumerCache","decodeInline","decodeURIComponent","substr","lastMatch","Buffer","atob","encoding","getAnnotationURL","sourceMapString","isMap","mappings","_mappings","sections","comments","lastIndexOf","loadFile","fromSourceMap","prevPath","withContent","sourcesContent","previousMap$1","SourceMapConsumer$1$1","SourceMapGenerator$1$1","fileURLToPath","fileURLToPath$1","pathToFileURL","pathToFileURL$1$1","isAbsolute","isAbsolute$1","resolve$1$1","nanoid$2","terminalHighlight$2","CssSyntaxError$1$1","PreviousMap$1$1","fromOffsetCache$1","sourceMapAvailable$1$1","pathAvailable$1$1","Input$4$1","hasBOM","mapResolve","offset","fromOffset","col","origin","lastLine","lineToIndex","prevIndex","l2","mid","sourceRoot","fromUrl","originalPositionFor","protocol","sourceContentFor","input$1","registerInput","SourceMapConsumer$3","SourceMapGenerator$3","dirname$2","relative","relative$1","resolve$2","sep","sep$1","pathToFileURL$2","Input$3$1","sourceMapAvailable$2","pathAvailable$2","mapGenerator$1","stringify2","cssString","mapOpts","originalCSS","usesFileUrls","absolute","memoizedFileURLs","memoizedPaths","memoizedURLs","addAnnotation","content","isInline","toBase64","outputFile","eol","applyPrevMaps","previous","toUrl","applySourceMap","clearAnnotation","generate","generateMap","generateString","ignoreInvalidMapping","addMapping","generated","original","isSourcesContent","setSourcesContent","isAnnotation","noSource","mapping","sourcePath","cached","previousMaps","already","toFileUrl","setSourceContent","btoa","unescape","encodeURIComponent","fileURL","encodeURI","Node$2$1","Comment$4$1","comment$1","parse$4$1","Rule$4$1","AtRule$4$1","Root$6$1","isClean$1$1","my$1$1","Declaration$3$1","Comment$3$1","Node$1$1","cleanSource$1","markDirtyUp$1","Container$7$1","Container","children","normalize","each","getIterator","indexes","lastEach","exist","existIndex","reverse","sample","rebuild","prepend","unshift","removeAll","replaceValues","pattern","props","fast","e2","walkAtRules","walkRules","registerParse","dependant","registerRule","registerAtRule","registerRoot","container$1","LazyResult$4$1","Processor$3$1","Container$6$1","Document$3$1","toResult","registerLazyResult","registerProcessor","document$1$1","printed$1","warnOnce$2$1","Warning$2$1","warning$1","Warning$1$1","Result$3$1","processor2","processor","messages","lastPlugin","postcssPlugin","warning2","warnings","result$1","SINGLE_QUOTE$1","DOUBLE_QUOTE$1","BACKSLASH$1","SLASH$1","NEWLINE$1","SPACE$1","FEED$1","TAB$1","CR$1","OPEN_SQUARE$1","CLOSE_SQUARE$1","OPEN_PARENTHESES$1","CLOSE_PARENTHESES$1","OPEN_CURLY$1","CLOSE_CURLY$1","SEMICOLON$1","ASTERISK$1","COLON$1","AT$1","RE_AT_END$1","RE_WORD_END$1","RE_BAD_BRACKET$1","RE_HEX_ESCAPE$1","Container$5$1","AtRule$3$1","atRule$1","LazyResult$3$1","Processor$2$1","Container$4$1","Root$5$1","ignore","root$1","list$2$1","comma","space","separators","array","inQuote","prevQuote","letter","list_1$1","Container$3$1","list$1$1","Rule$3$1","sep2","rule$1","Declaration$2$1","tokenizer2$1","quote","escapePos","currentToken","valueOf","ignoreErrors","buffer","returned","unclosed","what","back","token","endOfFile","nextToken","ignoreUnclosed","controlChar","lastIndex","charAt","position","Comment$2$1","AtRule$2$1","Root$4$1","Rule$2$1","SAFE_COMMENT_NEIGHBOR$1","empty","parser$1","spaces","createTokenizer","unnamedAtrule","brackets","tokenizer","getPosition","spacesAndCommentsFromEnd","spacesAndCommentsFromStart","checkMissedSemicolon","tokens","founded","doubleColon","customProperty","findLastWithPosition$1","unknownWord","firstSpaces","precheckMissedSemicolon","stringFrom","spacesFromEnd","cache","emptyRule","unexpectedClose","endFile","unclosedBlock","freeSemicolon","bracket","unclosedBracket","clean","lastTokenType","Container$2$1","Parser2$1","Input$2$1","parse$3$1","parser2","process","env","NODE_ENV","parse_1$1","isClean$3","my$3","MapGenerator$1$1","stringify$2$1","Container$1$1","Document$2$1","warnOnce$1$1","Result$2$1","parse$2$1","Root$3$1","TYPE_TO_CLASS_NAME$1","PLUGIN_PROPS$1","AtRule","AtRuleExit","Comment","CommentExit","Declaration","DeclarationExit","Document","DocumentExit","Once","OnceExit","prepare","Root","RootExit","Rule","RuleExit","NOT_VISITORS$1","isPromise$1","getEvents$1","toStack$1","eventIndex","visitorIndex","visitors","cleanMarks$1","postcss$2$1","LazyResult$2$1","LazyResult","stringified","processed","syntax","parser","helpers","postcss","processing","runAsync","onRejected","onFinally","getAsyncError","handleError","postcssVersion","pluginVer","runtimeVer","prepareVisitors","hasListener","runOnRoot","visitTick","visitor","roots","subRoot","sync","stringifier","walkSync","visitSync","onFulfilled","visit2","registerPostcss","lazyResult$1","MapGenerator2$1","stringify$1$1","warnOnce2$1","parse$1$1","Result$1$1","NoWorkResult$1$1","_processor","_css","_opts","_map","generatedCSS","generatedMap","_root","noWorkResult$1","NoWorkResult2$1","LazyResult$1$1","Document$1$1","Root$2$1","Processor$1$1","normalized","use","processor$1","Declaration$1$1","PreviousMap2$1","Comment$1$1","AtRule$1$1","Input$1$1","Root$1$1","Rule$1$1","fromJSON$1$1","ownInputs","inputHydrated","fromJSON_1$1","CssSyntaxError2$1","Declaration2$1","LazyResult2$1","Container2$1","Processor2$1","stringify$5","fromJSON$2","Document22","Warning2$1","Comment2$1","AtRule2$1","Result2$1","Input2$1","parse$5","list$3","Rule2$1","Root2$1","Node2$1","postcss$3","postcss$3$1","initializer","warningPrinted","creator","LANG","transformer","processOpts","pluginOpts","fromJSON","atRule","Processor","Warning","Result","Input","postcss_1$1","postcss$1$1","postcss$1$1$1","__defProp22","__publicField22","__defNormalProp22","getDefaultExportFromCjs","getAugmentedNamespace","picocolors_browser","picocolors_browserExports","require$$2","pico","terminalHighlight$1","CssSyntaxError$3","CssSyntaxError2","cssSyntaxError","symbols","DEFAULT_RAW","Stringifier$2","Stringifier$1","stringify$4","stringify_1","isClean$2","my$2","CssSyntaxError$2","Stringifier22","stringify$3","cloneNode","Node$4","Node$3","Declaration$4","declaration","nonSecure","SourceMapConsumer$2","SourceMapGenerator$2","dirname$1","PreviousMap$2","previousMap","SourceMapConsumer$1","SourceMapGenerator$1","pathToFileURL$1","resolve$1","terminalHighlight","CssSyntaxError$1","PreviousMap$1","fromOffsetCache","sourceMapAvailable$1","pathAvailable$1","Input$4","Input$3","sourceMapAvailable","pathAvailable","mapGenerator","Node$2","Comment$4","parse$4","Rule$4","AtRule$4","Root$6","isClean$1","my$1","Declaration$3","Comment$3","Node$1","cleanSource","markDirtyUp","Container$7","Container2","container","LazyResult$4","Processor$3","Container$6","Document$3","document$1","printed","warnOnce$2","Warning$2","warning","Warning$1","Result$3","SINGLE_QUOTE","DOUBLE_QUOTE","BACKSLASH","SLASH","NEWLINE","SPACE","FEED","TAB","CR","OPEN_SQUARE","CLOSE_SQUARE","OPEN_PARENTHESES","CLOSE_PARENTHESES","OPEN_CURLY","CLOSE_CURLY","SEMICOLON","ASTERISK","COLON","AT","RE_AT_END","RE_WORD_END","RE_BAD_BRACKET","RE_HEX_ESCAPE","Container$5","AtRule$3","LazyResult$3","Processor$2","Container$4","Root$5","list$2","list_1","Container$3","list$1","Rule$3","Declaration$2","tokenizer22","Comment$2","AtRule$2","Root$4","Rule$2","SAFE_COMMENT_NEIGHBOR","findLastWithPosition","Container$2","Parser22","Input$2","parse$3","parse_1","MapGenerator$1","stringify$2","Container$1","Document$2","warnOnce$1","Result$2","parse$2","Root$3","TYPE_TO_CLASS_NAME","PLUGIN_PROPS","NOT_VISITORS","isPromise","getEvents","toStack","cleanMarks","postcss$2","LazyResult$2","LazyResult2","lazyResult","MapGenerator22","stringify$1","warnOnce22","parse$1","Result$1","NoWorkResult$1","noWorkResult","NoWorkResult22","LazyResult$1","Document$1","Root$2","Processor$1","Declaration$1","PreviousMap22","Comment$1","AtRule$1","Input$1","Root$1","Rule$1","fromJSON$1","fromJSON_1","CssSyntaxError22","Declaration22","LazyResult22","Container22","Processor22","stringify$6","Document222","Warning22","Comment22","AtRule22","Result22","Input22","Rule22","Root22","Node22","postcss$4","postcss_1","postcss$1","postcss$1$2","BaseRRNode","_args","childNodes2","childIterator","_newChild","_refChild","_node","DEPARTED_MIRROR_ACCESS_WARNING","_mirror","nowTimestamp","closestElementOfNode","getShadowHost","shadowHost","DOCUMENT_FRAGMENT_NODE","getRootShadowHost","rootShadowHost","shadowHostInDom","utils","StyleSheetMirror","stylesheet","styleIDMap","newId","idStyleMap","getStyle","generateId","getBaseDimension","rootIframe","frameElement","defaultView","relativeScale","absoluteScale","frameDimension","getBoundingClientRect","frameBaseDimension","getNestedRule","rules2","rule2","cssRules","getPositionsAndIndex","nestedIndex","positions","hasShadowRoot","hookSetter","isRevoked","inDom","isAncestorRemoved","mirror2","hostEl","isShadowRoot","isBlocked","el","matches","isIgnored","headTitleMutations","isSerialized","isSerializedIframe","nodeName","isSerializedStylesheet","iterateResolveTree","tree","legacy_isTouchEvent","changedTouches","on","capture","passive","wrapped","defineProperties","polyfill","NodeList","DOMTokenList","queueToResolveTrees","queueNodeMap","putIntoMap","nodeInTree","queueNodeTrees","mutation","nextId","parentId","nextInTree","idx","parentInTree","throttle","wait","leading","remaining","trailing","uniqueTextMutations","mutations","idSet","uniqueMutations","chars","lookup","i$1","base64","c2","cleanFrame","NotStarted","Running","Stopped","StackFrame","fileName","functionName","lineNumber","columnNumber","FIREFOX_SAFARI_STACK_REGEXP","CHROME_IE_STACK_REGEXP","SAFARI_NATIVE_CODE_REGEXP","ErrorStackParser","parseOpera","parseV8OrIE","parseFFOrSafari","extractLocation","urlLike","sanitizedLine","locationParts","functionNameRegex","parseOpera9","parseOpera11","parseOpera10","lineRE","parseFloat","pathToSelector","outerHTML","localName","domSiblings","sibling","isObject","isObjTooDeep","stringifyOptions","numOfKeysLimit","depthOfLimit","thisPos","Infinity","_obj","shouldIgnore","stringLengthLimit","Event","eventResult","eventKey","eventValue","HTMLElement","defaultLogOptions","lengthThreshold","initLogObserver","logOptions","loggerType","logCount","inStack","cancelHandlers","trace","stackFrame","unhandledrejectionHandler","levelType","h","_logger","PLUGIN_NAME","NodeType$3","NodeType2","isElement","isNativeShadowDom","shadowRoot2","stringifyStylesheet","rules","sheetHref","ownerNode","stringifiedRules","stringifyRule","cssText","isCSSImportRule","importStringified","styleSheet","statement","layerName","supportsText","media","mediaText","escapeImportStatement","absolutifyURLs","ruleStringified","isCSSStyleRule","selectorText","cssStringified","fixSafariColons","maskInputValue","maskInputOptions","actualType","repeat","ORIGINAL_ATTRIBUTE_NAME","extractFileExtension","baseURL","pathname","URL_IN_CSS_REF","URL_PROTOCOL_MATCH","URL_WWW_MATCH","DATA_URI","quote1","path1","quote2","path2","path3","filePath","maybeQuote","extractOrigin","part","normalizeCssString","_testNoPxNorm","markCssSplits","style","splits","iterCount","cssTextNorm","normFactor","textContentNorm","jLimit","startSubstring","cssNormSplits","splitNorm","prevTextContent","prevMinLength","normPart","splitCssText","_DEFAULT_BLOCKED_ELEMENT_BACKGROUND_COLOR","_id","tagNameRegex","genId","canvasService","canvasCtx","SRCSET_NOT_SPACES","SRCSET_COMMAS_OR_SPACES","cachedDocument","absoluteToDoc","attributeValue","getHref","isSVGElement","ownerSVGElement","customHref","setAttribute","transformAttribute","collectCharacters","regEx","chars2","output","descriptorsStr","inParens","getAbsoluteSrcsetString","ignoreAttribute","needMaskingText","serializeNode","needsMask","dataURLOptions","inlineImages","keepIframeSrcFn","newlyAddedElement","cssCaptured","rootId","docId","getRootId","compatMode","DOCUMENT_TYPE_NODE","DocumentType","publicId","systemId","needBlock","_isBlockedElement","HTMLFormElement","processedTagName","getValidTagName$1","find","rel","_cssText","sheet","checked","selected","rr_open_mode","__context","canvas","ctx","getContext","getImageData","originalGetImageData","pixel","is2DCanvasBlank","rr_dataURL","toDataURL","quality","canvasDataURL","blankCanvas","image","imageSrc","currentSrc","priorCrossOrigin","crossOrigin","recordInlineImage","naturalWidth","naturalHeight","drawImage","removeAttribute","mediaAttributes","rr_mediaState","paused","rr_mediaCurrentTime","currentTime","rr_mediaPlaybackRate","playbackRate","rr_mediaMuted","muted","rr_mediaLoop","loop","rr_mediaVolume","volume","rr_scrollLeft","rr_scrollTop","class","rr_width","rr_height","rr_background_color","src","contentDocument","rr_src","isCustomElement","customElements","isSVG","isCustom","serializeElementNode","TEXT_NODE","parentTagName","textContent2","isStyle","isScript","Text","serializeTextNode","CDATA_SECTION_NODE","CDATA","COMMENT_NODE","lowerIfExists","maybeAttr","serializeNodeWithId","skipChild","onSerialize","onIframeLoad","iframeLoadTimeout","onStylesheetLoad","stylesheetLoadTimeout","preserveWhiteSpace","_serializedNode","sn","as","headFavicon","headMetaDescKeywords","headMetaSocial","property","headMetaRobots","headMetaHttpEquiv","headMetaAuthorship","headMetaVerification","slimDOMExcluded","serializedNode","recordChild","shadowRootEl","isShadowHost","headWhitespace","bypassOptions","childN","serializedChildNode","isShadow","readyState","fired","timer","blankUrl","onceIframeLoaded","iframeDoc","serializedIframeNode","link","styleSheetLoadTimeout","styleSheetLoaded","onceStylesheetLoaded","serializedLinkNode","mutationObserverCtor","IncrementalSource","IncrementalSource2","PointerTypes","PointerTypes2","CanvasContext","CanvasContext2","MediaInteractions","MediaInteractions2","NodeType","isNodeInLinkedList","DoubleLinkedList","addNode","__ln","previousSibling","tail","removeNode","moveKey","MutationBuffer","processMutation","frozen","locked","adds","addedIds","addList","getNextId","ns","pushAdd","parentTag","addedSet","currentN","iframeManager","addIframe","stylesheetManager","trackLinkElement","shadowDomManager","addShadowRoot","iframe","childSn","attachIframe","observeAttachShadow","attachLinkElement","mapRemoves","movedSet","isParentRemoved","removesSubTreeCache","isAncestorInSet","droppedSet","tailNode","unhandledNode","texts","genTextAreaValueMutation","attribute","diffAsStr","styleDiff","unchangedAsStr","_unchangedStyles","removes","attributeMap","movedMap","mutationCb","textarea","item","cn","oldValue","attributeName","unattachedDoc","implementation","createHTMLDocument","old","pname","getPropertyValue","newPriority","getPropertyPriority","addedNodes","genAdds","removedNodes","nodeId","deepDelete","n22","processRemoves","processedNodeManager","inOtherBuffer","targetId","canvasManager","unfreeze","isFrozen","lock","unlock","addsSet","_isParentRemoved","_isAncestorInSet","callbackWrapper","rest","externalFunctionWrapper","mutationBuffers","getEventTarget","composedPath","initMutationObserver","rootEl","mutationBuffer","processMutations","observe","attributeOldValue","characterData","characterDataOldValue","childList","subtree","initMouseInteractionObserver","mouseInteractionCb","sampling","disableMap","handlers","currentPointerType","endsWith","handler","pointerType","thisEventKey","Mouse","Touch","Pen","MouseDown","MouseUp","clientX","clientY","getHandler","PointerEvent","TouchStart","TouchEnd","initScrollObserver","scrollCb","updatePosition","scrollLeftTop","INPUT_TAGS","lastInputValueMap","getNestedCSSRulePositions","childRule","hasNestedCSSRule","parentRule","CSSGroupingRule","CSSMediaRule","CSSSupportsRule","CSSConditionRule","parentStyleSheet","recurse","getIdAndStyleId","styleMirror","styleId","initAdoptedStyleSheetObserver","host2","hostId","patchTarget","originalPropertyDescriptor","_a3","sheets","adoptStyleSheets","initObservers","o2","currentWindow","mousemoveCb","viewportResizeCb","inputCb","mediaInteractionCb","styleSheetRuleCb","styleDeclarationCb","canvasMutationCb","fontCb","selectionCb","customElementCb","mousemove","viewportResize","mediaInteaction","styleSheetRule","styleDeclaration","canvasMutation","font","selection","customElement","mergeHooks","recordDOM","mousemoveHandler","callbackThreshold","mousemoveCallback","timeBaseline","wrappedCb","totalOffset","timeOffset","DragEvent","Drag","MouseEvent","MouseMove","TouchMove","initMoveObserver","mouseInteractionHandler","scrollHandler","viewportResizeHandler","lastH","lastW","initViewportResizeObserver","inputHandler","ignoreClass","ignoreSelector","userTriggeredOnInput","eventHandler","userTriggered","isTrusted","isChecked","cbWithDedup","text2","v2","lastInputValue","propertyDescriptor","HTMLInputElement","hookProperties","HTMLSelectElement","HTMLTextAreaElement","HTMLOptionElement","initInputObserver","mediaInteractionHandler","Play","Pause","Seeked","VolumeChange","RateChange","initMediaInteractionObserver","styleSheetObserver","adoptedStyleSheetObserver","styleDeclarationObserver","fontObserver","CSSStyleSheet","insertRule","argumentsList","addRule","styleBlock","deleteRule","replaceSync","removeRule","supportedNestedCSSRuleTypes","canMonkeyPatchNestedCSSRule","unmodifiedFunctions","typeKey","initStyleSheetObserver","ignoreCSSAttributes","setProperty","CSSStyleDeclaration","priority","removeProperty","initStyleDeclarationObserver","collectFonts","fontMap","originalFontFace","FontFace","family","descriptors","fontFace","fontSource","restoreHandler","fonts","initFontObserver","selectionObserver","param","collapsed","updateSelection","getSelection","isCollapsed","ranges","rangeCount","getRangeAt","startContainer","startOffset","endContainer","endOffset","initSelectionObserver","customElementObserver","define","initCustomElementObserver","pluginHandlers","plugin3","disconnect","CrossOriginIframeMirror","generateIdFn","remoteId","idToRemoteMap","remoteToIdMap","idToRemoteIdMap","getIdToRemoteIdMap","remoteIdToIdMap","getRemoteIdToIdMap","getRemoteId","getRemoteIds","ids","iframeIdToRemoteIdMap","iframeRemoteIdToIdMap","IframeManager","wrappedEmit","recordCrossOriginIframes","crossOriginIframeStyleMirror","handleMessage","iframes","crossOriginIframeMap","addLoadListener","loadListener","isAttachIframe","adoptedStyleSheets","crossOriginMessageEvent","transformedEvent","transformCrossOriginEvent","isCheckout","FullSnapshot","crossOriginIframeMirror","replaceIdOnNode","crossOriginIframeRootIdMap","patchRootIdOnNode","IncrementalSnapshot","Mutation","Load","DomContentLoaded","Plugin","Custom","replaceIds","ViewportResize","MediaInteraction","MouseInteraction","Scroll","CanvasMutation","StyleSheetRule","StyleDeclaration","replaceStyleIds","Font","Selection","AdoptedStyleSheet","styles","iframeMirror","ShadowDomManager","WeakSet","patchAttachShadow","shadowDoms","restoreHandlers","iframeElement","option","sRoot","canvasVarMap","saveWebGLVar","isInstanceOfWebGLObject","list2","ctor","contextMap","variableListFor$1","serializeArg","arg","Float32Array","Float64Array","Int32Array","Int16Array","Int8Array","Uint8ClampedArray","rr_type","ArrayBuffer","arraybuffer","bytes","DataView","byteOffset","byteLength","HTMLImageElement","HTMLCanvasElement","ImageData","serializeArgs","supportedWebGLConstructorNames","initCanvasContextObserver","setPreserveDrawingBufferToTrue","contextType","ctxName","getNormalizedContextName","contextAttributes","preserveDrawingBuffer","patchGLPrototype","getOwnPropertyNames","recordArgs","hookHandler","setter","encodedJs","blob","decodeBase64","WorkerWrapper","objURL","webkitURL","revokeObjectURL","CanvasManager","latestId","invokeId","rafStamps","pendingCanvasMutations","initCanvasMutationObserver","initCanvasFPSObserver","clear","resetObservers","fps","canvasContextReset","snapshotInProgressMap","commands","timeBetweenSnapshots","rafId","lastSnapshotTime","takeCanvasSnapshots","matchedCanvas","getCanvas","getContextAttributes","COLOR_BUFFER_BIT","bitmap","createImageBitmap","requestAnimationFrame","cancelAnimationFrame","startRAFTimestamping","startPendingCanvasMutationFlusher","canvas2DReset","props2D","CanvasRenderingContext2D","initCanvas2DMutationObserver","canvasWebGL1and2Reset","WebGLRenderingContext","WebGL","WebGL2RenderingContext","WebGL2","initCanvasWebGLMutationObserver","flushPendingCanvasMutations","setLatestRAFTimestamp","_values","flushPendingCanvasMutationFor","valuesWithType","type2","StylesheetManager","adoptedStyleSheetCb","linkEl","trackedLinkElements","trackStylesheetInLinkElement","adoptedStyleSheetData","styleIds","CSSRule","r2","_linkEl","ProcessedNodeManager","thisBuffer","buffers","nodeMap","active","destroy","takeFullSnapshot$1","recording","checkoutEveryNms","checkoutEveryNth","_maskInputOptions","_slimDOMOptions","packFn","mousemoveWait","recordAfter","errorHandler2","inEmittingFrame","passEmitsToParent","date","email","month","search","tel","week","password","lastFullSnapshotEvent","polyfill$1","incrementalSnapshotCount","eventProcessor","exceedCount","exceedTime","wrappedMutationEmit","wrappedScrollEmit","wrappedCanvasMutationEmit","getMirror","nodeMirror","slimDOM","snapshot","initialOffset","CustomElement","tag","freezePage","takeFullSnapshot","fetchObserver","eventCallback","observeFetch","notifyEvent","originalFetch","startTime","requestEvent","headers_1","endTime","requestHeaders","duration","responseHeaders"],"mappings":"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"}