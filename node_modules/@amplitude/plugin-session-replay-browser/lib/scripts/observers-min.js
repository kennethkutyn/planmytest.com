import{_ as t,a as e,g as n}from"./index-min.js";var r=function(){function r(){this.fetchObserver=null}return r.prototype.start=function(t){this.eventCallback=t,this.observeFetch()},r.prototype.stop=function(){var t;null===(t=this.fetchObserver)||void 0===t||t.call(this),this.fetchObserver=null,this.eventCallback=void 0},r.prototype.notifyEvent=function(t){var e;null===(e=this.eventCallback)||void 0===e||e.call(this,t)},r.prototype.observeFetch=function(){var r=this,o=n();if(o){var s=o.fetch;s&&(o.fetch=function(n,o){return t(r,void 0,void 0,(function(){var t,r,i,a,c,h,u;return e(this,(function(e){switch(e.label){case 0:t=Date.now(),r={timestamp:t,type:"fetch",method:(null==o?void 0:o.method)||"GET",url:n.toString(),requestHeaders:null==o?void 0:o.headers},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,s(n,o)];case 2:return i=e.sent(),h=Date.now(),r.status=i.status,r.duration=h-t,a={},i.headers.forEach((function(t,e){a[e]=t})),r.responseHeaders=a,this.notifyEvent(r),[2,i];case 3:throw c=e.sent(),h=Date.now(),r.duration=h-t,u=c,r.error={name:u.name||"UnknownError",message:u.message||"An unknown error occurred"},this.notifyEvent(r),c;case 4:return[2]}}))}))},this.fetchObserver=function(){o.fetch=s})}},r}();export{r as NetworkObservers};
//# sourceMappingURL=observers-min.js.map
